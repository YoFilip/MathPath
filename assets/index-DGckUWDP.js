var oj=Object.defineProperty;var ij=(t,e,n)=>e in t?oj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a0=(t,e,n)=>ij(t,typeof e!="symbol"?e+"":e,n);function nR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aj(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var i4={exports:{}},l0={},a4={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function lj(){if(jT)return fn;jT=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function p(q){return q===null||typeof q!="object"?null:(q=h&&q[h]||q["@@iterator"],typeof q=="function"?q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function w(q,le,be){this.props=q,this.context=le,this.refs=x,this.updater=be||m}w.prototype.isReactComponent={},w.prototype.setState=function(q,le){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,le,"setState")},w.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function k(){}k.prototype=w.prototype;function S(q,le,be){this.props=q,this.context=le,this.refs=x,this.updater=be||m}var $=S.prototype=new k;$.constructor=S,g($,w.prototype),$.isPureReactComponent=!0;var T=Array.isArray,E=Object.prototype.hasOwnProperty,F={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function j(q,le,be){var pe,de={},we=null,Ne=null;if(le!=null)for(pe in le.ref!==void 0&&(Ne=le.ref),le.key!==void 0&&(we=""+le.key),le)E.call(le,pe)&&!V.hasOwnProperty(pe)&&(de[pe]=le[pe]);var Te=arguments.length-2;if(Te===1)de.children=be;else if(1<Te){for(var Ee=Array(Te),We=0;We<Te;We++)Ee[We]=arguments[We+2];de.children=Ee}if(q&&q.defaultProps)for(pe in Te=q.defaultProps,Te)de[pe]===void 0&&(de[pe]=Te[pe]);return{$$typeof:t,type:q,key:we,ref:Ne,props:de,_owner:F.current}}function W(q,le){return{$$typeof:t,type:q.type,key:le,ref:q.ref,props:q.props,_owner:q._owner}}function R(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function O(q){var le={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(be){return le[be]})}var U=/\/+/g;function K(q,le){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):le.toString(36)}function G(q,le,be,pe,de){var we=typeof q;(we==="undefined"||we==="boolean")&&(q=null);var Ne=!1;if(q===null)Ne=!0;else switch(we){case"string":case"number":Ne=!0;break;case"object":switch(q.$$typeof){case t:case e:Ne=!0}}if(Ne)return Ne=q,de=de(Ne),q=pe===""?"."+K(Ne,0):pe,T(de)?(be="",q!=null&&(be=q.replace(U,"$&/")+"/"),G(de,le,be,"",function(We){return We})):de!=null&&(R(de)&&(de=W(de,be+(!de.key||Ne&&Ne.key===de.key?"":(""+de.key).replace(U,"$&/")+"/")+q)),le.push(de)),1;if(Ne=0,pe=pe===""?".":pe+":",T(q))for(var Te=0;Te<q.length;Te++){we=q[Te];var Ee=pe+K(we,Te);Ne+=G(we,le,be,Ee,de)}else if(Ee=p(q),typeof Ee=="function")for(q=Ee.call(q),Te=0;!(we=q.next()).done;)we=we.value,Ee=pe+K(we,Te++),Ne+=G(we,le,be,Ee,de);else if(we==="object")throw le=String(q),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.");return Ne}function Y(q,le,be){if(q==null)return q;var pe=[],de=0;return G(q,pe,"","",function(we){return le.call(be,we,de++)}),pe}function Z(q){if(q._status===-1){var le=q._result;le=le(),le.then(function(be){(q._status===0||q._status===-1)&&(q._status=1,q._result=be)},function(be){(q._status===0||q._status===-1)&&(q._status=2,q._result=be)}),q._status===-1&&(q._status=0,q._result=le)}if(q._status===1)return q._result.default;throw q._result}var ne={current:null},J={transition:null},re={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:J,ReactCurrentOwner:F};function se(){throw Error("act(...) is not supported in production builds of React.")}return fn.Children={map:Y,forEach:function(q,le,be){Y(q,function(){le.apply(this,arguments)},be)},count:function(q){var le=0;return Y(q,function(){le++}),le},toArray:function(q){return Y(q,function(le){return le})||[]},only:function(q){if(!R(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},fn.Component=w,fn.Fragment=n,fn.Profiler=s,fn.PureComponent=S,fn.StrictMode=r,fn.Suspense=l,fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,fn.act=se,fn.cloneElement=function(q,le,be){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var pe=g({},q.props),de=q.key,we=q.ref,Ne=q._owner;if(le!=null){if(le.ref!==void 0&&(we=le.ref,Ne=F.current),le.key!==void 0&&(de=""+le.key),q.type&&q.type.defaultProps)var Te=q.type.defaultProps;for(Ee in le)E.call(le,Ee)&&!V.hasOwnProperty(Ee)&&(pe[Ee]=le[Ee]===void 0&&Te!==void 0?Te[Ee]:le[Ee])}var Ee=arguments.length-2;if(Ee===1)pe.children=be;else if(1<Ee){Te=Array(Ee);for(var We=0;We<Ee;We++)Te[We]=arguments[We+2];pe.children=Te}return{$$typeof:t,type:q.type,key:de,ref:we,props:pe,_owner:Ne}},fn.createContext=function(q){return q={$$typeof:i,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:o,_context:q},q.Consumer=q},fn.createElement=j,fn.createFactory=function(q){var le=j.bind(null,q);return le.type=q,le},fn.createRef=function(){return{current:null}},fn.forwardRef=function(q){return{$$typeof:a,render:q}},fn.isValidElement=R,fn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:Z}},fn.memo=function(q,le){return{$$typeof:c,type:q,compare:le===void 0?null:le}},fn.startTransition=function(q){var le=J.transition;J.transition={};try{q()}finally{J.transition=le}},fn.unstable_act=se,fn.useCallback=function(q,le){return ne.current.useCallback(q,le)},fn.useContext=function(q){return ne.current.useContext(q)},fn.useDebugValue=function(){},fn.useDeferredValue=function(q){return ne.current.useDeferredValue(q)},fn.useEffect=function(q,le){return ne.current.useEffect(q,le)},fn.useId=function(){return ne.current.useId()},fn.useImperativeHandle=function(q,le,be){return ne.current.useImperativeHandle(q,le,be)},fn.useInsertionEffect=function(q,le){return ne.current.useInsertionEffect(q,le)},fn.useLayoutEffect=function(q,le){return ne.current.useLayoutEffect(q,le)},fn.useMemo=function(q,le){return ne.current.useMemo(q,le)},fn.useReducer=function(q,le,be){return ne.current.useReducer(q,le,be)},fn.useRef=function(q){return ne.current.useRef(q)},fn.useState=function(q){return ne.current.useState(q)},fn.useSyncExternalStore=function(q,le,be){return ne.current.useSyncExternalStore(q,le,be)},fn.useTransition=function(){return ne.current.useTransition()},fn.version="18.3.1",fn}var WT;function Dx(){return WT||(WT=1,a4.exports=lj()),a4.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function cj(){if(UT)return l0;UT=1;var t=Dx(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(a,l,c){var u,h={},p=null,m=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)r.call(l,u)&&!o.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:p,ref:m,props:h,_owner:s.current}}return l0.Fragment=n,l0.jsx=i,l0.jsxs=i,l0}var HT;function uj(){return HT||(HT=1,i4.exports=cj()),i4.exports}var z=uj(),D=Dx();const fr=Im(D),Cb=nR({__proto__:null,default:fr},[D]);var xy={},l4={exports:{}},Lo={},c4={exports:{}},u4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function dj(){return GT||(GT=1,function(t){function e(J,re){var se=J.length;J.push(re);e:for(;0<se;){var q=se-1>>>1,le=J[q];if(0<s(le,re))J[q]=re,J[se]=le,se=q;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var re=J[0],se=J.pop();if(se!==re){J[0]=se;e:for(var q=0,le=J.length,be=le>>>1;q<be;){var pe=2*(q+1)-1,de=J[pe],we=pe+1,Ne=J[we];if(0>s(de,se))we<le&&0>s(Ne,de)?(J[q]=Ne,J[we]=se,q=we):(J[q]=de,J[pe]=se,q=pe);else if(we<le&&0>s(Ne,se))J[q]=Ne,J[we]=se,q=we;else break e}}return re}function s(J,re){var se=J.sortIndex-re.sortIndex;return se!==0?se:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(J){for(var re=n(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=J)r(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=n(c)}}function T(J){if(x=!1,$(J),!g)if(n(l)!==null)g=!0,Z(E);else{var re=n(c);re!==null&&ne(T,re.startTime-J)}}function E(J,re){g=!1,x&&(x=!1,k(j),j=-1),m=!0;var se=p;try{for($(re),h=n(l);h!==null&&(!(h.expirationTime>re)||J&&!O());){var q=h.callback;if(typeof q=="function"){h.callback=null,p=h.priorityLevel;var le=q(h.expirationTime<=re);re=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&r(l),$(re)}else r(l);h=n(l)}if(h!==null)var be=!0;else{var pe=n(c);pe!==null&&ne(T,pe.startTime-re),be=!1}return be}finally{h=null,p=se,m=!1}}var F=!1,V=null,j=-1,W=5,R=-1;function O(){return!(t.unstable_now()-R<W)}function U(){if(V!==null){var J=t.unstable_now();R=J;var re=!0;try{re=V(!0,J)}finally{re?K():(F=!1,V=null)}}else F=!1}var K;if(typeof S=="function")K=function(){S(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=U,K=function(){Y.postMessage(null)}}else K=function(){w(U,0)};function Z(J){V=J,F||(F=!0,K())}function ne(J,re){j=w(function(){J(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,Z(E))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var se=p;p=re;try{return J()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var se=p;p=J;try{return re()}finally{p=se}},t.unstable_scheduleCallback=function(J,re,se){var q=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?q+se:q):se=q,J){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=se+le,J={id:u++,callback:re,priorityLevel:J,startTime:se,expirationTime:le,sortIndex:-1},se>q?(J.sortIndex=se,e(c,J),n(l)===null&&J===n(c)&&(x?(k(j),j=-1):x=!0,ne(T,se-q))):(J.sortIndex=le,e(l,J),g||m||(g=!0,Z(E))),J},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(J){var re=p;return function(){var se=p;p=re;try{return J.apply(this,arguments)}finally{p=se}}}}(u4)),u4}var qT;function hj(){return qT||(qT=1,c4.exports=dj()),c4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function fj(){if(KT)return Lo;KT=1;var t=Dx(),e=hj();function n(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(d,f){i(d,f),i(d+"Capture",f)}function i(d,f){for(s[d]=f,d=0;d<f.length;d++)r.add(f[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function p(d){return l.call(h,d)?!0:l.call(u,d)?!1:c.test(d)?h[d]=!0:(u[d]=!0,!1)}function m(d,f,v,I){if(v!==null&&v.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return I?!1:v!==null?!v.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function g(d,f,v,I){if(f===null||typeof f>"u"||m(d,f,v,I))return!0;if(I)return!1;if(v!==null)switch(v.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function x(d,f,v,I,A,L,Q){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=I,this.attributeNamespace=A,this.mustUseProperty=v,this.propertyName=d,this.type=f,this.sanitizeURL=L,this.removeEmptyString=Q}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){w[d]=new x(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var f=d[0];w[f]=new x(f,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){w[d]=new x(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){w[d]=new x(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){w[d]=new x(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){w[d]=new x(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){w[d]=new x(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){w[d]=new x(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){w[d]=new x(d,5,!1,d.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function S(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var f=d.replace(k,S);w[f]=new x(f,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var f=d.replace(k,S);w[f]=new x(f,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var f=d.replace(k,S);w[f]=new x(f,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){w[d]=new x(d,1,!1,d.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){w[d]=new x(d,1,!1,d.toLowerCase(),null,!0,!0)});function $(d,f,v,I){var A=w.hasOwnProperty(f)?w[f]:null;(A!==null?A.type!==0:I||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(g(f,v,A,I)&&(v=null),I||A===null?p(f)&&(v===null?d.removeAttribute(f):d.setAttribute(f,""+v)):A.mustUseProperty?d[A.propertyName]=v===null?A.type===3?!1:"":v:(f=A.attributeName,I=A.attributeNamespace,v===null?d.removeAttribute(f):(A=A.type,v=A===3||A===4&&v===!0?"":""+v,I?d.setAttributeNS(I,f,v):d.setAttribute(f,v))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),F=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),J=Symbol.iterator;function re(d){return d===null||typeof d!="object"?null:(d=J&&d[J]||d["@@iterator"],typeof d=="function"?d:null)}var se=Object.assign,q;function le(d){if(q===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);q=f&&f[1]||""}return`
`+q+d}var be=!1;function pe(d,f){if(!d||be)return"";be=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Le){var I=Le}Reflect.construct(d,[],f)}else{try{f.call()}catch(Le){I=Le}d.call(f.prototype)}else{try{throw Error()}catch(Le){I=Le}d()}}catch(Le){if(Le&&I&&typeof Le.stack=="string"){for(var A=Le.stack.split(`
`),L=I.stack.split(`
`),Q=A.length-1,ue=L.length-1;1<=Q&&0<=ue&&A[Q]!==L[ue];)ue--;for(;1<=Q&&0<=ue;Q--,ue--)if(A[Q]!==L[ue]){if(Q!==1||ue!==1)do if(Q--,ue--,0>ue||A[Q]!==L[ue]){var me=`
`+A[Q].replace(" at new "," at ");return d.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",d.displayName)),me}while(1<=Q&&0<=ue);break}}}finally{be=!1,Error.prepareStackTrace=v}return(d=d?d.displayName||d.name:"")?le(d):""}function de(d){switch(d.tag){case 5:return le(d.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return d=pe(d.type,!1),d;case 11:return d=pe(d.type.render,!1),d;case 1:return d=pe(d.type,!0),d;default:return""}}function we(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case V:return"Fragment";case F:return"Portal";case W:return"Profiler";case j:return"StrictMode";case K:return"Suspense";case G:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case O:return(d.displayName||"Context")+".Consumer";case R:return(d._context.displayName||"Context")+".Provider";case U:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Y:return f=d.displayName||null,f!==null?f:we(d.type)||"Memo";case Z:f=d._payload,d=d._init;try{return we(d(f))}catch{}}return null}function Ne(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(f);case 8:return f===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Te(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ee(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function We(d){var f=Ee(d)?"checked":"value",v=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),I=""+d[f];if(!d.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,L=v.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return A.call(this)},set:function(Q){I=""+Q,L.call(this,Q)}}),Object.defineProperty(d,f,{enumerable:v.enumerable}),{getValue:function(){return I},setValue:function(Q){I=""+Q},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Xe(d){d._valueTracker||(d._valueTracker=We(d))}function Ge(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var v=f.getValue(),I="";return d&&(I=Ee(d)?d.checked?"true":"false":d.value),d=I,d!==v?(f.setValue(d),!0):!1}function mt(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function ft(d,f){var v=f.checked;return se({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??d._wrapperState.initialChecked})}function ct(d,f){var v=f.defaultValue==null?"":f.defaultValue,I=f.checked!=null?f.checked:f.defaultChecked;v=Te(f.value!=null?f.value:v),d._wrapperState={initialChecked:I,initialValue:v,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Ze(d,f){f=f.checked,f!=null&&$(d,"checked",f,!1)}function rt(d,f){Ze(d,f);var v=Te(f.value),I=f.type;if(v!=null)I==="number"?(v===0&&d.value===""||d.value!=v)&&(d.value=""+v):d.value!==""+v&&(d.value=""+v);else if(I==="submit"||I==="reset"){d.removeAttribute("value");return}f.hasOwnProperty("value")?at(d,f.type,v):f.hasOwnProperty("defaultValue")&&at(d,f.type,Te(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(d.defaultChecked=!!f.defaultChecked)}function Ke(d,f,v){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var I=f.type;if(!(I!=="submit"&&I!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+d._wrapperState.initialValue,v||f===d.value||(d.value=f),d.defaultValue=f}v=d.name,v!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,v!==""&&(d.name=v)}function at(d,f,v){(f!=="number"||mt(d.ownerDocument)!==d)&&(v==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+v&&(d.defaultValue=""+v))}var ut=Array.isArray;function kt(d,f,v,I){if(d=d.options,f){f={};for(var A=0;A<v.length;A++)f["$"+v[A]]=!0;for(v=0;v<d.length;v++)A=f.hasOwnProperty("$"+d[v].value),d[v].selected!==A&&(d[v].selected=A),A&&I&&(d[v].defaultSelected=!0)}else{for(v=""+Te(v),f=null,A=0;A<d.length;A++){if(d[A].value===v){d[A].selected=!0,I&&(d[A].defaultSelected=!0);return}f!==null||d[A].disabled||(f=d[A])}f!==null&&(f.selected=!0)}}function Qe(d,f){if(f.dangerouslySetInnerHTML!=null)throw Error(n(91));return se({},f,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function qt(d,f){var v=f.value;if(v==null){if(v=f.children,f=f.defaultValue,v!=null){if(f!=null)throw Error(n(92));if(ut(v)){if(1<v.length)throw Error(n(93));v=v[0]}f=v}f==null&&(f=""),v=f}d._wrapperState={initialValue:Te(v)}}function Wt(d,f){var v=Te(f.value),I=Te(f.defaultValue);v!=null&&(v=""+v,v!==d.value&&(d.value=v),f.defaultValue==null&&d.defaultValue!==v&&(d.defaultValue=v)),I!=null&&(d.defaultValue=""+I)}function en(d){var f=d.textContent;f===d._wrapperState.initialValue&&f!==""&&f!==null&&(d.value=f)}function yn(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mn(d,f){return d==null||d==="http://www.w3.org/1999/xhtml"?yn(f):d==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Kt,At=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,v,I,A){MSApp.execUnsafeLocalFunction(function(){return d(f,v,I,A)})}:d}(function(d,f){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=f;else{for(Kt=Kt||document.createElement("div"),Kt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Kt.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;f.firstChild;)d.appendChild(f.firstChild)}});function bn(d,f){if(f){var v=d.firstChild;if(v&&v===d.lastChild&&v.nodeType===3){v.nodeValue=f;return}}d.textContent=f}var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Er=["Webkit","ms","Moz","O"];Object.keys(Gt).forEach(function(d){Er.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1),Gt[f]=Gt[d]})});function yr(d,f,v){return f==null||typeof f=="boolean"||f===""?"":v||typeof f!="number"||f===0||Gt.hasOwnProperty(d)&&Gt[d]?(""+f).trim():f+"px"}function tn(d,f){d=d.style;for(var v in f)if(f.hasOwnProperty(v)){var I=v.indexOf("--")===0,A=yr(v,f[v],I);v==="float"&&(v="cssFloat"),I?d.setProperty(v,A):d[v]=A}}var Fe=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qt(d,f){if(f){if(Fe[d]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(n(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(n(61))}if(f.style!=null&&typeof f.style!="object")throw Error(n(62))}}function zn(d,f){if(d.indexOf("-")===-1)return typeof f.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ls=null;function ls(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var cs=null,us=null,wo=null;function wi(d){if(d=Ic(d)){if(typeof cs!="function")throw Error(n(280));var f=d.stateNode;f&&(f=_p(f),cs(d.stateNode,d.type,f))}}function Rr(d){us?wo?wo.push(d):wo=[d]:us=d}function Is(){if(us){var d=us,f=wo;if(wo=us=null,wi(d),f)for(d=0;d<f.length;d++)wi(f[d])}}function no(d,f){return d(f)}function Yo(){}var Ra=!1;function wl(d,f,v){if(Ra)return d(f,v);Ra=!0;try{return no(d,f,v)}finally{Ra=!1,(us!==null||wo!==null)&&(Yo(),Is())}}function Mo(d,f){var v=d.stateNode;if(v===null)return null;var I=_p(v);if(I===null)return null;v=I[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(d=d.type,I=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!I;break e;default:d=!1}if(d)return null;if(v&&typeof v!="function")throw Error(n(231,f,typeof v));return v}var ta=!1;if(a)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){ta=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{ta=!1}function Wn(d,f,v,I,A,L,Q,ue,me){var Le=Array.prototype.slice.call(arguments,3);try{f.apply(v,Le)}catch(tt){this.onError(tt)}}var M=!1,_=null,qe=!1,X=null,ce={onError:function(d){M=!0,_=d}};function Ut(d,f,v,I,A,L,Q,ue,me){M=!1,_=null,Wn.apply(ce,arguments)}function dt(d,f,v,I,A,L,Q,ue,me){if(Ut.apply(this,arguments),M){if(M){var Le=_;M=!1,_=null}else throw Error(n(198));qe||(qe=!0,X=Le)}}function _e(d){var f=d,v=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,f.flags&4098&&(v=f.return),d=f.return;while(d)}return f.tag===3?v:null}function je(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function He(d){if(_e(d)!==d)throw Error(n(188))}function Ct(d){var f=d.alternate;if(!f){if(f=_e(d),f===null)throw Error(n(188));return f!==d?null:d}for(var v=d,I=f;;){var A=v.return;if(A===null)break;var L=A.alternate;if(L===null){if(I=A.return,I!==null){v=I;continue}break}if(A.child===L.child){for(L=A.child;L;){if(L===v)return He(A),d;if(L===I)return He(A),f;L=L.sibling}throw Error(n(188))}if(v.return!==I.return)v=A,I=L;else{for(var Q=!1,ue=A.child;ue;){if(ue===v){Q=!0,v=A,I=L;break}if(ue===I){Q=!0,I=A,v=L;break}ue=ue.sibling}if(!Q){for(ue=L.child;ue;){if(ue===v){Q=!0,v=L,I=A;break}if(ue===I){Q=!0,I=L,v=A;break}ue=ue.sibling}if(!Q)throw Error(n(189))}}if(v.alternate!==I)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?d:f}function Mt(d){return d=Ct(d),d!==null?Ln(d):null}function Ln(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=Ln(d);if(f!==null)return f;d=d.sibling}return null}var ae=e.unstable_scheduleCallback,br=e.unstable_cancelCallback,ye=e.unstable_shouldYield,hp=e.unstable_requestPaint,ar=e.unstable_now,Tu=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Ot=e.unstable_UserBlockingPriority,ki=e.unstable_NormalPriority,na=e.unstable_LowPriority,cn=e.unstable_IdlePriority,_s=null,xr=null;function ds(d){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(_s,d,void 0,(d.current.flags&128)===128)}catch{}}var ko=Math.clz32?Math.clz32:Kv,Gv=Math.log,qv=Math.LN2;function Kv(d){return d>>>=0,d===0?32:31-(Gv(d)/qv|0)|0}var Zd=64,gc=4194304;function Qr(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Iu(d,f){var v=d.pendingLanes;if(v===0)return 0;var I=0,A=d.suspendedLanes,L=d.pingedLanes,Q=v&268435455;if(Q!==0){var ue=Q&~A;ue!==0?I=Qr(ue):(L&=Q,L!==0&&(I=Qr(L)))}else Q=v&~A,Q!==0?I=Qr(Q):L!==0&&(I=Qr(L));if(I===0)return 0;if(f!==0&&f!==I&&!(f&A)&&(A=I&-I,L=f&-f,A>=L||A===16&&(L&4194240)!==0))return f;if(I&4&&(I|=v&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=I;0<f;)v=31-ko(f),A=1<<v,I|=d[v],f&=~A;return I}function Xv(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yv(d,f){for(var v=d.suspendedLanes,I=d.pingedLanes,A=d.expirationTimes,L=d.pendingLanes;0<L;){var Q=31-ko(L),ue=1<<Q,me=A[Q];me===-1?(!(ue&v)||ue&I)&&(A[Q]=Xv(ue,f)):me<=f&&(d.expiredLanes|=ue),L&=~ue}}function Qd(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function d1(){var d=Zd;return Zd<<=1,!(Zd&4194240)&&(Zd=64),d}function fp(d){for(var f=[],v=0;31>v;v++)f.push(d);return f}function $u(d,f,v){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-ko(f),d[f]=v}function Zv(d,f){var v=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var I=d.eventTimes;for(d=d.expirationTimes;0<v;){var A=31-ko(v),L=1<<A;f[A]=0,I[A]=-1,d[A]=-1,v&=~L}}function yc(d,f){var v=d.entangledLanes|=f;for(d=d.entanglements;v;){var I=31-ko(v),A=1<<I;A&f|d[I]&f&&(d[I]|=f),v&=~A}}var Nn=0;function pp(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Qv,Ae,lr,Aa,Ci,mp=!1,Jd=[],ra=null,Qo=null,Jo=null,pt=new Map,ei=new Map,ti=[],Sr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Si(d,f){switch(d){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":pt.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(f.pointerId)}}function Nu(d,f,v,I,A,L){return d===null||d.nativeEvent!==L?(d={blockedOn:f,domEventName:v,eventSystemFlags:I,nativeEvent:L,targetContainers:[A]},f!==null&&(f=Ic(f),f!==null&&Ae(f)),d):(d.eventSystemFlags|=I,f=d.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),d)}function Jv(d,f,v,I,A){switch(f){case"focusin":return ra=Nu(ra,d,f,v,I,A),!0;case"dragenter":return Qo=Nu(Qo,d,f,v,I,A),!0;case"mouseover":return Jo=Nu(Jo,d,f,v,I,A),!0;case"pointerover":var L=A.pointerId;return pt.set(L,Nu(pt.get(L)||null,d,f,v,I,A)),!0;case"gotpointercapture":return L=A.pointerId,ei.set(L,Nu(ei.get(L)||null,d,f,v,I,A)),!0}return!1}function h1(d){var f=Pl(d.target);if(f!==null){var v=_e(f);if(v!==null){if(f=v.tag,f===13){if(f=je(v),f!==null){d.blockedOn=f,Ci(d.priority,function(){lr(v)});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){d.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}d.blockedOn=null}function eh(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var v=Bs(d.domEventName,d.eventSystemFlags,f[0],d.nativeEvent);if(v===null){v=d.nativeEvent;var I=new v.constructor(v.type,v);Ls=I,v.target.dispatchEvent(I),Ls=null}else return f=Ic(v),f!==null&&Ae(f),d.blockedOn=v,!1;f.shift()}return!0}function Ar(d,f,v){eh(d)&&v.delete(f)}function gp(){mp=!1,ra!==null&&eh(ra)&&(ra=null),Qo!==null&&eh(Qo)&&(Qo=null),Jo!==null&&eh(Jo)&&(Jo=null),pt.forEach(Ar),ei.forEach(Ar)}function bc(d,f){d.blockedOn===f&&(d.blockedOn=null,mp||(mp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gp)))}function kl(d){function f(A){return bc(A,d)}if(0<Jd.length){bc(Jd[0],d);for(var v=1;v<Jd.length;v++){var I=Jd[v];I.blockedOn===d&&(I.blockedOn=null)}}for(ra!==null&&bc(ra,d),Qo!==null&&bc(Qo,d),Jo!==null&&bc(Jo,d),pt.forEach(f),ei.forEach(f),v=0;v<ti.length;v++)I=ti[v],I.blockedOn===d&&(I.blockedOn=null);for(;0<ti.length&&(v=ti[0],v.blockedOn===null);)h1(v),v.blockedOn===null&&ti.shift()}var Da=T.ReactCurrentBatchConfig,Pa=!0;function xn(d,f,v,I){var A=Nn,L=Da.transition;Da.transition=null;try{Nn=1,Eu(d,f,v,I)}finally{Nn=A,Da.transition=L}}function th(d,f,v,I){var A=Nn,L=Da.transition;Da.transition=null;try{Nn=4,Eu(d,f,v,I)}finally{Nn=A,Da.transition=L}}function Eu(d,f,v,I){if(Pa){var A=Bs(d,f,v,I);if(A===null)El(d,f,I,Ru,v),Si(d,I);else if(Jv(A,d,f,v,I))I.stopPropagation();else if(Si(d,I),f&4&&-1<Sr.indexOf(d)){for(;A!==null;){var L=Ic(A);if(L!==null&&Qv(L),L=Bs(d,f,v,I),L===null&&El(d,f,I,Ru,v),L===A)break;A=L}A!==null&&I.stopPropagation()}else El(d,f,I,null,v)}}var Ru=null;function Bs(d,f,v,I){if(Ru=null,d=ls(I),d=Pl(d),d!==null)if(f=_e(d),f===null)d=null;else if(v=f.tag,v===13){if(d=je(f),d!==null)return d;d=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null);return Ru=d,null}function ni(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tu()){case Zo:return 1;case Ot:return 4;case ki:case na:return 16;case cn:return 536870912;default:return 16}default:return 16}}var Ma=null,nt=null,Vs=null;function nh(){if(Vs)return Vs;var d,f=nt,v=f.length,I,A="value"in Ma?Ma.value:Ma.textContent,L=A.length;for(d=0;d<v&&f[d]===A[d];d++);var Q=v-d;for(I=1;I<=Q&&f[v-I]===A[L-I];I++);return Vs=A.slice(d,1<I?1-I:void 0)}function xc(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function vc(){return!0}function js(){return!1}function Dr(d){function f(v,I,A,L,Q){this._reactName=v,this._targetInst=A,this.type=I,this.nativeEvent=L,this.target=Q,this.currentTarget=null;for(var ue in d)d.hasOwnProperty(ue)&&(v=d[ue],this[ue]=v?v(L):L[ue]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?vc:js,this.isPropagationStopped=js,this}return se(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=vc)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=vc)},persist:function(){},isPersistent:vc}),f}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=Dr(Cn),wc=se({},Cn,{view:0,detail:0}),f1=Dr(wc),yp,bp,Au,sh=se({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Au&&(Au&&d.type==="mousemove"?(yp=d.screenX-Au.screenX,bp=d.screenY-Au.screenY):bp=yp=0,Au=d),yp)},movementY:function(d){return"movementY"in d?d.movementY:bp}}),p1=Dr(sh),ew=se({},sh,{dataTransfer:0}),x7=Dr(ew),v7=se({},wc,{relatedTarget:0}),ri=Dr(v7),Zt=se({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),xp=Dr(Zt),oh=se({},Cn,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),vp=Dr(oh),m1=se({},Cn,{data:0}),g1=Dr(m1),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=y1[d])?!!f[d]:!1}function kc(){return b1}var nw=se({},wc,{key:function(d){if(d.key){var f=ih[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=xc(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?tw[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(d){return d.type==="keypress"?xc(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?xc(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),x1=Dr(nw),v1=se({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w1=Dr(v1),rw=se({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),sw=Dr(rw),k1=se({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),C1=Dr(k1),wp=se({},sh,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),S1=Dr(wp),ow=[9,13,27,32],ah=a&&"CompositionEvent"in window,sa=null;a&&"documentMode"in document&&(sa=document.documentMode);var kp=a&&"TextEvent"in window&&!sa,Cp=a&&(!ah||sa&&8<sa&&11>=sa),T1=" ",I1=!1;function Sp(d,f){switch(d){case"keyup":return ow.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Oa=!1;function Tp(d,f){switch(d){case"compositionend":return lh(f);case"keypress":return f.which!==32?null:(I1=!0,T1);case"textInput":return d=f.data,d===T1&&I1?null:d;default:return null}}function ch(d,f){if(Oa)return d==="compositionend"||!ah&&Sp(d,f)?(d=nh(),Vs=nt=Ma=null,Oa=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Cp&&f.locale!=="ko"?null:f.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $1(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!iw[d.type]:f==="textarea"}function Ip(d,f,v,I){Rr(I),f=yh(f,"onChange"),0<f.length&&(v=new rh("onChange","change",null,v,I),d.push({event:v,listeners:f}))}var Cl=null,Sl=null;function $p(d){cw(d,0)}function uh(d){var f=$c(d);if(Ge(f))return d}function N1(d,f){if(d==="change")return f}var E1=!1;if(a){var dh;if(a){var Tl="oninput"in document;if(!Tl){var R1=document.createElement("div");R1.setAttribute("oninput","return;"),Tl=typeof R1.oninput=="function"}dh=Tl}else dh=!1;E1=dh&&(!document.documentMode||9<document.documentMode)}function A1(){Cl&&(Cl.detachEvent("onpropertychange",D1),Sl=Cl=null)}function D1(d){if(d.propertyName==="value"&&uh(Sl)){var f=[];Ip(f,Sl,d,ls(d)),wl($p,f)}}function P1(d,f,v){d==="focusin"?(A1(),Cl=f,Sl=v,Cl.attachEvent("onpropertychange",D1)):d==="focusout"&&A1()}function aw(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return uh(Sl)}function M1(d,f){if(d==="click")return uh(f)}function O1(d,f){if(d==="input"||d==="change")return uh(f)}function w7(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Wr=typeof Object.is=="function"?Object.is:w7;function Cc(d,f){if(Wr(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var v=Object.keys(d),I=Object.keys(f);if(v.length!==I.length)return!1;for(I=0;I<v.length;I++){var A=v[I];if(!l.call(f,A)||!Wr(d[A],f[A]))return!1}return!0}function F1(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Du(d,f){var v=F1(d);d=0;for(var I;v;){if(v.nodeType===3){if(I=d+v.textContent.length,d<=f&&I>=f)return{node:v,offset:f-d};d=I}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=F1(v)}}function Np(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?Np(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function hh(){for(var d=window,f=mt();f instanceof d.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)d=f.contentWindow;else break;f=mt(d.document)}return f}function Pu(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}function z1(d){var f=hh(),v=d.focusedElem,I=d.selectionRange;if(f!==v&&v&&v.ownerDocument&&Np(v.ownerDocument.documentElement,v)){if(I!==null&&Pu(v)){if(f=I.start,d=I.end,d===void 0&&(d=f),"selectionStart"in v)v.selectionStart=f,v.selectionEnd=Math.min(d,v.value.length);else if(d=(f=v.ownerDocument||document)&&f.defaultView||window,d.getSelection){d=d.getSelection();var A=v.textContent.length,L=Math.min(I.start,A);I=I.end===void 0?L:Math.min(I.end,A),!d.extend&&L>I&&(A=I,I=L,L=A),A=Du(v,L);var Q=Du(v,I);A&&Q&&(d.rangeCount!==1||d.anchorNode!==A.node||d.anchorOffset!==A.offset||d.focusNode!==Q.node||d.focusOffset!==Q.offset)&&(f=f.createRange(),f.setStart(A.node,A.offset),d.removeAllRanges(),L>I?(d.addRange(f),d.extend(Q.node,Q.offset)):(f.setEnd(Q.node,Q.offset),d.addRange(f)))}}for(f=[],d=v;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<f.length;v++)d=f[v],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Ti=a&&"documentMode"in document&&11>=document.documentMode,Il=null,te=null,hs=null,so=!1;function Ep(d,f,v){var I=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;so||Il==null||Il!==mt(I)||(I=Il,"selectionStart"in I&&Pu(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),hs&&Cc(hs,I)||(hs=I,I=yh(te,"onSelect"),0<I.length&&(f=new rh("onSelect","select",null,f,v),d.push({event:f,listeners:I}),f.target=Il)))}function $l(d,f){var v={};return v[d.toLowerCase()]=f.toLowerCase(),v["Webkit"+d]="webkit"+f,v["Moz"+d]="moz"+f,v}var Fa={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Ii={},fh={};a&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Co(d){if(Ii[d])return Ii[d];if(!Fa[d])return d;var f=Fa[d],v;for(v in f)if(f.hasOwnProperty(v)&&v in fh)return Ii[d]=f[v];return d}var L1=Co("animationend"),si=Co("animationiteration"),Rp=Co("animationstart"),lw=Co("transitionend"),Ap=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oa(d,f){Ap.set(d,f),o(f,[d])}for(var ph=0;ph<Dp.length;ph++){var mh=Dp[ph],Pp=mh.toLowerCase(),Mp=mh[0].toUpperCase()+mh.slice(1);oa(Pp,"on"+Mp)}oa(L1,"onAnimationEnd"),oa(si,"onAnimationIteration"),oa(Rp,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(lw,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function Op(d,f,v){var I=d.type||"unknown-event";d.currentTarget=v,dt(I,f,void 0,d),d.currentTarget=null}function cw(d,f){f=(f&4)!==0;for(var v=0;v<d.length;v++){var I=d[v],A=I.event;I=I.listeners;e:{var L=void 0;if(f)for(var Q=I.length-1;0<=Q;Q--){var ue=I[Q],me=ue.instance,Le=ue.currentTarget;if(ue=ue.listener,me!==L&&A.isPropagationStopped())break e;Op(A,ue,Le),L=me}else for(Q=0;Q<I.length;Q++){if(ue=I[Q],me=ue.instance,Le=ue.currentTarget,ue=ue.listener,me!==L&&A.isPropagationStopped())break e;Op(A,ue,Le),L=me}}}if(qe)throw d=X,qe=!1,X=null,d}function Un(d,f){var v=f[zp];v===void 0&&(v=f[zp]=new Set);var I=d+"__bubble";v.has(I)||(Nl(f,d,2,!1),v.add(I))}function gh(d,f,v){var I=0;f&&(I|=4),Nl(v,d,I,f)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function Tc(d){if(!d[Mu]){d[Mu]=!0,r.forEach(function(v){v!=="selectionchange"&&(_1.has(v)||gh(v,!1,d),gh(v,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[Mu]||(f[Mu]=!0,gh("selectionchange",!1,f))}}function Nl(d,f,v,I){switch(ni(f)){case 1:var A=xn;break;case 4:A=th;break;default:A=Eu}v=A.bind(null,f,v,d),A=void 0,!ta||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),I?A!==void 0?d.addEventListener(f,v,{capture:!0,passive:A}):d.addEventListener(f,v,!0):A!==void 0?d.addEventListener(f,v,{passive:A}):d.addEventListener(f,v,!1)}function El(d,f,v,I,A){var L=I;if(!(f&1)&&!(f&2)&&I!==null)e:for(;;){if(I===null)return;var Q=I.tag;if(Q===3||Q===4){var ue=I.stateNode.containerInfo;if(ue===A||ue.nodeType===8&&ue.parentNode===A)break;if(Q===4)for(Q=I.return;Q!==null;){var me=Q.tag;if((me===3||me===4)&&(me=Q.stateNode.containerInfo,me===A||me.nodeType===8&&me.parentNode===A))return;Q=Q.return}for(;ue!==null;){if(Q=Pl(ue),Q===null)return;if(me=Q.tag,me===5||me===6){I=L=Q;continue e}ue=ue.parentNode}}I=I.return}wl(function(){var Le=L,tt=ls(v),ot=[];e:{var et=Ap.get(d);if(et!==void 0){var xt=rh,Tt=d;switch(d){case"keypress":if(xc(v)===0)break e;case"keydown":case"keyup":xt=x1;break;case"focusin":Tt="focus",xt=ri;break;case"focusout":Tt="blur",xt=ri;break;case"beforeblur":case"afterblur":xt=ri;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xt=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xt=x7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xt=sw;break;case L1:case si:case Rp:xt=xp;break;case lw:xt=C1;break;case"scroll":xt=f1;break;case"wheel":xt=S1;break;case"copy":case"cut":case"paste":xt=vp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xt=w1}var Nt=(f&4)!==0,Hr=!Nt&&d==="scroll",Re=Nt?et!==null?et+"Capture":null:et;Nt=[];for(var ke=Le,Me;ke!==null;){Me=ke;var lt=Me.stateNode;if(Me.tag===5&&lt!==null&&(Me=lt,Re!==null&&(lt=Mo(ke,Re),lt!=null&&Nt.push(Ou(ke,lt,Me)))),Hr)break;ke=ke.return}0<Nt.length&&(et=new xt(et,Tt,null,v,tt),ot.push({event:et,listeners:Nt}))}}if(!(f&7)){e:{if(et=d==="mouseover"||d==="pointerover",xt=d==="mouseout"||d==="pointerout",et&&v!==Ls&&(Tt=v.relatedTarget||v.fromElement)&&(Pl(Tt)||Tt[aa]))break e;if((xt||et)&&(et=tt.window===tt?tt:(et=tt.ownerDocument)?et.defaultView||et.parentWindow:window,xt?(Tt=v.relatedTarget||v.toElement,xt=Le,Tt=Tt?Pl(Tt):null,Tt!==null&&(Hr=_e(Tt),Tt!==Hr||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(xt=null,Tt=Le),xt!==Tt)){if(Nt=p1,lt="onMouseLeave",Re="onMouseEnter",ke="mouse",(d==="pointerout"||d==="pointerover")&&(Nt=w1,lt="onPointerLeave",Re="onPointerEnter",ke="pointer"),Hr=xt==null?et:$c(xt),Me=Tt==null?et:$c(Tt),et=new Nt(lt,ke+"leave",xt,v,tt),et.target=Hr,et.relatedTarget=Me,lt=null,Pl(tt)===Le&&(Nt=new Nt(Re,ke+"enter",Tt,v,tt),Nt.target=Me,Nt.relatedTarget=Hr,lt=Nt),Hr=lt,xt&&Tt)t:{for(Nt=xt,Re=Tt,ke=0,Me=Nt;Me;Me=Rl(Me))ke++;for(Me=0,lt=Re;lt;lt=Rl(lt))Me++;for(;0<ke-Me;)Nt=Rl(Nt),ke--;for(;0<Me-ke;)Re=Rl(Re),Me--;for(;ke--;){if(Nt===Re||Re!==null&&Nt===Re.alternate)break t;Nt=Rl(Nt),Re=Rl(Re)}Nt=null}else Nt=null;xt!==null&&uw(ot,et,xt,Nt,!1),Tt!==null&&Hr!==null&&uw(ot,Hr,Tt,Nt,!0)}}e:{if(et=Le?$c(Le):window,xt=et.nodeName&&et.nodeName.toLowerCase(),xt==="select"||xt==="input"&&et.type==="file")var Rt=N1;else if($1(et))if(E1)Rt=O1;else{Rt=aw;var Lt=P1}else(xt=et.nodeName)&&xt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(Rt=M1);if(Rt&&(Rt=Rt(d,Le))){Ip(ot,Rt,v,tt);break e}Lt&&Lt(d,et,Le),d==="focusout"&&(Lt=et._wrapperState)&&Lt.controlled&&et.type==="number"&&at(et,"number",et.value)}switch(Lt=Le?$c(Le):window,d){case"focusin":($1(Lt)||Lt.contentEditable==="true")&&(Il=Lt,te=Le,hs=null);break;case"focusout":hs=te=Il=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,Ep(ot,v,tt);break;case"selectionchange":if(Ti)break;case"keydown":case"keyup":Ep(ot,v,tt)}var _t;if(ah)e:{switch(d){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else Oa?Sp(d,v)&&(Ht="onCompositionEnd"):d==="keydown"&&v.keyCode===229&&(Ht="onCompositionStart");Ht&&(Cp&&v.locale!=="ko"&&(Oa||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Oa&&(_t=nh()):(Ma=tt,nt="value"in Ma?Ma.value:Ma.textContent,Oa=!0)),Lt=yh(Le,Ht),0<Lt.length&&(Ht=new g1(Ht,d,null,v,tt),ot.push({event:Ht,listeners:Lt}),_t?Ht.data=_t:(_t=lh(v),_t!==null&&(Ht.data=_t)))),(_t=kp?Tp(d,v):ch(d,v))&&(Le=yh(Le,"onBeforeInput"),0<Le.length&&(tt=new g1("onBeforeInput","beforeinput",null,v,tt),ot.push({event:tt,listeners:Le}),tt.data=_t))}cw(ot,f)})}function Ou(d,f,v){return{instance:d,listener:f,currentTarget:v}}function yh(d,f){for(var v=f+"Capture",I=[];d!==null;){var A=d,L=A.stateNode;A.tag===5&&L!==null&&(A=L,L=Mo(d,v),L!=null&&I.unshift(Ou(d,L,A)),L=Mo(d,f),L!=null&&I.push(Ou(d,L,A))),d=d.return}return I}function Rl(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function uw(d,f,v,I,A){for(var L=f._reactName,Q=[];v!==null&&v!==I;){var ue=v,me=ue.alternate,Le=ue.stateNode;if(me!==null&&me===I)break;ue.tag===5&&Le!==null&&(ue=Le,A?(me=Mo(v,L),me!=null&&Q.unshift(Ou(v,me,ue))):A||(me=Mo(v,L),me!=null&&Q.push(Ou(v,me,ue)))),v=v.return}Q.length!==0&&d.push({event:f,listeners:Q})}var B1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function dw(d){return(typeof d=="string"?d:""+d).replace(B1,`
`).replace(V1,"")}function Fu(d,f,v){if(f=dw(f),dw(d)!==f&&v)throw Error(n(425))}function bh(){}var xh=null,zu=null;function Lu(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,j1=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(d){return Fp.resolve(null).then(d).catch(W1)}:vh;function W1(d){setTimeout(function(){throw d})}function wh(d,f){var v=f,I=0;do{var A=v.nextSibling;if(d.removeChild(v),A&&A.nodeType===8)if(v=A.data,v==="/$"){if(I===0){d.removeChild(A),kl(f);return}I--}else v!=="$"&&v!=="$?"&&v!=="$!"||I++;v=A}while(v);kl(f)}function Al(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return d}function ia(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var v=d.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return d;f--}else v==="/$"&&f++}d=d.previousSibling}return null}var Dl=Math.random().toString(36).slice(2),$i="__reactFiber$"+Dl,_u="__reactProps$"+Dl,aa="__reactContainer$"+Dl,zp="__reactEvents$"+Dl,Lp="__reactListeners$"+Dl,fw="__reactHandles$"+Dl;function Pl(d){var f=d[$i];if(f)return f;for(var v=d.parentNode;v;){if(f=v[aa]||v[$i]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(d=ia(d);d!==null;){if(v=d[$i])return v;d=ia(d)}return f}d=v,v=d.parentNode}return null}function Ic(d){return d=d[$i]||d[aa],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function $c(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function _p(d){return d[_u]||null}var Bp=[],Ml=-1;function Ni(d){return{current:d}}function Gn(d){0>Ml||(d.current=Bp[Ml],Bp[Ml]=null,Ml--)}function _n(d,f){Ml++,Bp[Ml]=d.current,d.current=f}var la={},fs=Ni(la),Ws=Ni(!1),Ol=la;function Fl(d,f){var v=d.type.contextTypes;if(!v)return la;var I=d.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===f)return I.__reactInternalMemoizedMaskedChildContext;var A={},L;for(L in v)A[L]=f[L];return I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=A),A}function ps(d){return d=d.childContextTypes,d!=null}function Nc(){Gn(Ws),Gn(fs)}function Vp(d,f,v){if(fs.current!==la)throw Error(n(168));_n(fs,f),_n(Ws,v)}function Bu(d,f,v){var I=d.stateNode;if(f=f.childContextTypes,typeof I.getChildContext!="function")return v;I=I.getChildContext();for(var A in I)if(!(A in f))throw Error(n(108,Ne(d)||"Unknown",A));return se({},v,I)}function jp(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||la,Ol=fs.current,_n(fs,d),_n(Ws,Ws.current),!0}function kh(d,f,v){var I=d.stateNode;if(!I)throw Error(n(169));v?(d=Bu(d,f,Ol),I.__reactInternalMemoizedMergedChildContext=d,Gn(Ws),Gn(fs),_n(fs,d)):Gn(Ws),_n(Ws,v)}var Ei=null,Ch=!1,Wp=!1;function Up(d){Ei===null?Ei=[d]:Ei.push(d)}function Hp(d){Ch=!0,Up(d)}function zl(){if(!Wp&&Ei!==null){Wp=!0;var d=0,f=Nn;try{var v=Ei;for(Nn=1;d<v.length;d++){var I=v[d];do I=I(!0);while(I!==null)}Ei=null,Ch=!1}catch(A){throw Ei!==null&&(Ei=Ei.slice(d+1)),ae(Zo,zl),A}finally{Nn=f,Wp=!1}}return null}var Vu=[],ju=0,Sh=null,Th=0,b=[],y=0,C=null,N=1,P="";function B(d,f){Vu[ju++]=Th,Vu[ju++]=Sh,Sh=d,Th=f}function H(d,f,v){b[y++]=N,b[y++]=P,b[y++]=C,C=d;var I=N;d=P;var A=32-ko(I)-1;I&=~(1<<A),v+=1;var L=32-ko(f)+A;if(30<L){var Q=A-A%5;L=(I&(1<<Q)-1).toString(32),I>>=Q,A-=Q,N=1<<32-ko(f)+A|v<<A|I,P=L+d}else N=1<<L|v<<A|I,P=d}function ee(d){d.return!==null&&(B(d,1),H(d,1,0))}function ie(d){for(;d===Sh;)Sh=Vu[--ju],Vu[ju]=null,Th=Vu[--ju],Vu[ju]=null;for(;d===C;)C=b[--y],b[y]=null,P=b[--y],b[y]=null,N=b[--y],b[y]=null}var fe=null,ve=null,Ce=!1,Pe=null;function Ye(d,f){var v=Pi(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=d,f=d.deletions,f===null?(d.deletions=[v],d.flags|=16):f.push(v)}function bt(d,f){switch(d.tag){case 5:var v=d.type;return f=f.nodeType!==1||v.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(d.stateNode=f,fe=d,ve=Al(f.firstChild),!0):!1;case 6:return f=d.pendingProps===""||f.nodeType!==3?null:f,f!==null?(d.stateNode=f,fe=d,ve=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(v=C!==null?{id:N,overflow:P}:null,d.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=Pi(18,null,null,0),v.stateNode=f,v.return=d,d.child=v,fe=d,ve=null,!0):!1;default:return!1}}function St(d){return(d.mode&1)!==0&&(d.flags&128)===0}function un(d){if(Ce){var f=ve;if(f){var v=f;if(!bt(d,f)){if(St(d))throw Error(n(418));f=Al(v.nextSibling);var I=fe;f&&bt(d,f)?Ye(I,v):(d.flags=d.flags&-4097|2,Ce=!1,fe=d)}}else{if(St(d))throw Error(n(418));d.flags=d.flags&-4097|2,Ce=!1,fe=d}}}function nn(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;fe=d}function dn(d){if(d!==fe)return!1;if(!Ce)return nn(d),Ce=!0,!1;var f;if((f=d.tag!==3)&&!(f=d.tag!==5)&&(f=d.type,f=f!=="head"&&f!=="body"&&!Lu(d.type,d.memoizedProps)),f&&(f=ve)){if(St(d))throw Sn(),Error(n(418));for(;f;)Ye(d,f),f=Al(f.nextSibling)}if(nn(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8){var v=d.data;if(v==="/$"){if(f===0){ve=Al(d.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++}d=d.nextSibling}ve=null}}else ve=fe?Al(d.stateNode.nextSibling):null;return!0}function Sn(){for(var d=ve;d;)d=Al(d.nextSibling)}function In(){ve=fe=null,Ce=!1}function ms(d){Pe===null?Pe=[d]:Pe.push(d)}var Ur=T.ReactCurrentBatchConfig;function $s(d,f,v){if(d=v.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var I=v.stateNode}if(!I)throw Error(n(147,d));var A=I,L=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(Q){var ue=A.refs;Q===null?delete ue[L]:ue[L]=Q},f._stringRef=L,f)}if(typeof d!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,d))}return d}function ca(d,f){throw d=Object.prototype.toString.call(f),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function gn(d){var f=d._init;return f(d._payload)}function En(d){function f(Re,ke){if(d){var Me=Re.deletions;Me===null?(Re.deletions=[ke],Re.flags|=16):Me.push(ke)}}function v(Re,ke){if(!d)return null;for(;ke!==null;)f(Re,ke),ke=ke.sibling;return null}function I(Re,ke){for(Re=new Map;ke!==null;)ke.key!==null?Re.set(ke.key,ke):Re.set(ke.index,ke),ke=ke.sibling;return Re}function A(Re,ke){return Re=Fc(Re,ke),Re.index=0,Re.sibling=null,Re}function L(Re,ke,Me){return Re.index=Me,d?(Me=Re.alternate,Me!==null?(Me=Me.index,Me<ke?(Re.flags|=2,ke):Me):(Re.flags|=2,ke)):(Re.flags|=1048576,ke)}function Q(Re){return d&&Re.alternate===null&&(Re.flags|=2),Re}function ue(Re,ke,Me,lt){return ke===null||ke.tag!==6?(ke=e4(Me,Re.mode,lt),ke.return=Re,ke):(ke=A(ke,Me),ke.return=Re,ke)}function me(Re,ke,Me,lt){var Rt=Me.type;return Rt===V?tt(Re,ke,Me.props.children,lt,Me.key):ke!==null&&(ke.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===Z&&gn(Rt)===ke.type)?(lt=A(ke,Me.props),lt.ref=$s(Re,ke,Me),lt.return=Re,lt):(lt=dy(Me.type,Me.key,Me.props,null,Re.mode,lt),lt.ref=$s(Re,ke,Me),lt.return=Re,lt)}function Le(Re,ke,Me,lt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Me.containerInfo||ke.stateNode.implementation!==Me.implementation?(ke=t4(Me,Re.mode,lt),ke.return=Re,ke):(ke=A(ke,Me.children||[]),ke.return=Re,ke)}function tt(Re,ke,Me,lt,Rt){return ke===null||ke.tag!==7?(ke=Yu(Me,Re.mode,lt,Rt),ke.return=Re,ke):(ke=A(ke,Me),ke.return=Re,ke)}function ot(Re,ke,Me){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=e4(""+ke,Re.mode,Me),ke.return=Re,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case E:return Me=dy(ke.type,ke.key,ke.props,null,Re.mode,Me),Me.ref=$s(Re,null,ke),Me.return=Re,Me;case F:return ke=t4(ke,Re.mode,Me),ke.return=Re,ke;case Z:var lt=ke._init;return ot(Re,lt(ke._payload),Me)}if(ut(ke)||re(ke))return ke=Yu(ke,Re.mode,Me,null),ke.return=Re,ke;ca(Re,ke)}return null}function et(Re,ke,Me,lt){var Rt=ke!==null?ke.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Rt!==null?null:ue(Re,ke,""+Me,lt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:return Me.key===Rt?me(Re,ke,Me,lt):null;case F:return Me.key===Rt?Le(Re,ke,Me,lt):null;case Z:return Rt=Me._init,et(Re,ke,Rt(Me._payload),lt)}if(ut(Me)||re(Me))return Rt!==null?null:tt(Re,ke,Me,lt,null);ca(Re,Me)}return null}function xt(Re,ke,Me,lt,Rt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return Re=Re.get(Me)||null,ue(ke,Re,""+lt,Rt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case E:return Re=Re.get(lt.key===null?Me:lt.key)||null,me(ke,Re,lt,Rt);case F:return Re=Re.get(lt.key===null?Me:lt.key)||null,Le(ke,Re,lt,Rt);case Z:var Lt=lt._init;return xt(Re,ke,Me,Lt(lt._payload),Rt)}if(ut(lt)||re(lt))return Re=Re.get(Me)||null,tt(ke,Re,lt,Rt,null);ca(ke,lt)}return null}function Tt(Re,ke,Me,lt){for(var Rt=null,Lt=null,_t=ke,Ht=ke=0,Rs=null;_t!==null&&Ht<Me.length;Ht++){_t.index>Ht?(Rs=_t,_t=null):Rs=_t.sibling;var An=et(Re,_t,Me[Ht],lt);if(An===null){_t===null&&(_t=Rs);break}d&&_t&&An.alternate===null&&f(Re,_t),ke=L(An,ke,Ht),Lt===null?Rt=An:Lt.sibling=An,Lt=An,_t=Rs}if(Ht===Me.length)return v(Re,_t),Ce&&B(Re,Ht),Rt;if(_t===null){for(;Ht<Me.length;Ht++)_t=ot(Re,Me[Ht],lt),_t!==null&&(ke=L(_t,ke,Ht),Lt===null?Rt=_t:Lt.sibling=_t,Lt=_t);return Ce&&B(Re,Ht),Rt}for(_t=I(Re,_t);Ht<Me.length;Ht++)Rs=xt(_t,Re,Ht,Me[Ht],lt),Rs!==null&&(d&&Rs.alternate!==null&&_t.delete(Rs.key===null?Ht:Rs.key),ke=L(Rs,ke,Ht),Lt===null?Rt=Rs:Lt.sibling=Rs,Lt=Rs);return d&&_t.forEach(function(zc){return f(Re,zc)}),Ce&&B(Re,Ht),Rt}function Nt(Re,ke,Me,lt){var Rt=re(Me);if(typeof Rt!="function")throw Error(n(150));if(Me=Rt.call(Me),Me==null)throw Error(n(151));for(var Lt=Rt=null,_t=ke,Ht=ke=0,Rs=null,An=Me.next();_t!==null&&!An.done;Ht++,An=Me.next()){_t.index>Ht?(Rs=_t,_t=null):Rs=_t.sibling;var zc=et(Re,_t,An.value,lt);if(zc===null){_t===null&&(_t=Rs);break}d&&_t&&zc.alternate===null&&f(Re,_t),ke=L(zc,ke,Ht),Lt===null?Rt=zc:Lt.sibling=zc,Lt=zc,_t=Rs}if(An.done)return v(Re,_t),Ce&&B(Re,Ht),Rt;if(_t===null){for(;!An.done;Ht++,An=Me.next())An=ot(Re,An.value,lt),An!==null&&(ke=L(An,ke,Ht),Lt===null?Rt=An:Lt.sibling=An,Lt=An);return Ce&&B(Re,Ht),Rt}for(_t=I(Re,_t);!An.done;Ht++,An=Me.next())An=xt(_t,Re,Ht,An.value,lt),An!==null&&(d&&An.alternate!==null&&_t.delete(An.key===null?Ht:An.key),ke=L(An,ke,Ht),Lt===null?Rt=An:Lt.sibling=An,Lt=An);return d&&_t.forEach(function(sj){return f(Re,sj)}),Ce&&B(Re,Ht),Rt}function Hr(Re,ke,Me,lt){if(typeof Me=="object"&&Me!==null&&Me.type===V&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:e:{for(var Rt=Me.key,Lt=ke;Lt!==null;){if(Lt.key===Rt){if(Rt=Me.type,Rt===V){if(Lt.tag===7){v(Re,Lt.sibling),ke=A(Lt,Me.props.children),ke.return=Re,Re=ke;break e}}else if(Lt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===Z&&gn(Rt)===Lt.type){v(Re,Lt.sibling),ke=A(Lt,Me.props),ke.ref=$s(Re,Lt,Me),ke.return=Re,Re=ke;break e}v(Re,Lt);break}else f(Re,Lt);Lt=Lt.sibling}Me.type===V?(ke=Yu(Me.props.children,Re.mode,lt,Me.key),ke.return=Re,Re=ke):(lt=dy(Me.type,Me.key,Me.props,null,Re.mode,lt),lt.ref=$s(Re,ke,Me),lt.return=Re,Re=lt)}return Q(Re);case F:e:{for(Lt=Me.key;ke!==null;){if(ke.key===Lt)if(ke.tag===4&&ke.stateNode.containerInfo===Me.containerInfo&&ke.stateNode.implementation===Me.implementation){v(Re,ke.sibling),ke=A(ke,Me.children||[]),ke.return=Re,Re=ke;break e}else{v(Re,ke);break}else f(Re,ke);ke=ke.sibling}ke=t4(Me,Re.mode,lt),ke.return=Re,Re=ke}return Q(Re);case Z:return Lt=Me._init,Hr(Re,ke,Lt(Me._payload),lt)}if(ut(Me))return Tt(Re,ke,Me,lt);if(re(Me))return Nt(Re,ke,Me,lt);ca(Re,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ke!==null&&ke.tag===6?(v(Re,ke.sibling),ke=A(ke,Me),ke.return=Re,Re=ke):(v(Re,ke),ke=e4(Me,Re.mode,lt),ke.return=Re,Re=ke),Q(Re)):v(Re,ke)}return Hr}var Rn=En(!0),Zn=En(!1),Qn=Ni(null),qn=null,gs=null,Gp=null;function Ih(){Gp=gs=qn=null}function $h(d){var f=Qn.current;Gn(Qn),d._currentValue=f}function qp(d,f,v){for(;d!==null;){var I=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,I!==null&&(I.childLanes|=f)):I!==null&&(I.childLanes&f)!==f&&(I.childLanes|=f),d===v)break;d=d.return}}function ua(d,f){qn=d,Gp=gs=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&f&&(Oo=!0),d.firstContext=null)}function Ri(d){var f=d._currentValue;if(Gp!==d)if(d={context:d,memoizedValue:f,next:null},gs===null){if(qn===null)throw Error(n(308));gs=d,qn.dependencies={lanes:0,firstContext:d}}else gs=gs.next=d;return f}var Wu=null;function pw(d){Wu===null?Wu=[d]:Wu.push(d)}function k7(d,f,v,I){var A=f.interleaved;return A===null?(v.next=v,pw(f)):(v.next=A.next,A.next=v),f.interleaved=v,Ll(d,I)}function Ll(d,f){d.lanes|=f;var v=d.alternate;for(v!==null&&(v.lanes|=f),v=d,d=d.return;d!==null;)d.childLanes|=f,v=d.alternate,v!==null&&(v.childLanes|=f),v=d,d=d.return;return v.tag===3?v.stateNode:null}var Ec=!1;function mw(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C7(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function _l(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function Rc(d,f,v){var I=d.updateQueue;if(I===null)return null;if(I=I.shared,$n&2){var A=I.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),I.pending=f,Ll(d,v)}return A=I.interleaved,A===null?(f.next=f,pw(I)):(f.next=A.next,A.next=f),I.interleaved=f,Ll(d,v)}function U1(d,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var I=f.lanes;I&=d.pendingLanes,v|=I,f.lanes=v,yc(d,v)}}function S7(d,f){var v=d.updateQueue,I=d.alternate;if(I!==null&&(I=I.updateQueue,v===I)){var A=null,L=null;if(v=v.firstBaseUpdate,v!==null){do{var Q={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};L===null?A=L=Q:L=L.next=Q,v=v.next}while(v!==null);L===null?A=L=f:L=L.next=f}else A=L=f;v={baseState:I.baseState,firstBaseUpdate:A,lastBaseUpdate:L,shared:I.shared,effects:I.effects},d.updateQueue=v;return}d=v.lastBaseUpdate,d===null?v.firstBaseUpdate=f:d.next=f,v.lastBaseUpdate=f}function H1(d,f,v,I){var A=d.updateQueue;Ec=!1;var L=A.firstBaseUpdate,Q=A.lastBaseUpdate,ue=A.shared.pending;if(ue!==null){A.shared.pending=null;var me=ue,Le=me.next;me.next=null,Q===null?L=Le:Q.next=Le,Q=me;var tt=d.alternate;tt!==null&&(tt=tt.updateQueue,ue=tt.lastBaseUpdate,ue!==Q&&(ue===null?tt.firstBaseUpdate=Le:ue.next=Le,tt.lastBaseUpdate=me))}if(L!==null){var ot=A.baseState;Q=0,tt=Le=me=null,ue=L;do{var et=ue.lane,xt=ue.eventTime;if((I&et)===et){tt!==null&&(tt=tt.next={eventTime:xt,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Tt=d,Nt=ue;switch(et=f,xt=v,Nt.tag){case 1:if(Tt=Nt.payload,typeof Tt=="function"){ot=Tt.call(xt,ot,et);break e}ot=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Nt.payload,et=typeof Tt=="function"?Tt.call(xt,ot,et):Tt,et==null)break e;ot=se({},ot,et);break e;case 2:Ec=!0}}ue.callback!==null&&ue.lane!==0&&(d.flags|=64,et=A.effects,et===null?A.effects=[ue]:et.push(ue))}else xt={eventTime:xt,lane:et,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},tt===null?(Le=tt=xt,me=ot):tt=tt.next=xt,Q|=et;if(ue=ue.next,ue===null){if(ue=A.shared.pending,ue===null)break;et=ue,ue=et.next,et.next=null,A.lastBaseUpdate=et,A.shared.pending=null}}while(!0);if(tt===null&&(me=ot),A.baseState=me,A.firstBaseUpdate=Le,A.lastBaseUpdate=tt,f=A.shared.interleaved,f!==null){A=f;do Q|=A.lane,A=A.next;while(A!==f)}else L===null&&(A.shared.lanes=0);Gu|=Q,d.lanes=Q,d.memoizedState=ot}}function T7(d,f,v){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var I=d[f],A=I.callback;if(A!==null){if(I.callback=null,I=v,typeof A!="function")throw Error(n(191,A));A.call(I)}}}var Kp={},za=Ni(Kp),Xp=Ni(Kp),Yp=Ni(Kp);function Uu(d){if(d===Kp)throw Error(n(174));return d}function gw(d,f){switch(_n(Yp,f),_n(Xp,d),_n(za,Kp),d=f.nodeType,d){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:mn(null,"");break;default:d=d===8?f.parentNode:f,f=d.namespaceURI||null,d=d.tagName,f=mn(f,d)}Gn(za),_n(za,f)}function Nh(){Gn(za),Gn(Xp),Gn(Yp)}function I7(d){Uu(Yp.current);var f=Uu(za.current),v=mn(f,d.type);f!==v&&(_n(Xp,d),_n(za,v))}function yw(d){Xp.current===d&&(Gn(za),Gn(Xp))}var Tr=Ni(0);function G1(d){for(var f=d;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var bw=[];function xw(){for(var d=0;d<bw.length;d++)bw[d]._workInProgressVersionPrimary=null;bw.length=0}var q1=T.ReactCurrentDispatcher,vw=T.ReactCurrentBatchConfig,Hu=0,Ir=null,ys=null,Ns=null,K1=!1,Zp=!1,Qp=0,$V=0;function oo(){throw Error(n(321))}function ww(d,f){if(f===null)return!1;for(var v=0;v<f.length&&v<d.length;v++)if(!Wr(d[v],f[v]))return!1;return!0}function kw(d,f,v,I,A,L){if(Hu=L,Ir=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,q1.current=d===null||d.memoizedState===null?AV:DV,d=v(I,A),Zp){L=0;do{if(Zp=!1,Qp=0,25<=L)throw Error(n(301));L+=1,Ns=ys=null,f.updateQueue=null,q1.current=PV,d=v(I,A)}while(Zp)}if(q1.current=Z1,f=ys!==null&&ys.next!==null,Hu=0,Ns=ys=Ir=null,K1=!1,f)throw Error(n(300));return d}function Cw(){var d=Qp!==0;return Qp=0,d}function La(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?Ir.memoizedState=Ns=d:Ns=Ns.next=d,Ns}function Ai(){if(ys===null){var d=Ir.alternate;d=d!==null?d.memoizedState:null}else d=ys.next;var f=Ns===null?Ir.memoizedState:Ns.next;if(f!==null)Ns=f,ys=d;else{if(d===null)throw Error(n(310));ys=d,d={memoizedState:ys.memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},Ns===null?Ir.memoizedState=Ns=d:Ns=Ns.next=d}return Ns}function Jp(d,f){return typeof f=="function"?f(d):f}function Sw(d){var f=Ai(),v=f.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var I=ys,A=I.baseQueue,L=v.pending;if(L!==null){if(A!==null){var Q=A.next;A.next=L.next,L.next=Q}I.baseQueue=A=L,v.pending=null}if(A!==null){L=A.next,I=I.baseState;var ue=Q=null,me=null,Le=L;do{var tt=Le.lane;if((Hu&tt)===tt)me!==null&&(me=me.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),I=Le.hasEagerState?Le.eagerState:d(I,Le.action);else{var ot={lane:tt,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};me===null?(ue=me=ot,Q=I):me=me.next=ot,Ir.lanes|=tt,Gu|=tt}Le=Le.next}while(Le!==null&&Le!==L);me===null?Q=I:me.next=ue,Wr(I,f.memoizedState)||(Oo=!0),f.memoizedState=I,f.baseState=Q,f.baseQueue=me,v.lastRenderedState=I}if(d=v.interleaved,d!==null){A=d;do L=A.lane,Ir.lanes|=L,Gu|=L,A=A.next;while(A!==d)}else A===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function Tw(d){var f=Ai(),v=f.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var I=v.dispatch,A=v.pending,L=f.memoizedState;if(A!==null){v.pending=null;var Q=A=A.next;do L=d(L,Q.action),Q=Q.next;while(Q!==A);Wr(L,f.memoizedState)||(Oo=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),v.lastRenderedState=L}return[L,I]}function $7(){}function N7(d,f){var v=Ir,I=Ai(),A=f(),L=!Wr(I.memoizedState,A);if(L&&(I.memoizedState=A,Oo=!0),I=I.queue,Iw(A7.bind(null,v,I,d),[d]),I.getSnapshot!==f||L||Ns!==null&&Ns.memoizedState.tag&1){if(v.flags|=2048,e0(9,R7.bind(null,v,I,A,f),void 0,null),Es===null)throw Error(n(349));Hu&30||E7(v,f,A)}return A}function E7(d,f,v){d.flags|=16384,d={getSnapshot:f,value:v},f=Ir.updateQueue,f===null?(f={lastEffect:null,stores:null},Ir.updateQueue=f,f.stores=[d]):(v=f.stores,v===null?f.stores=[d]:v.push(d))}function R7(d,f,v,I){f.value=v,f.getSnapshot=I,D7(f)&&P7(d)}function A7(d,f,v){return v(function(){D7(f)&&P7(d)})}function D7(d){var f=d.getSnapshot;d=d.value;try{var v=f();return!Wr(d,v)}catch{return!0}}function P7(d){var f=Ll(d,1);f!==null&&pa(f,d,1,-1)}function M7(d){var f=La();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:d},f.queue=d,d=d.dispatch=RV.bind(null,Ir,d),[f.memoizedState,d]}function e0(d,f,v,I){return d={tag:d,create:f,destroy:v,deps:I,next:null},f=Ir.updateQueue,f===null?(f={lastEffect:null,stores:null},Ir.updateQueue=f,f.lastEffect=d.next=d):(v=f.lastEffect,v===null?f.lastEffect=d.next=d:(I=v.next,v.next=d,d.next=I,f.lastEffect=d)),d}function O7(){return Ai().memoizedState}function X1(d,f,v,I){var A=La();Ir.flags|=d,A.memoizedState=e0(1|f,v,void 0,I===void 0?null:I)}function Y1(d,f,v,I){var A=Ai();I=I===void 0?null:I;var L=void 0;if(ys!==null){var Q=ys.memoizedState;if(L=Q.destroy,I!==null&&ww(I,Q.deps)){A.memoizedState=e0(f,v,L,I);return}}Ir.flags|=d,A.memoizedState=e0(1|f,v,L,I)}function F7(d,f){return X1(8390656,8,d,f)}function Iw(d,f){return Y1(2048,8,d,f)}function z7(d,f){return Y1(4,2,d,f)}function L7(d,f){return Y1(4,4,d,f)}function _7(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function B7(d,f,v){return v=v!=null?v.concat([d]):null,Y1(4,4,_7.bind(null,f,d),v)}function $w(){}function V7(d,f){var v=Ai();f=f===void 0?null:f;var I=v.memoizedState;return I!==null&&f!==null&&ww(f,I[1])?I[0]:(v.memoizedState=[d,f],d)}function j7(d,f){var v=Ai();f=f===void 0?null:f;var I=v.memoizedState;return I!==null&&f!==null&&ww(f,I[1])?I[0]:(d=d(),v.memoizedState=[d,f],d)}function W7(d,f,v){return Hu&21?(Wr(v,f)||(v=d1(),Ir.lanes|=v,Gu|=v,d.baseState=!0),f):(d.baseState&&(d.baseState=!1,Oo=!0),d.memoizedState=v)}function NV(d,f){var v=Nn;Nn=v!==0&&4>v?v:4,d(!0);var I=vw.transition;vw.transition={};try{d(!1),f()}finally{Nn=v,vw.transition=I}}function U7(){return Ai().memoizedState}function EV(d,f,v){var I=Mc(d);if(v={lane:I,action:v,hasEagerState:!1,eagerState:null,next:null},H7(d))G7(f,v);else if(v=k7(d,f,v,I),v!==null){var A=To();pa(v,d,I,A),q7(v,f,I)}}function RV(d,f,v){var I=Mc(d),A={lane:I,action:v,hasEagerState:!1,eagerState:null,next:null};if(H7(d))G7(f,A);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var Q=f.lastRenderedState,ue=L(Q,v);if(A.hasEagerState=!0,A.eagerState=ue,Wr(ue,Q)){var me=f.interleaved;me===null?(A.next=A,pw(f)):(A.next=me.next,me.next=A),f.interleaved=A;return}}catch{}finally{}v=k7(d,f,A,I),v!==null&&(A=To(),pa(v,d,I,A),q7(v,f,I))}}function H7(d){var f=d.alternate;return d===Ir||f!==null&&f===Ir}function G7(d,f){Zp=K1=!0;var v=d.pending;v===null?f.next=f:(f.next=v.next,v.next=f),d.pending=f}function q7(d,f,v){if(v&4194240){var I=f.lanes;I&=d.pendingLanes,v|=I,f.lanes=v,yc(d,v)}}var Z1={readContext:Ri,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},AV={readContext:Ri,useCallback:function(d,f){return La().memoizedState=[d,f===void 0?null:f],d},useContext:Ri,useEffect:F7,useImperativeHandle:function(d,f,v){return v=v!=null?v.concat([d]):null,X1(4194308,4,_7.bind(null,f,d),v)},useLayoutEffect:function(d,f){return X1(4194308,4,d,f)},useInsertionEffect:function(d,f){return X1(4,2,d,f)},useMemo:function(d,f){var v=La();return f=f===void 0?null:f,d=d(),v.memoizedState=[d,f],d},useReducer:function(d,f,v){var I=La();return f=v!==void 0?v(f):f,I.memoizedState=I.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},I.queue=d,d=d.dispatch=EV.bind(null,Ir,d),[I.memoizedState,d]},useRef:function(d){var f=La();return d={current:d},f.memoizedState=d},useState:M7,useDebugValue:$w,useDeferredValue:function(d){return La().memoizedState=d},useTransition:function(){var d=M7(!1),f=d[0];return d=NV.bind(null,d[1]),La().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,v){var I=Ir,A=La();if(Ce){if(v===void 0)throw Error(n(407));v=v()}else{if(v=f(),Es===null)throw Error(n(349));Hu&30||E7(I,f,v)}A.memoizedState=v;var L={value:v,getSnapshot:f};return A.queue=L,F7(A7.bind(null,I,L,d),[d]),I.flags|=2048,e0(9,R7.bind(null,I,L,v,f),void 0,null),v},useId:function(){var d=La(),f=Es.identifierPrefix;if(Ce){var v=P,I=N;v=(I&~(1<<32-ko(I)-1)).toString(32)+v,f=":"+f+"R"+v,v=Qp++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=$V++,f=":"+f+"r"+v.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},DV={readContext:Ri,useCallback:V7,useContext:Ri,useEffect:Iw,useImperativeHandle:B7,useInsertionEffect:z7,useLayoutEffect:L7,useMemo:j7,useReducer:Sw,useRef:O7,useState:function(){return Sw(Jp)},useDebugValue:$w,useDeferredValue:function(d){var f=Ai();return W7(f,ys.memoizedState,d)},useTransition:function(){var d=Sw(Jp)[0],f=Ai().memoizedState;return[d,f]},useMutableSource:$7,useSyncExternalStore:N7,useId:U7,unstable_isNewReconciler:!1},PV={readContext:Ri,useCallback:V7,useContext:Ri,useEffect:Iw,useImperativeHandle:B7,useInsertionEffect:z7,useLayoutEffect:L7,useMemo:j7,useReducer:Tw,useRef:O7,useState:function(){return Tw(Jp)},useDebugValue:$w,useDeferredValue:function(d){var f=Ai();return ys===null?f.memoizedState=d:W7(f,ys.memoizedState,d)},useTransition:function(){var d=Tw(Jp)[0],f=Ai().memoizedState;return[d,f]},useMutableSource:$7,useSyncExternalStore:N7,useId:U7,unstable_isNewReconciler:!1};function da(d,f){if(d&&d.defaultProps){f=se({},f),d=d.defaultProps;for(var v in d)f[v]===void 0&&(f[v]=d[v]);return f}return f}function Nw(d,f,v,I){f=d.memoizedState,v=v(I,f),v=v==null?f:se({},f,v),d.memoizedState=v,d.lanes===0&&(d.updateQueue.baseState=v)}var Q1={isMounted:function(d){return(d=d._reactInternals)?_e(d)===d:!1},enqueueSetState:function(d,f,v){d=d._reactInternals;var I=To(),A=Mc(d),L=_l(I,A);L.payload=f,v!=null&&(L.callback=v),f=Rc(d,L,A),f!==null&&(pa(f,d,A,I),U1(f,d,A))},enqueueReplaceState:function(d,f,v){d=d._reactInternals;var I=To(),A=Mc(d),L=_l(I,A);L.tag=1,L.payload=f,v!=null&&(L.callback=v),f=Rc(d,L,A),f!==null&&(pa(f,d,A,I),U1(f,d,A))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var v=To(),I=Mc(d),A=_l(v,I);A.tag=2,f!=null&&(A.callback=f),f=Rc(d,A,I),f!==null&&(pa(f,d,I,v),U1(f,d,I))}};function K7(d,f,v,I,A,L,Q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(I,L,Q):f.prototype&&f.prototype.isPureReactComponent?!Cc(v,I)||!Cc(A,L):!0}function X7(d,f,v){var I=!1,A=la,L=f.contextType;return typeof L=="object"&&L!==null?L=Ri(L):(A=ps(f)?Ol:fs.current,I=f.contextTypes,L=(I=I!=null)?Fl(d,A):la),f=new f(v,L),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Q1,d.stateNode=f,f._reactInternals=d,I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=A,d.__reactInternalMemoizedMaskedChildContext=L),f}function Y7(d,f,v,I){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,I),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,I),f.state!==d&&Q1.enqueueReplaceState(f,f.state,null)}function Ew(d,f,v,I){var A=d.stateNode;A.props=v,A.state=d.memoizedState,A.refs={},mw(d);var L=f.contextType;typeof L=="object"&&L!==null?A.context=Ri(L):(L=ps(f)?Ol:fs.current,A.context=Fl(d,L)),A.state=d.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(Nw(d,f,L,v),A.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(f=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),f!==A.state&&Q1.enqueueReplaceState(A,A.state,null),H1(d,v,A,I),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308)}function Eh(d,f){try{var v="",I=f;do v+=de(I),I=I.return;while(I);var A=v}catch(L){A=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:f,stack:A,digest:null}}function Rw(d,f,v){return{value:d,source:null,stack:v??null,digest:f??null}}function Aw(d,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var MV=typeof WeakMap=="function"?WeakMap:Map;function Z7(d,f,v){v=_l(-1,v),v.tag=3,v.payload={element:null};var I=f.value;return v.callback=function(){oy||(oy=!0,Gw=I),Aw(d,f)},v}function Q7(d,f,v){v=_l(-1,v),v.tag=3;var I=d.type.getDerivedStateFromError;if(typeof I=="function"){var A=f.value;v.payload=function(){return I(A)},v.callback=function(){Aw(d,f)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(v.callback=function(){Aw(d,f),typeof I!="function"&&(Dc===null?Dc=new Set([this]):Dc.add(this));var Q=f.stack;this.componentDidCatch(f.value,{componentStack:Q!==null?Q:""})}),v}function J7(d,f,v){var I=d.pingCache;if(I===null){I=d.pingCache=new MV;var A=new Set;I.set(f,A)}else A=I.get(f),A===void 0&&(A=new Set,I.set(f,A));A.has(v)||(A.add(v),d=KV.bind(null,d,f,v),f.then(d,d))}function eT(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function tT(d,f,v,I,A){return d.mode&1?(d.flags|=65536,d.lanes=A,d):(d===f?d.flags|=65536:(d.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=_l(-1,1),f.tag=2,Rc(v,f,1))),v.lanes|=1),d)}var OV=T.ReactCurrentOwner,Oo=!1;function So(d,f,v,I){f.child=d===null?Zn(f,null,v,I):Rn(f,d.child,v,I)}function nT(d,f,v,I,A){v=v.render;var L=f.ref;return ua(f,A),I=kw(d,f,v,I,L,A),v=Cw(),d!==null&&!Oo?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~A,Bl(d,f,A)):(Ce&&v&&ee(f),f.flags|=1,So(d,f,I,A),f.child)}function rT(d,f,v,I,A){if(d===null){var L=v.type;return typeof L=="function"&&!Jw(L)&&L.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=L,sT(d,f,L,I,A)):(d=dy(v.type,null,I,f,f.mode,A),d.ref=f.ref,d.return=f,f.child=d)}if(L=d.child,!(d.lanes&A)){var Q=L.memoizedProps;if(v=v.compare,v=v!==null?v:Cc,v(Q,I)&&d.ref===f.ref)return Bl(d,f,A)}return f.flags|=1,d=Fc(L,I),d.ref=f.ref,d.return=f,f.child=d}function sT(d,f,v,I,A){if(d!==null){var L=d.memoizedProps;if(Cc(L,I)&&d.ref===f.ref)if(Oo=!1,f.pendingProps=I=L,(d.lanes&A)!==0)d.flags&131072&&(Oo=!0);else return f.lanes=d.lanes,Bl(d,f,A)}return Dw(d,f,v,I,A)}function oT(d,f,v){var I=f.pendingProps,A=I.children,L=d!==null?d.memoizedState:null;if(I.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Ah,oi),oi|=v;else{if(!(v&1073741824))return d=L!==null?L.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null,transitions:null},f.updateQueue=null,_n(Ah,oi),oi|=d,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=L!==null?L.baseLanes:v,_n(Ah,oi),oi|=I}else L!==null?(I=L.baseLanes|v,f.memoizedState=null):I=v,_n(Ah,oi),oi|=I;return So(d,f,A,v),f.child}function iT(d,f){var v=f.ref;(d===null&&v!==null||d!==null&&d.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function Dw(d,f,v,I,A){var L=ps(v)?Ol:fs.current;return L=Fl(f,L),ua(f,A),v=kw(d,f,v,I,L,A),I=Cw(),d!==null&&!Oo?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~A,Bl(d,f,A)):(Ce&&I&&ee(f),f.flags|=1,So(d,f,v,A),f.child)}function aT(d,f,v,I,A){if(ps(v)){var L=!0;jp(f)}else L=!1;if(ua(f,A),f.stateNode===null)ey(d,f),X7(f,v,I),Ew(f,v,I,A),I=!0;else if(d===null){var Q=f.stateNode,ue=f.memoizedProps;Q.props=ue;var me=Q.context,Le=v.contextType;typeof Le=="object"&&Le!==null?Le=Ri(Le):(Le=ps(v)?Ol:fs.current,Le=Fl(f,Le));var tt=v.getDerivedStateFromProps,ot=typeof tt=="function"||typeof Q.getSnapshotBeforeUpdate=="function";ot||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==I||me!==Le)&&Y7(f,Q,I,Le),Ec=!1;var et=f.memoizedState;Q.state=et,H1(f,I,Q,A),me=f.memoizedState,ue!==I||et!==me||Ws.current||Ec?(typeof tt=="function"&&(Nw(f,v,tt,I),me=f.memoizedState),(ue=Ec||K7(f,v,ue,I,et,me,Le))?(ot||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=I,f.memoizedState=me),Q.props=I,Q.state=me,Q.context=Le,I=ue):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),I=!1)}else{Q=f.stateNode,C7(d,f),ue=f.memoizedProps,Le=f.type===f.elementType?ue:da(f.type,ue),Q.props=Le,ot=f.pendingProps,et=Q.context,me=v.contextType,typeof me=="object"&&me!==null?me=Ri(me):(me=ps(v)?Ol:fs.current,me=Fl(f,me));var xt=v.getDerivedStateFromProps;(tt=typeof xt=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==ot||et!==me)&&Y7(f,Q,I,me),Ec=!1,et=f.memoizedState,Q.state=et,H1(f,I,Q,A);var Tt=f.memoizedState;ue!==ot||et!==Tt||Ws.current||Ec?(typeof xt=="function"&&(Nw(f,v,xt,I),Tt=f.memoizedState),(Le=Ec||K7(f,v,Le,I,et,Tt,me)||!1)?(tt||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(I,Tt,me),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(I,Tt,me)),typeof Q.componentDidUpdate=="function"&&(f.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ue===d.memoizedProps&&et===d.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===d.memoizedProps&&et===d.memoizedState||(f.flags|=1024),f.memoizedProps=I,f.memoizedState=Tt),Q.props=I,Q.state=Tt,Q.context=me,I=Le):(typeof Q.componentDidUpdate!="function"||ue===d.memoizedProps&&et===d.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===d.memoizedProps&&et===d.memoizedState||(f.flags|=1024),I=!1)}return Pw(d,f,v,I,L,A)}function Pw(d,f,v,I,A,L){iT(d,f);var Q=(f.flags&128)!==0;if(!I&&!Q)return A&&kh(f,v,!1),Bl(d,f,L);I=f.stateNode,OV.current=f;var ue=Q&&typeof v.getDerivedStateFromError!="function"?null:I.render();return f.flags|=1,d!==null&&Q?(f.child=Rn(f,d.child,null,L),f.child=Rn(f,null,ue,L)):So(d,f,ue,L),f.memoizedState=I.state,A&&kh(f,v,!0),f.child}function lT(d){var f=d.stateNode;f.pendingContext?Vp(d,f.pendingContext,f.pendingContext!==f.context):f.context&&Vp(d,f.context,!1),gw(d,f.containerInfo)}function cT(d,f,v,I,A){return In(),ms(A),f.flags|=256,So(d,f,v,I),f.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function Ow(d){return{baseLanes:d,cachePool:null,transitions:null}}function uT(d,f,v){var I=f.pendingProps,A=Tr.current,L=!1,Q=(f.flags&128)!==0,ue;if((ue=Q)||(ue=d!==null&&d.memoizedState===null?!1:(A&2)!==0),ue?(L=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(A|=1),_n(Tr,A&1),d===null)return un(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(f.mode&1?d.data==="$!"?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(Q=I.children,d=I.fallback,L?(I=f.mode,L=f.child,Q={mode:"hidden",children:Q},!(I&1)&&L!==null?(L.childLanes=0,L.pendingProps=Q):L=hy(Q,I,0,null),d=Yu(d,I,v,null),L.return=f,d.return=f,L.sibling=d,f.child=L,f.child.memoizedState=Ow(v),f.memoizedState=Mw,d):Fw(f,Q));if(A=d.memoizedState,A!==null&&(ue=A.dehydrated,ue!==null))return FV(d,f,Q,I,ue,A,v);if(L){L=I.fallback,Q=f.mode,A=d.child,ue=A.sibling;var me={mode:"hidden",children:I.children};return!(Q&1)&&f.child!==A?(I=f.child,I.childLanes=0,I.pendingProps=me,f.deletions=null):(I=Fc(A,me),I.subtreeFlags=A.subtreeFlags&14680064),ue!==null?L=Fc(ue,L):(L=Yu(L,Q,v,null),L.flags|=2),L.return=f,I.return=f,I.sibling=L,f.child=I,I=L,L=f.child,Q=d.child.memoizedState,Q=Q===null?Ow(v):{baseLanes:Q.baseLanes|v,cachePool:null,transitions:Q.transitions},L.memoizedState=Q,L.childLanes=d.childLanes&~v,f.memoizedState=Mw,I}return L=d.child,d=L.sibling,I=Fc(L,{mode:"visible",children:I.children}),!(f.mode&1)&&(I.lanes=v),I.return=f,I.sibling=null,d!==null&&(v=f.deletions,v===null?(f.deletions=[d],f.flags|=16):v.push(d)),f.child=I,f.memoizedState=null,I}function Fw(d,f){return f=hy({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function J1(d,f,v,I){return I!==null&&ms(I),Rn(f,d.child,null,v),d=Fw(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function FV(d,f,v,I,A,L,Q){if(v)return f.flags&256?(f.flags&=-257,I=Rw(Error(n(422))),J1(d,f,Q,I)):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(L=I.fallback,A=f.mode,I=hy({mode:"visible",children:I.children},A,0,null),L=Yu(L,A,Q,null),L.flags|=2,I.return=f,L.return=f,I.sibling=L,f.child=I,f.mode&1&&Rn(f,d.child,null,Q),f.child.memoizedState=Ow(Q),f.memoizedState=Mw,L);if(!(f.mode&1))return J1(d,f,Q,null);if(A.data==="$!"){if(I=A.nextSibling&&A.nextSibling.dataset,I)var ue=I.dgst;return I=ue,L=Error(n(419)),I=Rw(L,I,void 0),J1(d,f,Q,I)}if(ue=(Q&d.childLanes)!==0,Oo||ue){if(I=Es,I!==null){switch(Q&-Q){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(I.suspendedLanes|Q)?0:A,A!==0&&A!==L.retryLane&&(L.retryLane=A,Ll(d,A),pa(I,d,A,-1))}return Qw(),I=Rw(Error(n(421))),J1(d,f,Q,I)}return A.data==="$?"?(f.flags|=128,f.child=d.child,f=XV.bind(null,d),A._reactRetry=f,null):(d=L.treeContext,ve=Al(A.nextSibling),fe=f,Ce=!0,Pe=null,d!==null&&(b[y++]=N,b[y++]=P,b[y++]=C,N=d.id,P=d.overflow,C=f),f=Fw(f,I.children),f.flags|=4096,f)}function dT(d,f,v){d.lanes|=f;var I=d.alternate;I!==null&&(I.lanes|=f),qp(d.return,f,v)}function zw(d,f,v,I,A){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:I,tail:v,tailMode:A}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=I,L.tail=v,L.tailMode=A)}function hT(d,f,v){var I=f.pendingProps,A=I.revealOrder,L=I.tail;if(So(d,f,I.children,v),I=Tr.current,I&2)I=I&1|2,f.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&dT(d,v,f);else if(d.tag===19)dT(d,v,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}I&=1}if(_n(Tr,I),!(f.mode&1))f.memoizedState=null;else switch(A){case"forwards":for(v=f.child,A=null;v!==null;)d=v.alternate,d!==null&&G1(d)===null&&(A=v),v=v.sibling;v=A,v===null?(A=f.child,f.child=null):(A=v.sibling,v.sibling=null),zw(f,!1,A,v,L);break;case"backwards":for(v=null,A=f.child,f.child=null;A!==null;){if(d=A.alternate,d!==null&&G1(d)===null){f.child=A;break}d=A.sibling,A.sibling=v,v=A,A=d}zw(f,!0,v,null,L);break;case"together":zw(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ey(d,f){!(f.mode&1)&&d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2)}function Bl(d,f,v){if(d!==null&&(f.dependencies=d.dependencies),Gu|=f.lanes,!(v&f.childLanes))return null;if(d!==null&&f.child!==d.child)throw Error(n(153));if(f.child!==null){for(d=f.child,v=Fc(d,d.pendingProps),f.child=v,v.return=f;d.sibling!==null;)d=d.sibling,v=v.sibling=Fc(d,d.pendingProps),v.return=f;v.sibling=null}return f.child}function zV(d,f,v){switch(f.tag){case 3:lT(f),In();break;case 5:I7(f);break;case 1:ps(f.type)&&jp(f);break;case 4:gw(f,f.stateNode.containerInfo);break;case 10:var I=f.type._context,A=f.memoizedProps.value;_n(Qn,I._currentValue),I._currentValue=A;break;case 13:if(I=f.memoizedState,I!==null)return I.dehydrated!==null?(_n(Tr,Tr.current&1),f.flags|=128,null):v&f.child.childLanes?uT(d,f,v):(_n(Tr,Tr.current&1),d=Bl(d,f,v),d!==null?d.sibling:null);_n(Tr,Tr.current&1);break;case 19:if(I=(v&f.childLanes)!==0,d.flags&128){if(I)return hT(d,f,v);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),_n(Tr,Tr.current),I)break;return null;case 22:case 23:return f.lanes=0,oT(d,f,v)}return Bl(d,f,v)}var fT,Lw,pT,mT;fT=function(d,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Lw=function(){},pT=function(d,f,v,I){var A=d.memoizedProps;if(A!==I){d=f.stateNode,Uu(za.current);var L=null;switch(v){case"input":A=ft(d,A),I=ft(d,I),L=[];break;case"select":A=se({},A,{value:void 0}),I=se({},I,{value:void 0}),L=[];break;case"textarea":A=Qe(d,A),I=Qe(d,I),L=[];break;default:typeof A.onClick!="function"&&typeof I.onClick=="function"&&(d.onclick=bh)}Qt(v,I);var Q;v=null;for(Le in A)if(!I.hasOwnProperty(Le)&&A.hasOwnProperty(Le)&&A[Le]!=null)if(Le==="style"){var ue=A[Le];for(Q in ue)ue.hasOwnProperty(Q)&&(v||(v={}),v[Q]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(s.hasOwnProperty(Le)?L||(L=[]):(L=L||[]).push(Le,null));for(Le in I){var me=I[Le];if(ue=A!=null?A[Le]:void 0,I.hasOwnProperty(Le)&&me!==ue&&(me!=null||ue!=null))if(Le==="style")if(ue){for(Q in ue)!ue.hasOwnProperty(Q)||me&&me.hasOwnProperty(Q)||(v||(v={}),v[Q]="");for(Q in me)me.hasOwnProperty(Q)&&ue[Q]!==me[Q]&&(v||(v={}),v[Q]=me[Q])}else v||(L||(L=[]),L.push(Le,v)),v=me;else Le==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,ue=ue?ue.__html:void 0,me!=null&&ue!==me&&(L=L||[]).push(Le,me)):Le==="children"?typeof me!="string"&&typeof me!="number"||(L=L||[]).push(Le,""+me):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(s.hasOwnProperty(Le)?(me!=null&&Le==="onScroll"&&Un("scroll",d),L||ue===me||(L=[])):(L=L||[]).push(Le,me))}v&&(L=L||[]).push("style",v);var Le=L;(f.updateQueue=Le)&&(f.flags|=4)}},mT=function(d,f,v,I){v!==I&&(f.flags|=4)};function t0(d,f){if(!Ce)switch(d.tailMode){case"hidden":f=d.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?d.tail=null:v.sibling=null;break;case"collapsed":v=d.tail;for(var I=null;v!==null;)v.alternate!==null&&(I=v),v=v.sibling;I===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:I.sibling=null}}function io(d){var f=d.alternate!==null&&d.alternate.child===d.child,v=0,I=0;if(f)for(var A=d.child;A!==null;)v|=A.lanes|A.childLanes,I|=A.subtreeFlags&14680064,I|=A.flags&14680064,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)v|=A.lanes|A.childLanes,I|=A.subtreeFlags,I|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=I,d.childLanes=v,f}function LV(d,f,v){var I=f.pendingProps;switch(ie(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(f),null;case 1:return ps(f.type)&&Nc(),io(f),null;case 3:return I=f.stateNode,Nh(),Gn(Ws),Gn(fs),xw(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(d===null||d.child===null)&&(dn(f)?f.flags|=4:d===null||d.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Pe!==null&&(Xw(Pe),Pe=null))),Lw(d,f),io(f),null;case 5:yw(f);var A=Uu(Yp.current);if(v=f.type,d!==null&&f.stateNode!=null)pT(d,f,v,I,A),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!I){if(f.stateNode===null)throw Error(n(166));return io(f),null}if(d=Uu(za.current),dn(f)){I=f.stateNode,v=f.type;var L=f.memoizedProps;switch(I[$i]=f,I[_u]=L,d=(f.mode&1)!==0,v){case"dialog":Un("cancel",I),Un("close",I);break;case"iframe":case"object":case"embed":Un("load",I);break;case"video":case"audio":for(A=0;A<Sc.length;A++)Un(Sc[A],I);break;case"source":Un("error",I);break;case"img":case"image":case"link":Un("error",I),Un("load",I);break;case"details":Un("toggle",I);break;case"input":ct(I,L),Un("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!L.multiple},Un("invalid",I);break;case"textarea":qt(I,L),Un("invalid",I)}Qt(v,L),A=null;for(var Q in L)if(L.hasOwnProperty(Q)){var ue=L[Q];Q==="children"?typeof ue=="string"?I.textContent!==ue&&(L.suppressHydrationWarning!==!0&&Fu(I.textContent,ue,d),A=["children",ue]):typeof ue=="number"&&I.textContent!==""+ue&&(L.suppressHydrationWarning!==!0&&Fu(I.textContent,ue,d),A=["children",""+ue]):s.hasOwnProperty(Q)&&ue!=null&&Q==="onScroll"&&Un("scroll",I)}switch(v){case"input":Xe(I),Ke(I,L,!0);break;case"textarea":Xe(I),en(I);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(I.onclick=bh)}I=A,f.updateQueue=I,I!==null&&(f.flags|=4)}else{Q=A.nodeType===9?A:A.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=yn(v)),d==="http://www.w3.org/1999/xhtml"?v==="script"?(d=Q.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof I.is=="string"?d=Q.createElement(v,{is:I.is}):(d=Q.createElement(v),v==="select"&&(Q=d,I.multiple?Q.multiple=!0:I.size&&(Q.size=I.size))):d=Q.createElementNS(d,v),d[$i]=f,d[_u]=I,fT(d,f,!1,!1),f.stateNode=d;e:{switch(Q=zn(v,I),v){case"dialog":Un("cancel",d),Un("close",d),A=I;break;case"iframe":case"object":case"embed":Un("load",d),A=I;break;case"video":case"audio":for(A=0;A<Sc.length;A++)Un(Sc[A],d);A=I;break;case"source":Un("error",d),A=I;break;case"img":case"image":case"link":Un("error",d),Un("load",d),A=I;break;case"details":Un("toggle",d),A=I;break;case"input":ct(d,I),A=ft(d,I),Un("invalid",d);break;case"option":A=I;break;case"select":d._wrapperState={wasMultiple:!!I.multiple},A=se({},I,{value:void 0}),Un("invalid",d);break;case"textarea":qt(d,I),A=Qe(d,I),Un("invalid",d);break;default:A=I}Qt(v,A),ue=A;for(L in ue)if(ue.hasOwnProperty(L)){var me=ue[L];L==="style"?tn(d,me):L==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&At(d,me)):L==="children"?typeof me=="string"?(v!=="textarea"||me!=="")&&bn(d,me):typeof me=="number"&&bn(d,""+me):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?me!=null&&L==="onScroll"&&Un("scroll",d):me!=null&&$(d,L,me,Q))}switch(v){case"input":Xe(d),Ke(d,I,!1);break;case"textarea":Xe(d),en(d);break;case"option":I.value!=null&&d.setAttribute("value",""+Te(I.value));break;case"select":d.multiple=!!I.multiple,L=I.value,L!=null?kt(d,!!I.multiple,L,!1):I.defaultValue!=null&&kt(d,!!I.multiple,I.defaultValue,!0);break;default:typeof A.onClick=="function"&&(d.onclick=bh)}switch(v){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return io(f),null;case 6:if(d&&f.stateNode!=null)mT(d,f,d.memoizedProps,I);else{if(typeof I!="string"&&f.stateNode===null)throw Error(n(166));if(v=Uu(Yp.current),Uu(za.current),dn(f)){if(I=f.stateNode,v=f.memoizedProps,I[$i]=f,(L=I.nodeValue!==v)&&(d=fe,d!==null))switch(d.tag){case 3:Fu(I.nodeValue,v,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Fu(I.nodeValue,v,(d.mode&1)!==0)}L&&(f.flags|=4)}else I=(v.nodeType===9?v:v.ownerDocument).createTextNode(I),I[$i]=f,f.stateNode=I}return io(f),null;case 13:if(Gn(Tr),I=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Ce&&ve!==null&&f.mode&1&&!(f.flags&128))Sn(),In(),f.flags|=98560,L=!1;else if(L=dn(f),I!==null&&I.dehydrated!==null){if(d===null){if(!L)throw Error(n(318));if(L=f.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[$i]=f}else In(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;io(f),L=!1}else Pe!==null&&(Xw(Pe),Pe=null),L=!0;if(!L)return f.flags&65536?f:null}return f.flags&128?(f.lanes=v,f):(I=I!==null,I!==(d!==null&&d.memoizedState!==null)&&I&&(f.child.flags|=8192,f.mode&1&&(d===null||Tr.current&1?bs===0&&(bs=3):Qw())),f.updateQueue!==null&&(f.flags|=4),io(f),null);case 4:return Nh(),Lw(d,f),d===null&&Tc(f.stateNode.containerInfo),io(f),null;case 10:return $h(f.type._context),io(f),null;case 17:return ps(f.type)&&Nc(),io(f),null;case 19:if(Gn(Tr),L=f.memoizedState,L===null)return io(f),null;if(I=(f.flags&128)!==0,Q=L.rendering,Q===null)if(I)t0(L,!1);else{if(bs!==0||d!==null&&d.flags&128)for(d=f.child;d!==null;){if(Q=G1(d),Q!==null){for(f.flags|=128,t0(L,!1),I=Q.updateQueue,I!==null&&(f.updateQueue=I,f.flags|=4),f.subtreeFlags=0,I=v,v=f.child;v!==null;)L=v,d=I,L.flags&=14680066,Q=L.alternate,Q===null?(L.childLanes=0,L.lanes=d,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Q.childLanes,L.lanes=Q.lanes,L.child=Q.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Q.memoizedProps,L.memoizedState=Q.memoizedState,L.updateQueue=Q.updateQueue,L.type=Q.type,d=Q.dependencies,L.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),v=v.sibling;return _n(Tr,Tr.current&1|2),f.child}d=d.sibling}L.tail!==null&&ar()>Dh&&(f.flags|=128,I=!0,t0(L,!1),f.lanes=4194304)}else{if(!I)if(d=G1(Q),d!==null){if(f.flags|=128,I=!0,v=d.updateQueue,v!==null&&(f.updateQueue=v,f.flags|=4),t0(L,!0),L.tail===null&&L.tailMode==="hidden"&&!Q.alternate&&!Ce)return io(f),null}else 2*ar()-L.renderingStartTime>Dh&&v!==1073741824&&(f.flags|=128,I=!0,t0(L,!1),f.lanes=4194304);L.isBackwards?(Q.sibling=f.child,f.child=Q):(v=L.last,v!==null?v.sibling=Q:f.child=Q,L.last=Q)}return L.tail!==null?(f=L.tail,L.rendering=f,L.tail=f.sibling,L.renderingStartTime=ar(),f.sibling=null,v=Tr.current,_n(Tr,I?v&1|2:v&1),f):(io(f),null);case 22:case 23:return Zw(),I=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==I&&(f.flags|=8192),I&&f.mode&1?oi&1073741824&&(io(f),f.subtreeFlags&6&&(f.flags|=8192)):io(f),null;case 24:return null;case 25:return null}throw Error(n(156,f.tag))}function _V(d,f){switch(ie(f),f.tag){case 1:return ps(f.type)&&Nc(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Nh(),Gn(Ws),Gn(fs),xw(),d=f.flags,d&65536&&!(d&128)?(f.flags=d&-65537|128,f):null;case 5:return yw(f),null;case 13:if(Gn(Tr),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(n(340));In()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return Gn(Tr),null;case 4:return Nh(),null;case 10:return $h(f.type._context),null;case 22:case 23:return Zw(),null;case 24:return null;default:return null}}var ty=!1,ao=!1,BV=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Rh(d,f){var v=d.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(I){Pr(d,f,I)}else v.current=null}function _w(d,f,v){try{v()}catch(I){Pr(d,f,I)}}var gT=!1;function VV(d,f){if(xh=Pa,d=hh(),Pu(d)){if("selectionStart"in d)var v={start:d.selectionStart,end:d.selectionEnd};else e:{v=(v=d.ownerDocument)&&v.defaultView||window;var I=v.getSelection&&v.getSelection();if(I&&I.rangeCount!==0){v=I.anchorNode;var A=I.anchorOffset,L=I.focusNode;I=I.focusOffset;try{v.nodeType,L.nodeType}catch{v=null;break e}var Q=0,ue=-1,me=-1,Le=0,tt=0,ot=d,et=null;t:for(;;){for(var xt;ot!==v||A!==0&&ot.nodeType!==3||(ue=Q+A),ot!==L||I!==0&&ot.nodeType!==3||(me=Q+I),ot.nodeType===3&&(Q+=ot.nodeValue.length),(xt=ot.firstChild)!==null;)et=ot,ot=xt;for(;;){if(ot===d)break t;if(et===v&&++Le===A&&(ue=Q),et===L&&++tt===I&&(me=Q),(xt=ot.nextSibling)!==null)break;ot=et,et=ot.parentNode}ot=xt}v=ue===-1||me===-1?null:{start:ue,end:me}}else v=null}v=v||{start:0,end:0}}else v=null;for(zu={focusedElem:d,selectionRange:v},Pa=!1,vt=f;vt!==null;)if(f=vt,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,vt=d;else for(;vt!==null;){f=vt;try{var Tt=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var Nt=Tt.memoizedProps,Hr=Tt.memoizedState,Re=f.stateNode,ke=Re.getSnapshotBeforeUpdate(f.elementType===f.type?Nt:da(f.type,Nt),Hr);Re.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Me=f.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(lt){Pr(f,f.return,lt)}if(d=f.sibling,d!==null){d.return=f.return,vt=d;break}vt=f.return}return Tt=gT,gT=!1,Tt}function n0(d,f,v){var I=f.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var A=I=I.next;do{if((A.tag&d)===d){var L=A.destroy;A.destroy=void 0,L!==void 0&&_w(f,v,L)}A=A.next}while(A!==I)}}function ny(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&d)===d){var I=v.create;v.destroy=I()}v=v.next}while(v!==f)}}function Bw(d){var f=d.ref;if(f!==null){var v=d.stateNode;switch(d.tag){case 5:d=v;break;default:d=v}typeof f=="function"?f(d):f.current=d}}function yT(d){var f=d.alternate;f!==null&&(d.alternate=null,yT(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&(delete f[$i],delete f[_u],delete f[zp],delete f[Lp],delete f[fw])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function bT(d){return d.tag===5||d.tag===3||d.tag===4}function xT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||bT(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Vw(d,f,v){var I=d.tag;if(I===5||I===6)d=d.stateNode,f?v.nodeType===8?v.parentNode.insertBefore(d,f):v.insertBefore(d,f):(v.nodeType===8?(f=v.parentNode,f.insertBefore(d,v)):(f=v,f.appendChild(d)),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=bh));else if(I!==4&&(d=d.child,d!==null))for(Vw(d,f,v),d=d.sibling;d!==null;)Vw(d,f,v),d=d.sibling}function jw(d,f,v){var I=d.tag;if(I===5||I===6)d=d.stateNode,f?v.insertBefore(d,f):v.appendChild(d);else if(I!==4&&(d=d.child,d!==null))for(jw(d,f,v),d=d.sibling;d!==null;)jw(d,f,v),d=d.sibling}var Us=null,ha=!1;function Ac(d,f,v){for(v=v.child;v!==null;)vT(d,f,v),v=v.sibling}function vT(d,f,v){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(_s,v)}catch{}switch(v.tag){case 5:ao||Rh(v,f);case 6:var I=Us,A=ha;Us=null,Ac(d,f,v),Us=I,ha=A,Us!==null&&(ha?(d=Us,v=v.stateNode,d.nodeType===8?d.parentNode.removeChild(v):d.removeChild(v)):Us.removeChild(v.stateNode));break;case 18:Us!==null&&(ha?(d=Us,v=v.stateNode,d.nodeType===8?wh(d.parentNode,v):d.nodeType===1&&wh(d,v),kl(d)):wh(Us,v.stateNode));break;case 4:I=Us,A=ha,Us=v.stateNode.containerInfo,ha=!0,Ac(d,f,v),Us=I,ha=A;break;case 0:case 11:case 14:case 15:if(!ao&&(I=v.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){A=I=I.next;do{var L=A,Q=L.destroy;L=L.tag,Q!==void 0&&(L&2||L&4)&&_w(v,f,Q),A=A.next}while(A!==I)}Ac(d,f,v);break;case 1:if(!ao&&(Rh(v,f),I=v.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=v.memoizedProps,I.state=v.memoizedState,I.componentWillUnmount()}catch(ue){Pr(v,f,ue)}Ac(d,f,v);break;case 21:Ac(d,f,v);break;case 22:v.mode&1?(ao=(I=ao)||v.memoizedState!==null,Ac(d,f,v),ao=I):Ac(d,f,v);break;default:Ac(d,f,v)}}function wT(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var v=d.stateNode;v===null&&(v=d.stateNode=new BV),f.forEach(function(I){var A=YV.bind(null,d,I);v.has(I)||(v.add(I),I.then(A,A))})}}function fa(d,f){var v=f.deletions;if(v!==null)for(var I=0;I<v.length;I++){var A=v[I];try{var L=d,Q=f,ue=Q;e:for(;ue!==null;){switch(ue.tag){case 5:Us=ue.stateNode,ha=!1;break e;case 3:Us=ue.stateNode.containerInfo,ha=!0;break e;case 4:Us=ue.stateNode.containerInfo,ha=!0;break e}ue=ue.return}if(Us===null)throw Error(n(160));vT(L,Q,A),Us=null,ha=!1;var me=A.alternate;me!==null&&(me.return=null),A.return=null}catch(Le){Pr(A,f,Le)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)kT(f,d),f=f.sibling}function kT(d,f){var v=d.alternate,I=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(fa(f,d),_a(d),I&4){try{n0(3,d,d.return),ny(3,d)}catch(Nt){Pr(d,d.return,Nt)}try{n0(5,d,d.return)}catch(Nt){Pr(d,d.return,Nt)}}break;case 1:fa(f,d),_a(d),I&512&&v!==null&&Rh(v,v.return);break;case 5:if(fa(f,d),_a(d),I&512&&v!==null&&Rh(v,v.return),d.flags&32){var A=d.stateNode;try{bn(A,"")}catch(Nt){Pr(d,d.return,Nt)}}if(I&4&&(A=d.stateNode,A!=null)){var L=d.memoizedProps,Q=v!==null?v.memoizedProps:L,ue=d.type,me=d.updateQueue;if(d.updateQueue=null,me!==null)try{ue==="input"&&L.type==="radio"&&L.name!=null&&Ze(A,L),zn(ue,Q);var Le=zn(ue,L);for(Q=0;Q<me.length;Q+=2){var tt=me[Q],ot=me[Q+1];tt==="style"?tn(A,ot):tt==="dangerouslySetInnerHTML"?At(A,ot):tt==="children"?bn(A,ot):$(A,tt,ot,Le)}switch(ue){case"input":rt(A,L);break;case"textarea":Wt(A,L);break;case"select":var et=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!L.multiple;var xt=L.value;xt!=null?kt(A,!!L.multiple,xt,!1):et!==!!L.multiple&&(L.defaultValue!=null?kt(A,!!L.multiple,L.defaultValue,!0):kt(A,!!L.multiple,L.multiple?[]:"",!1))}A[_u]=L}catch(Nt){Pr(d,d.return,Nt)}}break;case 6:if(fa(f,d),_a(d),I&4){if(d.stateNode===null)throw Error(n(162));A=d.stateNode,L=d.memoizedProps;try{A.nodeValue=L}catch(Nt){Pr(d,d.return,Nt)}}break;case 3:if(fa(f,d),_a(d),I&4&&v!==null&&v.memoizedState.isDehydrated)try{kl(f.containerInfo)}catch(Nt){Pr(d,d.return,Nt)}break;case 4:fa(f,d),_a(d);break;case 13:fa(f,d),_a(d),A=d.child,A.flags&8192&&(L=A.memoizedState!==null,A.stateNode.isHidden=L,!L||A.alternate!==null&&A.alternate.memoizedState!==null||(Hw=ar())),I&4&&wT(d);break;case 22:if(tt=v!==null&&v.memoizedState!==null,d.mode&1?(ao=(Le=ao)||tt,fa(f,d),ao=Le):fa(f,d),_a(d),I&8192){if(Le=d.memoizedState!==null,(d.stateNode.isHidden=Le)&&!tt&&d.mode&1)for(vt=d,tt=d.child;tt!==null;){for(ot=vt=tt;vt!==null;){switch(et=vt,xt=et.child,et.tag){case 0:case 11:case 14:case 15:n0(4,et,et.return);break;case 1:Rh(et,et.return);var Tt=et.stateNode;if(typeof Tt.componentWillUnmount=="function"){I=et,v=et.return;try{f=I,Tt.props=f.memoizedProps,Tt.state=f.memoizedState,Tt.componentWillUnmount()}catch(Nt){Pr(I,v,Nt)}}break;case 5:Rh(et,et.return);break;case 22:if(et.memoizedState!==null){TT(ot);continue}}xt!==null?(xt.return=et,vt=xt):TT(ot)}tt=tt.sibling}e:for(tt=null,ot=d;;){if(ot.tag===5){if(tt===null){tt=ot;try{A=ot.stateNode,Le?(L=A.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ue=ot.stateNode,me=ot.memoizedProps.style,Q=me!=null&&me.hasOwnProperty("display")?me.display:null,ue.style.display=yr("display",Q))}catch(Nt){Pr(d,d.return,Nt)}}}else if(ot.tag===6){if(tt===null)try{ot.stateNode.nodeValue=Le?"":ot.memoizedProps}catch(Nt){Pr(d,d.return,Nt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===d)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===d)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===d)break e;tt===ot&&(tt=null),ot=ot.return}tt===ot&&(tt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:fa(f,d),_a(d),I&4&&wT(d);break;case 21:break;default:fa(f,d),_a(d)}}function _a(d){var f=d.flags;if(f&2){try{e:{for(var v=d.return;v!==null;){if(bT(v)){var I=v;break e}v=v.return}throw Error(n(160))}switch(I.tag){case 5:var A=I.stateNode;I.flags&32&&(bn(A,""),I.flags&=-33);var L=xT(d);jw(d,L,A);break;case 3:case 4:var Q=I.stateNode.containerInfo,ue=xT(d);Vw(d,ue,Q);break;default:throw Error(n(161))}}catch(me){Pr(d,d.return,me)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function jV(d,f,v){vt=d,CT(d)}function CT(d,f,v){for(var I=(d.mode&1)!==0;vt!==null;){var A=vt,L=A.child;if(A.tag===22&&I){var Q=A.memoizedState!==null||ty;if(!Q){var ue=A.alternate,me=ue!==null&&ue.memoizedState!==null||ao;ue=ty;var Le=ao;if(ty=Q,(ao=me)&&!Le)for(vt=A;vt!==null;)Q=vt,me=Q.child,Q.tag===22&&Q.memoizedState!==null?IT(A):me!==null?(me.return=Q,vt=me):IT(A);for(;L!==null;)vt=L,CT(L),L=L.sibling;vt=A,ty=ue,ao=Le}ST(d)}else A.subtreeFlags&8772&&L!==null?(L.return=A,vt=L):ST(d)}}function ST(d){for(;vt!==null;){var f=vt;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:ao||ny(5,f);break;case 1:var I=f.stateNode;if(f.flags&4&&!ao)if(v===null)I.componentDidMount();else{var A=f.elementType===f.type?v.memoizedProps:da(f.type,v.memoizedProps);I.componentDidUpdate(A,v.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&T7(f,L,I);break;case 3:var Q=f.updateQueue;if(Q!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=f.child.stateNode;break;case 1:v=f.child.stateNode}T7(f,Q,v)}break;case 5:var ue=f.stateNode;if(v===null&&f.flags&4){v=ue;var me=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&v.focus();break;case"img":me.src&&(v.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Le=f.alternate;if(Le!==null){var tt=Le.memoizedState;if(tt!==null){var ot=tt.dehydrated;ot!==null&&kl(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ao||f.flags&512&&Bw(f)}catch(et){Pr(f,f.return,et)}}if(f===d){vt=null;break}if(v=f.sibling,v!==null){v.return=f.return,vt=v;break}vt=f.return}}function TT(d){for(;vt!==null;){var f=vt;if(f===d){vt=null;break}var v=f.sibling;if(v!==null){v.return=f.return,vt=v;break}vt=f.return}}function IT(d){for(;vt!==null;){var f=vt;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{ny(4,f)}catch(me){Pr(f,v,me)}break;case 1:var I=f.stateNode;if(typeof I.componentDidMount=="function"){var A=f.return;try{I.componentDidMount()}catch(me){Pr(f,A,me)}}var L=f.return;try{Bw(f)}catch(me){Pr(f,L,me)}break;case 5:var Q=f.return;try{Bw(f)}catch(me){Pr(f,Q,me)}}}catch(me){Pr(f,f.return,me)}if(f===d){vt=null;break}var ue=f.sibling;if(ue!==null){ue.return=f.return,vt=ue;break}vt=f.return}}var WV=Math.ceil,ry=T.ReactCurrentDispatcher,Ww=T.ReactCurrentOwner,Di=T.ReactCurrentBatchConfig,$n=0,Es=null,Jr=null,Hs=0,oi=0,Ah=Ni(0),bs=0,r0=null,Gu=0,sy=0,Uw=0,s0=null,Fo=null,Hw=0,Dh=1/0,Vl=null,oy=!1,Gw=null,Dc=null,iy=!1,Pc=null,ay=0,o0=0,qw=null,ly=-1,cy=0;function To(){return $n&6?ar():ly!==-1?ly:ly=ar()}function Mc(d){return d.mode&1?$n&2&&Hs!==0?Hs&-Hs:Ur.transition!==null?(cy===0&&(cy=d1()),cy):(d=Nn,d!==0||(d=window.event,d=d===void 0?16:ni(d.type)),d):1}function pa(d,f,v,I){if(50<o0)throw o0=0,qw=null,Error(n(185));$u(d,v,I),(!($n&2)||d!==Es)&&(d===Es&&(!($n&2)&&(sy|=v),bs===4&&Oc(d,Hs)),zo(d,I),v===1&&$n===0&&!(f.mode&1)&&(Dh=ar()+500,Ch&&zl()))}function zo(d,f){var v=d.callbackNode;Yv(d,f);var I=Iu(d,d===Es?Hs:0);if(I===0)v!==null&&br(v),d.callbackNode=null,d.callbackPriority=0;else if(f=I&-I,d.callbackPriority!==f){if(v!=null&&br(v),f===1)d.tag===0?Hp(NT.bind(null,d)):Up(NT.bind(null,d)),hw(function(){!($n&6)&&zl()}),v=null;else{switch(pp(I)){case 1:v=Zo;break;case 4:v=Ot;break;case 16:v=ki;break;case 536870912:v=cn;break;default:v=ki}v=FT(v,$T.bind(null,d))}d.callbackPriority=f,d.callbackNode=v}}function $T(d,f){if(ly=-1,cy=0,$n&6)throw Error(n(327));var v=d.callbackNode;if(Ph()&&d.callbackNode!==v)return null;var I=Iu(d,d===Es?Hs:0);if(I===0)return null;if(I&30||I&d.expiredLanes||f)f=uy(d,I);else{f=I;var A=$n;$n|=2;var L=RT();(Es!==d||Hs!==f)&&(Vl=null,Dh=ar()+500,Ku(d,f));do try{GV();break}catch(ue){ET(d,ue)}while(!0);Ih(),ry.current=L,$n=A,Jr!==null?f=0:(Es=null,Hs=0,f=bs)}if(f!==0){if(f===2&&(A=Qd(d),A!==0&&(I=A,f=Kw(d,A))),f===1)throw v=r0,Ku(d,0),Oc(d,I),zo(d,ar()),v;if(f===6)Oc(d,I);else{if(A=d.current.alternate,!(I&30)&&!UV(A)&&(f=uy(d,I),f===2&&(L=Qd(d),L!==0&&(I=L,f=Kw(d,L))),f===1))throw v=r0,Ku(d,0),Oc(d,I),zo(d,ar()),v;switch(d.finishedWork=A,d.finishedLanes=I,f){case 0:case 1:throw Error(n(345));case 2:Xu(d,Fo,Vl);break;case 3:if(Oc(d,I),(I&130023424)===I&&(f=Hw+500-ar(),10<f)){if(Iu(d,0)!==0)break;if(A=d.suspendedLanes,(A&I)!==I){To(),d.pingedLanes|=d.suspendedLanes&A;break}d.timeoutHandle=vh(Xu.bind(null,d,Fo,Vl),f);break}Xu(d,Fo,Vl);break;case 4:if(Oc(d,I),(I&4194240)===I)break;for(f=d.eventTimes,A=-1;0<I;){var Q=31-ko(I);L=1<<Q,Q=f[Q],Q>A&&(A=Q),I&=~L}if(I=A,I=ar()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*WV(I/1960))-I,10<I){d.timeoutHandle=vh(Xu.bind(null,d,Fo,Vl),I);break}Xu(d,Fo,Vl);break;case 5:Xu(d,Fo,Vl);break;default:throw Error(n(329))}}}return zo(d,ar()),d.callbackNode===v?$T.bind(null,d):null}function Kw(d,f){var v=s0;return d.current.memoizedState.isDehydrated&&(Ku(d,f).flags|=256),d=uy(d,f),d!==2&&(f=Fo,Fo=v,f!==null&&Xw(f)),d}function Xw(d){Fo===null?Fo=d:Fo.push.apply(Fo,d)}function UV(d){for(var f=d;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var I=0;I<v.length;I++){var A=v[I],L=A.getSnapshot;A=A.value;try{if(!Wr(L(),A))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Oc(d,f){for(f&=~Uw,f&=~sy,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var v=31-ko(f),I=1<<v;d[v]=-1,f&=~I}}function NT(d){if($n&6)throw Error(n(327));Ph();var f=Iu(d,0);if(!(f&1))return zo(d,ar()),null;var v=uy(d,f);if(d.tag!==0&&v===2){var I=Qd(d);I!==0&&(f=I,v=Kw(d,I))}if(v===1)throw v=r0,Ku(d,0),Oc(d,f),zo(d,ar()),v;if(v===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,Xu(d,Fo,Vl),zo(d,ar()),null}function Yw(d,f){var v=$n;$n|=1;try{return d(f)}finally{$n=v,$n===0&&(Dh=ar()+500,Ch&&zl())}}function qu(d){Pc!==null&&Pc.tag===0&&!($n&6)&&Ph();var f=$n;$n|=1;var v=Di.transition,I=Nn;try{if(Di.transition=null,Nn=1,d)return d()}finally{Nn=I,Di.transition=v,$n=f,!($n&6)&&zl()}}function Zw(){oi=Ah.current,Gn(Ah)}function Ku(d,f){d.finishedWork=null,d.finishedLanes=0;var v=d.timeoutHandle;if(v!==-1&&(d.timeoutHandle=-1,j1(v)),Jr!==null)for(v=Jr.return;v!==null;){var I=v;switch(ie(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Nc();break;case 3:Nh(),Gn(Ws),Gn(fs),xw();break;case 5:yw(I);break;case 4:Nh();break;case 13:Gn(Tr);break;case 19:Gn(Tr);break;case 10:$h(I.type._context);break;case 22:case 23:Zw()}v=v.return}if(Es=d,Jr=d=Fc(d.current,null),Hs=oi=f,bs=0,r0=null,Uw=sy=Gu=0,Fo=s0=null,Wu!==null){for(f=0;f<Wu.length;f++)if(v=Wu[f],I=v.interleaved,I!==null){v.interleaved=null;var A=I.next,L=v.pending;if(L!==null){var Q=L.next;L.next=A,I.next=Q}v.pending=I}Wu=null}return d}function ET(d,f){do{var v=Jr;try{if(Ih(),q1.current=Z1,K1){for(var I=Ir.memoizedState;I!==null;){var A=I.queue;A!==null&&(A.pending=null),I=I.next}K1=!1}if(Hu=0,Ns=ys=Ir=null,Zp=!1,Qp=0,Ww.current=null,v===null||v.return===null){bs=1,r0=f,Jr=null;break}e:{var L=d,Q=v.return,ue=v,me=f;if(f=Hs,ue.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Le=me,tt=ue,ot=tt.tag;if(!(tt.mode&1)&&(ot===0||ot===11||ot===15)){var et=tt.alternate;et?(tt.updateQueue=et.updateQueue,tt.memoizedState=et.memoizedState,tt.lanes=et.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var xt=eT(Q);if(xt!==null){xt.flags&=-257,tT(xt,Q,ue,L,f),xt.mode&1&&J7(L,Le,f),f=xt,me=Le;var Tt=f.updateQueue;if(Tt===null){var Nt=new Set;Nt.add(me),f.updateQueue=Nt}else Tt.add(me);break e}else{if(!(f&1)){J7(L,Le,f),Qw();break e}me=Error(n(426))}}else if(Ce&&ue.mode&1){var Hr=eT(Q);if(Hr!==null){!(Hr.flags&65536)&&(Hr.flags|=256),tT(Hr,Q,ue,L,f),ms(Eh(me,ue));break e}}L=me=Eh(me,ue),bs!==4&&(bs=2),s0===null?s0=[L]:s0.push(L),L=Q;do{switch(L.tag){case 3:L.flags|=65536,f&=-f,L.lanes|=f;var Re=Z7(L,me,f);S7(L,Re);break e;case 1:ue=me;var ke=L.type,Me=L.stateNode;if(!(L.flags&128)&&(typeof ke.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Dc===null||!Dc.has(Me)))){L.flags|=65536,f&=-f,L.lanes|=f;var lt=Q7(L,ue,f);S7(L,lt);break e}}L=L.return}while(L!==null)}DT(v)}catch(Rt){f=Rt,Jr===v&&v!==null&&(Jr=v=v.return);continue}break}while(!0)}function RT(){var d=ry.current;return ry.current=Z1,d===null?Z1:d}function Qw(){(bs===0||bs===3||bs===2)&&(bs=4),Es===null||!(Gu&268435455)&&!(sy&268435455)||Oc(Es,Hs)}function uy(d,f){var v=$n;$n|=2;var I=RT();(Es!==d||Hs!==f)&&(Vl=null,Ku(d,f));do try{HV();break}catch(A){ET(d,A)}while(!0);if(Ih(),$n=v,ry.current=I,Jr!==null)throw Error(n(261));return Es=null,Hs=0,bs}function HV(){for(;Jr!==null;)AT(Jr)}function GV(){for(;Jr!==null&&!ye();)AT(Jr)}function AT(d){var f=OT(d.alternate,d,oi);d.memoizedProps=d.pendingProps,f===null?DT(d):Jr=f,Ww.current=null}function DT(d){var f=d;do{var v=f.alternate;if(d=f.return,f.flags&32768){if(v=_V(v,f),v!==null){v.flags&=32767,Jr=v;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{bs=6,Jr=null;return}}else if(v=LV(v,f,oi),v!==null){Jr=v;return}if(f=f.sibling,f!==null){Jr=f;return}Jr=f=d}while(f!==null);bs===0&&(bs=5)}function Xu(d,f,v){var I=Nn,A=Di.transition;try{Di.transition=null,Nn=1,qV(d,f,v,I)}finally{Di.transition=A,Nn=I}return null}function qV(d,f,v,I){do Ph();while(Pc!==null);if($n&6)throw Error(n(327));v=d.finishedWork;var A=d.finishedLanes;if(v===null)return null;if(d.finishedWork=null,d.finishedLanes=0,v===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var L=v.lanes|v.childLanes;if(Zv(d,L),d===Es&&(Jr=Es=null,Hs=0),!(v.subtreeFlags&2064)&&!(v.flags&2064)||iy||(iy=!0,FT(ki,function(){return Ph(),null})),L=(v.flags&15990)!==0,v.subtreeFlags&15990||L){L=Di.transition,Di.transition=null;var Q=Nn;Nn=1;var ue=$n;$n|=4,Ww.current=null,VV(d,v),kT(v,d),z1(zu),Pa=!!xh,zu=xh=null,d.current=v,jV(v),hp(),$n=ue,Nn=Q,Di.transition=L}else d.current=v;if(iy&&(iy=!1,Pc=d,ay=A),L=d.pendingLanes,L===0&&(Dc=null),ds(v.stateNode),zo(d,ar()),f!==null)for(I=d.onRecoverableError,v=0;v<f.length;v++)A=f[v],I(A.value,{componentStack:A.stack,digest:A.digest});if(oy)throw oy=!1,d=Gw,Gw=null,d;return ay&1&&d.tag!==0&&Ph(),L=d.pendingLanes,L&1?d===qw?o0++:(o0=0,qw=d):o0=0,zl(),null}function Ph(){if(Pc!==null){var d=pp(ay),f=Di.transition,v=Nn;try{if(Di.transition=null,Nn=16>d?16:d,Pc===null)var I=!1;else{if(d=Pc,Pc=null,ay=0,$n&6)throw Error(n(331));var A=$n;for($n|=4,vt=d.current;vt!==null;){var L=vt,Q=L.child;if(vt.flags&16){var ue=L.deletions;if(ue!==null){for(var me=0;me<ue.length;me++){var Le=ue[me];for(vt=Le;vt!==null;){var tt=vt;switch(tt.tag){case 0:case 11:case 15:n0(8,tt,L)}var ot=tt.child;if(ot!==null)ot.return=tt,vt=ot;else for(;vt!==null;){tt=vt;var et=tt.sibling,xt=tt.return;if(yT(tt),tt===Le){vt=null;break}if(et!==null){et.return=xt,vt=et;break}vt=xt}}}var Tt=L.alternate;if(Tt!==null){var Nt=Tt.child;if(Nt!==null){Tt.child=null;do{var Hr=Nt.sibling;Nt.sibling=null,Nt=Hr}while(Nt!==null)}}vt=L}}if(L.subtreeFlags&2064&&Q!==null)Q.return=L,vt=Q;else e:for(;vt!==null;){if(L=vt,L.flags&2048)switch(L.tag){case 0:case 11:case 15:n0(9,L,L.return)}var Re=L.sibling;if(Re!==null){Re.return=L.return,vt=Re;break e}vt=L.return}}var ke=d.current;for(vt=ke;vt!==null;){Q=vt;var Me=Q.child;if(Q.subtreeFlags&2064&&Me!==null)Me.return=Q,vt=Me;else e:for(Q=ke;vt!==null;){if(ue=vt,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:ny(9,ue)}}catch(Rt){Pr(ue,ue.return,Rt)}if(ue===Q){vt=null;break e}var lt=ue.sibling;if(lt!==null){lt.return=ue.return,vt=lt;break e}vt=ue.return}}if($n=A,zl(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(_s,d)}catch{}I=!0}return I}finally{Nn=v,Di.transition=f}}return!1}function PT(d,f,v){f=Eh(v,f),f=Z7(d,f,1),d=Rc(d,f,1),f=To(),d!==null&&($u(d,1,f),zo(d,f))}function Pr(d,f,v){if(d.tag===3)PT(d,d,v);else for(;f!==null;){if(f.tag===3){PT(f,d,v);break}else if(f.tag===1){var I=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Dc===null||!Dc.has(I))){d=Eh(v,d),d=Q7(f,d,1),f=Rc(f,d,1),d=To(),f!==null&&($u(f,1,d),zo(f,d));break}}f=f.return}}function KV(d,f,v){var I=d.pingCache;I!==null&&I.delete(f),f=To(),d.pingedLanes|=d.suspendedLanes&v,Es===d&&(Hs&v)===v&&(bs===4||bs===3&&(Hs&130023424)===Hs&&500>ar()-Hw?Ku(d,0):Uw|=v),zo(d,f)}function MT(d,f){f===0&&(d.mode&1?(f=gc,gc<<=1,!(gc&130023424)&&(gc=4194304)):f=1);var v=To();d=Ll(d,f),d!==null&&($u(d,f,v),zo(d,v))}function XV(d){var f=d.memoizedState,v=0;f!==null&&(v=f.retryLane),MT(d,v)}function YV(d,f){var v=0;switch(d.tag){case 13:var I=d.stateNode,A=d.memoizedState;A!==null&&(v=A.retryLane);break;case 19:I=d.stateNode;break;default:throw Error(n(314))}I!==null&&I.delete(f),MT(d,v)}var OT;OT=function(d,f,v){if(d!==null)if(d.memoizedProps!==f.pendingProps||Ws.current)Oo=!0;else{if(!(d.lanes&v)&&!(f.flags&128))return Oo=!1,zV(d,f,v);Oo=!!(d.flags&131072)}else Oo=!1,Ce&&f.flags&1048576&&H(f,Th,f.index);switch(f.lanes=0,f.tag){case 2:var I=f.type;ey(d,f),d=f.pendingProps;var A=Fl(f,fs.current);ua(f,v),A=kw(null,f,I,d,A,v);var L=Cw();return f.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,ps(I)?(L=!0,jp(f)):L=!1,f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,mw(f),A.updater=Q1,f.stateNode=A,A._reactInternals=f,Ew(f,I,d,v),f=Pw(null,f,I,!0,L,v)):(f.tag=0,Ce&&L&&ee(f),So(null,f,A,v),f=f.child),f;case 16:I=f.elementType;e:{switch(ey(d,f),d=f.pendingProps,A=I._init,I=A(I._payload),f.type=I,A=f.tag=QV(I),d=da(I,d),A){case 0:f=Dw(null,f,I,d,v);break e;case 1:f=aT(null,f,I,d,v);break e;case 11:f=nT(null,f,I,d,v);break e;case 14:f=rT(null,f,I,da(I.type,d),v);break e}throw Error(n(306,I,""))}return f;case 0:return I=f.type,A=f.pendingProps,A=f.elementType===I?A:da(I,A),Dw(d,f,I,A,v);case 1:return I=f.type,A=f.pendingProps,A=f.elementType===I?A:da(I,A),aT(d,f,I,A,v);case 3:e:{if(lT(f),d===null)throw Error(n(387));I=f.pendingProps,L=f.memoizedState,A=L.element,C7(d,f),H1(f,I,null,v);var Q=f.memoizedState;if(I=Q.element,L.isDehydrated)if(L={element:I,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){A=Eh(Error(n(423)),f),f=cT(d,f,I,v,A);break e}else if(I!==A){A=Eh(Error(n(424)),f),f=cT(d,f,I,v,A);break e}else for(ve=Al(f.stateNode.containerInfo.firstChild),fe=f,Ce=!0,Pe=null,v=Zn(f,null,I,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(In(),I===A){f=Bl(d,f,v);break e}So(d,f,I,v)}f=f.child}return f;case 5:return I7(f),d===null&&un(f),I=f.type,A=f.pendingProps,L=d!==null?d.memoizedProps:null,Q=A.children,Lu(I,A)?Q=null:L!==null&&Lu(I,L)&&(f.flags|=32),iT(d,f),So(d,f,Q,v),f.child;case 6:return d===null&&un(f),null;case 13:return uT(d,f,v);case 4:return gw(f,f.stateNode.containerInfo),I=f.pendingProps,d===null?f.child=Rn(f,null,I,v):So(d,f,I,v),f.child;case 11:return I=f.type,A=f.pendingProps,A=f.elementType===I?A:da(I,A),nT(d,f,I,A,v);case 7:return So(d,f,f.pendingProps,v),f.child;case 8:return So(d,f,f.pendingProps.children,v),f.child;case 12:return So(d,f,f.pendingProps.children,v),f.child;case 10:e:{if(I=f.type._context,A=f.pendingProps,L=f.memoizedProps,Q=A.value,_n(Qn,I._currentValue),I._currentValue=Q,L!==null)if(Wr(L.value,Q)){if(L.children===A.children&&!Ws.current){f=Bl(d,f,v);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var ue=L.dependencies;if(ue!==null){Q=L.child;for(var me=ue.firstContext;me!==null;){if(me.context===I){if(L.tag===1){me=_l(-1,v&-v),me.tag=2;var Le=L.updateQueue;if(Le!==null){Le=Le.shared;var tt=Le.pending;tt===null?me.next=me:(me.next=tt.next,tt.next=me),Le.pending=me}}L.lanes|=v,me=L.alternate,me!==null&&(me.lanes|=v),qp(L.return,v,f),ue.lanes|=v;break}me=me.next}}else if(L.tag===10)Q=L.type===f.type?null:L.child;else if(L.tag===18){if(Q=L.return,Q===null)throw Error(n(341));Q.lanes|=v,ue=Q.alternate,ue!==null&&(ue.lanes|=v),qp(Q,v,f),Q=L.sibling}else Q=L.child;if(Q!==null)Q.return=L;else for(Q=L;Q!==null;){if(Q===f){Q=null;break}if(L=Q.sibling,L!==null){L.return=Q.return,Q=L;break}Q=Q.return}L=Q}So(d,f,A.children,v),f=f.child}return f;case 9:return A=f.type,I=f.pendingProps.children,ua(f,v),A=Ri(A),I=I(A),f.flags|=1,So(d,f,I,v),f.child;case 14:return I=f.type,A=da(I,f.pendingProps),A=da(I.type,A),rT(d,f,I,A,v);case 15:return sT(d,f,f.type,f.pendingProps,v);case 17:return I=f.type,A=f.pendingProps,A=f.elementType===I?A:da(I,A),ey(d,f),f.tag=1,ps(I)?(d=!0,jp(f)):d=!1,ua(f,v),X7(f,I,A),Ew(f,I,A,v),Pw(null,f,I,!0,d,v);case 19:return hT(d,f,v);case 22:return oT(d,f,v)}throw Error(n(156,f.tag))};function FT(d,f){return ae(d,f)}function ZV(d,f,v,I){this.tag=d,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(d,f,v,I){return new ZV(d,f,v,I)}function Jw(d){return d=d.prototype,!(!d||!d.isReactComponent)}function QV(d){if(typeof d=="function")return Jw(d)?1:0;if(d!=null){if(d=d.$$typeof,d===U)return 11;if(d===Y)return 14}return 2}function Fc(d,f){var v=d.alternate;return v===null?(v=Pi(d.tag,f,d.key,d.mode),v.elementType=d.elementType,v.type=d.type,v.stateNode=d.stateNode,v.alternate=d,d.alternate=v):(v.pendingProps=f,v.type=d.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=d.flags&14680064,v.childLanes=d.childLanes,v.lanes=d.lanes,v.child=d.child,v.memoizedProps=d.memoizedProps,v.memoizedState=d.memoizedState,v.updateQueue=d.updateQueue,f=d.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=d.sibling,v.index=d.index,v.ref=d.ref,v}function dy(d,f,v,I,A,L){var Q=2;if(I=d,typeof d=="function")Jw(d)&&(Q=1);else if(typeof d=="string")Q=5;else e:switch(d){case V:return Yu(v.children,A,L,f);case j:Q=8,A|=8;break;case W:return d=Pi(12,v,f,A|2),d.elementType=W,d.lanes=L,d;case K:return d=Pi(13,v,f,A),d.elementType=K,d.lanes=L,d;case G:return d=Pi(19,v,f,A),d.elementType=G,d.lanes=L,d;case ne:return hy(v,A,L,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case R:Q=10;break e;case O:Q=9;break e;case U:Q=11;break e;case Y:Q=14;break e;case Z:Q=16,I=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return f=Pi(Q,v,f,A),f.elementType=d,f.type=I,f.lanes=L,f}function Yu(d,f,v,I){return d=Pi(7,d,I,f),d.lanes=v,d}function hy(d,f,v,I){return d=Pi(22,d,I,f),d.elementType=ne,d.lanes=v,d.stateNode={isHidden:!1},d}function e4(d,f,v){return d=Pi(6,d,null,f),d.lanes=v,d}function t4(d,f,v){return f=Pi(4,d.children!==null?d.children:[],d.key,f),f.lanes=v,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function JV(d,f,v,I,A){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fp(0),this.expirationTimes=fp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fp(0),this.identifierPrefix=I,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function n4(d,f,v,I,A,L,Q,ue,me){return d=new JV(d,f,v,ue,me),f===1?(f=1,L===!0&&(f|=8)):f=0,L=Pi(3,null,null,f),d.current=L,L.stateNode=d,L.memoizedState={element:I,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},mw(L),d}function ej(d,f,v){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:I==null?null:""+I,children:d,containerInfo:f,implementation:v}}function zT(d){if(!d)return la;d=d._reactInternals;e:{if(_e(d)!==d||d.tag!==1)throw Error(n(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(ps(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(n(171))}if(d.tag===1){var v=d.type;if(ps(v))return Bu(d,v,f)}return f}function LT(d,f,v,I,A,L,Q,ue,me){return d=n4(v,I,!0,d,A,L,Q,ue,me),d.context=zT(null),v=d.current,I=To(),A=Mc(v),L=_l(I,A),L.callback=f??null,Rc(v,L,A),d.current.lanes=A,$u(d,A,I),zo(d,I),d}function fy(d,f,v,I){var A=f.current,L=To(),Q=Mc(A);return v=zT(v),f.context===null?f.context=v:f.pendingContext=v,f=_l(L,Q),f.payload={element:d},I=I===void 0?null:I,I!==null&&(f.callback=I),d=Rc(A,f,Q),d!==null&&(pa(d,A,Q,L),U1(d,A,Q)),Q}function py(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function _T(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var v=d.retryLane;d.retryLane=v!==0&&v<f?v:f}}function r4(d,f){_T(d,f),(d=d.alternate)&&_T(d,f)}var BT=typeof reportError=="function"?reportError:function(d){console.error(d)};function s4(d){this._internalRoot=d}my.prototype.render=s4.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(n(409));fy(d,f,null,null)},my.prototype.unmount=s4.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;qu(function(){fy(null,d,null,null)}),f[aa]=null}};function my(d){this._internalRoot=d}my.prototype.unstable_scheduleHydration=function(d){if(d){var f=Aa();d={blockedOn:null,target:d,priority:f};for(var v=0;v<ti.length&&f!==0&&f<ti[v].priority;v++);ti.splice(v,0,d),v===0&&h1(d)}};function o4(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function gy(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function VT(){}function tj(d,f,v,I,A){if(A){if(typeof I=="function"){var L=I;I=function(){var Le=py(Q);L.call(Le)}}var Q=LT(f,I,d,0,null,!1,!1,"",VT);return d._reactRootContainer=Q,d[aa]=Q.current,Tc(d.nodeType===8?d.parentNode:d),qu(),Q}for(;A=d.lastChild;)d.removeChild(A);if(typeof I=="function"){var ue=I;I=function(){var Le=py(me);ue.call(Le)}}var me=n4(d,0,!1,null,null,!1,!1,"",VT);return d._reactRootContainer=me,d[aa]=me.current,Tc(d.nodeType===8?d.parentNode:d),qu(function(){fy(f,me,v,I)}),me}function yy(d,f,v,I,A){var L=v._reactRootContainer;if(L){var Q=L;if(typeof A=="function"){var ue=A;A=function(){var me=py(Q);ue.call(me)}}fy(f,Q,d,A)}else Q=tj(v,f,d,A,I);return py(Q)}Qv=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var v=Qr(f.pendingLanes);v!==0&&(yc(f,v|1),zo(f,ar()),!($n&6)&&(Dh=ar()+500,zl()))}break;case 13:qu(function(){var I=Ll(d,1);if(I!==null){var A=To();pa(I,d,1,A)}}),r4(d,1)}},Ae=function(d){if(d.tag===13){var f=Ll(d,134217728);if(f!==null){var v=To();pa(f,d,134217728,v)}r4(d,134217728)}},lr=function(d){if(d.tag===13){var f=Mc(d),v=Ll(d,f);if(v!==null){var I=To();pa(v,d,f,I)}r4(d,f)}},Aa=function(){return Nn},Ci=function(d,f){var v=Nn;try{return Nn=d,f()}finally{Nn=v}},cs=function(d,f,v){switch(f){case"input":if(rt(d,v),f=v.name,v.type==="radio"&&f!=null){for(v=d;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<v.length;f++){var I=v[f];if(I!==d&&I.form===d.form){var A=_p(I);if(!A)throw Error(n(90));Ge(I),rt(I,A)}}}break;case"textarea":Wt(d,v);break;case"select":f=v.value,f!=null&&kt(d,!!v.multiple,f,!1)}},no=Yw,Yo=qu;var nj={usingClientEntryPoint:!1,Events:[Ic,$c,_p,Rr,Is,Yw]},i0={findFiberByHostInstance:Pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rj={bundleType:i0.bundleType,version:i0.version,rendererPackageName:i0.rendererPackageName,rendererConfig:i0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Mt(d),d===null?null:d.stateNode},findFiberByHostInstance:i0.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var by=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!by.isDisabled&&by.supportsFiber)try{_s=by.inject(rj),xr=by}catch{}}return Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nj,Lo.createPortal=function(d,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o4(f))throw Error(n(200));return ej(d,f,null,v)},Lo.createRoot=function(d,f){if(!o4(d))throw Error(n(299));var v=!1,I="",A=BT;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(I=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),f=n4(d,1,!1,null,null,v,!1,I,A),d[aa]=f.current,Tc(d.nodeType===8?d.parentNode:d),new s4(f)},Lo.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Mt(f),d=d===null?null:d.stateNode,d},Lo.flushSync=function(d){return qu(d)},Lo.hydrate=function(d,f,v){if(!gy(f))throw Error(n(200));return yy(null,d,f,!0,v)},Lo.hydrateRoot=function(d,f,v){if(!o4(d))throw Error(n(405));var I=v!=null&&v.hydratedSources||null,A=!1,L="",Q=BT;if(v!=null&&(v.unstable_strictMode===!0&&(A=!0),v.identifierPrefix!==void 0&&(L=v.identifierPrefix),v.onRecoverableError!==void 0&&(Q=v.onRecoverableError)),f=LT(f,null,d,1,v??null,A,!1,L,Q),d[aa]=f.current,Tc(d),I)for(d=0;d<I.length;d++)v=I[d],A=v._getVersion,A=A(v._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[v,A]:f.mutableSourceEagerHydrationData.push(v,A);return new my(f)},Lo.render=function(d,f,v){if(!gy(f))throw Error(n(200));return yy(null,d,f,!1,v)},Lo.unmountComponentAtNode=function(d){if(!gy(d))throw Error(n(40));return d._reactRootContainer?(qu(function(){yy(null,null,d,!1,function(){d._reactRootContainer=null,d[aa]=null})}),!0):!1},Lo.unstable_batchedUpdates=Yw,Lo.unstable_renderSubtreeIntoContainer=function(d,f,v,I){if(!gy(v))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return yy(d,f,v,!1,I)},Lo.version="18.3.1-next-f1338f8080-20240426",Lo}var XT;function rR(){if(XT)return l4.exports;XT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),l4.exports=fj(),l4.exports}var YT;function pj(){if(YT)return xy;YT=1;var t=rR();return xy.createRoot=t.createRoot,xy.hydrateRoot=t.hydrateRoot,xy}var mj=pj();function gj({onNavigate:t}){return z.jsx("a",{href:"/",onClick:e=>{e.preventDefault(),t("/")},className:"text-xl font-bold text-logoTextColor",children:"MathPath"})}var d4={exports:{}},h4,ZT;function yj(){if(ZT)return h4;ZT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return h4=t,h4}var f4,QT;function bj(){if(QT)return f4;QT=1;var t=yj();function e(){}function n(){}return n.resetWarningCache=e,f4=function(){function r(i,a,l,c,u,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},f4}var JT;function xj(){return JT||(JT=1,d4.exports=bj()()),d4.exports}function sR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=sR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=sR(t))&&(r&&(r+=" "),r+=e);return r}function ur(t,e,n=void 0){const r={};for(const s in t){const o=t[s];let i="",a=!0;for(let l=0;l<o.length;l+=1){const c=o[l];c&&(i+=(a===!0?"":" ")+e(c),a=!1,n&&n[c]&&(i+=" "+n[c]))}r[s]=i}return r}let eI=0;function vj(t){const[e,n]=D.useState(t),r=t||e;return D.useEffect(()=>{e==null&&(eI+=1,n(`mui-${eI}`))},[e]),r}const wj={...Cb},tI=wj.useId;function Gk(t){if(tI!==void 0){const e=tI();return t??e}return vj(t)}function Jl(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function It(t){if(typeof t!="string")throw new Error(Jl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ka(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function oR(t){if(D.isValidElement(t)||!Ka(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=oR(t[n])}),e}function yo(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Ka(t)&&Ka(e)&&Object.keys(e).forEach(s=>{D.isValidElement(e[s])?r[s]=e[s]:Ka(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&Ka(t[s])?r[s]=yo(t[s],e[s],n):n.clone?r[s]=Ka(e[s])?oR(e[s]):e[s]:r[s]=e[s]}),r}function F0(t,e){return e?yo(t,e,{clone:!1}):t}function kj(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var i,a;const o=/min-width:\s*([0-9.]+)/;return+(((i=r.match(o))==null?void 0:i[1])||0)-+(((a=s.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,s)=>{const o=e[s];return delete r[s],r[s]=o,r},{...e}):e}function Cj(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Sj(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(o)}function Tj(t){const e=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function n(o,i){o.up=(...a)=>e(t.breakpoints.up(...a),i),o.down=(...a)=>e(t.breakpoints.down(...a),i),o.between=(...a)=>e(t.breakpoints.between(...a),i),o.only=(...a)=>e(t.breakpoints.only(...a),i),o.not=(...a)=>{const l=e(t.breakpoints.not(...a),i);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=o=>(n(r,o),r);return n(s),{...t,containerQueries:s}}const Px={xs:0,sm:600,md:900,lg:1200,xl:1536},nI={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Px[t]}px)`},Ij={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Px[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function ec(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||nI;return e.reduce((i,a,l)=>(i[o.up(o.keys[l])]=n(e[l]),i),{})}if(typeof e=="object"){const o=r.breakpoints||nI;return Object.keys(e).reduce((i,a)=>{if(Cj(o.keys,a)){const l=Sj(r.containerQueries?r:Ij,a);l&&(i[l]=n(e[a],a))}else if(Object.keys(o.values||Px).includes(a)){const l=o.up(a);i[l]=n(e[a],a)}else{const l=a;i[l]=e[l]}return i},{})}return n(e)}function $j(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,s)=>{const o=t.up(s);return r[o]={},r},{}))||{}}function Nj(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function Mx(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function Sb(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=Mx(t,n)||r,e&&(s=e(s,r,t)),s}function Zr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,o=i=>{if(i[e]==null)return null;const a=i[e],l=i.theme,c=Mx(l,r)||{};return ec(i,a,h=>{let p=Sb(c,s,h);return h===p&&typeof h=="string"&&(p=Sb(c,s,`${e}${h==="default"?"":It(h)}`,h)),n===!1?p:{[n]:p}})};return o.propTypes={},o.filterProps=[e],o}function Ej(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Rj={m:"margin",p:"padding"},Aj={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Dj=Ej(t=>{if(t.length>2)if(rI[t])t=rI[t];else return[t];const[e,n]=t.split(""),r=Rj[e],s=Aj[n]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),qk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Kk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...qk,...Kk];function $m(t,e,n,r){const s=Mx(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),a=s[i];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function Xk(t){return $m(t,"spacing",8)}function Nm(t,e){return typeof e=="string"||e==null?e:t(e)}function Pj(t,e){return n=>t.reduce((r,s)=>(r[s]=Nm(e,n),r),{})}function Mj(t,e,n,r){if(!e.includes(n))return null;const s=Dj(n),o=Pj(s,r),i=t[n];return ec(t,i,o)}function iR(t,e){const n=Xk(t.theme);return Object.keys(t).map(r=>Mj(t,e,r,n)).reduce(F0,{})}function Mr(t){return iR(t,qk)}Mr.propTypes={};Mr.filterProps=qk;function Or(t){return iR(t,Kk)}Or.propTypes={};Or.filterProps=Kk;function Ox(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),n=r=>Object.keys(r).reduce((s,o)=>e[o]?F0(s,e[o](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function Vi(t){return typeof t!="number"?t:`${t}px solid`}function Zi(t,e){return Zr({prop:t,themeKey:"borders",transform:e})}const Oj=Zi("border",Vi),Fj=Zi("borderTop",Vi),zj=Zi("borderRight",Vi),Lj=Zi("borderBottom",Vi),_j=Zi("borderLeft",Vi),Bj=Zi("borderColor"),Vj=Zi("borderTopColor"),jj=Zi("borderRightColor"),Wj=Zi("borderBottomColor"),Uj=Zi("borderLeftColor"),Hj=Zi("outline",Vi),Gj=Zi("outlineColor"),Fx=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=$m(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Nm(e,r)});return ec(t,t.borderRadius,n)}return null};Fx.propTypes={};Fx.filterProps=["borderRadius"];Ox(Oj,Fj,zj,Lj,_j,Bj,Vj,jj,Wj,Uj,Fx,Hj,Gj);const zx=t=>{if(t.gap!==void 0&&t.gap!==null){const e=$m(t.theme,"spacing",8),n=r=>({gap:Nm(e,r)});return ec(t,t.gap,n)}return null};zx.propTypes={};zx.filterProps=["gap"];const Lx=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=$m(t.theme,"spacing",8),n=r=>({columnGap:Nm(e,r)});return ec(t,t.columnGap,n)}return null};Lx.propTypes={};Lx.filterProps=["columnGap"];const _x=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=$m(t.theme,"spacing",8),n=r=>({rowGap:Nm(e,r)});return ec(t,t.rowGap,n)}return null};_x.propTypes={};_x.filterProps=["rowGap"];const qj=Zr({prop:"gridColumn"}),Kj=Zr({prop:"gridRow"}),Xj=Zr({prop:"gridAutoFlow"}),Yj=Zr({prop:"gridAutoColumns"}),Zj=Zr({prop:"gridAutoRows"}),Qj=Zr({prop:"gridTemplateColumns"}),Jj=Zr({prop:"gridTemplateRows"}),eW=Zr({prop:"gridTemplateAreas"}),tW=Zr({prop:"gridArea"});Ox(zx,Lx,_x,qj,Kj,Xj,Yj,Zj,Qj,Jj,eW,tW);function rf(t,e){return e==="grey"?e:t}const nW=Zr({prop:"color",themeKey:"palette",transform:rf}),rW=Zr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rf}),sW=Zr({prop:"backgroundColor",themeKey:"palette",transform:rf});Ox(nW,rW,sW);function li(t){return t<=1&&t!==0?`${t*100}%`:t}const oW=Zr({prop:"width",transform:li}),Yk=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var s,o,i,a,l;const r=((i=(o=(s=t.theme)==null?void 0:s.breakpoints)==null?void 0:o.values)==null?void 0:i[n])||Px[n];return r?((l=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:li(n)}};return ec(t,t.maxWidth,e)}return null};Yk.filterProps=["maxWidth"];const iW=Zr({prop:"minWidth",transform:li}),aW=Zr({prop:"height",transform:li}),lW=Zr({prop:"maxHeight",transform:li}),cW=Zr({prop:"minHeight",transform:li});Zr({prop:"size",cssProperty:"width",transform:li});Zr({prop:"size",cssProperty:"height",transform:li});const uW=Zr({prop:"boxSizing"});Ox(oW,Yk,iW,aW,lW,cW,uW);const Em={border:{themeKey:"borders",transform:Vi},borderTop:{themeKey:"borders",transform:Vi},borderRight:{themeKey:"borders",transform:Vi},borderBottom:{themeKey:"borders",transform:Vi},borderLeft:{themeKey:"borders",transform:Vi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Vi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Fx},color:{themeKey:"palette",transform:rf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rf},backgroundColor:{themeKey:"palette",transform:rf},p:{style:Or},pt:{style:Or},pr:{style:Or},pb:{style:Or},pl:{style:Or},px:{style:Or},py:{style:Or},padding:{style:Or},paddingTop:{style:Or},paddingRight:{style:Or},paddingBottom:{style:Or},paddingLeft:{style:Or},paddingX:{style:Or},paddingY:{style:Or},paddingInline:{style:Or},paddingInlineStart:{style:Or},paddingInlineEnd:{style:Or},paddingBlock:{style:Or},paddingBlockStart:{style:Or},paddingBlockEnd:{style:Or},m:{style:Mr},mt:{style:Mr},mr:{style:Mr},mb:{style:Mr},ml:{style:Mr},mx:{style:Mr},my:{style:Mr},margin:{style:Mr},marginTop:{style:Mr},marginRight:{style:Mr},marginBottom:{style:Mr},marginLeft:{style:Mr},marginX:{style:Mr},marginY:{style:Mr},marginInline:{style:Mr},marginInlineStart:{style:Mr},marginInlineEnd:{style:Mr},marginBlock:{style:Mr},marginBlockStart:{style:Mr},marginBlockEnd:{style:Mr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:zx},rowGap:{style:_x},columnGap:{style:Lx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:li},maxWidth:{style:Yk},minWidth:{transform:li},height:{transform:li},maxHeight:{transform:li},minHeight:{transform:li},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function dW(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function hW(t,e){return typeof t=="function"?t(e):t}function fW(){function t(n,r,s,o){const i={[n]:r,theme:s},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=Mx(s,c)||{};return h?h(i):ec(i,r,g=>{let x=Sb(p,u,g);return g===x&&typeof g=="string"&&(x=Sb(p,u,`${n}${g==="default"?"":It(g)}`,g)),l===!1?x:{[l]:x}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=s.unstable_sxConfig??Em;function i(a){let l=a;if(typeof a=="function")l=a(s);else if(typeof a!="object")return a;if(!l)return null;const c=$j(s.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(p=>{const m=hW(l[p],s);if(m!=null)if(typeof m=="object")if(o[p])h=F0(h,t(p,m,s,o));else{const g=ec({theme:s},m,x=>({[p]:x}));dW(g,m)?h[p]=e({sx:m,theme:s}):h=F0(h,g)}else h=F0(h,t(p,m,s,o))}),kj(s,Nj(u,h))}return Array.isArray(r)?r.map(i):i(r)}return e}const hf=fW();hf.filterProps=["sx"];const pW=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??Em;return Object.keys(t).forEach(s=>{n[s]?e.systemProps[s]=t[s]:e.otherProps[s]=t[s]}),e};function mW(t){const{sx:e,...n}=t,{systemProps:r,otherProps:s}=pW(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...i)=>{const a=e(...i);return Ka(a)?{...r,...a}:r}:o={...r,...e},{...s,sx:o}}function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tb.apply(null,arguments)}var gW=!1;function yW(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function bW(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var xW=function(){function t(n){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!gW:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bW(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=yW(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t}(),lo="-ms-",Ib="-moz-",On="-webkit-",aR="comm",Zk="rule",Qk="decl",vW="@import",lR="@keyframes",wW="@layer",kW=Math.abs,Bx=String.fromCharCode,CW=Object.assign;function SW(t,e){return Ks(t,0)^45?(((e<<2^Ks(t,0))<<2^Ks(t,1))<<2^Ks(t,2))<<2^Ks(t,3):0}function cR(t){return t.trim()}function TW(t,e){return(t=e.exec(t))?t[0]:t}function Fn(t,e,n){return t.replace(e,n)}function y3(t,e){return t.indexOf(e)}function Ks(t,e){return t.charCodeAt(e)|0}function Z0(t,e,n){return t.slice(e,n)}function Wa(t){return t.length}function Jk(t){return t.length}function vy(t,e){return e.push(t),t}function IW(t,e){return t.map(e).join("")}var Vx=1,ff=1,uR=0,Go=0,es=0,Bf="";function jx(t,e,n,r,s,o,i){return{value:t,root:e,parent:n,type:r,props:s,children:o,line:Vx,column:ff,length:i,return:""}}function c0(t,e){return CW(jx("",null,null,"",null,null,0),t,{length:-t.length},e)}function $W(){return es}function NW(){return es=Go>0?Ks(Bf,--Go):0,ff--,es===10&&(ff=1,Vx--),es}function hi(){return es=Go<uR?Ks(Bf,Go++):0,ff++,es===10&&(ff=1,Vx++),es}function Za(){return Ks(Bf,Go)}function Jy(){return Go}function Rm(t,e){return Z0(Bf,t,e)}function Q0(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dR(t){return Vx=ff=1,uR=Wa(Bf=t),Go=0,[]}function hR(t){return Bf="",t}function eb(t){return cR(Rm(Go-1,b3(t===91?t+2:t===40?t+1:t)))}function EW(t){for(;(es=Za())&&es<33;)hi();return Q0(t)>2||Q0(es)>3?"":" "}function RW(t,e){for(;--e&&hi()&&!(es<48||es>102||es>57&&es<65||es>70&&es<97););return Rm(t,Jy()+(e<6&&Za()==32&&hi()==32))}function b3(t){for(;hi();)switch(es){case t:return Go;case 34:case 39:t!==34&&t!==39&&b3(es);break;case 40:t===41&&b3(t);break;case 92:hi();break}return Go}function AW(t,e){for(;hi()&&t+es!==57;)if(t+es===84&&Za()===47)break;return"/*"+Rm(e,Go-1)+"*"+Bx(t===47?t:hi())}function DW(t){for(;!Q0(Za());)hi();return Rm(t,Go)}function PW(t){return hR(tb("",null,null,null,[""],t=dR(t),0,[0],t))}function tb(t,e,n,r,s,o,i,a,l){for(var c=0,u=0,h=i,p=0,m=0,g=0,x=1,w=1,k=1,S=0,$="",T=s,E=o,F=r,V=$;w;)switch(g=S,S=hi()){case 40:if(g!=108&&Ks(V,h-1)==58){y3(V+=Fn(eb(S),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:V+=eb(S);break;case 9:case 10:case 13:case 32:V+=EW(g);break;case 92:V+=RW(Jy()-1,7);continue;case 47:switch(Za()){case 42:case 47:vy(MW(AW(hi(),Jy()),e,n),l);break;default:V+="/"}break;case 123*x:a[c++]=Wa(V)*k;case 125*x:case 59:case 0:switch(S){case 0:case 125:w=0;case 59+u:k==-1&&(V=Fn(V,/\f/g,"")),m>0&&Wa(V)-h&&vy(m>32?oI(V+";",r,n,h-1):oI(Fn(V," ","")+";",r,n,h-2),l);break;case 59:V+=";";default:if(vy(F=sI(V,e,n,c,u,s,a,$,T=[],E=[],h),o),S===123)if(u===0)tb(V,e,F,F,T,o,h,a,E);else switch(p===99&&Ks(V,3)===110?100:p){case 100:case 108:case 109:case 115:tb(t,F,F,r&&vy(sI(t,F,F,0,0,s,a,$,s,T=[],h),E),s,E,h,a,r?T:E);break;default:tb(V,F,F,F,[""],E,0,a,E)}}c=u=m=0,x=k=1,$=V="",h=i;break;case 58:h=1+Wa(V),m=g;default:if(x<1){if(S==123)--x;else if(S==125&&x++==0&&NW()==125)continue}switch(V+=Bx(S),S*x){case 38:k=u>0?1:(V+="\f",-1);break;case 44:a[c++]=(Wa(V)-1)*k,k=1;break;case 64:Za()===45&&(V+=eb(hi())),p=Za(),u=h=Wa($=V+=DW(Jy())),S++;break;case 45:g===45&&Wa(V)==2&&(x=0)}}return o}function sI(t,e,n,r,s,o,i,a,l,c,u){for(var h=s-1,p=s===0?o:[""],m=Jk(p),g=0,x=0,w=0;g<r;++g)for(var k=0,S=Z0(t,h+1,h=kW(x=i[g])),$=t;k<m;++k)($=cR(x>0?p[k]+" "+S:Fn(S,/&\f/g,p[k])))&&(l[w++]=$);return jx(t,e,n,s===0?Zk:a,l,c,u)}function MW(t,e,n){return jx(t,e,n,aR,Bx($W()),Z0(t,2,-2),0)}function oI(t,e,n,r){return jx(t,e,n,Qk,Z0(t,0,r),Z0(t,r+1,-1),r)}function sf(t,e){for(var n="",r=Jk(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function OW(t,e,n,r){switch(t.type){case wW:if(t.children.length)break;case vW:case Qk:return t.return=t.return||t.value;case aR:return"";case lR:return t.return=t.value+"{"+sf(t.children,r)+"}";case Zk:t.value=t.props.join(",")}return Wa(n=sf(t.children,r))?t.return=t.value+"{"+n+"}":""}function FW(t){var e=Jk(t);return function(n,r,s,o){for(var i="",a=0;a<e;a++)i+=t[a](n,r,s,o)||"";return i}}function zW(t){return function(e){e.root||(e=e.return)&&t(e)}}function fR(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var LW=function(e,n,r){for(var s=0,o=0;s=o,o=Za(),s===38&&o===12&&(n[r]=1),!Q0(o);)hi();return Rm(e,Go)},_W=function(e,n){var r=-1,s=44;do switch(Q0(s)){case 0:s===38&&Za()===12&&(n[r]=1),e[r]+=LW(Go-1,n,r);break;case 2:e[r]+=eb(s);break;case 4:if(s===44){e[++r]=Za()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Bx(s)}while(s=hi());return e},BW=function(e,n){return hR(_W(dR(e),n))},iI=new WeakMap,VW=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!iI.get(r))&&!s){iI.set(e,!0);for(var o=[],i=BW(n,o),a=r.props,l=0,c=0;l<i.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=o[l]?i[l].replace(/&\f/g,a[u]):a[u]+" "+i[l]}}},jW=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function pR(t,e){switch(SW(t,e)){case 5103:return On+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return On+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return On+t+Ib+t+lo+t+t;case 6828:case 4268:return On+t+lo+t+t;case 6165:return On+t+lo+"flex-"+t+t;case 5187:return On+t+Fn(t,/(\w+).+(:[^]+)/,On+"box-$1$2"+lo+"flex-$1$2")+t;case 5443:return On+t+lo+"flex-item-"+Fn(t,/flex-|-self/,"")+t;case 4675:return On+t+lo+"flex-line-pack"+Fn(t,/align-content|flex-|-self/,"")+t;case 5548:return On+t+lo+Fn(t,"shrink","negative")+t;case 5292:return On+t+lo+Fn(t,"basis","preferred-size")+t;case 6060:return On+"box-"+Fn(t,"-grow","")+On+t+lo+Fn(t,"grow","positive")+t;case 4554:return On+Fn(t,/([^-])(transform)/g,"$1"+On+"$2")+t;case 6187:return Fn(Fn(Fn(t,/(zoom-|grab)/,On+"$1"),/(image-set)/,On+"$1"),t,"")+t;case 5495:case 3959:return Fn(t,/(image-set\([^]*)/,On+"$1$`$1");case 4968:return Fn(Fn(t,/(.+:)(flex-)?(.*)/,On+"box-pack:$3"+lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+On+t+t;case 4095:case 3583:case 4068:case 2532:return Fn(t,/(.+)-inline(.+)/,On+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wa(t)-1-e>6)switch(Ks(t,e+1)){case 109:if(Ks(t,e+4)!==45)break;case 102:return Fn(t,/(.+:)(.+)-([^]+)/,"$1"+On+"$2-$3$1"+Ib+(Ks(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~y3(t,"stretch")?pR(Fn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ks(t,e+1)!==115)break;case 6444:switch(Ks(t,Wa(t)-3-(~y3(t,"!important")&&10))){case 107:return Fn(t,":",":"+On)+t;case 101:return Fn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+On+(Ks(t,14)===45?"inline-":"")+"box$3$1"+On+"$2$3$1"+lo+"$2box$3")+t}break;case 5936:switch(Ks(t,e+11)){case 114:return On+t+lo+Fn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return On+t+lo+Fn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return On+t+lo+Fn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return On+t+lo+t+t}return t}var WW=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case Qk:e.return=pR(e.value,e.length);break;case lR:return sf([c0(e,{value:Fn(e.value,"@","@"+On)})],s);case Zk:if(e.length)return IW(e.props,function(o){switch(TW(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sf([c0(e,{props:[Fn(o,/:(read-\w+)/,":"+Ib+"$1")]})],s);case"::placeholder":return sf([c0(e,{props:[Fn(o,/:(plac\w+)/,":"+On+"input-$1")]}),c0(e,{props:[Fn(o,/:(plac\w+)/,":"+Ib+"$1")]}),c0(e,{props:[Fn(o,/:(plac\w+)/,lo+"input-$1")]})],s)}return""})}},UW=[WW],HW=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(x){var w=x.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var s=e.stylisPlugins||UW,o={},i,a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var w=x.getAttribute("data-emotion").split(" "),k=1;k<w.length;k++)o[w[k]]=!0;a.push(x)});var l,c=[VW,jW];{var u,h=[OW,zW(function(x){u.insert(x)})],p=FW(c.concat(s,h)),m=function(w){return sf(PW(w),p)};l=function(w,k,S,$){u=S,m(w?w+"{"+k.styles+"}":k.styles),$&&(g.inserted[k.name]=!0)}}var g={key:n,sheet:new xW({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return g.sheet.hydrate(a),g},p4={exports:{}},Bn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI;function GW(){if(aI)return Bn;aI=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,i=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,w=t?Symbol.for("react.fundamental"):60117,k=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function $(E){if(typeof E=="object"&&E!==null){var F=E.$$typeof;switch(F){case e:switch(E=E.type,E){case l:case c:case r:case o:case s:case h:return E;default:switch(E=E&&E.$$typeof,E){case a:case u:case g:case m:case i:return E;default:return F}}case n:return F}}}function T(E){return $(E)===c}return Bn.AsyncMode=l,Bn.ConcurrentMode=c,Bn.ContextConsumer=a,Bn.ContextProvider=i,Bn.Element=e,Bn.ForwardRef=u,Bn.Fragment=r,Bn.Lazy=g,Bn.Memo=m,Bn.Portal=n,Bn.Profiler=o,Bn.StrictMode=s,Bn.Suspense=h,Bn.isAsyncMode=function(E){return T(E)||$(E)===l},Bn.isConcurrentMode=T,Bn.isContextConsumer=function(E){return $(E)===a},Bn.isContextProvider=function(E){return $(E)===i},Bn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},Bn.isForwardRef=function(E){return $(E)===u},Bn.isFragment=function(E){return $(E)===r},Bn.isLazy=function(E){return $(E)===g},Bn.isMemo=function(E){return $(E)===m},Bn.isPortal=function(E){return $(E)===n},Bn.isProfiler=function(E){return $(E)===o},Bn.isStrictMode=function(E){return $(E)===s},Bn.isSuspense=function(E){return $(E)===h},Bn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===c||E===o||E===s||E===h||E===p||typeof E=="object"&&E!==null&&(E.$$typeof===g||E.$$typeof===m||E.$$typeof===i||E.$$typeof===a||E.$$typeof===u||E.$$typeof===w||E.$$typeof===k||E.$$typeof===S||E.$$typeof===x)},Bn.typeOf=$,Bn}var lI;function qW(){return lI||(lI=1,p4.exports=GW()),p4.exports}var m4,cI;function KW(){if(cI)return m4;cI=1;var t=qW(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=s;function i(g){return t.isMemo(g)?s:o[g.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function m(g,x,w){if(typeof x!="string"){if(p){var k=h(x);k&&k!==p&&m(g,k,w)}var S=l(x);c&&(S=S.concat(c(x)));for(var $=i(g),T=i(x),E=0;E<S.length;++E){var F=S[E];if(!n[F]&&!(w&&w[F])&&!(T&&T[F])&&!($&&$[F])){var V=u(x,F);try{a(g,F,V)}catch{}}}}return g}return m4=m,m4}KW();var XW=!0;function mR(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var e5=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||XW===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},t5=function(e,n,r){e5(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function YW(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ZW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},QW=/[A-Z]|^ms/g,JW=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gR=function(e){return e.charCodeAt(1)===45},uI=function(e){return e!=null&&typeof e!="boolean"},g4=fR(function(t){return gR(t)?t:t.replace(QW,"-$&").toLowerCase()}),dI=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(JW,function(r,s,o){return Ua={name:s,styles:o,next:Ua},s})}return ZW[e]!==1&&!gR(e)&&typeof n=="number"&&n!==0?n+"px":n};function J0(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Ua={name:s.name,styles:s.styles,next:Ua},s.name;var o=n;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)Ua={name:i.name,styles:i.styles,next:Ua},i=i.next;var a=o.styles+";";return a}return eU(t,e,n)}case"function":{if(t!==void 0){var l=Ua,c=n(t);return Ua=l,J0(t,e,c)}break}}var u=n;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function eU(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=J0(t,e,n[s])+";";else for(var o in n){var i=n[o];if(typeof i!="object"){var a=i;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":uI(a)&&(r+=g4(o)+":"+dI(o,a)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var l=0;l<i.length;l++)uI(i[l])&&(r+=g4(o)+":"+dI(o,i[l])+";");else{var c=J0(t,e,i);switch(o){case"animation":case"animationName":{r+=g4(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var hI=/label:\s*([^\s;{]+)\s*(;|$)/g,Ua;function Am(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Ua=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,s+=J0(n,e,o);else{var i=o;s+=i[0]}for(var a=1;a<t.length;a++)if(s+=J0(n,e,t[a]),r){var l=o;s+=l[a]}hI.lastIndex=0;for(var c="",u;(u=hI.exec(s))!==null;)c+="-"+u[1];var h=YW(s)+c;return{name:h,styles:s,next:Ua}}var tU=function(e){return e()},yR=Cb.useInsertionEffect?Cb.useInsertionEffect:!1,bR=yR||tU,fI=yR||D.useLayoutEffect,nU=!1,xR=D.createContext(typeof HTMLElement<"u"?HW({key:"css"}):null);xR.Provider;var n5=function(e){return D.forwardRef(function(n,r){var s=D.useContext(xR);return e(n,s,r)})},Wx=D.createContext({}),r5={}.hasOwnProperty,x3="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rU=function(e,n){var r={};for(var s in n)r5.call(n,s)&&(r[s]=n[s]);return r[x3]=e,r},sU=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return e5(n,r,s),bR(function(){return t5(n,r,s)}),null},oU=n5(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[x3],o=[r],i="";typeof t.className=="string"?i=mR(e.registered,o,t.className):t.className!=null&&(i=t.className+" ");var a=Am(o,void 0,D.useContext(Wx));i+=e.key+"-"+a.name;var l={};for(var c in t)r5.call(t,c)&&c!=="css"&&c!==x3&&!nU&&(l[c]=t[c]);return l.className=i,n&&(l.ref=n),D.createElement(D.Fragment,null,D.createElement(sU,{cache:e,serialized:a,isStringTag:typeof s=="string"}),D.createElement(s,l))}),iU=oU,aU=function(e,n){var r=arguments;if(n==null||!r5.call(n,"css"))return D.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=iU,o[1]=rU(e,n);for(var i=2;i<s;i++)o[i]=r[i];return D.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(aU);var lU=n5(function(t,e){var n=t.styles,r=Am([n],void 0,D.useContext(Wx)),s=D.useRef();return fI(function(){var o=e.key+"-global",i=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),i.hydrate([l])),s.current=[i,a],function(){i.flush()}},[e]),fI(function(){var o=s.current,i=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&t5(e,r.next,!0),i.tags.length){var l=i.tags[i.tags.length-1].nextElementSibling;i.before=l,i.flush()}e.insert("",r,i,!1)},[e,r.name]),null});function cU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Am(e)}function s5(){var t=cU.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var uU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dU=fR(function(t){return uU.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),hU=dU,fU=function(e){return e!=="theme"},pI=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?hU:fU},mI=function(e,n,r){var s;if(n){var o=n.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(i){return e.__emotion_forwardProp(i)&&o(i)}:o}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},pU=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return e5(n,r,s),bR(function(){return t5(n,r,s)}),null},mU=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,o,i;n!==void 0&&(o=n.label,i=n.target);var a=mI(e,n,r),l=a||pI(s),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&h.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var p=u[0];h.push(p[0]);for(var m=u.length,g=1;g<m;g++)h.push(u[g],p[g])}var x=n5(function(w,k,S){var $=c&&w.as||s,T="",E=[],F=w;if(w.theme==null){F={};for(var V in w)F[V]=w[V];F.theme=D.useContext(Wx)}typeof w.className=="string"?T=mR(k.registered,E,w.className):w.className!=null&&(T=w.className+" ");var j=Am(h.concat(E),k.registered,F);T+=k.key+"-"+j.name,i!==void 0&&(T+=" "+i);var W=c&&a===void 0?pI($):l,R={};for(var O in w)c&&O==="as"||W(O)&&(R[O]=w[O]);return R.className=T,S&&(R.ref=S),D.createElement(D.Fragment,null,D.createElement(pU,{cache:k,serialized:j,isStringTag:typeof $=="string"}),D.createElement($,R))});return x.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=s,x.__emotion_styles=h,x.__emotion_forwardProp=a,Object.defineProperty(x,"toString",{value:function(){return"."+i}}),x.withComponent=function(w,k){var S=t(w,Tb({},n,k,{shouldForwardProp:mI(x,k,!0)}));return S.apply(void 0,h)},x}},gU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],v3=mU.bind(null);gU.forEach(function(t){v3[t]=v3(t)});function yU(t){return t==null||Object.keys(t).length===0}function bU(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?s=>e(yU(s)?n:s):e;return z.jsx(lU,{styles:r})}/**
 * @mui/styled-engine v6.2.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function xU(t,e){return v3(t,e)}function vU(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const gI=[];function yI(t){return gI[0]=t,Am(gI)}const wU=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function kU(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,o=wU(e),i=Object.keys(o);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,m){const g=i.indexOf(m);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(g!==-1&&typeof e[i[g]]=="number"?e[i[g]]:m)-r/100}${n})`}function u(p){return i.indexOf(p)+1<i.length?c(p,i[i.indexOf(p)+1]):a(p)}function h(p){const m=i.indexOf(p);return m===0?a(i[1]):m===i.length-1?l(i[m]):c(p,i[i.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:a,down:l,between:c,only:u,not:h,unit:n,...s}}const CU={borderRadius:4};function vR(t=8,e=Xk({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const i=e(o);return typeof i=="number"?`${i}px`:i}).join(" ");return n.mui=!0,n}function SU(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(t);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return n.palette.mode===t?e:{}}function o5(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:o={},...i}=t,a=kU(n),l=vR(s);let c=yo({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...CU,...o}},i);return c=Tj(c),c.applyStyles=SU,c=e.reduce((u,h)=>yo(u,h),c),c.unstable_sxConfig={...Em,...i==null?void 0:i.unstable_sxConfig},c.unstable_sx=function(h){return hf({sx:h,theme:this})},c}function TU(t){return Object.keys(t).length===0}function IU(t=null){const e=D.useContext(Wx);return!e||TU(e)?t:e}const $U=o5();function wR(t=$U){return IU(t)}function NU({styles:t,themeId:e,defaultTheme:n={}}){const r=wR(n),s=typeof t=="function"?t(e&&r[e]||r):t;return z.jsx(bU,{styles:s})}const bI=t=>t,EU=()=>{let t=bI;return{configure(e){t=e},generate(e){return t(e)},reset(){t=bI}}},RU=EU(),AU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function or(t,e,n="Mui"){const r=AU[e];return r?`${n}-${r}`:`${RU.generate(t)}-${e}`}function ir(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=or(t,s,n)}),r}function kR(t){const{variants:e,...n}=t,r={variants:e,style:yI(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=yI(s.style))}),r}const DU=o5();function y4(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function PU(t){return t?(e,n)=>n[t]:null}function MU(t,e,n){t.theme=zU(t.theme)?n:t.theme[e]||t.theme}function nb(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>nb(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...o}=n;r=o}return CR(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function CR(t,e,n=[]){var s;let r;e:for(let o=0;o<e.length;o+=1){const i=e[o];if(typeof i.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!i.props(r))continue}else for(const a in i.props)if(t[a]!==i.props[a]&&((s=t.ownerState)==null?void 0:s[a])!==i.props[a])continue e;typeof i.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(i.style(r))):n.push(i.style)}return n}function OU(t={}){const{themeId:e,defaultTheme:n=DU,rootShouldForwardProp:r=y4,slotShouldForwardProp:s=y4}=t;function o(a){MU(a,e,n)}return(a,l={})=>{vU(a,E=>E.filter(F=>F!==hf));const{name:c,slot:u,skipVariantsResolver:h,skipSx:p,overridesResolver:m=PU(_U(u)),...g}=l,x=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,w=p||!1;let k=y4;u==="Root"||u==="root"?k=r:u?k=s:LU(a)&&(k=void 0);const S=xU(a,{shouldForwardProp:k,label:FU(),...g}),$=E=>{if(typeof E=="function"&&E.__emotion_real!==E)return function(V){return nb(V,E)};if(Ka(E)){const F=kR(E);return F.variants?function(j){return nb(j,F)}:F.style}return E},T=(...E)=>{const F=[],V=E.map($),j=[];if(F.push(o),c&&m&&j.push(function(U){var Z,ne;const G=(ne=(Z=U.theme.components)==null?void 0:Z[c])==null?void 0:ne.styleOverrides;if(!G)return null;const Y={};for(const J in G)Y[J]=nb(U,G[J]);return m(U,Y)}),c&&!x&&j.push(function(U){var Y,Z;const K=U.theme,G=(Z=(Y=K==null?void 0:K.components)==null?void 0:Y[c])==null?void 0:Z.variants;return G?CR(U,G):null}),w||j.push(hf),Array.isArray(V[0])){const O=V.shift(),U=new Array(F.length).fill(""),K=new Array(j.length).fill("");let G;G=[...U,...O,...K],G.raw=[...U,...O.raw,...K],F.unshift(G)}const W=[...F,...V,...j],R=S(...W);return a.muiName&&(R.muiName=a.muiName),R};return S.withConfig&&(T.withConfig=S.withConfig),T}}function FU(t,e){return void 0}function zU(t){for(const e in t)return!1;return!0}function LU(t){return typeof t=="string"&&t.charCodeAt(0)>96}function _U(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function w3(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")n[s]={...t[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const o=t[s],i=e[s];if(!i)n[s]=o||{};else if(!o)n[s]=i;else{n[s]={...i};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const l=a;n[s][l]=w3(o[l],i[l])}}}else n[s]===void 0&&(n[s]=t[s])}return n}const tc=typeof window<"u"?D.useLayoutEffect:D.useEffect;function BU(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function i5(t,e=0,n=1){return BU(t,e,n)}function VU(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function eu(t){if(t.type)return t;if(t.charAt(0)==="#")return eu(VU(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Jl(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Jl(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:s}}const jU=t=>{const e=eu(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},C0=(t,e)=>{try{return jU(t)}catch{return t}};function Ux(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function SR(t){t=eu(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),i=(c,u=(c+n/30)%12)=>s-o*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Ux({type:a,values:l})}function k3(t){t=eu(t);let e=t.type==="hsl"||t.type==="hsla"?eu(SR(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function WU(t,e){const n=k3(t),r=k3(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function As(t,e){return t=eu(t),e=i5(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Ux(t)}function wy(t,e,n){try{return As(t,e)}catch{return t}}function a5(t,e){if(t=eu(t),e=i5(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Ux(t)}function Jn(t,e,n){try{return a5(t,e)}catch{return t}}function l5(t,e){if(t=eu(t),e=i5(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Ux(t)}function er(t,e,n){try{return l5(t,e)}catch{return t}}function UU(t,e=.15){return k3(t)>.5?a5(t,e):l5(t,e)}function ky(t,e,n){try{return UU(t,e)}catch{return t}}function xI(...t){return t.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function TR(t,e=166){let n;function r(...s){const o=()=>{t.apply(this,s)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function b4(t,e){var n,r,s;return D.isValidElement(t)&&e.indexOf(t.type.muiName??((s=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}function mi(t){return t&&t.ownerDocument||document}function nc(t){return mi(t).defaultView||window}function $b(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function z0({controlled:t,default:e,name:n,state:r="value"}){const{current:s}=D.useRef(t!==void 0),[o,i]=D.useState(e),a=s?t:o,l=D.useCallback(c=>{s||i(c)},[]);return[a,l]}function Xa(t){const e=D.useRef(t);return tc(()=>{e.current=t}),D.useRef((...n)=>(0,e.current)(...n)).current}function Cs(...t){return D.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{$b(n,e)})},t)}const vI={};function IR(t,e){const n=D.useRef(vI);return n.current===vI&&(n.current=t(e)),n}const HU=[];function GU(t){D.useEffect(t,HU)}class c5{constructor(){a0(this,"currentId",null);a0(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});a0(this,"disposeEffect",()=>this.clear)}static create(){return new c5}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function $R(){const t=IR(c5.create).current;return GU(t.disposeEffect),t}function wI(t){try{return t.matches(":focus-visible")}catch{}return!1}function NR(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}const qU=t=>{const e=D.useRef({});return D.useEffect(()=>{e.current=t}),e.current};function KU(t){return typeof t=="string"}function ER(t,e,n){return t===void 0||KU(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function RR(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function kI(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function AR(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:o}=t;if(!e){const m=Xt(n==null?void 0:n.className,o,s==null?void 0:s.className,r==null?void 0:r.className),g={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},x={...n,...s,...r};return m.length>0&&(x.className=m),Object.keys(g).length>0&&(x.style=g),{props:x,internalRef:void 0}}const i=RR({...s,...r}),a=kI(r),l=kI(s),c=e(i),u=Xt(c==null?void 0:c.className,n==null?void 0:n.className,o,s==null?void 0:s.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},p={...c,...n,...l,...a};return u.length>0&&(p.className=u),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:c.ref}}function DR(t,e,n){return typeof t=="function"?t(e,n):t}function C3(t){var h;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...o}=t,i=s?{}:DR(n,r),{props:a,internalRef:l}=AR({...o,externalSlotProps:i}),c=Cs(l,i==null?void 0:i.ref,(h=t.additionalProps)==null?void 0:h.ref);return ER(e,{...a,ref:c},r)}function Dm(t){var e;return parseInt(D.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const XU=D.createContext(),PR=()=>D.useContext(XU)??!1,YU=D.createContext(void 0);function ZU(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?w3(s.defaultProps,r):!s.styleOverrides&&!s.variants?w3(s,r):r}function QU({props:t,name:e}){const n=D.useContext(YU);return ZU({props:t,name:e,theme:{components:n}})}const CI={theme:void 0};function JU(t){let e,n;return function(s){let o=e;return(o===void 0||s.theme!==n)&&(CI.theme=s.theme,o=kR(t(CI)),e=o,n=s.theme),o}}function eH(t=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${t?`${t}-`:""}${r}${e(...s)})`}const SI=(t,e,n,r=[])=>{let s=t;e.forEach((o,i)=>{i===e.length-1?Array.isArray(s)?s[Number(o)]=n:s&&typeof s=="object"&&(s[o]=n):s&&typeof s=="object"&&(s[o]||(s[o]=r.includes(o)?[]:{}),s=s[o])})},tH=(t,e,n)=>{function r(s,o=[],i=[]){Object.entries(s).forEach(([a,l])=>{(!n||!n([...o,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...o,a],Array.isArray(l)?[...i,a]:i):e([...o,a],l,i))})}r(t)},nH=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function x4(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},o={},i={};return tH(t,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${n?`${n}-`:""}${a.join("-")}`,h=nH(a,l);Object.assign(s,{[u]:h}),SI(o,a,`var(${u})`,c),SI(i,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:s,vars:o,varsWithDefaults:i}}function rH(t,e={}){const{getSelector:n=w,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:o={},components:i,defaultColorScheme:a="light",...l}=t,{vars:c,css:u,varsWithDefaults:h}=x4(l,e);let p=h;const m={},{[a]:g,...x}=o;if(Object.entries(x||{}).forEach(([$,T])=>{const{vars:E,css:F,varsWithDefaults:V}=x4(T,e);p=yo(p,V),m[$]={css:F,vars:E}}),g){const{css:$,vars:T,varsWithDefaults:E}=x4(g,e);p=yo(p,E),m[a]={css:$,vars:T}}function w($,T){var F,V;let E=s;if(s==="class"&&(E=".%s"),s==="data"&&(E="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(E=`[${s}="%s"]`),$){if(E==="media")return t.defaultColorScheme===$?":root":{[`@media (prefers-color-scheme: ${((V=(F=o[$])==null?void 0:F.palette)==null?void 0:V.mode)||$})`]:{":root":T}};if(E)return t.defaultColorScheme===$?`:root, ${E.replace("%s",String($))}`:E.replace("%s",String($))}return":root"}return{vars:p,generateThemeVars:()=>{let $={...c};return Object.entries(m).forEach(([,{vars:T}])=>{$=yo($,T)}),$},generateStyleSheets:()=>{var j,W;const $=[],T=t.defaultColorScheme||"light";function E(R,O){Object.keys(O).length&&$.push(typeof R=="string"?{[R]:{...O}}:R)}E(n(void 0,{...u}),u);const{[T]:F,...V}=m;if(F){const{css:R}=F,O=(W=(j=o[T])==null?void 0:j.palette)==null?void 0:W.mode,U=!r&&O?{colorScheme:O,...R}:{...R};E(n(T,{...U}),U)}return Object.entries(V).forEach(([R,{css:O}])=>{var G,Y;const U=(Y=(G=o[R])==null?void 0:G.palette)==null?void 0:Y.mode,K=!r&&U?{colorScheme:U,...O}:{...O};E(n(R,{...K}),K)}),$}}}function sH(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const em={black:"#000",white:"#fff"},oH={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Mh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Oh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},u0={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Fh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},zh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Lh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function MR(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:em.white,default:em.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const iH=MR();function OR(){return{text:{primary:em.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:em.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const TI=OR();function II(t,e,n,r){const s=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=l5(t.main,s):e==="dark"&&(t.dark=a5(t.main,o)))}function aH(t="light"){return t==="dark"?{main:Fh[200],light:Fh[50],dark:Fh[400]}:{main:Fh[700],light:Fh[400],dark:Fh[800]}}function lH(t="light"){return t==="dark"?{main:Mh[200],light:Mh[50],dark:Mh[400]}:{main:Mh[500],light:Mh[300],dark:Mh[700]}}function cH(t="light"){return t==="dark"?{main:Oh[500],light:Oh[300],dark:Oh[700]}:{main:Oh[700],light:Oh[400],dark:Oh[800]}}function uH(t="light"){return t==="dark"?{main:zh[400],light:zh[300],dark:zh[700]}:{main:zh[700],light:zh[500],dark:zh[900]}}function dH(t="light"){return t==="dark"?{main:Lh[400],light:Lh[300],dark:Lh[700]}:{main:Lh[800],light:Lh[500],dark:Lh[900]}}function hH(t="light"){return t==="dark"?{main:u0[400],light:u0[300],dark:u0[700]}:{main:"#ed6c02",light:u0[500],dark:u0[900]}}function u5(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=t,o=t.primary||aH(e),i=t.secondary||lH(e),a=t.error||cH(e),l=t.info||uH(e),c=t.success||dH(e),u=t.warning||hH(e);function h(x){return WU(x,TI.text.primary)>=n?TI.text.primary:iH.text.primary}const p=({color:x,name:w,mainShade:k=500,lightShade:S=300,darkShade:$=700})=>{if(x={...x},!x.main&&x[k]&&(x.main=x[k]),!x.hasOwnProperty("main"))throw new Error(Jl(11,w?` (${w})`:"",k));if(typeof x.main!="string")throw new Error(Jl(12,w?` (${w})`:"",JSON.stringify(x.main)));return II(x,"light",S,r),II(x,"dark",$,r),x.contrastText||(x.contrastText=h(x.main)),x};let m;return e==="light"?m=MR():e==="dark"&&(m=OR()),yo({common:{...em},mode:e,primary:p({color:o,name:"primary"}),secondary:p({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:u,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:oH,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r,...m},s)}function fH(t){const e={};return Object.entries(t).forEach(r=>{const[s,o]=r;typeof o=="object"&&(e[s]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function pH(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function mH(t){return Math.round(t*1e5)/1e5}const $I={textTransform:"uppercase"},NI='"Roboto", "Helvetica", "Arial", sans-serif';function gH(t,e){const{fontFamily:n=NI,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(t):e,p=r/14,m=u||(w=>`${w/l*p}rem`),g=(w,k,S,$,T)=>({fontFamily:n,fontWeight:w,fontSize:m(k),lineHeight:S,...n===NI?{letterSpacing:`${mH($/k)}em`}:{},...T,...c}),x={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(o,48,1.167,0),h4:g(o,34,1.235,.25),h5:g(o,24,1.334,0),h6:g(i,20,1.6,.15),subtitle1:g(o,16,1.75,.15),subtitle2:g(i,14,1.57,.1),body1:g(o,16,1.5,.15),body2:g(o,14,1.43,.15),button:g(i,14,1.75,.4,$I),caption:g(o,12,1.66,.4),overline:g(o,12,2.66,1,$I),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return yo({htmlFontSize:l,pxToRem:m,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:a,...x},h,{clone:!1})}const yH=.2,bH=.14,xH=.12;function vr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${yH})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${bH})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${xH})`].join(",")}const vH=["none",vr(0,2,1,-1,0,1,1,0,0,1,3,0),vr(0,3,1,-2,0,2,2,0,0,1,5,0),vr(0,3,3,-2,0,3,4,0,0,1,8,0),vr(0,2,4,-1,0,4,5,0,0,1,10,0),vr(0,3,5,-1,0,5,8,0,0,1,14,0),vr(0,3,5,-1,0,6,10,0,0,1,18,0),vr(0,4,5,-2,0,7,10,1,0,2,16,1),vr(0,5,5,-3,0,8,10,1,0,3,14,2),vr(0,5,6,-3,0,9,12,1,0,3,16,2),vr(0,6,6,-3,0,10,14,1,0,4,18,3),vr(0,6,7,-4,0,11,15,1,0,4,20,3),vr(0,7,8,-4,0,12,17,2,0,5,22,4),vr(0,7,8,-4,0,13,19,2,0,5,24,4),vr(0,7,9,-4,0,14,21,2,0,5,26,4),vr(0,8,9,-5,0,15,22,2,0,6,28,5),vr(0,8,10,-5,0,16,24,2,0,6,30,5),vr(0,8,11,-5,0,17,26,2,0,6,32,5),vr(0,9,11,-5,0,18,28,2,0,7,34,6),vr(0,9,12,-6,0,19,29,2,0,7,36,6),vr(0,10,13,-6,0,20,31,3,0,8,38,7),vr(0,10,13,-6,0,21,33,3,0,8,40,7),vr(0,10,14,-6,0,22,35,3,0,8,42,7),vr(0,11,14,-7,0,23,36,3,0,9,44,8),vr(0,11,15,-7,0,24,38,3,0,9,46,8)],wH={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},kH={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function EI(t){return`${Math.round(t)}ms`}function CH(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function SH(t){const e={...wH,...t.easing},n={...kH,...t.duration};return{getAutoHeightDuration:CH,create:(s=["all"],o={})=>{const{duration:i=n.standard,easing:a=e.easeInOut,delay:l=0,...c}=o;return(Array.isArray(s)?s:[s]).map(u=>`${u} ${typeof i=="string"?i:EI(i)} ${a} ${typeof l=="string"?l:EI(l)}`).join(",")},...t,easing:e,duration:n}}const TH={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function IH(t){return Ka(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function FR(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let o=0;o<s.length;o++){const[i,a]=s[o];!IH(a)||i.startsWith("unstable_")?delete r[i]:Ka(a)&&(r[i]={...a},n(r[i]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function S3(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:o={},transitions:i={},typography:a={},shape:l,...c}=t;if(t.vars)throw new Error(Jl(20));const u=u5(o),h=o5(t);let p=yo(h,{mixins:pH(h.breakpoints,r),palette:u,shadows:vH.slice(),typography:gH(u,a),transitions:SH(i),zIndex:{...TH}});return p=yo(p,c),p=e.reduce((m,g)=>yo(m,g),p),p.unstable_sxConfig={...Em,...c==null?void 0:c.unstable_sxConfig},p.unstable_sx=function(g){return hf({sx:g,theme:this})},p.toRuntimeSource=FR,p}function T3(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const $H=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=T3(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function zR(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function LR(t){return t==="dark"?$H:[]}function NH(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=t,o=u5(e);return{palette:o,opacity:{...zR(o.mode),...n},overlays:r||LR(o.mode),...s}}function EH(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const RH=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],AH=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const i={};return RH(t.cssVarPrefix).forEach(a=>{i[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",e)]:i,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...i}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function DH(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Ue(t,e,n){!t[e]&&n&&(t[e]=n)}function S0(t){return typeof t!="string"||!t.startsWith("hsl")?t:SR(t)}function jl(t,e){`${e}Channel`in t||(t[`${e}Channel`]=C0(S0(t[e])))}function PH(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Ba=t=>{try{return t()}catch{}},MH=(t="mui")=>eH(t);function v4(t,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){t[r]=NH({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:o,...i}=S3({...n,palette:{mode:s,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...zR(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||LR(s)},i}function OH(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=EH,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...c}=t,u=Object.keys(n)[0],h=r||(n.light&&u!=="light"?"light":u),p=MH(o),{[h]:m,light:g,dark:x,...w}=n,k={...w};let S=m;if((h==="dark"&&!("dark"in n)||h==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(Jl(21,h));const $=v4(k,S,c,h);g&&!k.light&&v4(k,g,void 0,"light"),x&&!k.dark&&v4(k,x,void 0,"dark");let T={defaultColorScheme:h,...$,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:l,getCssVar:p,colorSchemes:k,font:{...fH($.typography),...$.font},spacing:PH(c.spacing)};Object.keys(T.colorSchemes).forEach(W=>{const R=T.colorSchemes[W].palette,O=U=>{const K=U.split("-"),G=K[1],Y=K[2];return p(U,R[G][Y])};if(R.mode==="light"&&(Ue(R.common,"background","#fff"),Ue(R.common,"onBackground","#000")),R.mode==="dark"&&(Ue(R.common,"background","#000"),Ue(R.common,"onBackground","#fff")),DH(R,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),R.mode==="light"){Ue(R.Alert,"errorColor",Jn(R.error.light,.6)),Ue(R.Alert,"infoColor",Jn(R.info.light,.6)),Ue(R.Alert,"successColor",Jn(R.success.light,.6)),Ue(R.Alert,"warningColor",Jn(R.warning.light,.6)),Ue(R.Alert,"errorFilledBg",O("palette-error-main")),Ue(R.Alert,"infoFilledBg",O("palette-info-main")),Ue(R.Alert,"successFilledBg",O("palette-success-main")),Ue(R.Alert,"warningFilledBg",O("palette-warning-main")),Ue(R.Alert,"errorFilledColor",Ba(()=>R.getContrastText(R.error.main))),Ue(R.Alert,"infoFilledColor",Ba(()=>R.getContrastText(R.info.main))),Ue(R.Alert,"successFilledColor",Ba(()=>R.getContrastText(R.success.main))),Ue(R.Alert,"warningFilledColor",Ba(()=>R.getContrastText(R.warning.main))),Ue(R.Alert,"errorStandardBg",er(R.error.light,.9)),Ue(R.Alert,"infoStandardBg",er(R.info.light,.9)),Ue(R.Alert,"successStandardBg",er(R.success.light,.9)),Ue(R.Alert,"warningStandardBg",er(R.warning.light,.9)),Ue(R.Alert,"errorIconColor",O("palette-error-main")),Ue(R.Alert,"infoIconColor",O("palette-info-main")),Ue(R.Alert,"successIconColor",O("palette-success-main")),Ue(R.Alert,"warningIconColor",O("palette-warning-main")),Ue(R.AppBar,"defaultBg",O("palette-grey-100")),Ue(R.Avatar,"defaultBg",O("palette-grey-400")),Ue(R.Button,"inheritContainedBg",O("palette-grey-300")),Ue(R.Button,"inheritContainedHoverBg",O("palette-grey-A100")),Ue(R.Chip,"defaultBorder",O("palette-grey-400")),Ue(R.Chip,"defaultAvatarColor",O("palette-grey-700")),Ue(R.Chip,"defaultIconColor",O("palette-grey-700")),Ue(R.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ue(R.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ue(R.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ue(R.LinearProgress,"primaryBg",er(R.primary.main,.62)),Ue(R.LinearProgress,"secondaryBg",er(R.secondary.main,.62)),Ue(R.LinearProgress,"errorBg",er(R.error.main,.62)),Ue(R.LinearProgress,"infoBg",er(R.info.main,.62)),Ue(R.LinearProgress,"successBg",er(R.success.main,.62)),Ue(R.LinearProgress,"warningBg",er(R.warning.main,.62)),Ue(R.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),Ue(R.Slider,"primaryTrack",er(R.primary.main,.62)),Ue(R.Slider,"secondaryTrack",er(R.secondary.main,.62)),Ue(R.Slider,"errorTrack",er(R.error.main,.62)),Ue(R.Slider,"infoTrack",er(R.info.main,.62)),Ue(R.Slider,"successTrack",er(R.success.main,.62)),Ue(R.Slider,"warningTrack",er(R.warning.main,.62));const U=ky(R.background.default,.8);Ue(R.SnackbarContent,"bg",U),Ue(R.SnackbarContent,"color",Ba(()=>R.getContrastText(U))),Ue(R.SpeedDialAction,"fabHoverBg",ky(R.background.paper,.15)),Ue(R.StepConnector,"border",O("palette-grey-400")),Ue(R.StepContent,"border",O("palette-grey-400")),Ue(R.Switch,"defaultColor",O("palette-common-white")),Ue(R.Switch,"defaultDisabledColor",O("palette-grey-100")),Ue(R.Switch,"primaryDisabledColor",er(R.primary.main,.62)),Ue(R.Switch,"secondaryDisabledColor",er(R.secondary.main,.62)),Ue(R.Switch,"errorDisabledColor",er(R.error.main,.62)),Ue(R.Switch,"infoDisabledColor",er(R.info.main,.62)),Ue(R.Switch,"successDisabledColor",er(R.success.main,.62)),Ue(R.Switch,"warningDisabledColor",er(R.warning.main,.62)),Ue(R.TableCell,"border",er(wy(R.divider,1),.88)),Ue(R.Tooltip,"bg",wy(R.grey[700],.92))}if(R.mode==="dark"){Ue(R.Alert,"errorColor",er(R.error.light,.6)),Ue(R.Alert,"infoColor",er(R.info.light,.6)),Ue(R.Alert,"successColor",er(R.success.light,.6)),Ue(R.Alert,"warningColor",er(R.warning.light,.6)),Ue(R.Alert,"errorFilledBg",O("palette-error-dark")),Ue(R.Alert,"infoFilledBg",O("palette-info-dark")),Ue(R.Alert,"successFilledBg",O("palette-success-dark")),Ue(R.Alert,"warningFilledBg",O("palette-warning-dark")),Ue(R.Alert,"errorFilledColor",Ba(()=>R.getContrastText(R.error.dark))),Ue(R.Alert,"infoFilledColor",Ba(()=>R.getContrastText(R.info.dark))),Ue(R.Alert,"successFilledColor",Ba(()=>R.getContrastText(R.success.dark))),Ue(R.Alert,"warningFilledColor",Ba(()=>R.getContrastText(R.warning.dark))),Ue(R.Alert,"errorStandardBg",Jn(R.error.light,.9)),Ue(R.Alert,"infoStandardBg",Jn(R.info.light,.9)),Ue(R.Alert,"successStandardBg",Jn(R.success.light,.9)),Ue(R.Alert,"warningStandardBg",Jn(R.warning.light,.9)),Ue(R.Alert,"errorIconColor",O("palette-error-main")),Ue(R.Alert,"infoIconColor",O("palette-info-main")),Ue(R.Alert,"successIconColor",O("palette-success-main")),Ue(R.Alert,"warningIconColor",O("palette-warning-main")),Ue(R.AppBar,"defaultBg",O("palette-grey-900")),Ue(R.AppBar,"darkBg",O("palette-background-paper")),Ue(R.AppBar,"darkColor",O("palette-text-primary")),Ue(R.Avatar,"defaultBg",O("palette-grey-600")),Ue(R.Button,"inheritContainedBg",O("palette-grey-800")),Ue(R.Button,"inheritContainedHoverBg",O("palette-grey-700")),Ue(R.Chip,"defaultBorder",O("palette-grey-700")),Ue(R.Chip,"defaultAvatarColor",O("palette-grey-300")),Ue(R.Chip,"defaultIconColor",O("palette-grey-300")),Ue(R.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ue(R.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ue(R.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ue(R.LinearProgress,"primaryBg",Jn(R.primary.main,.5)),Ue(R.LinearProgress,"secondaryBg",Jn(R.secondary.main,.5)),Ue(R.LinearProgress,"errorBg",Jn(R.error.main,.5)),Ue(R.LinearProgress,"infoBg",Jn(R.info.main,.5)),Ue(R.LinearProgress,"successBg",Jn(R.success.main,.5)),Ue(R.LinearProgress,"warningBg",Jn(R.warning.main,.5)),Ue(R.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),Ue(R.Slider,"primaryTrack",Jn(R.primary.main,.5)),Ue(R.Slider,"secondaryTrack",Jn(R.secondary.main,.5)),Ue(R.Slider,"errorTrack",Jn(R.error.main,.5)),Ue(R.Slider,"infoTrack",Jn(R.info.main,.5)),Ue(R.Slider,"successTrack",Jn(R.success.main,.5)),Ue(R.Slider,"warningTrack",Jn(R.warning.main,.5));const U=ky(R.background.default,.98);Ue(R.SnackbarContent,"bg",U),Ue(R.SnackbarContent,"color",Ba(()=>R.getContrastText(U))),Ue(R.SpeedDialAction,"fabHoverBg",ky(R.background.paper,.15)),Ue(R.StepConnector,"border",O("palette-grey-600")),Ue(R.StepContent,"border",O("palette-grey-600")),Ue(R.Switch,"defaultColor",O("palette-grey-300")),Ue(R.Switch,"defaultDisabledColor",O("palette-grey-600")),Ue(R.Switch,"primaryDisabledColor",Jn(R.primary.main,.55)),Ue(R.Switch,"secondaryDisabledColor",Jn(R.secondary.main,.55)),Ue(R.Switch,"errorDisabledColor",Jn(R.error.main,.55)),Ue(R.Switch,"infoDisabledColor",Jn(R.info.main,.55)),Ue(R.Switch,"successDisabledColor",Jn(R.success.main,.55)),Ue(R.Switch,"warningDisabledColor",Jn(R.warning.main,.55)),Ue(R.TableCell,"border",Jn(wy(R.divider,1),.68)),Ue(R.Tooltip,"bg",wy(R.grey[700],.92))}jl(R.background,"default"),jl(R.background,"paper"),jl(R.common,"background"),jl(R.common,"onBackground"),jl(R,"divider"),Object.keys(R).forEach(U=>{const K=R[U];U!=="tonalOffset"&&K&&typeof K=="object"&&(K.main&&Ue(R[U],"mainChannel",C0(S0(K.main))),K.light&&Ue(R[U],"lightChannel",C0(S0(K.light))),K.dark&&Ue(R[U],"darkChannel",C0(S0(K.dark))),K.contrastText&&Ue(R[U],"contrastTextChannel",C0(S0(K.contrastText))),U==="text"&&(jl(R[U],"primary"),jl(R[U],"secondary")),U==="action"&&(K.active&&jl(R[U],"active"),K.selected&&jl(R[U],"selected")))})}),T=e.reduce((W,R)=>yo(W,R),T);const E={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:AH(T)},{vars:F,generateThemeVars:V,generateStyleSheets:j}=rH(T,E);return T.vars=F,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([W,R])=>{T[W]=R}),T.generateThemeVars=V,T.generateStyleSheets=j,T.generateSpacing=function(){return vR(c.spacing,Xk(this))},T.getColorSchemeSelector=sH(a),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=i,T.unstable_sxConfig={...Em,...c==null?void 0:c.unstable_sxConfig},T.unstable_sx=function(R){return hf({sx:R,theme:this})},T.toRuntimeSource=FR,T}function RI(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:u5({...n===!0?{}:n.palette,mode:e})})}function FH(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...i}=t,a=o||"light",l=s==null?void 0:s[a],c={...s,...n?{[a]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return S3(t,...e);let u=n;"palette"in t||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=S3({...t,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},RI(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},RI(h,"light",c.light)),h}return!n&&!("light"in c)&&a==="light"&&(c.light=!0),OH({...i,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const d5=FH(),h5="$$material";function f5(){const t=wR(d5);return t[h5]||t}function zH(t){return z.jsx(NU,{...t,defaultTheme:d5,themeId:h5})}function _R(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const ml=t=>_R(t)&&t!=="classes",Dt=OU({themeId:h5,defaultTheme:d5,rootShouldForwardProp:ml});function LH(t){return function(n){return z.jsx(zH,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function _H(){return mW}function dr(t){return QU(t)}function Cy(t){return parseInt(t,10)||0}const BH={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function VH(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflowing}const jH=D.forwardRef(function(e,n){const{onChange:r,maxRows:s,minRows:o=1,style:i,value:a,...l}=e,{current:c}=D.useRef(a!=null),u=D.useRef(null),h=Cs(n,u),p=D.useRef(null),m=D.useRef(null),g=D.useCallback(()=>{const k=u.current,$=nc(k).getComputedStyle(k);if($.width==="0px")return{outerHeightStyle:0,overflowing:!1};const T=m.current;T.style.width=$.width,T.value=k.value||e.placeholder||"x",T.value.slice(-1)===`
`&&(T.value+=" ");const E=$.boxSizing,F=Cy($.paddingBottom)+Cy($.paddingTop),V=Cy($.borderBottomWidth)+Cy($.borderTopWidth),j=T.scrollHeight;T.value="x";const W=T.scrollHeight;let R=j;o&&(R=Math.max(Number(o)*W,R)),s&&(R=Math.min(Number(s)*W,R)),R=Math.max(R,W);const O=R+(E==="border-box"?F+V:0),U=Math.abs(R-j)<=1;return{outerHeightStyle:O,overflowing:U}},[s,o,e.placeholder]),x=D.useCallback(()=>{const k=g();if(VH(k))return;const S=k.outerHeightStyle,$=u.current;p.current!==S&&(p.current=S,$.style.height=`${S}px`),$.style.overflow=k.overflowing?"hidden":""},[g]);tc(()=>{const k=()=>{x()};let S;const $=TR(k),T=u.current,E=nc(T);E.addEventListener("resize",$);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(k),F.observe(T)),()=>{$.clear(),cancelAnimationFrame(S),E.removeEventListener("resize",$),F&&F.disconnect()}},[g,x]),tc(()=>{x()});const w=k=>{c||x(),r&&r(k)};return z.jsxs(D.Fragment,{children:[z.jsx("textarea",{value:a,onChange:w,ref:h,rows:o,style:i,...l}),z.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:{...BH.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function I3(t){return typeof t=="string"}function Vf({props:t,states:e,muiFormControl:n}){return e.reduce((r,s)=>(r[s]=t[s],n&&typeof t[s]>"u"&&(r[s]=n[s]),r),{})}const Hx=D.createContext(void 0);function Ld(){return D.useContext(Hx)}const Yn=JU;function AI(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function Nb(t,e=!1){return t&&(AI(t.value)&&t.value!==""||e&&AI(t.defaultValue)&&t.defaultValue!=="")}function WH(t){return t.startAdornment}function UH(t){return or("MuiInputBase",t)}const ii=ir("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var DI;const Gx=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${It(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},qx=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},HH=t=>{const{classes:e,color:n,disabled:r,error:s,endAdornment:o,focused:i,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:p,startAdornment:m,type:g}=t,x={root:["root",`color${It(n)}`,r&&"disabled",s&&"error",l&&"fullWidth",i&&"focused",a&&"formControl",p&&p!=="medium"&&`size${It(p)}`,u&&"multiline",m&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",g==="search"&&"inputTypeSearch",u&&"inputMultiline",p==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",m&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]};return ur(x,UH,e)},Kx=Dt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Gx})(Yn(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ii.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),Xx=Dt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:qx})(Yn(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ii.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${ii.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),PI=LH({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),p5=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:i,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:p,disableInjectingGlobalStyles:m,endAdornment:g,error:x,fullWidth:w=!1,id:k,inputComponent:S="input",inputProps:$={},inputRef:T,margin:E,maxRows:F,minRows:V,multiline:j=!1,name:W,onBlur:R,onChange:O,onClick:U,onFocus:K,onKeyDown:G,onKeyUp:Y,placeholder:Z,readOnly:ne,renderSuffix:J,rows:re,size:se,slotProps:q={},slots:le={},startAdornment:be,type:pe="text",value:de,...we}=r,Ne=$.value!=null?$.value:de,{current:Te}=D.useRef(Ne!=null),Ee=D.useRef(),We=D.useCallback(Gt=>{},[]),Xe=Cs(Ee,T,$.ref,We),[Ge,mt]=D.useState(!1),ft=Ld(),ct=Vf({props:r,muiFormControl:ft,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ct.focused=ft?ft.focused:Ge,D.useEffect(()=>{!ft&&p&&Ge&&(mt(!1),R&&R())},[ft,p,Ge,R]);const Ze=ft&&ft.onFilled,rt=ft&&ft.onEmpty,Ke=D.useCallback(Gt=>{Nb(Gt)?Ze&&Ze():rt&&rt()},[Ze,rt]);tc(()=>{Te&&Ke({value:Ne})},[Ne,Ke,Te]);const at=Gt=>{K&&K(Gt),$.onFocus&&$.onFocus(Gt),ft&&ft.onFocus?ft.onFocus(Gt):mt(!0)},ut=Gt=>{R&&R(Gt),$.onBlur&&$.onBlur(Gt),ft&&ft.onBlur?ft.onBlur(Gt):mt(!1)},kt=(Gt,...Er)=>{if(!Te){const yr=Gt.target||Ee.current;if(yr==null)throw new Error(Jl(1));Ke({value:yr.value})}$.onChange&&$.onChange(Gt,...Er),O&&O(Gt,...Er)};D.useEffect(()=>{Ke(Ee.current)},[]);const Qe=Gt=>{Ee.current&&Gt.currentTarget===Gt.target&&Ee.current.focus(),U&&U(Gt)};let qt=S,Wt=$;j&&qt==="input"&&(re?Wt={type:void 0,minRows:re,maxRows:re,...Wt}:Wt={type:void 0,maxRows:F,minRows:V,...Wt},qt=jH);const en=Gt=>{Ke(Gt.animationName==="mui-auto-fill-cancel"?Ee.current:{value:"x"})};D.useEffect(()=>{ft&&ft.setAdornedStart(!!be)},[ft,be]);const yn={...r,color:ct.color||"primary",disabled:ct.disabled,endAdornment:g,error:ct.error,focused:ct.focused,formControl:ft,fullWidth:w,hiddenLabel:ct.hiddenLabel,multiline:j,size:ct.size,startAdornment:be,type:pe},mn=HH(yn),Kt=le.root||c.Root||Kx,At=q.root||u.root||{},bn=le.input||c.Input||Xx;return Wt={...Wt,...q.input??u.input},z.jsxs(D.Fragment,{children:[!m&&typeof PI=="function"&&(DI||(DI=z.jsx(PI,{}))),z.jsxs(Kt,{...At,ref:n,onClick:Qe,...we,...!I3(Kt)&&{ownerState:{...yn,...At.ownerState}},className:Xt(mn.root,At.className,a,ne&&"MuiInputBase-readOnly"),children:[be,z.jsx(Hx.Provider,{value:null,children:z.jsx(bn,{"aria-invalid":ct.error,"aria-describedby":s,autoComplete:o,autoFocus:i,defaultValue:h,disabled:ct.disabled,id:k,onAnimationStart:en,name:W,placeholder:Z,readOnly:ne,required:ct.required,rows:re,value:Ne,onKeyDown:G,onKeyUp:Y,type:pe,...Wt,...!I3(bn)&&{as:qt,ownerState:{...yn,...Wt.ownerState}},ref:Xe,className:Xt(mn.input,Wt.className,ne&&"MuiInputBase-readOnly"),onBlur:ut,onChange:kt,onFocus:at})}),g,J?J({...ct,startAdornment:be}):null]})]})});function GH(t){return typeof t.main=="string"}function qH(t,e=[]){if(!GH(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function wa(t=[]){return([,e])=>e&&qH(e,t)}function KH(t){return or("MuiInput",t)}const Hc={...ii,...ir("MuiInput",["root","underline","input"])},XH=t=>{const{classes:e,disableUnderline:n}=t,s=ur({root:["root",!n&&"underline"],input:["input"]},KH,e);return{...e,...s}},YH=Dt(Kx,{shouldForwardProp:t=>ml(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Gx(t,e),!n.disableUnderline&&e.underline]}})(Yn(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hc.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hc.disabled}, .${Hc.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Hc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(wa()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),ZH=Dt(Xx,{name:"MuiInput",slot:"Input",overridesResolver:qx})({}),Eb=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:p="text",...m}=r,g=XH(r),w={root:{ownerState:{disableUnderline:s}}},k=u??i?yo(u??i,w):w,S=h.root??o.Root??YH,$=h.input??o.Input??ZH;return z.jsx(p5,{slots:{root:S,input:$},slotProps:k,fullWidth:a,inputComponent:l,multiline:c,ref:n,type:p,...m,classes:g})});Eb&&(Eb.muiName="Input");function QH(t){return or("MuiFilledInput",t)}const ai={...ii,...ir("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])};function JH(t){return or("MuiSvgIcon",t)}ir("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const eG=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${It(e)}`,`fontSize${It(n)}`]};return ur(s,JH,r)},tG=Dt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${It(n.color)}`],e[`fontSize${It(n.fontSize)}`]]}})(Yn(({theme:t})=>{var e,n,r,s,o,i,a,l,c,u,h,p,m,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=t.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:x=>!x.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((i=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:i.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,x])=>x&&x.main).map(([x])=>{var w,k;return{props:{color:x},style:{color:(k=(w=(t.vars??t).palette)==null?void 0:w[x])==null?void 0:k.main}}}),{props:{color:"action"},style:{color:(p=(h=(t.vars??t).palette)==null?void 0:h.action)==null?void 0:p.active}},{props:{color:"disabled"},style:{color:(g=(m=(t.vars??t).palette)==null?void 0:m.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Rb=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:i="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:p="0 0 24 24",...m}=r,g=D.isValidElement(s)&&s.type==="svg",x={...r,color:i,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:p,hasSvgAsChild:g},w={};u||(w.viewBox=p);const k=eG(x);return z.jsxs(tG,{as:a,className:Xt(k.root,o),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n,...w,...m,...g&&s.props,ownerState:x,children:[g?s.props.children:s,h?z.jsx("title",{children:h}):null]})});Rb&&(Rb.muiName="SvgIcon");function Yx(t,e){function n(r,s){return z.jsx(Rb,{"data-testid":`${e}Icon`,ref:s,...r,children:t})}return n.muiName=Rb.muiName,D.memo(D.forwardRef(n))}const nG=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:s,size:o,hiddenLabel:i,multiline:a}=t,l={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",o==="small"&&`size${It(o)}`,i&&"hiddenLabel",a&&"multiline"],input:["input"]},c=ur(l,QH,e);return{...e,...c}},rG=Dt(Kx,{shouldForwardProp:t=>ml(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Gx(t,e),!n.disableUnderline&&e.underline]}})(Yn(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${ai.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${ai.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ai.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ai.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ai.disabled}, .${ai.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${ai.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(wa()).map(([i])=>{var a;return{props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(a=(t.vars||t).palette[i])==null?void 0:a.main}`}}}}),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:a})=>i.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),sG=Dt(Xx,{name:"MuiFilledInput",slot:"Input",overridesResolver:qx})(Yn(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Ab=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:p={},type:m="text",...g}=r,x={...r,disableUnderline:s,fullWidth:a,inputComponent:c,multiline:u,type:m},w=nG(r),k={root:{ownerState:x},input:{ownerState:x}},S=h??i?yo(k,h??i):k,$=p.root??o.Root??rG,T=p.input??o.Input??sG;return z.jsx(p5,{slots:{root:$,input:T},slotProps:S,fullWidth:a,inputComponent:c,multiline:u,ref:n,type:m,...g,classes:w})});Ab&&(Ab.muiName="Input");var MI;const oG=Dt("fieldset",{shouldForwardProp:ml})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),iG=Dt("legend",{shouldForwardProp:ml})(Yn(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function aG(t){const{children:e,classes:n,className:r,label:s,notched:o,...i}=t,a=s!=null&&s!=="",l={...t,notched:o,withLabel:a};return z.jsx(oG,{"aria-hidden":!0,className:r,ownerState:l,...i,children:z.jsx(iG,{ownerState:l,children:a?z.jsx("span",{children:s}):MI||(MI=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}function lG(t){return or("MuiOutlinedInput",t)}const zi={...ii,...ir("MuiOutlinedInput",["root","notchedOutline","input"])},cG=t=>{const{classes:e}=t,r=ur({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},lG,e);return{...e,...r}},uG=Dt(Kx,{shouldForwardProp:t=>ml(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Gx})(Yn(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${zi.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${zi.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${zi.focused} .${zi.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(wa()).map(([n])=>({props:{color:n},style:{[`&.${zi.focused} .${zi.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${zi.error} .${zi.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${zi.disabled} .${zi.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),dG=Dt(aG,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(Yn(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),hG=Dt(Xx,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:qx})(Yn(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Db=D.forwardRef(function(e,n){var r;const s=dr({props:e,name:"MuiOutlinedInput"}),{components:o={},fullWidth:i=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:p="text",...m}=s,g=cG(s),x=Ld(),w=Vf({props:s,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k={...s,color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:x,fullWidth:i,hiddenLabel:w.hiddenLabel,multiline:c,size:w.size,type:p},S=h.root??o.Root??uG,$=h.input??o.Input??hG;return z.jsx(p5,{slots:{root:S,input:$},renderSuffix:T=>z.jsx(dG,{ownerState:k,className:g.notchedOutline,label:l!=null&&l!==""&&w.required?r||(r=z.jsxs(D.Fragment,{children:[l," ","*"]})):l,notched:typeof u<"u"?u:!!(T.startAdornment||T.filled||T.focused)}),fullWidth:i,inputComponent:a,multiline:c,ref:n,type:p,...m,classes:{...g,notchedOutline:null}})});Db&&(Db.muiName="Input");function fG(t){return or("MuiFormLabel",t)}const L0=ir("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),pG=t=>{const{classes:e,color:n,focused:r,disabled:s,error:o,filled:i,required:a}=t,l={root:["root",`color${It(n)}`,s&&"disabled",o&&"error",i&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return ur(l,fG,e)},mG=Dt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(Yn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(wa()).map(([e])=>({props:{color:e},style:{[`&.${L0.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${L0.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${L0.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),gG=Dt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(Yn(({theme:t})=>({[`&.${L0.error}`]:{color:(t.vars||t).palette.error.main}}))),yG=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormLabel"}),{children:s,className:o,color:i,component:a="label",disabled:l,error:c,filled:u,focused:h,required:p,...m}=r,g=Ld(),x=Vf({props:r,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),w={...r,color:x.color||"primary",component:a,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required},k=pG(w);return z.jsxs(mG,{as:a,ownerState:w,className:Xt(k.root,o),ref:n,...m,children:[s,x.required&&z.jsxs(gG,{ownerState:w,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]})});function bG(t){return or("MuiInputLabel",t)}ir("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const xG=t=>{const{classes:e,formControl:n,size:r,shrink:s,disableAnimation:o,variant:i,required:a}=t,l={root:["root",n&&"formControl",!o&&"animated",s&&"shrink",r&&r!=="normal"&&`size${It(r)}`,i],asterisk:[a&&"asterisk"]},c=ur(l,bG,e);return{...e,...c}},vG=Dt(yG,{shouldForwardProp:t=>ml(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${L0.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(Yn(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),wG=D.forwardRef(function(e,n){const r=dr({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:o,shrink:i,variant:a,className:l,...c}=r,u=Ld();let h=i;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const p=Vf({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),m={...r,disableAnimation:s,formControl:u,shrink:h,size:p.size,variant:p.variant,required:p.required,focused:p.focused},g=xG(m);return z.jsx(vG,{"data-shrink":h,ref:n,className:Xt(g.root,l),...c,ownerState:m,classes:g})});function kG(t){return or("MuiFormControl",t)}ir("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const CG=t=>{const{classes:e,margin:n,fullWidth:r}=t,s={root:["root",n!=="none"&&`margin${It(n)}`,r&&"fullWidth"]};return ur(s,kG,e)},SG=Dt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${It(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),TG=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormControl"}),{children:s,className:o,color:i="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:p=!1,margin:m="none",required:g=!1,size:x="medium",variant:w="outlined",...k}=r,S={...r,color:i,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:p,margin:m,required:g,size:x,variant:w},$=CG(S),[T,E]=D.useState(()=>{let K=!1;return s&&D.Children.forEach(s,G=>{if(!b4(G,["Input","Select"]))return;const Y=b4(G,["Select"])?G.props.input:G;Y&&WH(Y.props)&&(K=!0)}),K}),[F,V]=D.useState(()=>{let K=!1;return s&&D.Children.forEach(s,G=>{b4(G,["Input","Select"])&&(Nb(G.props,!0)||Nb(G.props.inputProps,!0))&&(K=!0)}),K}),[j,W]=D.useState(!1);l&&j&&W(!1);const R=u!==void 0&&!l?u:j;let O;D.useRef(!1);const U=D.useMemo(()=>({adornedStart:T,setAdornedStart:E,color:i,disabled:l,error:c,filled:F,focused:R,fullWidth:h,hiddenLabel:p,size:x,onBlur:()=>{W(!1)},onEmpty:()=>{V(!1)},onFilled:()=>{V(!0)},onFocus:()=>{W(!0)},registerEffect:O,required:g,variant:w}),[T,i,l,c,F,R,h,p,O,g,x,w]);return z.jsx(Hx.Provider,{value:U,children:z.jsx(SG,{as:a,ownerState:S,className:Xt($.root,o),ref:n,...k,children:s})})});function IG(t){return or("MuiFormHelperText",t)}const OI=ir("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var FI;const $G=t=>{const{classes:e,contained:n,size:r,disabled:s,error:o,filled:i,focused:a,required:l}=t,c={root:["root",s&&"disabled",o&&"error",r&&`size${It(r)}`,n&&"contained",a&&"focused",i&&"filled",l&&"required"]};return ur(c,IG,e)},NG=Dt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${It(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(Yn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${OI.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${OI.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),EG=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:i="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:p,variant:m,...g}=r,x=Ld(),w=Vf({props:r,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),k={...r,component:i,contained:w.variant==="filled"||w.variant==="outlined",variant:w.variant,size:w.size,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required};delete k.ownerState;const S=$G(k);return z.jsx(NG,{as:i,className:Xt(S.root,o),ref:n,...g,ownerState:k,children:s===" "?FI||(FI=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):s})}),RG=D.createContext({});function AG(t){return or("MuiList",t)}ir("MuiList",["root","padding","dense","subheader"]);const DG=t=>{const{classes:e,disablePadding:n,dense:r,subheader:s}=t;return ur({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},AG,e)},PG=Dt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),MG=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiList"}),{children:s,className:o,component:i="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=D.useMemo(()=>({dense:a}),[a]),p={...r,component:i,dense:a,disablePadding:l},m=DG(p);return z.jsx(RG.Provider,{value:h,children:z.jsxs(PG,{as:i,className:Xt(m.root,o),ref:n,ownerState:p,...u,children:[c,s]})})});function w4(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function zI(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function BR(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function d0(t,e,n,r,s,o){let i=!1,a=s(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(i)return!1;i=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!BR(a,o)||l)a=s(t,a,n);else return a.focus(),!0}return!1}const OG=D.forwardRef(function(e,n){const{actions:r,autoFocus:s=!1,autoFocusItem:o=!1,children:i,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...p}=e,m=D.useRef(null),g=D.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});tc(()=>{s&&m.current.focus()},[s]),D.useImperativeHandle(r,()=>({adjustStyleForScrollbar:($,{direction:T})=>{const E=!m.current.style.width;if($.clientHeight<m.current.clientHeight&&E){const F=`${NR(nc($))}px`;m.current.style[T==="rtl"?"paddingLeft":"paddingRight"]=F,m.current.style.width=`calc(100% + ${F})`}return m.current}}),[]);const x=$=>{const T=m.current,E=$.key;if($.ctrlKey||$.metaKey||$.altKey){u&&u($);return}const V=mi(T).activeElement;if(E==="ArrowDown")$.preventDefault(),d0(T,V,c,l,w4);else if(E==="ArrowUp")$.preventDefault(),d0(T,V,c,l,zI);else if(E==="Home")$.preventDefault(),d0(T,null,c,l,w4);else if(E==="End")$.preventDefault(),d0(T,null,c,l,zI);else if(E.length===1){const j=g.current,W=E.toLowerCase(),R=performance.now();j.keys.length>0&&(R-j.lastTime>500?(j.keys=[],j.repeating=!0,j.previousKeyMatched=!0):j.repeating&&W!==j.keys[0]&&(j.repeating=!1)),j.lastTime=R,j.keys.push(W);const O=V&&!j.repeating&&BR(V,j);j.previousKeyMatched&&(O||d0(T,V,!1,l,w4,j))?$.preventDefault():j.previousKeyMatched=!1}u&&u($)},w=Cs(m,n);let k=-1;D.Children.forEach(i,($,T)=>{if(!D.isValidElement($)){k===T&&(k+=1,k>=i.length&&(k=-1));return}$.props.disabled||(h==="selectedMenu"&&$.props.selected||k===-1)&&(k=T),k===T&&($.props.disabled||$.props.muiSkipListHighlight||$.type.muiSkipListHighlight)&&(k+=1,k>=i.length&&(k=-1))});const S=D.Children.map(i,($,T)=>{if(T===k){const E={};return o&&(E.autoFocus=!0),$.props.tabIndex===void 0&&h==="selectedMenu"&&(E.tabIndex=0),D.cloneElement($,E)}return $});return z.jsx(MG,{role:"menu",ref:w,className:a,onKeyDown:x,tabIndex:s?0:-1,...p,children:S})});function VR(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function $3(t,e){return $3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$3(t,e)}function jR(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,$3(t,e)}var Zx=rR();const Sy=Im(Zx),LI={disabled:!1},Pb=fr.createContext(null);var FG=function(e){return e.scrollTop},T0="unmounted",ed="exited",td="entering",Uh="entered",N3="exiting",gl=function(t){jR(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var i=s,a=i&&!i.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=ed,o.appearStatus=td):l=Uh:r.unmountOnExit||r.mountOnEnter?l=T0:l=ed,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var i=s.in;return i&&o.status===T0?{status:ed}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==td&&i!==Uh&&(o=td):(i===td||i===Uh)&&(o=N3)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,i,a;return o=i=a=s,s!=null&&typeof s!="number"&&(o=s.exit,i=s.enter,a=s.appear!==void 0?s.appear:i),{exit:o,enter:i,appear:a}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===td){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Sy.findDOMNode(this);i&&FG(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ed&&this.setState({status:T0})},n.performEnter=function(s){var o=this,i=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Sy.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),p=a?h.appear:h.enter;if(!s&&!i||LI.disabled){this.safeSetState({status:Uh},function(){o.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:td},function(){o.props.onEntering(c,u),o.onTransitionEnd(p,function(){o.safeSetState({status:Uh},function(){o.props.onEntered(c,u)})})})},n.performExit=function(){var s=this,o=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:Sy.findDOMNode(this);if(!o||LI.disabled){this.safeSetState({status:ed},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:N3},function(){s.props.onExiting(a),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:ed},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,o.nextCallback=null,s(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:Sy.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===T0)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=VR(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return fr.createElement(Pb.Provider,{value:null},typeof i=="function"?i(s,a):fr.cloneElement(fr.Children.only(i),a))},e}(fr.Component);gl.contextType=Pb;gl.propTypes={};function _h(){}gl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_h,onEntering:_h,onEntered:_h,onExit:_h,onExiting:_h,onExited:_h};gl.UNMOUNTED=T0;gl.EXITED=ed;gl.ENTERING=td;gl.ENTERED=Uh;gl.EXITING=N3;function zG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m5(t,e){var n=function(o){return e&&D.isValidElement(o)?e(o):o},r=Object.create(null);return t&&D.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function LG(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var i,a={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];a[r[l][i]]=n(c)}a[l]=n(l)}for(i=0;i<s.length;i++)a[s[i]]=n(s[i]);return a}function ud(t,e,n){return n[e]!=null?n[e]:t.props[e]}function _G(t,e){return m5(t.children,function(n){return D.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ud(n,"appear",t),enter:ud(n,"enter",t),exit:ud(n,"exit",t)})})}function BG(t,e,n){var r=m5(t.children),s=LG(e,r);return Object.keys(s).forEach(function(o){var i=s[o];if(D.isValidElement(i)){var a=o in e,l=o in r,c=e[o],u=D.isValidElement(c)&&!c.props.in;l&&(!a||u)?s[o]=D.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:ud(i,"exit",t),enter:ud(i,"enter",t)}):!l&&a&&!u?s[o]=D.cloneElement(i,{in:!1}):l&&a&&D.isValidElement(c)&&(s[o]=D.cloneElement(i,{onExited:n.bind(null,i),in:c.props.in,exit:ud(i,"exit",t),enter:ud(i,"enter",t)}))}}),s}var VG=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},jG={component:"div",childFactory:function(e){return e}},g5=function(t){jR(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var i=o.handleExited.bind(zG(o));return o.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var i=o.children,a=o.handleExited,l=o.firstRender;return{children:l?_G(s,a):BG(s,i,a),firstRender:!1}},n.handleExited=function(s,o){var i=m5(this.props.children);s.key in i||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(a){var l=Tb({},a.children);return delete l[s.key],{children:l}}))},n.render=function(){var s=this.props,o=s.component,i=s.childFactory,a=VR(s,["component","childFactory"]),l=this.state.contextValue,c=VG(this.state.children).map(i);return delete a.appear,delete a.enter,delete a.exit,o===null?fr.createElement(Pb.Provider,{value:l},c):fr.createElement(Pb.Provider,{value:l},fr.createElement(o,a,c))},e}(fr.Component);g5.propTypes={};g5.defaultProps=jG;const WR=t=>t.scrollTop;function Mb(t,e){const{timeout:n,easing:r,style:s={}}=t;return{duration:s.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function E3(t){return`scale(${t}, ${t**2})`}const WG={entering:{opacity:1,transform:E3(1)},entered:{opacity:1,transform:"none"}},k4=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),R3=D.forwardRef(function(e,n){const{addEndListener:r,appear:s=!0,children:o,easing:i,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:p,onExiting:m,style:g,timeout:x="auto",TransitionComponent:w=gl,...k}=e,S=$R(),$=D.useRef(),T=f5(),E=D.useRef(null),F=Cs(E,Dm(o),n),V=Y=>Z=>{if(Y){const ne=E.current;Z===void 0?Y(ne):Y(ne,Z)}},j=V(u),W=V((Y,Z)=>{WR(Y);const{duration:ne,delay:J,easing:re}=Mb({style:g,timeout:x,easing:i},{mode:"enter"});let se;x==="auto"?(se=T.transitions.getAutoHeightDuration(Y.clientHeight),$.current=se):se=ne,Y.style.transition=[T.transitions.create("opacity",{duration:se,delay:J}),T.transitions.create("transform",{duration:k4?se:se*.666,delay:J,easing:re})].join(","),l&&l(Y,Z)}),R=V(c),O=V(m),U=V(Y=>{const{duration:Z,delay:ne,easing:J}=Mb({style:g,timeout:x,easing:i},{mode:"exit"});let re;x==="auto"?(re=T.transitions.getAutoHeightDuration(Y.clientHeight),$.current=re):re=Z,Y.style.transition=[T.transitions.create("opacity",{duration:re,delay:ne}),T.transitions.create("transform",{duration:k4?re:re*.666,delay:k4?ne:ne||re*.333,easing:J})].join(","),Y.style.opacity=0,Y.style.transform=E3(.75),h&&h(Y)}),K=V(p),G=Y=>{x==="auto"&&S.start($.current||0,Y),r&&r(E.current,Y)};return z.jsx(w,{appear:s,in:a,nodeRef:E,onEnter:W,onEntered:R,onEntering:j,onExit:U,onExited:K,onExiting:O,addEndListener:G,timeout:x==="auto"?null:x,...k,children:(Y,Z)=>D.cloneElement(o,{style:{opacity:0,transform:E3(.75),visibility:Y==="exited"&&!a?"hidden":void 0,...WG[Y],...g,...o.props.style},ref:F,...Z})})});R3&&(R3.muiSupportAuto=!0);function UG(t){const e=mi(t);return e.body===t?nc(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function _0(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function _I(t){return parseInt(nc(t).getComputedStyle(t).paddingRight,10)||0}function HG(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function BI(t,e,n,r,s){const o=[e,n,...r];[].forEach.call(t.children,i=>{const a=!o.includes(i),l=!HG(i);a&&l&&_0(i,s)})}function C4(t,e){let n=-1;return t.some((r,s)=>e(r)?(n=s,!0):!1),n}function GG(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(UG(r)){const i=NR(nc(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${_I(r)+i}px`;const a=mi(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${_I(l)+i}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=mi(r).body;else{const i=r.parentElement,a=nc(r);o=(i==null?void 0:i.nodeName)==="HTML"&&a.getComputedStyle(i).overflowY==="scroll"?i:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:i,property:a})=>{o?i.style.setProperty(a,o):i.style.removeProperty(a)})}}function qG(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class KG{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&_0(e.modalRef,!1);const s=qG(n);BI(n,e.mount,e.modalRef,s,!0);const o=C4(this.containers,i=>i.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:s}),r)}mount(e,n){const r=C4(this.containers,o=>o.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=GG(s,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=C4(this.containers,i=>i.modals.includes(e)),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&_0(e.modalRef,n),BI(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&_0(i.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const XG=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function YG(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function ZG(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function QG(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||ZG(t))}function JG(t){const e=[],n=[];return Array.from(t.querySelectorAll(XG)).forEach((r,s)=>{const o=YG(r);o===-1||!QG(r)||(o===0?e.push(r):n.push({documentOrder:s,tabIndex:o,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function eq(){return!0}function tq(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=JG,isEnabled:i=eq,open:a}=t,l=D.useRef(!1),c=D.useRef(null),u=D.useRef(null),h=D.useRef(null),p=D.useRef(null),m=D.useRef(!1),g=D.useRef(null),x=Cs(Dm(e),g),w=D.useRef(null);D.useEffect(()=>{!a||!g.current||(m.current=!n)},[n,a]),D.useEffect(()=>{if(!a||!g.current)return;const $=mi(g.current);return g.current.contains($.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),m.current&&g.current.focus()),()=>{s||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),D.useEffect(()=>{if(!a||!g.current)return;const $=mi(g.current),T=V=>{w.current=V,!(r||!i()||V.key!=="Tab")&&$.activeElement===g.current&&V.shiftKey&&(l.current=!0,u.current&&u.current.focus())},E=()=>{var W,R;const V=g.current;if(V===null)return;if(!$.hasFocus()||!i()||l.current){l.current=!1;return}if(V.contains($.activeElement)||r&&$.activeElement!==c.current&&$.activeElement!==u.current)return;if($.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!m.current)return;let j=[];if(($.activeElement===c.current||$.activeElement===u.current)&&(j=o(g.current)),j.length>0){const O=!!((W=w.current)!=null&&W.shiftKey&&((R=w.current)==null?void 0:R.key)==="Tab"),U=j[0],K=j[j.length-1];typeof U!="string"&&typeof K!="string"&&(O?K.focus():U.focus())}else V.focus()};$.addEventListener("focusin",E),$.addEventListener("keydown",T,!0);const F=setInterval(()=>{$.activeElement&&$.activeElement.tagName==="BODY"&&E()},50);return()=>{clearInterval(F),$.removeEventListener("focusin",E),$.removeEventListener("keydown",T,!0)}},[n,r,s,i,a,o]);const k=$=>{h.current===null&&(h.current=$.relatedTarget),m.current=!0,p.current=$.target;const T=e.props.onFocus;T&&T($)},S=$=>{h.current===null&&(h.current=$.relatedTarget),m.current=!0};return z.jsxs(D.Fragment,{children:[z.jsx("div",{tabIndex:a?0:-1,onFocus:S,ref:c,"data-testid":"sentinelStart"}),D.cloneElement(e,{ref:x,onFocus:k}),z.jsx("div",{tabIndex:a?0:-1,onFocus:S,ref:u,"data-testid":"sentinelEnd"})]})}function nq(t){return typeof t=="function"?t():t}const UR=D.forwardRef(function(e,n){const{children:r,container:s,disablePortal:o=!1}=e,[i,a]=D.useState(null),l=Cs(D.isValidElement(r)?Dm(r):null,n);if(tc(()=>{o||a(nq(s)||document.body)},[s,o]),tc(()=>{if(i&&!o)return $b(n,i),()=>{$b(n,null)}},[n,i,o]),o){if(D.isValidElement(r)){const c={ref:l};return D.cloneElement(r,c)}return r}return i&&Zx.createPortal(r,i)});function Bo(t,e){const{className:n,elementType:r,ownerState:s,externalForwardedProps:o,internalForwardedProps:i,...a}=e,{component:l,slots:c={[t]:void 0},slotProps:u={[t]:void 0},...h}=o,p=c[t]||r,m=DR(u[t],s),{props:{component:g,...x},internalRef:w}=AR({className:n,...a,externalForwardedProps:t==="root"?h:void 0,externalSlotProps:m}),k=Cs(w,m==null?void 0:m.ref,e.ref),S=t==="root"?g||l:g,$=ER(p,{...t==="root"&&!l&&!c[t]&&i,...t!=="root"&&!c[t]&&i,...x,...S&&{as:S},ref:k},s);return[p,$]}const rq={entering:{opacity:1},entered:{opacity:1}},sq=D.forwardRef(function(e,n){const r=f5(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:p,onExit:m,onExited:g,onExiting:x,style:w,timeout:k=s,TransitionComponent:S=gl,...$}=e,T=D.useRef(null),E=Cs(T,Dm(a),n),F=G=>Y=>{if(G){const Z=T.current;Y===void 0?G(Z):G(Z,Y)}},V=F(p),j=F((G,Y)=>{WR(G);const Z=Mb({style:w,timeout:k,easing:l},{mode:"enter"});G.style.webkitTransition=r.transitions.create("opacity",Z),G.style.transition=r.transitions.create("opacity",Z),u&&u(G,Y)}),W=F(h),R=F(x),O=F(G=>{const Y=Mb({style:w,timeout:k,easing:l},{mode:"exit"});G.style.webkitTransition=r.transitions.create("opacity",Y),G.style.transition=r.transitions.create("opacity",Y),m&&m(G)}),U=F(g),K=G=>{o&&o(T.current,G)};return z.jsx(S,{appear:i,in:c,nodeRef:T,onEnter:j,onEntered:W,onEntering:V,onExit:O,onExited:U,onExiting:R,addEndListener:K,timeout:k,...$,children:(G,Y)=>D.cloneElement(a,{style:{opacity:0,visibility:G==="exited"&&!c?"hidden":void 0,...rq[G],...w,...a.props.style},ref:E,...Y})})});function oq(t){return or("MuiBackdrop",t)}ir("MuiBackdrop",["root","invisible"]);const iq=t=>{const{ownerState:e,...n}=t;return n},aq=t=>{const{classes:e,invisible:n}=t;return ur({root:["root",n&&"invisible"]},oq,e)},lq=Dt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),cq=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiBackdrop"}),{children:s,className:o,component:i="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:p={},TransitionComponent:m,transitionDuration:g,...x}=r,w={...r,component:i,invisible:a},k=aq(w),S={transition:m,root:c.Root,...p},$={...u,...h},T={slots:S,slotProps:$},[E,F]=Bo("root",{elementType:lq,externalForwardedProps:T,className:Xt(k.root,o),ownerState:w}),[V,j]=Bo("transition",{elementType:sq,externalForwardedProps:T,ownerState:w}),W=iq(j);return z.jsx(V,{in:l,timeout:g,...x,...W,children:z.jsx(E,{"aria-hidden":!0,...F,classes:k,ref:n,children:s})})});function uq(t){return typeof t=="function"?t():t}function dq(t){return t?t.props.hasOwnProperty("in"):!1}const VI=()=>{},Ty=new KG;function hq(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:i,children:a,onClose:l,open:c,rootRef:u}=t,h=D.useRef({}),p=D.useRef(null),m=D.useRef(null),g=Cs(m,u),[x,w]=D.useState(!c),k=dq(a);let S=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(S=!1);const $=()=>mi(p.current),T=()=>(h.current.modalRef=m.current,h.current.mount=p.current,h.current),E=()=>{Ty.mount(T(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},F=Xa(()=>{const Y=uq(e)||$().body;Ty.add(T(),Y),m.current&&E()}),V=()=>Ty.isTopModal(T()),j=Xa(Y=>{p.current=Y,Y&&(c&&V()?E():m.current&&_0(m.current,S))}),W=D.useCallback(()=>{Ty.remove(T(),S)},[S]);D.useEffect(()=>()=>{W()},[W]),D.useEffect(()=>{c?F():(!k||!s)&&W()},[c,W,k,s,F]);const R=Y=>Z=>{var ne;(ne=Y.onKeyDown)==null||ne.call(Y,Z),!(Z.key!=="Escape"||Z.which===229||!V())&&(n||(Z.stopPropagation(),l&&l(Z,"escapeKeyDown")))},O=Y=>Z=>{var ne;(ne=Y.onClick)==null||ne.call(Y,Z),Z.target===Z.currentTarget&&l&&l(Z,"backdropClick")};return{getRootProps:(Y={})=>{const Z=RR(t);delete Z.onTransitionEnter,delete Z.onTransitionExited;const ne={...Z,...Y};return{role:"presentation",...ne,onKeyDown:R(ne),ref:g}},getBackdropProps:(Y={})=>{const Z=Y;return{"aria-hidden":!0,...Z,onClick:O(Z),open:c}},getTransitionProps:()=>{const Y=()=>{w(!1),o&&o()},Z=()=>{w(!0),i&&i(),s&&W()};return{onEnter:xI(Y,(a==null?void 0:a.props.onEnter)??VI),onExited:xI(Z,(a==null?void 0:a.props.onExited)??VI)}},rootRef:g,portalRef:j,isTopModal:V,exited:x,hasTransition:k}}function fq(t){return or("MuiModal",t)}ir("MuiModal",["root","hidden","backdrop"]);const pq=t=>{const{open:e,exited:n,classes:r}=t;return ur({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},fq,r)},mq=Dt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(Yn(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),gq=Dt(cq,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),yq=D.forwardRef(function(e,n){const r=dr({name:"MuiModal",props:e}),{BackdropComponent:s=gq,BackdropProps:o,classes:i,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:p={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:w=!1,disablePortal:k=!1,disableRestoreFocus:S=!1,disableScrollLock:$=!1,hideBackdrop:T=!1,keepMounted:E=!1,onBackdropClick:F,onClose:V,onTransitionEnter:j,onTransitionExited:W,open:R,slotProps:O={},slots:U={},theme:K,...G}=r,Y={...r,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:x,disableEscapeKeyDown:w,disablePortal:k,disableRestoreFocus:S,disableScrollLock:$,hideBackdrop:T,keepMounted:E},{getRootProps:Z,getBackdropProps:ne,getTransitionProps:J,portalRef:re,isTopModal:se,exited:q,hasTransition:le}=hq({...Y,rootRef:n}),be={...Y,exited:q},pe=pq(be),de={};if(c.props.tabIndex===void 0&&(de.tabIndex="-1"),le){const{onEnter:Ge,onExited:mt}=J();de.onEnter=Ge,de.onExited=mt}const we={...G,slots:{root:p.Root,backdrop:p.Backdrop,...U},slotProps:{...m,...O}},[Ne,Te]=Bo("root",{elementType:mq,externalForwardedProps:we,getSlotProps:Z,additionalProps:{ref:n,as:h},ownerState:be,className:Xt(a,pe==null?void 0:pe.root,!be.open&&be.exited&&(pe==null?void 0:pe.hidden))}),[Ee,We]=Bo("backdrop",{elementType:s,externalForwardedProps:we,additionalProps:o,getSlotProps:Ge=>ne({...Ge,onClick:mt=>{F&&F(mt),Ge!=null&&Ge.onClick&&Ge.onClick(mt)}}),className:Xt(o==null?void 0:o.className,pe==null?void 0:pe.backdrop),ownerState:be}),Xe=Cs(o==null?void 0:o.ref,We.ref);return!E&&!R&&(!le||q)?null:z.jsx(UR,{ref:re,container:u,disablePortal:k,children:z.jsxs(Ne,{...Te,children:[!T&&s?z.jsx(Ee,{...We,ref:Xe}):null,z.jsx(tq,{disableEnforceFocus:x,disableAutoFocus:g,disableRestoreFocus:S,isEnabled:se,open:R,children:D.cloneElement(c,de)})]})})});function bq(t){return or("MuiPaper",t)}ir("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const xq=t=>{const{square:e,elevation:n,variant:r,classes:s}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return ur(o,bq,s)},vq=Dt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(Yn(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),y5=D.forwardRef(function(e,n){var m;const r=dr({props:e,name:"MuiPaper"}),s=f5(),{className:o,component:i="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:i,elevation:a,square:l,variant:c},p=xq(h);return z.jsx(vq,{as:i,ownerState:h,className:Xt(p.root,o),ref:n,...u,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(m=s.vars.overlays)==null?void 0:m[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${As("#fff",T3(a))}, ${As("#fff",T3(a))})`}},...u.style}})});function wq(t){return or("MuiPopover",t)}ir("MuiPopover",["root","paper"]);function jI(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function WI(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function UI(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function S4(t){return typeof t=="function"?t():t}const kq=t=>{const{classes:e}=t;return ur({root:["root"],paper:["paper"]},wq,e)},Cq=Dt(yq,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),HR=Dt(y5,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Sq=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiPopover"}),{action:s,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:p=8,marginThreshold:m=16,open:g,PaperProps:x={},slots:w={},slotProps:k={},transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:$=R3,transitionDuration:T="auto",TransitionProps:{onEntering:E,...F}={},disableScrollLock:V=!1,...j}=r,W=(k==null?void 0:k.paper)??x,R=D.useRef(),O={...r,anchorOrigin:i,anchorReference:l,elevation:p,marginThreshold:m,externalPaperSlotProps:W,transformOrigin:S,TransitionComponent:$,transitionDuration:T,TransitionProps:F},U=kq(O),K=D.useCallback(()=>{if(l==="anchorPosition")return a;const We=S4(o),Ge=(We&&We.nodeType===1?We:mi(R.current).body).getBoundingClientRect();return{top:Ge.top+jI(Ge,i.vertical),left:Ge.left+WI(Ge,i.horizontal)}},[o,i.horizontal,i.vertical,a,l]),G=D.useCallback(We=>({vertical:jI(We,S.vertical),horizontal:WI(We,S.horizontal)}),[S.horizontal,S.vertical]),Y=D.useCallback(We=>{const Xe={width:We.offsetWidth,height:We.offsetHeight},Ge=G(Xe);if(l==="none")return{top:null,left:null,transformOrigin:UI(Ge)};const mt=K();let ft=mt.top-Ge.vertical,ct=mt.left-Ge.horizontal;const Ze=ft+Xe.height,rt=ct+Xe.width,Ke=nc(S4(o)),at=Ke.innerHeight-m,ut=Ke.innerWidth-m;if(m!==null&&ft<m){const kt=ft-m;ft-=kt,Ge.vertical+=kt}else if(m!==null&&Ze>at){const kt=Ze-at;ft-=kt,Ge.vertical+=kt}if(m!==null&&ct<m){const kt=ct-m;ct-=kt,Ge.horizontal+=kt}else if(rt>ut){const kt=rt-ut;ct-=kt,Ge.horizontal+=kt}return{top:`${Math.round(ft)}px`,left:`${Math.round(ct)}px`,transformOrigin:UI(Ge)}},[o,l,K,G,m]),[Z,ne]=D.useState(g),J=D.useCallback(()=>{const We=R.current;if(!We)return;const Xe=Y(We);Xe.top!==null&&We.style.setProperty("top",Xe.top),Xe.left!==null&&(We.style.left=Xe.left),We.style.transformOrigin=Xe.transformOrigin,ne(!0)},[Y]);D.useEffect(()=>(V&&window.addEventListener("scroll",J),()=>window.removeEventListener("scroll",J)),[o,V,J]);const re=(We,Xe)=>{E&&E(We,Xe),J()},se=()=>{ne(!1)};D.useEffect(()=>{g&&J()}),D.useImperativeHandle(s,()=>g?{updatePosition:()=>{J()}}:null,[g,J]),D.useEffect(()=>{if(!g)return;const We=TR(()=>{J()}),Xe=nc(o);return Xe.addEventListener("resize",We),()=>{We.clear(),Xe.removeEventListener("resize",We)}},[o,g,J]);let q=T;T==="auto"&&!$.muiSupportAuto&&(q=void 0);const le=h||(o?mi(S4(o)).body:void 0),be={slots:w,slotProps:{...k,paper:W}},[pe,de]=Bo("paper",{elementType:HR,externalForwardedProps:be,additionalProps:{elevation:p,className:Xt(U.paper,W==null?void 0:W.className),style:Z?W.style:{...W.style,opacity:0}},ownerState:O}),[we,{slotProps:Ne,...Te}]=Bo("root",{elementType:Cq,externalForwardedProps:be,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:le,open:g},ownerState:O,className:Xt(U.root,u)}),Ee=Cs(R,de.ref);return z.jsx(we,{...Te,...!I3(we)&&{slotProps:Ne,disableScrollLock:V},...j,ref:n,children:z.jsx($,{appear:!0,in:g,onEntering:re,onExited:se,timeout:q,...F,children:z.jsx(pe,{...de,ref:Ee,children:c})})})});function Tq(t){return or("MuiMenu",t)}ir("MuiMenu",["root","paper","list"]);const Iq={vertical:"top",horizontal:"right"},$q={vertical:"top",horizontal:"left"},Nq=t=>{const{classes:e}=t;return ur({root:["root"],paper:["paper"],list:["list"]},Tq,e)},Eq=Dt(Sq,{shouldForwardProp:t=>ml(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Rq=Dt(HR,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Aq=Dt(OG,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Dq=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:o,className:i,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:g,...x}={},variant:w="selectedMenu",slots:k={},slotProps:S={},...$}=r,T=PR(),E={...r,autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:g,PaperProps:h,transitionDuration:m,TransitionProps:x,variant:w},F=Nq(E),V=s&&!a&&u,j=D.useRef(null),W=(Z,ne)=>{j.current&&j.current.adjustStyleForScrollbar(Z,{direction:T?"rtl":"ltr"}),g&&g(Z,ne)},R=Z=>{Z.key==="Tab"&&(Z.preventDefault(),c&&c(Z,"tabKeyDown"))};let O=-1;D.Children.map(o,(Z,ne)=>{D.isValidElement(Z)&&(Z.props.disabled||(w==="selectedMenu"&&Z.props.selected||O===-1)&&(O=ne))});const U=k.paper??Rq,K=S.paper??h,G=C3({elementType:k.root,externalSlotProps:S.root,ownerState:E,className:[F.root,i]}),Y=C3({elementType:U,externalSlotProps:K,ownerState:E,className:F.paper});return z.jsx(Eq,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:T?"right":"left"},transformOrigin:T?Iq:$q,slots:{paper:U,root:k.root},slotProps:{root:G,paper:Y},open:u,ref:n,transitionDuration:m,TransitionProps:{onEntering:W,...x},ownerState:E,...$,classes:p,children:z.jsx(Aq,{onKeyDown:R,actions:j,autoFocus:s&&(O===-1||a),autoFocusItem:V,variant:w,...l,className:Xt(F.list,l.className),children:o})})});function Pq(t){return or("MuiNativeSelect",t)}const b5=ir("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Mq=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:o,error:i}=t,a={select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${It(n)}`,o&&"iconOpen",r&&"disabled"]};return ur(a,Pq,e)},GR=Dt("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${b5.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Oq=Dt(GR,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ml,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${b5.multiple}`]:e.multiple}]}})({}),qR=Dt("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${b5.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Fq=Dt(qR,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${It(n.variant)}`],n.open&&e.iconOpen]}})({}),zq=D.forwardRef(function(e,n){const{className:r,disabled:s,error:o,IconComponent:i,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:s,variant:l,error:o},h=Mq(u);return z.jsxs(D.Fragment,{children:[z.jsx(Oq,{ownerState:u,className:Xt(h.select,r),disabled:s,ref:a||n,...c}),e.multiple?null:z.jsx(Fq,{as:i,ownerState:u,className:h.icon})]})});function Lq(t){return or("MuiSelect",t)}const h0=ir("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var HI;const _q=Dt(GR,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${h0.select}`]:e.select},{[`&.${h0.select}`]:e[n.variant]},{[`&.${h0.error}`]:e.error},{[`&.${h0.multiple}`]:e.multiple}]}})({[`&.${h0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Bq=Dt(qR,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${It(n.variant)}`],n.open&&e.iconOpen]}})({}),Vq=Dt("input",{shouldForwardProp:t=>_R(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function GI(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function jq(t){return t==null||typeof t=="string"&&!t.trim()}const Wq=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:o,error:i}=t,a={select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${It(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ur(a,Lq,e)},Uq=D.forwardRef(function(e,n){var tn;const{"aria-describedby":r,"aria-label":s,autoFocus:o,autoWidth:i,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:p,error:m=!1,IconComponent:g,inputRef:x,labelId:w,MenuProps:k={},multiple:S,name:$,onBlur:T,onChange:E,onClose:F,onFocus:V,onOpen:j,open:W,readOnly:R,renderValue:O,required:U,SelectDisplayProps:K={},tabIndex:G,type:Y,value:Z,variant:ne="standard",...J}=e,[re,se]=z0({controlled:Z,default:u,name:"Select"}),[q,le]=z0({controlled:W,default:c,name:"Select"}),be=D.useRef(null),pe=D.useRef(null),[de,we]=D.useState(null),{current:Ne}=D.useRef(W!=null),[Te,Ee]=D.useState(),We=Cs(n,x),Xe=D.useCallback(Fe=>{pe.current=Fe,Fe&&we(Fe)},[]),Ge=de==null?void 0:de.parentNode;D.useImperativeHandle(We,()=>({focus:()=>{pe.current.focus()},node:be.current,value:re}),[re]),D.useEffect(()=>{c&&q&&de&&!Ne&&(Ee(i?null:Ge.clientWidth),pe.current.focus())},[de,i]),D.useEffect(()=>{o&&pe.current.focus()},[o]),D.useEffect(()=>{if(!w)return;const Fe=mi(pe.current).getElementById(w);if(Fe){const Qt=()=>{getSelection().isCollapsed&&pe.current.focus()};return Fe.addEventListener("click",Qt),()=>{Fe.removeEventListener("click",Qt)}}},[w]);const mt=(Fe,Qt)=>{Fe?j&&j(Qt):F&&F(Qt),Ne||(Ee(i?null:Ge.clientWidth),le(Fe))},ft=Fe=>{Fe.button===0&&(Fe.preventDefault(),pe.current.focus(),mt(!0,Fe))},ct=Fe=>{mt(!1,Fe)},Ze=D.Children.toArray(a),rt=Fe=>{const Qt=Ze.find(zn=>zn.props.value===Fe.target.value);Qt!==void 0&&(se(Qt.props.value),E&&E(Fe,Qt))},Ke=Fe=>Qt=>{let zn;if(Qt.currentTarget.hasAttribute("tabindex")){if(S){zn=Array.isArray(re)?re.slice():[];const Ls=re.indexOf(Fe.props.value);Ls===-1?zn.push(Fe.props.value):zn.splice(Ls,1)}else zn=Fe.props.value;if(Fe.props.onClick&&Fe.props.onClick(Qt),re!==zn&&(se(zn),E)){const Ls=Qt.nativeEvent||Qt,ls=new Ls.constructor(Ls.type,Ls);Object.defineProperty(ls,"target",{writable:!0,value:{value:zn,name:$}}),E(ls,Fe)}S||mt(!1,Qt)}},at=Fe=>{R||[" ","ArrowUp","ArrowDown","Enter"].includes(Fe.key)&&(Fe.preventDefault(),mt(!0,Fe))},ut=de!==null&&q,kt=Fe=>{!ut&&T&&(Object.defineProperty(Fe,"target",{writable:!0,value:{value:re,name:$}}),T(Fe))};delete J["aria-invalid"];let Qe,qt;const Wt=[];let en=!1;(Nb({value:re})||p)&&(O?Qe=O(re):en=!0);const yn=Ze.map(Fe=>{if(!D.isValidElement(Fe))return null;let Qt;if(S){if(!Array.isArray(re))throw new Error(Jl(2));Qt=re.some(zn=>GI(zn,Fe.props.value)),Qt&&en&&Wt.push(Fe.props.children)}else Qt=GI(re,Fe.props.value),Qt&&en&&(qt=Fe.props.children);return D.cloneElement(Fe,{"aria-selected":Qt?"true":"false",onClick:Ke(Fe),onKeyUp:zn=>{zn.key===" "&&zn.preventDefault(),Fe.props.onKeyUp&&Fe.props.onKeyUp(zn)},role:"option",selected:Qt,value:void 0,"data-value":Fe.props.value})});en&&(S?Wt.length===0?Qe=null:Qe=Wt.reduce((Fe,Qt,zn)=>(Fe.push(Qt),zn<Wt.length-1&&Fe.push(", "),Fe),[]):Qe=qt);let mn=Te;!i&&Ne&&de&&(mn=Ge.clientWidth);let Kt;typeof G<"u"?Kt=G:Kt=h?null:0;const At=K.id||($?`mui-component-select-${$}`:void 0),bn={...e,variant:ne,value:re,open:ut,error:m},Gt=Wq(bn),Er={...k.PaperProps,...(tn=k.slotProps)==null?void 0:tn.paper},yr=Gk();return z.jsxs(D.Fragment,{children:[z.jsx(_q,{as:"div",ref:Xe,tabIndex:Kt,role:"combobox","aria-controls":yr,"aria-disabled":h?"true":void 0,"aria-expanded":ut?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[w,At].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":U?"true":void 0,"aria-invalid":m?"true":void 0,onKeyDown:at,onMouseDown:h||R?null:ft,onBlur:kt,onFocus:V,...K,ownerState:bn,className:Xt(K.className,Gt.select,l),id:At,children:jq(Qe)?HI||(HI=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Qe}),z.jsx(Vq,{"aria-invalid":m,value:Array.isArray(re)?re.join(","):re,name:$,ref:be,"aria-hidden":!0,onChange:rt,tabIndex:-1,disabled:h,className:Gt.nativeInput,autoFocus:o,required:U,...J,ownerState:bn}),z.jsx(Bq,{as:g,className:Gt.icon,ownerState:bn}),z.jsx(Dq,{id:`menu-${$||""}`,anchorEl:Ge,open:ut,onClose:ct,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...k,MenuListProps:{"aria-labelledby":w,role:"listbox","aria-multiselectable":S?"true":void 0,disableListWrap:!0,id:yr,...k.MenuListProps},slotProps:{...k.slotProps,paper:{...Er,style:{minWidth:mn,...Er!=null?Er.style:null}}},children:yn})]})}),KR=Yx(z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Hq=t=>{const{classes:e}=t;return e},x5={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>ml(t)&&t!=="variant",slot:"Root"},Gq=Dt(Eb,x5)(""),qq=Dt(Db,x5)(""),Kq=Dt(Ab,x5)(""),XR=D.forwardRef(function(e,n){const r=dr({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:i={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=KR,id:h,input:p,inputProps:m,label:g,labelId:x,MenuProps:w,multiple:k=!1,native:S=!1,onClose:$,onOpen:T,open:E,renderValue:F,SelectDisplayProps:V,variant:j="outlined",...W}=r,R=S?zq:Uq,O=Ld(),U=Vf({props:r,muiFormControl:O,states:["variant","error"]}),K=U.variant||j,G={...r,variant:K,classes:i},Y=Hq(G),{root:Z,...ne}=Y,J=p||{standard:z.jsx(Gq,{ownerState:G}),outlined:z.jsx(qq,{label:g,ownerState:G}),filled:z.jsx(Kq,{ownerState:G})}[K],re=Cs(n,Dm(J));return z.jsx(D.Fragment,{children:D.cloneElement(J,{inputComponent:R,inputProps:{children:o,error:U.error,IconComponent:u,variant:K,type:void 0,multiple:k,...S?{id:h}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:x,MenuProps:w,onClose:$,onOpen:T,open:E,renderValue:F,SelectDisplayProps:{id:h,...V}},...m,classes:m?yo(ne,m.classes):ne,...p?p.props.inputProps:{}},...(k&&S||c)&&K==="outlined"?{notched:!0}:{},ref:re,className:Xt(J.props.className,a,Y.root),...!p&&{variant:K},...W})})});XR.muiName="Select";function Xq(t){return or("MuiTextField",t)}ir("MuiTextField",["root"]);const Yq={standard:Eb,filled:Ab,outlined:Db},Zq=t=>{const{classes:e}=t;return ur({root:["root"]},Xq,e)},Qq=Dt(TG,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Jq=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:i,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:p,fullWidth:m=!1,helperText:g,id:x,InputLabelProps:w,inputProps:k,InputProps:S,inputRef:$,label:T,maxRows:E,minRows:F,multiline:V=!1,name:j,onBlur:W,onChange:R,onFocus:O,placeholder:U,required:K=!1,rows:G,select:Y=!1,SelectProps:Z,slots:ne={},slotProps:J={},type:re,value:se,variant:q="outlined",...le}=r,be={...r,autoFocus:o,color:l,disabled:u,error:h,fullWidth:m,multiline:V,required:K,select:Y,variant:q},pe=Zq(be),de=Gk(x),we=g&&de?`${de}-helper-text`:void 0,Ne=T&&de?`${de}-label`:void 0,Te=Yq[q],Ee={slots:ne,slotProps:{input:S,inputLabel:w,htmlInput:k,formHelperText:p,select:Z,...J}},We={},Xe=Ee.slotProps.inputLabel;q==="outlined"&&(Xe&&typeof Xe.shrink<"u"&&(We.notched=Xe.shrink),We.label=T),Y&&((!Z||!Z.native)&&(We.id=void 0),We["aria-describedby"]=void 0);const[Ge,mt]=Bo("input",{elementType:Te,externalForwardedProps:Ee,additionalProps:We,ownerState:be}),[ft,ct]=Bo("inputLabel",{elementType:wG,externalForwardedProps:Ee,ownerState:be}),[Ze,rt]=Bo("htmlInput",{elementType:"input",externalForwardedProps:Ee,ownerState:be}),[Ke,at]=Bo("formHelperText",{elementType:EG,externalForwardedProps:Ee,ownerState:be}),[ut,kt]=Bo("select",{elementType:XR,externalForwardedProps:Ee,ownerState:be}),Qe=z.jsx(Ge,{"aria-describedby":we,autoComplete:s,autoFocus:o,defaultValue:c,fullWidth:m,multiline:V,name:j,rows:G,maxRows:E,minRows:F,type:re,value:se,id:de,inputRef:$,onBlur:W,onChange:R,onFocus:O,placeholder:U,inputProps:rt,slots:{input:ne.htmlInput?Ze:void 0},...mt});return z.jsxs(Qq,{className:Xt(pe.root,a),disabled:u,error:h,fullWidth:m,ref:n,required:K,color:l,variant:q,ownerState:be,...le,children:[T!=null&&T!==""&&z.jsx(ft,{htmlFor:de,id:Ne,...ct,children:T}),Y?z.jsx(ut,{"aria-describedby":we,id:de,labelId:Ne,value:se,input:Qe,...kt,children:i}):Qe,g&&z.jsx(Ke,{id:we,...at,children:g})]})});function qI(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function eK(t={}){const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:s="any",stringify:o,trim:i=!1}=t;return(a,{inputValue:l,getOptionLabel:c})=>{let u=i?l.trim():l;n&&(u=u.toLowerCase()),e&&(u=qI(u));const h=u?a.filter(p=>{let m=(o||c)(p);return n&&(m=m.toLowerCase()),e&&(m=qI(m)),s==="start"?m.startsWith(u):m.includes(u)}):a;return typeof r=="number"?h.slice(0,r):h}}const tK=eK(),KI=5,nK=t=>{var e;return t.current!==null&&((e=t.current.parentElement)==null?void 0:e.contains(document.activeElement))},rK=[];function sK(t){const{unstable_isActiveElementInListbox:e=nK,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:s=!1,autoSelect:o=!1,blurOnSelect:i=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=t.multiple?rK:null,disableClearable:h=!1,disableCloseOnSelect:p=!1,disabled:m,disabledItemsFocusable:g=!1,disableListWrap:x=!1,filterOptions:w=tK,filterSelectedOptions:k=!1,freeSolo:S=!1,getOptionDisabled:$,getOptionKey:T,getOptionLabel:E=_e=>_e.label??_e,groupBy:F,handleHomeEndKeys:V=!t.freeSolo,id:j,includeInputInList:W=!1,inputValue:R,isOptionEqualToValue:O=(_e,je)=>_e===je,multiple:U=!1,onChange:K,onClose:G,onHighlightChange:Y,onInputChange:Z,onOpen:ne,open:J,openOnFocus:re=!1,options:se,readOnly:q=!1,selectOnFocus:le=!t.freeSolo,value:be}=t,pe=Gk(j);let de=E;de=_e=>{const je=E(_e);return typeof je!="string"?String(je):je};const we=D.useRef(!1),Ne=D.useRef(!0),Te=D.useRef(null),Ee=D.useRef(null),[We,Xe]=D.useState(null),[Ge,mt]=D.useState(-1),ft=s?0:-1,ct=D.useRef(ft),[Ze,rt]=z0({controlled:be,default:u,name:c}),[Ke,at]=z0({controlled:R,default:"",name:c,state:"inputValue"}),[ut,kt]=D.useState(!1),Qe=D.useCallback((_e,je,He)=>{if(!(U?Ze.length<je.length:je!==null)&&!a)return;let Mt;if(U)Mt="";else if(je==null)Mt="";else{const Ln=de(je);Mt=typeof Ln=="string"?Ln:""}Ke!==Mt&&(at(Mt),Z&&Z(_e,Mt,He))},[de,Ke,U,Z,at,a,Ze]),[qt,Wt]=z0({controlled:J,default:!1,name:c,state:"open"}),[en,yn]=D.useState(!0),mn=!U&&Ze!=null&&Ke===de(Ze),Kt=qt&&!q,At=Kt?w(se.filter(_e=>!(k&&(U?Ze:[Ze]).some(je=>je!==null&&O(_e,je)))),{inputValue:mn&&en?"":Ke,getOptionLabel:de}):[],bn=qU({filteredOptions:At,value:Ze,inputValue:Ke});D.useEffect(()=>{const _e=Ze!==bn.value;ut&&!_e||S&&!_e||Qe(null,Ze,"reset")},[Ze,Qe,ut,bn.value,S]);const Gt=qt&&At.length>0&&!q,Er=Xa(_e=>{_e===-1?Te.current.focus():We.querySelector(`[data-tag-index="${_e}"]`).focus()});D.useEffect(()=>{U&&Ge>Ze.length-1&&(mt(-1),Er(-1))},[Ze,U,Ge,Er]);function yr(_e,je){if(!Ee.current||_e<0||_e>=At.length)return-1;let He=_e;for(;;){const Ct=Ee.current.querySelector(`[data-option-index="${He}"]`),Mt=g?!1:!Ct||Ct.disabled||Ct.getAttribute("aria-disabled")==="true";if(Ct&&Ct.hasAttribute("tabindex")&&!Mt)return He;if(je==="next"?He=(He+1)%At.length:He=(He-1+At.length)%At.length,He===_e)return-1}}const tn=Xa(({event:_e,index:je,reason:He="auto"})=>{if(ct.current=je,je===-1?Te.current.removeAttribute("aria-activedescendant"):Te.current.setAttribute("aria-activedescendant",`${pe}-option-${je}`),Y&&Y(_e,je===-1?null:At[je],He),!Ee.current)return;const Ct=Ee.current.querySelector(`[role="option"].${n}-focused`);Ct&&(Ct.classList.remove(`${n}-focused`),Ct.classList.remove(`${n}-focusVisible`));let Mt=Ee.current;if(Ee.current.getAttribute("role")!=="listbox"&&(Mt=Ee.current.parentElement.querySelector('[role="listbox"]')),!Mt)return;if(je===-1){Mt.scrollTop=0;return}const Ln=Ee.current.querySelector(`[data-option-index="${je}"]`);if(Ln&&(Ln.classList.add(`${n}-focused`),He==="keyboard"&&Ln.classList.add(`${n}-focusVisible`),Mt.scrollHeight>Mt.clientHeight&&He!=="mouse"&&He!=="touch")){const ae=Ln,br=Mt.clientHeight+Mt.scrollTop,ye=ae.offsetTop+ae.offsetHeight;ye>br?Mt.scrollTop=ye-Mt.clientHeight:ae.offsetTop-ae.offsetHeight*(F?1.3:0)<Mt.scrollTop&&(Mt.scrollTop=ae.offsetTop-ae.offsetHeight*(F?1.3:0))}}),Fe=Xa(({event:_e,diff:je,direction:He="next",reason:Ct="auto"})=>{if(!Kt)return;const Ln=yr((()=>{const ae=At.length-1;if(je==="reset")return ft;if(je==="start")return 0;if(je==="end")return ae;const br=ct.current+je;return br<0?br===-1&&W?-1:x&&ct.current!==-1||Math.abs(je)>1?0:ae:br>ae?br===ae+1&&W?-1:x||Math.abs(je)>1?ae:0:br})(),He);if(tn({index:Ln,reason:Ct,event:_e}),r&&je!=="reset")if(Ln===-1)Te.current.value=Ke;else{const ae=de(At[Ln]);Te.current.value=ae,ae.toLowerCase().indexOf(Ke.toLowerCase())===0&&Ke.length>0&&Te.current.setSelectionRange(Ke.length,ae.length)}}),Qt=()=>{const _e=(je,He)=>{const Ct=je?de(je):"",Mt=He?de(He):"";return Ct===Mt};if(ct.current!==-1&&bn.filteredOptions&&bn.filteredOptions.length!==At.length&&bn.inputValue===Ke&&(U?Ze.length===bn.value.length&&bn.value.every((je,He)=>de(Ze[He])===de(je)):_e(bn.value,Ze))){const je=bn.filteredOptions[ct.current];if(je)return At.findIndex(He=>de(He)===de(je))}return-1},zn=D.useCallback(()=>{if(!Kt)return;const _e=Qt();if(_e!==-1){ct.current=_e;return}const je=U?Ze[0]:Ze;if(At.length===0||je==null){Fe({diff:"reset"});return}if(Ee.current){if(je!=null){const He=At[ct.current];if(U&&He&&Ze.findIndex(Mt=>O(He,Mt))!==-1)return;const Ct=At.findIndex(Mt=>O(Mt,je));Ct===-1?Fe({diff:"reset"}):tn({index:Ct});return}if(ct.current>=At.length-1){tn({index:At.length-1});return}tn({index:ct.current})}},[At.length,U?!1:Ze,k,Fe,tn,Kt,Ke,U]),Ls=Xa(_e=>{$b(Ee,_e),_e&&zn()});D.useEffect(()=>{zn()},[zn]);const ls=_e=>{qt||(Wt(!0),yn(!0),ne&&ne(_e))},cs=(_e,je)=>{qt&&(Wt(!1),G&&G(_e,je))},us=(_e,je,He,Ct)=>{if(U){if(Ze.length===je.length&&Ze.every((Mt,Ln)=>Mt===je[Ln]))return}else if(Ze===je)return;K&&K(_e,je,He,Ct),rt(je)},wo=D.useRef(!1),wi=(_e,je,He="selectOption",Ct="options")=>{let Mt=He,Ln=je;if(U){Ln=Array.isArray(Ze)?Ze.slice():[];const ae=Ln.findIndex(br=>O(je,br));ae===-1?Ln.push(je):Ct!=="freeSolo"&&(Ln.splice(ae,1),Mt="removeOption")}Qe(_e,Ln,Mt),us(_e,Ln,Mt,{option:je}),!p&&(!_e||!_e.ctrlKey&&!_e.metaKey)&&cs(_e,Mt),(i===!0||i==="touch"&&wo.current||i==="mouse"&&!wo.current)&&Te.current.blur()};function Rr(_e,je){if(_e===-1)return-1;let He=_e;for(;;){if(je==="next"&&He===Ze.length||je==="previous"&&He===-1)return-1;const Ct=We.querySelector(`[data-tag-index="${He}"]`);if(!Ct||!Ct.hasAttribute("tabindex")||Ct.disabled||Ct.getAttribute("aria-disabled")==="true")He+=je==="next"?1:-1;else return He}}const Is=(_e,je)=>{if(!U)return;Ke===""&&cs(_e,"toggleInput");let He=Ge;Ge===-1?Ke===""&&je==="previous"&&(He=Ze.length-1):(He+=je==="next"?1:-1,He<0&&(He=0),He===Ze.length&&(He=-1)),He=Rr(He,je),mt(He),Er(He)},no=_e=>{we.current=!0,at(""),Z&&Z(_e,"","clear"),us(_e,U?[]:null,"clear")},Yo=_e=>je=>{if(_e.onKeyDown&&_e.onKeyDown(je),!je.defaultMuiPrevented&&(Ge!==-1&&!["ArrowLeft","ArrowRight"].includes(je.key)&&(mt(-1),Er(-1)),je.which!==229))switch(je.key){case"Home":Kt&&V&&(je.preventDefault(),Fe({diff:"start",direction:"next",reason:"keyboard",event:je}));break;case"End":Kt&&V&&(je.preventDefault(),Fe({diff:"end",direction:"previous",reason:"keyboard",event:je}));break;case"PageUp":je.preventDefault(),Fe({diff:-KI,direction:"previous",reason:"keyboard",event:je}),ls(je);break;case"PageDown":je.preventDefault(),Fe({diff:KI,direction:"next",reason:"keyboard",event:je}),ls(je);break;case"ArrowDown":je.preventDefault(),Fe({diff:1,direction:"next",reason:"keyboard",event:je}),ls(je);break;case"ArrowUp":je.preventDefault(),Fe({diff:-1,direction:"previous",reason:"keyboard",event:je}),ls(je);break;case"ArrowLeft":Is(je,"previous");break;case"ArrowRight":Is(je,"next");break;case"Enter":if(ct.current!==-1&&Kt){const He=At[ct.current],Ct=$?$(He):!1;if(je.preventDefault(),Ct)return;wi(je,He,"selectOption"),r&&Te.current.setSelectionRange(Te.current.value.length,Te.current.value.length)}else S&&Ke!==""&&mn===!1&&(U&&je.preventDefault(),wi(je,Ke,"createOption","freeSolo"));break;case"Escape":Kt?(je.preventDefault(),je.stopPropagation(),cs(je,"escape")):l&&(Ke!==""||U&&Ze.length>0)&&(je.preventDefault(),je.stopPropagation(),no(je));break;case"Backspace":if(U&&!q&&Ke===""&&Ze.length>0){const He=Ge===-1?Ze.length-1:Ge,Ct=Ze.slice();Ct.splice(He,1),us(je,Ct,"removeOption",{option:Ze[He]})}break;case"Delete":if(U&&!q&&Ke===""&&Ze.length>0&&Ge!==-1){const He=Ge,Ct=Ze.slice();Ct.splice(He,1),us(je,Ct,"removeOption",{option:Ze[He]})}break}},Ra=_e=>{kt(!0),re&&!we.current&&ls(_e)},wl=_e=>{if(e(Ee)){Te.current.focus();return}kt(!1),Ne.current=!0,we.current=!1,o&&ct.current!==-1&&Kt?wi(_e,At[ct.current],"blur"):o&&S&&Ke!==""?wi(_e,Ke,"blur","freeSolo"):a&&Qe(_e,Ze,"blur"),cs(_e,"blur")},Mo=_e=>{const je=_e.target.value;Ke!==je&&(at(je),yn(!1),Z&&Z(_e,je,"input")),je===""?!h&&!U&&us(_e,null,"clear"):ls(_e)},ta=_e=>{const je=Number(_e.currentTarget.getAttribute("data-option-index"));ct.current!==je&&tn({event:_e,index:je,reason:"mouse"})},ro=_e=>{tn({event:_e,index:Number(_e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),wo.current=!0},Wn=_e=>{const je=Number(_e.currentTarget.getAttribute("data-option-index"));wi(_e,At[je],"selectOption"),wo.current=!1},M=_e=>je=>{const He=Ze.slice();He.splice(_e,1),us(je,He,"removeOption",{option:Ze[_e]})},_=_e=>{qt?cs(_e,"toggleInput"):ls(_e)},qe=_e=>{_e.currentTarget.contains(_e.target)&&_e.target.getAttribute("id")!==pe&&_e.preventDefault()},X=_e=>{_e.currentTarget.contains(_e.target)&&(Te.current.focus(),le&&Ne.current&&Te.current.selectionEnd-Te.current.selectionStart===0&&Te.current.select(),Ne.current=!1)},ce=_e=>{!m&&(Ke===""||!qt)&&_(_e)};let Ut=S&&Ke.length>0;Ut=Ut||(U?Ze.length>0:Ze!==null);let dt=At;return F&&(dt=At.reduce((_e,je,He)=>{const Ct=F(je);return _e.length>0&&_e[_e.length-1].group===Ct?_e[_e.length-1].options.push(je):_e.push({key:He,index:He,group:Ct,options:[je]}),_e},[])),m&&ut&&wl(),{getRootProps:(_e={})=>({"aria-owns":Gt?`${pe}-listbox`:null,..._e,onKeyDown:Yo(_e),onMouseDown:qe,onClick:X}),getInputLabelProps:()=>({id:`${pe}-label`,htmlFor:pe}),getInputProps:()=>({id:pe,value:Ke,onBlur:wl,onFocus:Ra,onChange:Mo,onMouseDown:ce,"aria-activedescendant":Kt?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Gt?`${pe}-listbox`:void 0,"aria-expanded":Gt,autoComplete:"off",ref:Te,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:m}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:no}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:_}),getTagProps:({index:_e})=>({key:_e,"data-tag-index":_e,tabIndex:-1,...!q&&{onDelete:M(_e)}}),getListboxProps:()=>({role:"listbox",id:`${pe}-listbox`,"aria-labelledby":`${pe}-label`,ref:Ls,onMouseDown:_e=>{_e.preventDefault()}}),getOptionProps:({index:_e,option:je})=>{const He=(U?Ze:[Ze]).some(Mt=>Mt!=null&&O(je,Mt)),Ct=$?$(je):!1;return{key:(T==null?void 0:T(je))??de(je),tabIndex:-1,role:"option",id:`${pe}-option-${_e}`,onMouseMove:ta,onClick:Wn,onTouchStart:ro,"data-option-index":_e,"aria-disabled":Ct,"aria-selected":He}},id:pe,inputValue:Ke,value:Ze,dirty:Ut,expanded:Kt&&We,popupOpen:Kt,focused:ut||Ge!==-1,anchorEl:We,setAnchorEl:Xe,focusedTag:Ge,groupedOptions:dt}}var Wo="top",Gi="bottom",qi="right",Uo="left",v5="auto",Pm=[Wo,Gi,qi,Uo],pf="start",tm="end",oK="clippingParents",YR="viewport",f0="popper",iK="reference",XI=Pm.reduce(function(t,e){return t.concat([e+"-"+pf,e+"-"+tm])},[]),ZR=[].concat(Pm,[v5]).reduce(function(t,e){return t.concat([e,e+"-"+pf,e+"-"+tm])},[]),aK="beforeRead",lK="read",cK="afterRead",uK="beforeMain",dK="main",hK="afterMain",fK="beforeWrite",pK="write",mK="afterWrite",gK=[aK,lK,cK,uK,dK,hK,fK,pK,mK];function ll(t){return t?(t.nodeName||"").toLowerCase():null}function gi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function kd(t){var e=gi(t).Element;return t instanceof e||t instanceof Element}function Hi(t){var e=gi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function w5(t){if(typeof ShadowRoot>"u")return!1;var e=gi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function yK(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!Hi(o)||!ll(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(i){var a=s[i];a===!1?o.removeAttribute(i):o.setAttribute(i,a===!0?"":a)}))})}function bK(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,c){return l[c]="",l},{});!Hi(s)||!ll(s)||(Object.assign(s.style,a),Object.keys(o).forEach(function(l){s.removeAttribute(l)}))})}}const xK={name:"applyStyles",enabled:!0,phase:"write",fn:yK,effect:bK,requires:["computeStyles"]};function Qa(t){return t.split("-")[0]}var md=Math.max,Ob=Math.min,mf=Math.round;function A3(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function QR(){return!/^((?!chrome|android).)*safari/i.test(A3())}function gf(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;e&&Hi(t)&&(s=t.offsetWidth>0&&mf(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&mf(r.height)/t.offsetHeight||1);var i=kd(t)?gi(t):window,a=i.visualViewport,l=!QR()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/s,u=(r.top+(l&&a?a.offsetTop:0))/o,h=r.width/s,p=r.height/o;return{width:h,height:p,top:u,right:c+h,bottom:u+p,left:c,x:c,y:u}}function k5(t){var e=gf(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function JR(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&w5(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rc(t){return gi(t).getComputedStyle(t)}function vK(t){return["table","td","th"].indexOf(ll(t))>=0}function hu(t){return((kd(t)?t.ownerDocument:t.document)||window.document).documentElement}function Qx(t){return ll(t)==="html"?t:t.assignedSlot||t.parentNode||(w5(t)?t.host:null)||hu(t)}function YI(t){return!Hi(t)||rc(t).position==="fixed"?null:t.offsetParent}function wK(t){var e=/firefox/i.test(A3()),n=/Trident/i.test(A3());if(n&&Hi(t)){var r=rc(t);if(r.position==="fixed")return null}var s=Qx(t);for(w5(s)&&(s=s.host);Hi(s)&&["html","body"].indexOf(ll(s))<0;){var o=rc(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Mm(t){for(var e=gi(t),n=YI(t);n&&vK(n)&&rc(n).position==="static";)n=YI(n);return n&&(ll(n)==="html"||ll(n)==="body"&&rc(n).position==="static")?e:n||wK(t)||e}function C5(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function B0(t,e,n){return md(t,Ob(e,n))}function kK(t,e,n){var r=B0(t,e,n);return r>n?n:r}function eA(){return{top:0,right:0,bottom:0,left:0}}function tA(t){return Object.assign({},eA(),t)}function nA(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var CK=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,tA(typeof e!="number"?e:nA(e,Pm))};function SK(t){var e,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Qa(n.placement),l=C5(a),c=[Uo,qi].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!i)){var h=CK(s.padding,n),p=k5(o),m=l==="y"?Wo:Uo,g=l==="y"?Gi:qi,x=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],w=i[l]-n.rects.reference[l],k=Mm(o),S=k?l==="y"?k.clientHeight||0:k.clientWidth||0:0,$=x/2-w/2,T=h[m],E=S-p[u]-h[g],F=S/2-p[u]/2+$,V=B0(T,F,E),j=l;n.modifiersData[r]=(e={},e[j]=V,e.centerOffset=V-F,e)}}function TK(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||JR(e.elements.popper,s)&&(e.elements.arrow=s))}const IK={name:"arrow",enabled:!0,phase:"main",fn:SK,effect:TK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yf(t){return t.split("-")[1]}var $K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function NK(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:mf(n*s)/s||0,y:mf(r*s)/s||0}}function ZI(t){var e,n=t.popper,r=t.popperRect,s=t.placement,o=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,p=i.x,m=p===void 0?0:p,g=i.y,x=g===void 0?0:g,w=typeof u=="function"?u({x:m,y:x}):{x:m,y:x};m=w.x,x=w.y;var k=i.hasOwnProperty("x"),S=i.hasOwnProperty("y"),$=Uo,T=Wo,E=window;if(c){var F=Mm(n),V="clientHeight",j="clientWidth";if(F===gi(n)&&(F=hu(n),rc(F).position!=="static"&&a==="absolute"&&(V="scrollHeight",j="scrollWidth")),F=F,s===Wo||(s===Uo||s===qi)&&o===tm){T=Gi;var W=h&&F===E&&E.visualViewport?E.visualViewport.height:F[V];x-=W-r.height,x*=l?1:-1}if(s===Uo||(s===Wo||s===Gi)&&o===tm){$=qi;var R=h&&F===E&&E.visualViewport?E.visualViewport.width:F[j];m-=R-r.width,m*=l?1:-1}}var O=Object.assign({position:a},c&&$K),U=u===!0?NK({x:m,y:x},gi(n)):{x:m,y:x};if(m=U.x,x=U.y,l){var K;return Object.assign({},O,(K={},K[T]=S?"0":"",K[$]=k?"0":"",K.transform=(E.devicePixelRatio||1)<=1?"translate("+m+"px, "+x+"px)":"translate3d("+m+"px, "+x+"px, 0)",K))}return Object.assign({},O,(e={},e[T]=S?x+"px":"",e[$]=k?m+"px":"",e.transform="",e))}function EK(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Qa(e.placement),variation:yf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ZI(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ZI(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const RK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:EK,data:{}};var Iy={passive:!0};function AK(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,o=s===void 0?!0:s,i=r.resize,a=i===void 0?!0:i,l=gi(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,Iy)}),a&&l.addEventListener("resize",n.update,Iy),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Iy)}),a&&l.removeEventListener("resize",n.update,Iy)}}const DK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:AK,data:{}};var PK={left:"right",right:"left",bottom:"top",top:"bottom"};function rb(t){return t.replace(/left|right|bottom|top/g,function(e){return PK[e]})}var MK={start:"end",end:"start"};function QI(t){return t.replace(/start|end/g,function(e){return MK[e]})}function S5(t){var e=gi(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function T5(t){return gf(hu(t)).left+S5(t).scrollLeft}function OK(t,e){var n=gi(t),r=hu(t),s=n.visualViewport,o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;var c=QR();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a+T5(t),y:l}}function FK(t){var e,n=hu(t),r=S5(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=md(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=md(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+T5(t),l=-r.scrollTop;return rc(s||n).direction==="rtl"&&(a+=md(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:i,x:a,y:l}}function I5(t){var e=rc(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function rA(t){return["html","body","#document"].indexOf(ll(t))>=0?t.ownerDocument.body:Hi(t)&&I5(t)?t:rA(Qx(t))}function V0(t,e){var n;e===void 0&&(e=[]);var r=rA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=gi(r),i=s?[o].concat(o.visualViewport||[],I5(r)?r:[]):r,a=e.concat(i);return s?a:a.concat(V0(Qx(i)))}function D3(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zK(t,e){var n=gf(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function JI(t,e,n){return e===YR?D3(OK(t,n)):kd(e)?zK(e,n):D3(FK(hu(t)))}function LK(t){var e=V0(Qx(t)),n=["absolute","fixed"].indexOf(rc(t).position)>=0,r=n&&Hi(t)?Mm(t):t;return kd(r)?e.filter(function(s){return kd(s)&&JR(s,r)&&ll(s)!=="body"}):[]}function _K(t,e,n,r){var s=e==="clippingParents"?LK(t):[].concat(e),o=[].concat(s,[n]),i=o[0],a=o.reduce(function(l,c){var u=JI(t,c,r);return l.top=md(u.top,l.top),l.right=Ob(u.right,l.right),l.bottom=Ob(u.bottom,l.bottom),l.left=md(u.left,l.left),l},JI(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function sA(t){var e=t.reference,n=t.element,r=t.placement,s=r?Qa(r):null,o=r?yf(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Wo:l={x:i,y:e.y-n.height};break;case Gi:l={x:i,y:e.y+e.height};break;case qi:l={x:e.x+e.width,y:a};break;case Uo:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?C5(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case pf:l[c]=l[c]-(e[u]/2-n[u]/2);break;case tm:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function nm(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,o=n.strategy,i=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?oK:a,c=n.rootBoundary,u=c===void 0?YR:c,h=n.elementContext,p=h===void 0?f0:h,m=n.altBoundary,g=m===void 0?!1:m,x=n.padding,w=x===void 0?0:x,k=tA(typeof w!="number"?w:nA(w,Pm)),S=p===f0?iK:f0,$=t.rects.popper,T=t.elements[g?S:p],E=_K(kd(T)?T:T.contextElement||hu(t.elements.popper),l,u,i),F=gf(t.elements.reference),V=sA({reference:F,element:$,strategy:"absolute",placement:s}),j=D3(Object.assign({},$,V)),W=p===f0?j:F,R={top:E.top-W.top+k.top,bottom:W.bottom-E.bottom+k.bottom,left:E.left-W.left+k.left,right:W.right-E.right+k.right},O=t.modifiersData.offset;if(p===f0&&O){var U=O[s];Object.keys(R).forEach(function(K){var G=[qi,Gi].indexOf(K)>=0?1:-1,Y=[Wo,Gi].indexOf(K)>=0?"y":"x";R[K]+=U[Y]*G})}return R}function BK(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,o=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?ZR:l,u=yf(r),h=u?a?XI:XI.filter(function(g){return yf(g)===u}):Pm,p=h.filter(function(g){return c.indexOf(g)>=0});p.length===0&&(p=h);var m=p.reduce(function(g,x){return g[x]=nm(t,{placement:x,boundary:s,rootBoundary:o,padding:i})[Qa(x)],g},{});return Object.keys(m).sort(function(g,x){return m[g]-m[x]})}function VK(t){if(Qa(t)===v5)return[];var e=rb(t);return[QI(t),e,QI(e)]}function jK(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,g=m===void 0?!0:m,x=n.allowedAutoPlacements,w=e.options.placement,k=Qa(w),S=k===w,$=l||(S||!g?[rb(w)]:VK(w)),T=[w].concat($).reduce(function(pe,de){return pe.concat(Qa(de)===v5?BK(e,{placement:de,boundary:u,rootBoundary:h,padding:c,flipVariations:g,allowedAutoPlacements:x}):de)},[]),E=e.rects.reference,F=e.rects.popper,V=new Map,j=!0,W=T[0],R=0;R<T.length;R++){var O=T[R],U=Qa(O),K=yf(O)===pf,G=[Wo,Gi].indexOf(U)>=0,Y=G?"width":"height",Z=nm(e,{placement:O,boundary:u,rootBoundary:h,altBoundary:p,padding:c}),ne=G?K?qi:Uo:K?Gi:Wo;E[Y]>F[Y]&&(ne=rb(ne));var J=rb(ne),re=[];if(o&&re.push(Z[U]<=0),a&&re.push(Z[ne]<=0,Z[J]<=0),re.every(function(pe){return pe})){W=O,j=!1;break}V.set(O,re)}if(j)for(var se=g?3:1,q=function(de){var we=T.find(function(Ne){var Te=V.get(Ne);if(Te)return Te.slice(0,de).every(function(Ee){return Ee})});if(we)return W=we,"break"},le=se;le>0;le--){var be=q(le);if(be==="break")break}e.placement!==W&&(e.modifiersData[r]._skip=!0,e.placement=W,e.reset=!0)}}const WK={name:"flip",enabled:!0,phase:"main",fn:jK,requiresIfExists:["offset"],data:{_skip:!1}};function e$(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function t$(t){return[Wo,qi,Gi,Uo].some(function(e){return t[e]>=0})}function UK(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,i=nm(e,{elementContext:"reference"}),a=nm(e,{altBoundary:!0}),l=e$(i,r),c=e$(a,s,o),u=t$(l),h=t$(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const HK={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:UK};function GK(t,e,n){var r=Qa(t),s=[Uo,Wo].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=o[0],a=o[1];return i=i||0,a=(a||0)*s,[Uo,qi].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function qK(t){var e=t.state,n=t.options,r=t.name,s=n.offset,o=s===void 0?[0,0]:s,i=ZR.reduce(function(u,h){return u[h]=GK(h,e.rects,o),u},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=i}const KK={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qK};function XK(t){var e=t.state,n=t.name;e.modifiersData[n]=sA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const YK={name:"popperOffsets",enabled:!0,phase:"read",fn:XK,data:{}};function ZK(t){return t==="x"?"y":"x"}function QK(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,p=n.tether,m=p===void 0?!0:p,g=n.tetherOffset,x=g===void 0?0:g,w=nm(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),k=Qa(e.placement),S=yf(e.placement),$=!S,T=C5(k),E=ZK(T),F=e.modifiersData.popperOffsets,V=e.rects.reference,j=e.rects.popper,W=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,R=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(F){if(o){var K,G=T==="y"?Wo:Uo,Y=T==="y"?Gi:qi,Z=T==="y"?"height":"width",ne=F[T],J=ne+w[G],re=ne-w[Y],se=m?-j[Z]/2:0,q=S===pf?V[Z]:j[Z],le=S===pf?-j[Z]:-V[Z],be=e.elements.arrow,pe=m&&be?k5(be):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:eA(),we=de[G],Ne=de[Y],Te=B0(0,V[Z],pe[Z]),Ee=$?V[Z]/2-se-Te-we-R.mainAxis:q-Te-we-R.mainAxis,We=$?-V[Z]/2+se+Te+Ne+R.mainAxis:le+Te+Ne+R.mainAxis,Xe=e.elements.arrow&&Mm(e.elements.arrow),Ge=Xe?T==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,mt=(K=O==null?void 0:O[T])!=null?K:0,ft=ne+Ee-mt-Ge,ct=ne+We-mt,Ze=B0(m?Ob(J,ft):J,ne,m?md(re,ct):re);F[T]=Ze,U[T]=Ze-ne}if(a){var rt,Ke=T==="x"?Wo:Uo,at=T==="x"?Gi:qi,ut=F[E],kt=E==="y"?"height":"width",Qe=ut+w[Ke],qt=ut-w[at],Wt=[Wo,Uo].indexOf(k)!==-1,en=(rt=O==null?void 0:O[E])!=null?rt:0,yn=Wt?Qe:ut-V[kt]-j[kt]-en+R.altAxis,mn=Wt?ut+V[kt]+j[kt]-en-R.altAxis:qt,Kt=m&&Wt?kK(yn,ut,mn):B0(m?yn:Qe,ut,m?mn:qt);F[E]=Kt,U[E]=Kt-ut}e.modifiersData[r]=U}}const JK={name:"preventOverflow",enabled:!0,phase:"main",fn:QK,requiresIfExists:["offset"]};function eX(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function tX(t){return t===gi(t)||!Hi(t)?S5(t):eX(t)}function nX(t){var e=t.getBoundingClientRect(),n=mf(e.width)/t.offsetWidth||1,r=mf(e.height)/t.offsetHeight||1;return n!==1||r!==1}function rX(t,e,n){n===void 0&&(n=!1);var r=Hi(e),s=Hi(e)&&nX(e),o=hu(e),i=gf(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ll(e)!=="body"||I5(o))&&(a=tX(e)),Hi(e)?(l=gf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=T5(o))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function sX(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),r}function oX(t){var e=sX(t);return gK.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function iX(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function aX(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var n$={placement:"bottom",modifiers:[],strategy:"absolute"};function r$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function lX(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?n$:s;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},n$,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],p=!1,m={state:u,setOptions:function(k){var S=typeof k=="function"?k(u.options):k;x(),u.options=Object.assign({},o,u.options,S),u.scrollParents={reference:kd(a)?V0(a):a.contextElement?V0(a.contextElement):[],popper:V0(l)};var $=oX(aX([].concat(r,u.options.modifiers)));return u.orderedModifiers=$.filter(function(T){return T.enabled}),g(),m.update()},forceUpdate:function(){if(!p){var k=u.elements,S=k.reference,$=k.popper;if(r$(S,$)){u.rects={reference:rX(S,Mm($),u.options.strategy==="fixed"),popper:k5($)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var E=u.orderedModifiers[T],F=E.fn,V=E.options,j=V===void 0?{}:V,W=E.name;typeof F=="function"&&(u=F({state:u,options:j,name:W,instance:m})||u)}}}},update:iX(function(){return new Promise(function(w){m.forceUpdate(),w(u)})}),destroy:function(){x(),p=!0}};if(!r$(a,l))return m;m.setOptions(c).then(function(w){!p&&c.onFirstUpdate&&c.onFirstUpdate(w)});function g(){u.orderedModifiers.forEach(function(w){var k=w.name,S=w.options,$=S===void 0?{}:S,T=w.effect;if(typeof T=="function"){var E=T({state:u,name:k,instance:m,options:$}),F=function(){};h.push(E||F)}})}function x(){h.forEach(function(w){return w()}),h=[]}return m}}var cX=[DK,YK,RK,xK,KK,WK,JK,IK,HK],uX=lX({defaultModifiers:cX});function dX(t){return or("MuiPopper",t)}ir("MuiPopper",["root"]);function hX(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function P3(t){return typeof t=="function"?t():t}function fX(t){return t.nodeType!==void 0}const pX=t=>{const{classes:e}=t;return ur({root:["root"]},dX,e)},mX={},gX=D.forwardRef(function(e,n){const{anchorEl:r,children:s,direction:o,disablePortal:i,modifiers:a,open:l,placement:c,popperOptions:u,popperRef:h,slotProps:p={},slots:m={},TransitionProps:g,ownerState:x,...w}=e,k=D.useRef(null),S=Cs(k,n),$=D.useRef(null),T=Cs($,h),E=D.useRef(T);tc(()=>{E.current=T},[T]),D.useImperativeHandle(h,()=>$.current,[]);const F=hX(c,o),[V,j]=D.useState(F),[W,R]=D.useState(P3(r));D.useEffect(()=>{$.current&&$.current.forceUpdate()}),D.useEffect(()=>{r&&R(P3(r))},[r]),tc(()=>{if(!W||!l)return;const Y=J=>{j(J.placement)};let Z=[{name:"preventOverflow",options:{altBoundary:i}},{name:"flip",options:{altBoundary:i}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:J})=>{Y(J)}}];a!=null&&(Z=Z.concat(a)),u&&u.modifiers!=null&&(Z=Z.concat(u.modifiers));const ne=uX(W,k.current,{placement:F,...u,modifiers:Z});return E.current(ne),()=>{ne.destroy(),E.current(null)}},[W,i,a,l,u,F]);const O={placement:V};g!==null&&(O.TransitionProps=g);const U=pX(e),K=m.root??"div",G=C3({elementType:K,externalSlotProps:p.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:S},ownerState:e,className:U.root});return z.jsx(K,{...G,children:typeof s=="function"?s(O):s})}),yX=D.forwardRef(function(e,n){const{anchorEl:r,children:s,container:o,direction:i="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:h="bottom",popperOptions:p=mX,popperRef:m,style:g,transition:x=!1,slotProps:w={},slots:k={},...S}=e,[$,T]=D.useState(!0),E=()=>{T(!1)},F=()=>{T(!0)};if(!l&&!u&&(!x||$))return null;let V;if(o)V=o;else if(r){const R=P3(r);V=R&&fX(R)?mi(R).body:mi(null).body}const j=!u&&l&&(!x||$)?"none":void 0,W=x?{in:u,onEnter:E,onExited:F}:void 0;return z.jsx(UR,{disablePortal:a,container:V,children:z.jsx(gX,{anchorEl:r,direction:i,disablePortal:a,modifiers:c,ref:n,open:x?!$:u,placement:h,popperOptions:p,popperRef:m,slotProps:w,slots:k,...S,style:{position:"fixed",top:0,left:0,display:j,...g},TransitionProps:W,children:s})})}),bX=Dt(yX,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),oA=D.forwardRef(function(e,n){const r=PR(),s=dr({props:e,name:"MuiPopper"}),{anchorEl:o,component:i,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:h,modifiers:p,open:m,placement:g,popperOptions:x,popperRef:w,transition:k,slots:S,slotProps:$,...T}=s,E=(S==null?void 0:S.root)??(a==null?void 0:a.Root),F={anchorEl:o,container:c,disablePortal:u,keepMounted:h,modifiers:p,open:m,placement:g,popperOptions:x,popperRef:w,transition:k,...T};return z.jsx(bX,{as:i,direction:r?"rtl":"ltr",slots:{root:E},slotProps:$??l,...F,ref:n})});function xX(t){return or("MuiListSubheader",t)}ir("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const vX=t=>{const{classes:e,color:n,disableGutters:r,inset:s,disableSticky:o}=t,i={root:["root",n!=="default"&&`color${It(n)}`,!r&&"gutters",s&&"inset",!o&&"sticky"]};return ur(i,xX,e)},wX=Dt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${It(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(Yn(({theme:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:72}},{props:({ownerState:e})=>!e.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}))),M3=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiListSubheader"}),{className:s,color:o="default",component:i="li",disableGutters:a=!1,disableSticky:l=!1,inset:c=!1,...u}=r,h={...r,color:o,component:i,disableGutters:a,disableSticky:l,inset:c},p=vX(h);return z.jsx(wX,{as:i,className:Xt(p.root,s),ref:n,ownerState:h,...u})});M3&&(M3.muiSkipListHighlight=!0);class Fb{constructor(){a0(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Fb}static use(){const e=IR(Fb.create).current,[n,r]=D.useState(!1);return e.shouldMount=n,e.setShouldMount=r,D.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=CX(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function kX(){return Fb.use()}function CX(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n}function SX(t){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:i,in:a,onExited:l,timeout:c}=t,[u,h]=D.useState(!1),p=Xt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:i,height:i,top:-(i/2)+o,left:-(i/2)+s},g=Xt(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&h(!0),D.useEffect(()=>{if(!a&&l!=null){const x=setTimeout(l,c);return()=>{clearTimeout(x)}}},[l,a,c]),z.jsx("span",{className:p,style:m,children:z.jsx("span",{className:g})})}const Bi=ir("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),O3=550,TX=80,IX=s5`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,$X=s5`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,NX=s5`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,EX=Dt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),RX=Dt(SX,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Bi.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${IX};
    animation-duration: ${O3}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Bi.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Bi.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Bi.childLeaving} {
    opacity: 0;
    animation-name: ${$X};
    animation-duration: ${O3}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Bi.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${NX};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,AX=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:i,...a}=r,[l,c]=D.useState([]),u=D.useRef(0),h=D.useRef(null);D.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const p=D.useRef(!1),m=$R(),g=D.useRef(null),x=D.useRef(null),w=D.useCallback(T=>{const{pulsate:E,rippleX:F,rippleY:V,rippleSize:j,cb:W}=T;c(R=>[...R,z.jsx(RX,{classes:{ripple:Xt(o.ripple,Bi.ripple),rippleVisible:Xt(o.rippleVisible,Bi.rippleVisible),ripplePulsate:Xt(o.ripplePulsate,Bi.ripplePulsate),child:Xt(o.child,Bi.child),childLeaving:Xt(o.childLeaving,Bi.childLeaving),childPulsate:Xt(o.childPulsate,Bi.childPulsate)},timeout:O3,pulsate:E,rippleX:F,rippleY:V,rippleSize:j},u.current)]),u.current+=1,h.current=W},[o]),k=D.useCallback((T={},E={},F=()=>{})=>{const{pulsate:V=!1,center:j=s||E.pulsate,fakeElement:W=!1}=E;if((T==null?void 0:T.type)==="mousedown"&&p.current){p.current=!1;return}(T==null?void 0:T.type)==="touchstart"&&(p.current=!0);const R=W?null:x.current,O=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let U,K,G;if(j||T===void 0||T.clientX===0&&T.clientY===0||!T.clientX&&!T.touches)U=Math.round(O.width/2),K=Math.round(O.height/2);else{const{clientX:Y,clientY:Z}=T.touches&&T.touches.length>0?T.touches[0]:T;U=Math.round(Y-O.left),K=Math.round(Z-O.top)}if(j)G=Math.sqrt((2*O.width**2+O.height**2)/3),G%2===0&&(G+=1);else{const Y=Math.max(Math.abs((R?R.clientWidth:0)-U),U)*2+2,Z=Math.max(Math.abs((R?R.clientHeight:0)-K),K)*2+2;G=Math.sqrt(Y**2+Z**2)}T!=null&&T.touches?g.current===null&&(g.current=()=>{w({pulsate:V,rippleX:U,rippleY:K,rippleSize:G,cb:F})},m.start(TX,()=>{g.current&&(g.current(),g.current=null)})):w({pulsate:V,rippleX:U,rippleY:K,rippleSize:G,cb:F})},[s,w,m]),S=D.useCallback(()=>{k({},{pulsate:!0})},[k]),$=D.useCallback((T,E)=>{if(m.clear(),(T==null?void 0:T.type)==="touchend"&&g.current){g.current(),g.current=null,m.start(0,()=>{$(T,E)});return}g.current=null,c(F=>F.length>0?F.slice(1):F),h.current=E},[m]);return D.useImperativeHandle(n,()=>({pulsate:S,start:k,stop:$}),[S,k,$]),z.jsx(EX,{className:Xt(Bi.root,o.root,i),ref:x,...a,children:z.jsx(g5,{component:null,exit:!0,children:l})})});function DX(t){return or("MuiButtonBase",t)}const PX=ir("MuiButtonBase",["root","disabled","focusVisible"]),MX=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=t,i=ur({root:["root",e&&"disabled",n&&"focusVisible"]},DX,s);return n&&r&&(i.root+=` ${r}`),i},OX=Dt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${PX.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),F3=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:i,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:x,onClick:w,onContextMenu:k,onDragLeave:S,onFocus:$,onFocusVisible:T,onKeyDown:E,onKeyUp:F,onMouseDown:V,onMouseLeave:j,onMouseUp:W,onTouchEnd:R,onTouchMove:O,onTouchStart:U,tabIndex:K=0,TouchRippleProps:G,touchRippleRef:Y,type:Z,...ne}=r,J=D.useRef(null),re=kX(),se=Cs(re.ref,Y),[q,le]=D.useState(!1);c&&q&&le(!1),D.useImperativeHandle(s,()=>({focusVisible:()=>{le(!0),J.current.focus()}}),[]);const be=re.shouldMount&&!u&&!c;D.useEffect(()=>{q&&p&&!u&&re.pulsate()},[u,p,q,re]);const pe=Wl(re,"start",V,h),de=Wl(re,"stop",k,h),we=Wl(re,"stop",S,h),Ne=Wl(re,"stop",W,h),Te=Wl(re,"stop",Qe=>{q&&Qe.preventDefault(),j&&j(Qe)},h),Ee=Wl(re,"start",U,h),We=Wl(re,"stop",R,h),Xe=Wl(re,"stop",O,h),Ge=Wl(re,"stop",Qe=>{wI(Qe.target)||le(!1),x&&x(Qe)},!1),mt=Xa(Qe=>{J.current||(J.current=Qe.currentTarget),wI(Qe.target)&&(le(!0),T&&T(Qe)),$&&$(Qe)}),ft=()=>{const Qe=J.current;return l&&l!=="button"&&!(Qe.tagName==="A"&&Qe.href)},ct=Xa(Qe=>{p&&!Qe.repeat&&q&&Qe.key===" "&&re.stop(Qe,()=>{re.start(Qe)}),Qe.target===Qe.currentTarget&&ft()&&Qe.key===" "&&Qe.preventDefault(),E&&E(Qe),Qe.target===Qe.currentTarget&&ft()&&Qe.key==="Enter"&&!c&&(Qe.preventDefault(),w&&w(Qe))}),Ze=Xa(Qe=>{p&&Qe.key===" "&&q&&!Qe.defaultPrevented&&re.stop(Qe,()=>{re.pulsate(Qe)}),F&&F(Qe),w&&Qe.target===Qe.currentTarget&&ft()&&Qe.key===" "&&!Qe.defaultPrevented&&w(Qe)});let rt=l;rt==="button"&&(ne.href||ne.to)&&(rt=g);const Ke={};rt==="button"?(Ke.type=Z===void 0?"button":Z,Ke.disabled=c):(!ne.href&&!ne.to&&(Ke.role="button"),c&&(Ke["aria-disabled"]=c));const at=Cs(n,J),ut={...r,centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:p,tabIndex:K,focusVisible:q},kt=MX(ut);return z.jsxs(OX,{as:rt,className:Xt(kt.root,a),ownerState:ut,onBlur:Ge,onClick:w,onContextMenu:de,onFocus:mt,onKeyDown:ct,onKeyUp:Ze,onMouseDown:pe,onMouseLeave:Te,onMouseUp:Ne,onDragLeave:we,onTouchEnd:We,onTouchMove:Xe,onTouchStart:Ee,ref:at,tabIndex:c?-1:K,type:Z,...Ke,...ne,children:[i,be?z.jsx(AX,{ref:se,center:o,...G}):null]})});function Wl(t,e,n,r=!1){return Xa(s=>(n&&n(s),r||t[e](s),!0))}function FX(t){return or("MuiIconButton",t)}const zX=ir("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),LX=t=>{const{classes:e,disabled:n,color:r,edge:s,size:o}=t,i={root:["root",n&&"disabled",r!=="default"&&`color${It(r)}`,s&&`edge${It(s)}`,`size${It(o)}`]};return ur(i,FX,e)},_X=Dt(F3,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${It(n.color)}`],n.edge&&e[`edge${It(n.edge)}`],e[`size${It(n.size)}`]]}})(Yn(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:As(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Yn(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(wa()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(wa()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:As((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${zX.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}}))),iA=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:i,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",...h}=r,p={...r,edge:s,color:a,disabled:l,disableFocusRipple:c,size:u},m=LX(p);return z.jsx(_X,{className:Xt(m.root,i),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,...h,ownerState:p,children:o})}),BX=Yx(z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function VX(t){return or("MuiChip",t)}const pn=ir("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),jX=t=>{const{classes:e,disabled:n,size:r,color:s,iconColor:o,onDelete:i,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${It(r)}`,`color${It(s)}`,a&&"clickable",a&&`clickableColor${It(s)}`,i&&"deletable",i&&`deletableColor${It(s)}`,`${l}${It(s)}`],label:["label",`label${It(r)}`],avatar:["avatar",`avatar${It(r)}`,`avatarColor${It(s)}`],icon:["icon",`icon${It(r)}`,`iconColor${It(o)}`],deleteIcon:["deleteIcon",`deleteIcon${It(r)}`,`deleteIconColor${It(s)}`,`deleteIcon${It(l)}Color${It(s)}`]};return ur(c,VX,e)},WX=Dt("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:s,clickable:o,onDelete:i,size:a,variant:l}=n;return[{[`& .${pn.avatar}`]:e.avatar},{[`& .${pn.avatar}`]:e[`avatar${It(a)}`]},{[`& .${pn.avatar}`]:e[`avatarColor${It(r)}`]},{[`& .${pn.icon}`]:e.icon},{[`& .${pn.icon}`]:e[`icon${It(a)}`]},{[`& .${pn.icon}`]:e[`iconColor${It(s)}`]},{[`& .${pn.deleteIcon}`]:e.deleteIcon},{[`& .${pn.deleteIcon}`]:e[`deleteIcon${It(a)}`]},{[`& .${pn.deleteIcon}`]:e[`deleteIconColor${It(r)}`]},{[`& .${pn.deleteIcon}`]:e[`deleteIcon${It(l)}Color${It(r)}`]},e.root,e[`size${It(a)}`],e[`color${It(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${It(r)})`],i&&e.deletable,i&&r!=="default"&&e[`deletableColor${It(r)}`],e[l],e[`${l}${It(r)}`]]}})(Yn(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${pn.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${pn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${pn.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${pn.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${pn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${pn.icon}`]:{marginLeft:5,marginRight:-6},[`& .${pn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:As(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:As(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${pn.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${pn.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(wa(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${pn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].contrastTextChannel} / 0.7)`:As(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${pn.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${pn.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:As(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(wa(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${pn.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:As(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:As(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(wa(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${pn.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${pn.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${pn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${pn.avatar}`]:{marginLeft:4},[`& .${pn.avatarSmall}`]:{marginLeft:2},[`& .${pn.icon}`]:{marginLeft:4},[`& .${pn.iconSmall}`]:{marginLeft:2},[`& .${pn.deleteIcon}`]:{marginRight:5},[`& .${pn.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(wa()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:As(t.palette[n].main,.7)}`,[`&.${pn.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:As(t.palette[n].main,t.palette.action.hoverOpacity)},[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.focusOpacity})`:As(t.palette[n].main,t.palette.action.focusOpacity)},[`& .${pn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:As(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),UX=Dt("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${It(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function s$(t){return t.key==="Backspace"||t.key==="Delete"}const HX=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiChip"}),{avatar:s,className:o,clickable:i,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:h,label:p,onClick:m,onDelete:g,onKeyDown:x,onKeyUp:w,size:k="medium",variant:S="filled",tabIndex:$,skipFocusWhenDisabled:T=!1,...E}=r,F=D.useRef(null),V=Cs(F,n),j=re=>{re.stopPropagation(),g&&g(re)},W=re=>{re.currentTarget===re.target&&s$(re)&&re.preventDefault(),x&&x(re)},R=re=>{re.currentTarget===re.target&&g&&s$(re)&&g(re),w&&w(re)},O=i!==!1&&m?!0:i,U=O||g?F3:l||"div",K={...r,component:U,disabled:u,size:k,color:a,iconColor:D.isValidElement(h)&&h.props.color||a,onDelete:!!g,clickable:O,variant:S},G=jX(K),Y=U===F3?{component:l||"div",focusVisibleClassName:G.focusVisible,...g&&{disableRipple:!0}}:{};let Z=null;g&&(Z=c&&D.isValidElement(c)?D.cloneElement(c,{className:Xt(c.props.className,G.deleteIcon),onClick:j}):z.jsx(BX,{className:Xt(G.deleteIcon),onClick:j}));let ne=null;s&&D.isValidElement(s)&&(ne=D.cloneElement(s,{className:Xt(G.avatar,s.props.className)}));let J=null;return h&&D.isValidElement(h)&&(J=D.cloneElement(h,{className:Xt(G.icon,h.props.className)})),z.jsxs(WX,{as:U,className:Xt(G.root,o),disabled:O&&u?!0:void 0,onClick:m,onKeyDown:W,onKeyUp:R,ref:V,tabIndex:T&&u?-1:$,ownerState:K,...Y,...E,children:[ne||J,z.jsx(UX,{className:Xt(G.label),ownerState:K,children:p}),Z]})}),GX=Yx(z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function qX(t){return or("MuiAutocomplete",t)}const sn=ir("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var o$,i$;const KX=t=>{const{classes:e,disablePortal:n,expanded:r,focused:s,fullWidth:o,hasClearIcon:i,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=t,h={root:["root",r&&"expanded",s&&"focused",o&&"fullWidth",i&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${It(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return ur(h,qX,e)},XX=Dt("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:s,hasPopupIcon:o,inputFocused:i,size:a}=n;return[{[`& .${sn.tag}`]:e.tag},{[`& .${sn.tag}`]:e[`tagSize${It(a)}`]},{[`& .${sn.inputRoot}`]:e.inputRoot},{[`& .${sn.input}`]:e.input},{[`& .${sn.input}`]:i&&e.inputFocused},e.root,r&&e.fullWidth,o&&e.hasPopupIcon,s&&e.hasClearIcon]}})({[`&.${sn.focused} .${sn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${sn.clearIndicator}`]:{visibility:"visible"}},[`& .${sn.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${sn.inputRoot}`]:{[`.${sn.hasPopupIcon}&, .${sn.hasClearIcon}&`]:{paddingRight:30},[`.${sn.hasPopupIcon}.${sn.hasClearIcon}&`]:{paddingRight:56},[`& .${sn.input}`]:{width:0,minWidth:30}},[`& .${Hc.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Hc.root}.${ii.sizeSmall}`]:{[`& .${Hc.input}`]:{padding:"2px 4px 3px 0"}},[`& .${zi.root}`]:{padding:9,[`.${sn.hasPopupIcon}&, .${sn.hasClearIcon}&`]:{paddingRight:39},[`.${sn.hasPopupIcon}.${sn.hasClearIcon}&`]:{paddingRight:65},[`& .${sn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${sn.endAdornment}`]:{right:9}},[`& .${zi.root}.${ii.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${sn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${ai.root}`]:{paddingTop:19,paddingLeft:8,[`.${sn.hasPopupIcon}&, .${sn.hasClearIcon}&`]:{paddingRight:39},[`.${sn.hasPopupIcon}.${sn.hasClearIcon}&`]:{paddingRight:65},[`& .${ai.input}`]:{padding:"7px 4px"},[`& .${sn.endAdornment}`]:{right:9}},[`& .${ai.root}.${ii.sizeSmall}`]:{paddingBottom:1,[`& .${ai.input}`]:{padding:"2.5px 4px"}},[`& .${ii.hiddenLabel}`]:{paddingTop:8},[`& .${ai.root}.${ii.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${sn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ai.root}.${ii.hiddenLabel}.${ii.sizeSmall}`]:{[`& .${sn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${sn.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${sn.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${sn.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${sn.inputRoot}`]:{flexWrap:"wrap"}}}]}),YX=Dt("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),ZX=Dt(iA,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),QX=Dt(iA,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popupIndicator,n.popupOpen&&e.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),JX=Dt(oA,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${sn.option}`]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})(Yn(({theme:t})=>({zIndex:(t.vars||t).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),eY=Dt(y5,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})(Yn(({theme:t})=>({...t.typography.body1,overflow:"auto"}))),tY=Dt("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})(Yn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),nY=Dt("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})(Yn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}))),rY=Dt("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})(Yn(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${sn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${sn.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${sn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:As(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${sn.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:As(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${sn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:As(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}))),sY=Dt(M3,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})(Yn(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8}))),oY=Dt("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,[`& .${sn.option}`]:{paddingLeft:24}}),iY=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiAutocomplete"}),{autoComplete:s=!1,autoHighlight:o=!1,autoSelect:i=!1,blurOnSelect:a=!1,ChipProps:l,className:c,clearIcon:u=o$||(o$=z.jsx(GX,{fontSize:"small"})),clearOnBlur:h=!r.freeSolo,clearOnEscape:p=!1,clearText:m="Clear",closeText:g="Close",componentsProps:x,defaultValue:w=r.multiple?[]:null,disableClearable:k=!1,disableCloseOnSelect:S=!1,disabled:$=!1,disabledItemsFocusable:T=!1,disableListWrap:E=!1,disablePortal:F=!1,filterOptions:V,filterSelectedOptions:j=!1,forcePopupIcon:W="auto",freeSolo:R=!1,fullWidth:O=!1,getLimitTagsText:U=cn=>`+${cn}`,getOptionDisabled:K,getOptionKey:G,getOptionLabel:Y,isOptionEqualToValue:Z,groupBy:ne,handleHomeEndKeys:J=!r.freeSolo,id:re,includeInputInList:se=!1,inputValue:q,limitTags:le=-1,ListboxComponent:be,ListboxProps:pe,loading:de=!1,loadingText:we="Loading…",multiple:Ne=!1,noOptionsText:Te="No options",onChange:Ee,onClose:We,onHighlightChange:Xe,onInputChange:Ge,onOpen:mt,open:ft,openOnFocus:ct=!1,openText:Ze="Open",options:rt,PaperComponent:Ke,PopperComponent:at,popupIcon:ut=i$||(i$=z.jsx(KR,{})),readOnly:kt=!1,renderGroup:Qe,renderInput:qt,renderOption:Wt,renderTags:en,selectOnFocus:yn=!r.freeSolo,size:mn="medium",slots:Kt={},slotProps:At={},value:bn,...Gt}=r,{getRootProps:Er,getInputProps:yr,getInputLabelProps:tn,getPopupIndicatorProps:Fe,getClearProps:Qt,getTagProps:zn,getListboxProps:Ls,getOptionProps:ls,value:cs,dirty:us,expanded:wo,id:wi,popupOpen:Rr,focused:Is,focusedTag:no,anchorEl:Yo,setAnchorEl:Ra,inputValue:wl,groupedOptions:Mo}=sK({...r,componentName:"Autocomplete"}),ta=!k&&!$&&us&&!kt,ro=(!R||W===!0)&&W!==!1,{onMouseDown:Wn}=yr(),{ref:M,..._}=Ls(),X=Y||(cn=>cn.label??cn),ce={...r,disablePortal:F,expanded:wo,focused:Is,fullWidth:O,getOptionLabel:X,hasClearIcon:ta,hasPopupIcon:ro,inputFocused:no===-1,popupOpen:Rr,size:mn},Ut=KX(ce),dt={slots:{paper:Ke,popper:at,...Kt},slotProps:{chip:l,listbox:pe,...x,...At}},[_e,je]=Bo("listbox",{elementType:rY,externalForwardedProps:dt,ownerState:ce,className:Ut.listbox,additionalProps:_,ref:M}),[He,Ct]=Bo("paper",{elementType:y5,externalForwardedProps:dt,ownerState:ce,className:Ut.paper}),[Mt,Ln]=Bo("popper",{elementType:oA,externalForwardedProps:dt,ownerState:ce,className:Ut.popper,additionalProps:{disablePortal:F,style:{width:Yo?Yo.clientWidth:null},role:"presentation",anchorEl:Yo,open:Rr}});let ae;if(Ne&&cs.length>0){const cn=_s=>({className:Ut.tag,disabled:$,...zn(_s)});en?ae=en(cs,cn,ce):ae=cs.map((_s,xr)=>{const{key:ds,...ko}=cn({index:xr});return z.jsx(HX,{label:X(_s),size:mn,...ko,...dt.slotProps.chip},ds)})}if(le>-1&&Array.isArray(ae)){const cn=ae.length-le;!Is&&cn>0&&(ae=ae.splice(0,le),ae.push(z.jsx("span",{className:Ut.tag,children:U(cn)},ae.length)))}const ye=Qe||(cn=>z.jsxs("li",{children:[z.jsx(sY,{className:Ut.groupLabel,ownerState:ce,component:"div",children:cn.group}),z.jsx(oY,{className:Ut.groupUl,ownerState:ce,children:cn.children})]},cn.key)),ar=Wt||((cn,_s)=>{const{key:xr,...ds}=cn;return z.jsx("li",{...ds,children:X(_s)},xr)}),Tu=(cn,_s)=>{const xr=ls({option:cn,index:_s});return ar({...xr,className:Ut.option},cn,{selected:xr["aria-selected"],index:_s,inputValue:wl},ce)},Zo=dt.slotProps.clearIndicator,Ot=dt.slotProps.popupIndicator,ki=cn=>z.jsx(JX,{as:Mt,...Ln,children:z.jsx(eY,{as:He,...Ct,children:cn})});let na=null;return Mo.length>0?na=ki(z.jsx(_e,{as:be,...je,children:Mo.map((cn,_s)=>ne?ye({key:cn.key,group:cn.group,children:cn.options.map((xr,ds)=>Tu(xr,cn.index+ds))}):Tu(cn,_s))})):de&&Mo.length===0?na=ki(z.jsx(tY,{className:Ut.loading,ownerState:ce,children:we})):Mo.length===0&&!R&&!de&&(na=ki(z.jsx(nY,{className:Ut.noOptions,ownerState:ce,role:"presentation",onMouseDown:cn=>{cn.preventDefault()},children:Te}))),z.jsxs(D.Fragment,{children:[z.jsx(XX,{ref:n,className:Xt(Ut.root,c),ownerState:ce,...Er(Gt),children:qt({id:wi,disabled:$,fullWidth:!0,size:mn==="small"?"small":void 0,InputLabelProps:tn(),InputProps:{ref:Ra,className:Ut.inputRoot,startAdornment:ae,onMouseDown:cn=>{cn.target===cn.currentTarget&&Wn(cn)},...(ta||ro)&&{endAdornment:z.jsxs(YX,{className:Ut.endAdornment,ownerState:ce,children:[ta?z.jsx(ZX,{...Qt(),"aria-label":m,title:m,ownerState:ce,...Zo,className:Xt(Ut.clearIndicator,Zo==null?void 0:Zo.className),children:u}):null,ro?z.jsx(QX,{...Fe(),disabled:$,"aria-label":Rr?g:Ze,title:Rr?g:Ze,ownerState:ce,...Ot,className:Xt(Ut.popupIndicator,Ot==null?void 0:Ot.className),children:ut}):null]})}},inputProps:{className:Ut.input,disabled:$,readOnly:kt,...yr()}})}),Yo?na:null]})});function aY(t){return or("MuiTypography",t)}ir("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const lY={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},cY=_H(),uY=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:s,variant:o,classes:i}=t,a={root:["root",o,t.align!=="inherit"&&`align${It(e)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return ur(a,aY,i)},dY=Dt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${It(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Yn(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(wa()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${It(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),a$={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},hY=D.forwardRef(function(e,n){const{color:r,...s}=dr({props:e,name:"MuiTypography"}),o=!lY[r],i=cY({...s,...o&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:p=!1,variant:m="body1",variantMapping:g=a$,...x}=i,w={...i,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:p,variant:m,variantMapping:g},k=c||(p?"p":g[m]||a$[m])||"span",S=uY(w);return z.jsx(dY,{as:k,ref:n,className:Xt(S.root,l),...x,ownerState:w,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...x.style}})});function fY(t){return or("MuiInputAdornment",t)}const l$=ir("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var c$;const pY=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${It(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},mY=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:s,size:o,variant:i}=t,a={root:["root",n&&"disablePointerEvents",s&&`position${It(s)}`,i,r&&"hiddenLabel",o&&`size${It(o)}`]};return ur(a,fY,e)},gY=Dt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:pY})(Yn(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${l$.positionStart}&:not(.${l$.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),yY=D.forwardRef(function(e,n){const r=dr({props:e,name:"MuiInputAdornment"}),{children:s,className:o,component:i="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:c,variant:u,...h}=r,p=Ld()||{};let m=u;u&&p.variant,m||(m=p.variant);const g={...r,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:a,position:c,variant:m},x=mY(g);return z.jsx(Hx.Provider,{value:null,children:z.jsx(gY,{as:i,ownerState:g,className:Xt(x.root,o),ref:n,...h,children:typeof s=="string"&&!l?z.jsx(hY,{color:"textSecondary",children:s}):z.jsxs(D.Fragment,{children:[c==="start"?c$||(c$=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,s]})})})}),bY=Yx(z.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),aA=[{id:"default",title:"Pierwsze Kroki",topics:[{id:"introduction",title:"Wprowadzenie"}]},{id:"sequences",title:"Ciągi",topics:[{id:"seq-intro",title:"Wprowadzenie do ciągów"},{id:"arithmetic",title:"Ciąg arytmetyczny"},{id:"geometric",title:"Ciąg geometryczny"},{id:"limits",title:"Granica ciągu"}]}];var p0={},u$;function xY(){if(u$)return p0;u$=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.parse=i,p0.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function i(p,m){const g=new o,x=p.length;if(x<2)return g;const w=(m==null?void 0:m.decode)||u;let k=0;do{const S=p.indexOf("=",k);if(S===-1)break;const $=p.indexOf(";",k),T=$===-1?x:$;if(S>T){k=p.lastIndexOf(";",S-1)+1;continue}const E=a(p,k,S),F=l(p,S,E),V=p.slice(E,F);if(g[V]===void 0){let j=a(p,S+1,T),W=l(p,T,j);const R=w(p.slice(j,W));g[V]=R}k=T+1}while(k<x);return g}function a(p,m,g){do{const x=p.charCodeAt(m);if(x!==32&&x!==9)return m}while(++m<g);return g}function l(p,m,g){for(;m>g;){const x=p.charCodeAt(--m);if(x!==32&&x!==9)return m+1}return g}function c(p,m,g){const x=(g==null?void 0:g.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const w=x(m);if(!e.test(w))throw new TypeError(`argument val is invalid: ${m}`);let k=p+"="+w;if(!g)return k;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);k+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);k+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);k+="; Path="+g.path}if(g.expires){if(!h(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);k+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(k+="; HttpOnly"),g.secure&&(k+="; Secure"),g.partitioned&&(k+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return k}function u(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function h(p){return s.call(p)==="[object Date]"}return p0}xY();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var d$="popstate";function vY(t={}){function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return z3("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rm(s)}return kY(e,n,null,t)}function Nr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wY(){return Math.random().toString(36).substring(2,10)}function h$(t,e){return{usr:t.state,key:t.key,idx:e}}function z3(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?jf(e):e,state:n,key:e&&e.key||r||wY()}}function rm({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function kY(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a="POP",l=null,c=u();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function h(){a="POP";let w=u(),k=w==null?null:w-c;c=w,l&&l({action:a,location:x.location,delta:k})}function p(w,k){a="PUSH";let S=z3(x.location,w,k);c=u()+1;let $=h$(S,c),T=x.createHref(S);try{i.pushState($,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(T)}o&&l&&l({action:a,location:x.location,delta:1})}function m(w,k){a="REPLACE";let S=z3(x.location,w,k);c=u();let $=h$(S,c),T=x.createHref(S);i.replaceState($,"",T),o&&l&&l({action:a,location:x.location,delta:0})}function g(w){let k=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof w=="string"?w:rm(w);return S=S.replace(/ $/,"%20"),Nr(k,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,k)}let x={get action(){return a},get location(){return t(s,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(d$,h),l=w,()=>{s.removeEventListener(d$,h),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let k=g(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:p,replace:m,go(w){return i.go(w)}};return x}function lA(t,e,n="/"){return CY(t,e,n,!1)}function CY(t,e,n,r){let s=typeof e=="string"?jf(e):e,o=tu(s.pathname||"/",n);if(o==null)return null;let i=cA(t);SY(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=OY(o);a=PY(i[l],c,r)}return a}function cA(t,e=[],n=[],r=""){let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Nr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Xl([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Nr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),cA(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:AY(c,o.index),routesMeta:u})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of uA(o.path))s(o,i,l)}),e}function uA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=uA(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function SY(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DY(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var TY=/^:[\w-]+$/,IY=3,$Y=2,NY=1,EY=10,RY=-2,f$=t=>t==="*";function AY(t,e){let n=t.split("/"),r=n.length;return n.some(f$)&&(r+=RY),e&&(r+=$Y),n.filter(s=>!f$(s)).reduce((s,o)=>s+(TY.test(o)?IY:o===""?NY:EY),r)}function DY(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PY(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",h=zb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=zb({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Xl([o,h.pathname]),pathnameBase:_Y(Xl([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Xl([o,h.pathnameBase]))}return i}function zb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MY(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:h},p)=>{if(u==="*"){let g=a[p]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[p];return h&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:i,pattern:t}}function MY(t,e=!1,n=!0){cl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cl(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function tu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FY(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?jf(t):t;return{pathname:n?n.startsWith("/")?n:zY(n,e):e,search:BY(r),hash:VY(s)}}function zY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function T4(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dA(t){let e=LY(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function hA(t,e,n,r=!1){let s;typeof t=="string"?s=jf(t):(s={...t},Nr(!s.pathname||!s.pathname.includes("?"),T4("?","pathname","search",s)),Nr(!s.pathname||!s.pathname.includes("#"),T4("#","pathname","hash",s)),Nr(!s.search||!s.search.includes("#"),T4("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=FY(s,a),c=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Xl=t=>t.join("/").replace(/\/\/+/g,"/"),_Y=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fA=["POST","PUT","PATCH","DELETE"];new Set(fA);var WY=["GET",...fA];new Set(WY);var Wf=D.createContext(null);Wf.displayName="DataRouter";var Jx=D.createContext(null);Jx.displayName="DataRouterState";var pA=D.createContext({isTransitioning:!1});pA.displayName="ViewTransition";var UY=D.createContext(new Map);UY.displayName="Fetchers";var HY=D.createContext(null);HY.displayName="Await";var yl=D.createContext(null);yl.displayName="Navigation";var Om=D.createContext(null);Om.displayName="Location";var bl=D.createContext({outlet:null,matches:[],isDataRoute:!1});bl.displayName="Route";var $5=D.createContext(null);$5.displayName="RouteError";function GY(t,{relative:e}={}){Nr(Fm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(yl),{hash:s,pathname:o,search:i}=zm(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Xl([n,o])),r.createHref({pathname:a,search:i,hash:s})}function Fm(){return D.useContext(Om)!=null}function _d(){return Nr(Fm(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Om).location}var mA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gA(t){D.useContext(yl).static||D.useLayoutEffect(t)}function e2(){let{isDataRoute:t}=D.useContext(bl);return t?iZ():qY()}function qY(){Nr(Fm(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Wf),{basename:e,navigator:n}=D.useContext(yl),{matches:r}=D.useContext(bl),{pathname:s}=_d(),o=JSON.stringify(dA(r)),i=D.useRef(!1);return gA(()=>{i.current=!0}),D.useCallback((l,c={})=>{if(cl(i.current,mA),!i.current)return;if(typeof l=="number"){n.go(l);return}let u=hA(l,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Xl([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,o,s,t])}D.createContext(null);function KY(){let{matches:t}=D.useContext(bl),e=t[t.length-1];return e?e.params:{}}function zm(t,{relative:e}={}){let{matches:n}=D.useContext(bl),{pathname:r}=_d(),s=JSON.stringify(dA(n));return D.useMemo(()=>hA(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function XY(t,e){return yA(t,e)}function yA(t,e,n,r){var k;Nr(Fm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(yl),{matches:o}=D.useContext(bl),i=o[o.length-1],a=i?i.params:{},l=i?i.pathname:"/",c=i?i.pathnameBase:"/",u=i&&i.route;{let S=u&&u.path||"";bA(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let h=_d(),p;if(e){let S=typeof e=="string"?jf(e):e;Nr(c==="/"||((k=S.pathname)==null?void 0:k.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=h;let m=p.pathname||"/",g=m;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=lA(t,{pathname:g});cl(u||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),cl(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=eZ(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Xl([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Xl([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return e&&w?D.createElement(Om.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function YY(){let t=oZ(),e=jY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,i)}var ZY=D.createElement(YY,null),QY=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement(bl.Provider,{value:this.props.routeContext},D.createElement($5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JY({routeContext:t,match:e,children:n}){let r=D.useContext(Wf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(bl.Provider,{value:t},n)}function eZ(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let l=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Nr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:h}=n,p=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||p){i=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let h,p=!1,m=null,g=null;n&&(h=o&&c.route.id?o[c.route.id]:void 0,m=c.route.errorElement||ZY,i&&(a<0&&u===0?(bA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):a===u&&(p=!0,g=c.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,u+1)),w=()=>{let k;return h?k=m:p?k=g:c.route.Component?k=D.createElement(c.route.Component,null):c.route.element?k=c.route.element:k=l,D.createElement(JY,{match:c,routeContext:{outlet:l,matches:x,isDataRoute:n!=null},children:k})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?D.createElement(QY,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function N5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tZ(t){let e=D.useContext(Wf);return Nr(e,N5(t)),e}function nZ(t){let e=D.useContext(Jx);return Nr(e,N5(t)),e}function rZ(t){let e=D.useContext(bl);return Nr(e,N5(t)),e}function E5(t){let e=rZ(t),n=e.matches[e.matches.length-1];return Nr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function sZ(){return E5("useRouteId")}function oZ(){var r;let t=D.useContext($5),e=nZ("useRouteError"),n=E5("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function iZ(){let{router:t}=tZ("useNavigate"),e=E5("useNavigate"),n=D.useRef(!1);return gA(()=>{n.current=!0}),D.useCallback(async(s,o={})=>{cl(n.current,mA),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var p$={};function bA(t,e,n){!e&&!p$[t]&&(p$[t]=!0,cl(!1,n))}D.memo(aZ);function aZ({routes:t,future:e,state:n}){return yA(t,void 0,n,e)}function Bc(t){Nr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lZ({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){Nr(!Fm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof n=="string"&&(n=jf(n));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:p="default"}=n,m=D.useMemo(()=>{let g=tu(l,i);return g==null?null:{location:{pathname:g,search:c,hash:u,state:h,key:p},navigationType:r}},[i,l,c,u,h,p,r]);return cl(m!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:D.createElement(yl.Provider,{value:a},D.createElement(Om.Provider,{children:e,value:m}))}function m$({children:t,location:e}){return XY(L3(t),e)}function L3(t,e=[]){let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let o=[...e,s];if(r.type===D.Fragment){n.push.apply(n,L3(r.props.children,o));return}Nr(r.type===Bc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=L3(r.props.children,o)),n.push(i)}),n}var sb="get",ob="application/x-www-form-urlencoded";function t2(t){return t!=null&&typeof t.tagName=="string"}function cZ(t){return t2(t)&&t.tagName.toLowerCase()==="button"}function uZ(t){return t2(t)&&t.tagName.toLowerCase()==="form"}function dZ(t){return t2(t)&&t.tagName.toLowerCase()==="input"}function hZ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fZ(t,e){return t.button===0&&(!e||e==="_self")&&!hZ(t)}var $y=null;function pZ(){if($y===null)try{new FormData(document.createElement("form"),0),$y=!1}catch{$y=!0}return $y}var mZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function I4(t){return t!=null&&!mZ.has(t)?(cl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ob}"`),null):t}function gZ(t,e){let n,r,s,o,i;if(uZ(t)){let a=t.getAttribute("action");r=a?tu(a,e):null,n=t.getAttribute("method")||sb,s=I4(t.getAttribute("enctype"))||ob,o=new FormData(t)}else if(cZ(t)||dZ(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?tu(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||sb,s=I4(t.getAttribute("formenctype"))||I4(a.getAttribute("enctype"))||ob,o=new FormData(a,t),!pZ()){let{name:c,type:u,value:h}=t;if(u==="image"){let p=c?`${c}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else c&&o.append(c,h)}}else{if(t2(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sb,r=null,s=ob,i=t}return o&&s==="text/plain"&&(i=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:i}}function R5(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function yZ(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bZ(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xZ(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let i=await yZ(o,n);return i.links?i.links():[]}return[]}));return CZ(r.flat(1).filter(bZ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function g$(t,e,n,r,s,o){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var h;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function vZ(t,e){return wZ(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function wZ(t){return[...new Set(t)]}function kZ(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function CZ(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(kZ(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function SZ(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function TZ(){let t=D.useContext(Wf);return R5(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function IZ(){let t=D.useContext(Jx);return R5(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var A5=D.createContext(void 0);A5.displayName="FrameworkContext";function xA(){let t=D.useContext(A5);return R5(t,"You must render this element inside a <HydratedRouter> element"),t}function $Z(t,e){let n=D.useContext(A5),[r,s]=D.useState(!1),[o,i]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,p=D.useRef(null);D.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let x=k=>{k.forEach(S=>{i(S.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[t]),D.useEffect(()=>{if(r){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{s(!0)},g=()=>{s(!1),i(!1)};return n?t!=="intent"?[o,p,{}]:[o,p,{onFocus:m0(a,m),onBlur:m0(l,g),onMouseEnter:m0(c,m),onMouseLeave:m0(u,g),onTouchStart:m0(h,m)}]:[!1,p,{}]}function m0(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function NZ({page:t,...e}){let{router:n}=TZ(),r=D.useMemo(()=>lA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(RZ,{page:t,matches:r,...e}):null}function EZ(t){let{manifest:e,routeModules:n}=xA(),[r,s]=D.useState([]);return D.useEffect(()=>{let o=!1;return xZ(t,e,n).then(i=>{o||s(i)}),()=>{o=!0}},[t,e,n]),r}function RZ({page:t,matches:e,...n}){let r=_d(),{manifest:s,routeModules:o}=xA(),{loaderData:i,matches:a}=IZ(),l=D.useMemo(()=>g$(t,e,a,s,r,"data"),[t,e,a,s,r]),c=D.useMemo(()=>g$(t,e,a,s,r,"assets"),[t,e,a,s,r]),u=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(w=>{var S;let k=s.routes[w.route.id];!k||!k.hasLoader||(!l.some($=>$.route.id===w.route.id)&&w.route.id in i&&((S=o[w.route.id])!=null&&S.shouldRevalidate)||k.hasClientLoader?g=!0:m.add(w.route.id))}),m.size===0)return[];let x=SZ(t);return g&&m.size>0&&x.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[i,r,s,l,e,t,o]),h=D.useMemo(()=>vZ(c,s),[c,s]),p=EZ(c);return D.createElement(D.Fragment,null,u.map(m=>D.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),h.map(m=>D.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),p.map(({key:m,link:g})=>D.createElement("link",{key:m,...g})))}function AZ(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vA&&(window.__reactRouterVersion="7.1.1")}catch{}function DZ({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=vY({window:n,v5Compat:!0}));let s=r.current,[o,i]=D.useState({action:s.action,location:s.location}),a=D.useCallback(l=>{D.startTransition(()=>i(l))},[i]);return D.useLayoutEffect(()=>s.listen(a),[s,a]),D.createElement(lZ,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kA=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:i,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...p},m){let{basename:g}=D.useContext(yl),x=typeof c=="string"&&wA.test(c),w,k=!1;if(typeof c=="string"&&x&&(w=c,vA))try{let W=new URL(window.location.href),R=c.startsWith("//")?new URL(W.protocol+c):new URL(c),O=tu(R.pathname,g);R.origin===W.origin&&O!=null?c=O+R.search+R.hash:k=!0}catch{cl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=GY(c,{relative:s}),[$,T,E]=$Z(r,p),F=FZ(c,{replace:i,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function V(W){e&&e(W),W.defaultPrevented||F(W)}let j=D.createElement("a",{...p,...E,href:w||S,onClick:k||o?e:V,ref:AZ(m,T),target:l,"data-discover":!x&&n==="render"?"true":void 0});return $&&!x?D.createElement(D.Fragment,null,j,D.createElement(NZ,{page:S})):j});kA.displayName="Link";var PZ=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:i,viewTransition:a,children:l,...c},u){let h=zm(i,{relative:c.relative}),p=_d(),m=D.useContext(Jx),{navigator:g,basename:x}=D.useContext(yl),w=m!=null&&VZ(h)&&a===!0,k=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,S=p.pathname,$=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(S=S.toLowerCase(),$=$?$.toLowerCase():null,k=k.toLowerCase()),$&&x&&($=tu($,x)||$);const T=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let E=S===k||!s&&S.startsWith(k)&&S.charAt(T)==="/",F=$!=null&&($===k||!s&&$.startsWith(k)&&$.charAt(k.length)==="/"),V={isActive:E,isPending:F,isTransitioning:w},j=E?e:void 0,W;typeof r=="function"?W=r(V):W=[r,E?"active":null,F?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(V):o;return D.createElement(kA,{...c,"aria-current":j,className:W,ref:u,style:R,to:i,viewTransition:a},typeof l=="function"?l(V):l)});PZ.displayName="NavLink";var MZ=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:i=sb,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...p},m)=>{let g=_Z(),x=BZ(a,{relative:c}),w=i.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&wA.test(a),S=$=>{if(l&&l($),$.defaultPrevented)return;$.preventDefault();let T=$.nativeEvent.submitter,E=(T==null?void 0:T.getAttribute("formmethod"))||i;g(T||$.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:s,state:o,relative:c,preventScrollReset:u,viewTransition:h})};return D.createElement("form",{ref:m,method:w,action:x,onSubmit:r?l:S,...p,"data-discover":!k&&t==="render"?"true":void 0})});MZ.displayName="Form";function OZ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CA(t){let e=D.useContext(Wf);return Nr(e,OZ(t)),e}function FZ(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:i}={}){let a=e2(),l=_d(),c=zm(t,{relative:o});return D.useCallback(u=>{if(fZ(u,e)){u.preventDefault();let h=n!==void 0?n:rm(l)===rm(c);a(t,{replace:h,state:r,preventScrollReset:s,relative:o,viewTransition:i})}},[l,a,c,n,r,e,t,s,o,i])}var zZ=0,LZ=()=>`__${String(++zZ)}__`;function _Z(){let{router:t}=CA("useSubmit"),{basename:e}=D.useContext(yl),n=sZ();return D.useCallback(async(r,s={})=>{let{action:o,method:i,encType:a,formData:l,body:c}=gZ(r,e);if(s.navigate===!1){let u=s.fetcherKey||LZ();await t.fetch(u,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function BZ(t,{relative:e}={}){let{basename:n}=D.useContext(yl),r=D.useContext(bl);Nr(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...zm(t||".",{relative:e})},i=_d();if(t==null){o.search=i.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Xl([n,o.pathname])),rm(o)}function VZ(t,e={}){let n=D.useContext(pA);Nr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CA("useViewTransitionState"),s=zm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=tu(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=tu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zb(s.pathname,i)!=null||zb(s.pathname,o)!=null}new TextEncoder;const jZ=({onNavigate:t})=>{const e=e2(),n=aA.flatMap(s=>({...s,topics:s.topics.map(o=>({...o,sectionTitle:s.title}))})).flatMap(s=>s.topics),r=(s,o)=>{if(o){const i=n.find(a=>a.title===o||typeof o=="object"&&a.id===o.id);i&&(t("topics"),e(`/topics/lesson/${i.id}`))}};return z.jsx(iY,{freeSolo:!0,className:"min-w-80",options:n,getOptionLabel:s=>typeof s=="string"?s:`${s.title} (${s.sectionTitle})`,onChange:r,renderInput:s=>z.jsx(Jq,{...s,placeholder:"Wyszukaj lekcję...",InputProps:{...s.InputProps,startAdornment:z.jsx(yY,{position:"start",children:z.jsx(bY,{className:"text-gray-500"})})},className:"rounded bg-navSearchBgColor",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{height:"40px",border:"none","&, &:hover, &.Mui-focused":{"& fieldset":{border:"none"}},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"none"},"&.Mui-focused":{boxShadow:"none"}},"& .MuiInputBase-input":{"&:focus":{boxShadow:"none"}}}})})};function Ny({href:t,children:e,isActive:n,onClick:r}){return z.jsx("li",{className:"mx-2",children:z.jsx("a",{href:t,onClick:r,className:`font-medium text-sm hover:no-underline ${n?"text-blueTextColor":"text-navItemTextColor"}`,children:e})})}const WZ=({currentPage:t,onNavigate:e})=>z.jsxs("nav",{className:"flex items-center justify-between p-4 font-sans bg-white",children:[z.jsxs("div",{className:"flex items-center",children:[z.jsx(gj,{onNavigate:e}),z.jsx("div",{className:"ml-16",children:z.jsx(jZ,{onNavigate:e})})]}),z.jsxs("ul",{className:"flex gap-10",children:[z.jsx(Ny,{href:"/MathPath",isActive:t==="home",onClick:n=>{n.preventDefault(),e("/")},children:"Strona główna"}),z.jsx(Ny,{href:"/MathPath/topics",isActive:t==="topics",onClick:n=>{n.preventDefault(),e("/topics")},children:"Tematy"}),z.jsx(Ny,{href:"/MathPath/quiz",isActive:t==="quiz",onClick:n=>{n.preventDefault(),e("/quiz")},children:"Quiz"}),z.jsx(Ny,{href:"/MathPath/help",isActive:t==="help",onClick:n=>{n.preventDefault(),e("/help")},children:"Pomoc"})]})]});var SA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y$=fr.createContext&&fr.createContext(SA),UZ=["attr","size","title"];function HZ(t,e){if(t==null)return{};var n=GZ(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lb.apply(this,arguments)}function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(r){qZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qZ(t,e,n){return e=KZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KZ(t){var e=XZ(t,"string");return typeof e=="symbol"?e:e+""}function XZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TA(t){return t&&t.map((e,n)=>fr.createElement(e.tag,_b({key:n},e.attr),TA(e.child)))}function Ss(t){return e=>fr.createElement(YZ,Lb({attr:_b({},t.attr)},e),TA(t.child))}function YZ(t){var e=n=>{var{attr:r,size:s,title:o}=t,i=HZ(t,UZ),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),fr.createElement("svg",Lb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:_b(_b({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&fr.createElement("title",null,o),t.children)};return y$!==void 0?fr.createElement(y$.Consumer,null,n=>e(n)):e(SA)}function ZZ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(t)}function QZ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function JZ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(t)}function IA(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function eQ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function tQ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}function nQ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(t)}function rQ(t){return Ss({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function $A(t){return Ss({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(t)}function sQ(t){return Ss({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(t)}function NA(t){return Ss({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(t)}function oQ(t){return Ss({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(t)}function iQ(t){return Ss({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(t)}const D5="-";function aQ(t){const e=cQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function s(i){const a=i.split(D5);return a[0]===""&&a.length!==1&&a.shift(),EA(a,e)||lQ(i)}function o(i,a){const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function EA(t,e){var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?EA(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(D5);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId}const x$=/^\[(.+)\]$/;function lQ(t){if(x$.test(t)){const e=x$.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function cQ(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dQ(Object.entries(t.classGroups),n).forEach(([o,i])=>{_3(i,r,o,e)}),r}function _3(t,e,n,r){t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:v$(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(uQ(s)){_3(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{_3(i,v$(e,o),n,r)})})}function v$(t,e){let n=t;return e.split(D5).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function uQ(t){return t.isThemeGetter}function dQ(t,e){return e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[n,s]}):t}function hQ(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function s(o,i){n.set(o,i),e++,e>t&&(e=0,r=n,n=new Map)}return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}}const RA="!";function fQ(t){const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length;function i(a){const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let k=a[w];if(c===0){if(k===s&&(r||a.slice(w,w+o)===e)){l.push(a.slice(u,w)),u=w+o;continue}if(k==="/"){h=w;continue}}k==="["?c++:k==="]"&&c--}const p=l.length===0?a:a.substring(u),m=p.startsWith(RA),g=m?p.substring(1):p,x=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:x}}return n?function(l){return n({className:l,parseClassName:i})}:i}function pQ(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function mQ(t){return{cache:hQ(t.cacheSize),parseClassName:fQ(t),...aQ(t)}}const gQ=/\s+/;function yQ(t,e){const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=new Set;return t.trim().split(gQ).map(i=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=n(i);let h=!!u,p=r(h?c.substring(0,u):c);if(!p){if(!h)return{isTailwindClass:!1,originalClassName:i};if(p=r(c),!p)return{isTailwindClass:!1,originalClassName:i};h=!1}const m=pQ(a).join(":");return{isTailwindClass:!0,modifierId:l?m+RA:m,classGroupId:p,originalClassName:i,hasPostfixModifier:h}}).reverse().filter(i=>{if(!i.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=i,u=a+l;return o.has(u)?!1:(o.add(u),s(l,c).forEach(h=>o.add(a+h)),!0)}).reverse().map(i=>i.originalClassName).join(" ")}function bQ(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=AA(e))&&(r&&(r+=" "),r+=n);return r}function AA(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=AA(t[r]))&&(n&&(n+=" "),n+=e);return n}function xQ(t,...e){let n,r,s,o=i;function i(l){const c=e.reduce((u,h)=>h(u),t());return n=mQ(c),r=n.cache.get,s=n.cache.set,o=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=yQ(l,n);return s(l,u),u}return function(){return o(bQ.apply(null,arguments))}}function hr(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const DA=/^\[(?:([a-z-]+):)?(.+)\]$/i,vQ=/^\d+\/\d+$/,wQ=new Set(["px","full","screen"]),kQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ul(t){return dd(t)||wQ.has(t)||vQ.test(t)}function Lc(t){return Uf(t,"length",MQ)}function dd(t){return!!t&&!Number.isNaN(Number(t))}function Ey(t){return Uf(t,"number",dd)}function g0(t){return!!t&&Number.isInteger(Number(t))}function $Q(t){return t.endsWith("%")&&dd(t.slice(0,-1))}function rn(t){return DA.test(t)}function _c(t){return kQ.test(t)}const NQ=new Set(["length","size","percentage"]);function EQ(t){return Uf(t,NQ,PA)}function RQ(t){return Uf(t,"position",PA)}const AQ=new Set(["image","url"]);function DQ(t){return Uf(t,AQ,FQ)}function PQ(t){return Uf(t,"",OQ)}function y0(){return!0}function Uf(t,e,n){const r=DA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function MQ(t){return CQ.test(t)&&!SQ.test(t)}function PA(){return!1}function OQ(t){return TQ.test(t)}function FQ(t){return IQ.test(t)}function zQ(){const t=hr("colors"),e=hr("spacing"),n=hr("blur"),r=hr("brightness"),s=hr("borderColor"),o=hr("borderRadius"),i=hr("borderSpacing"),a=hr("borderWidth"),l=hr("contrast"),c=hr("grayscale"),u=hr("hueRotate"),h=hr("invert"),p=hr("gap"),m=hr("gradientColorStops"),g=hr("gradientColorStopPositions"),x=hr("inset"),w=hr("margin"),k=hr("opacity"),S=hr("padding"),$=hr("saturate"),T=hr("scale"),E=hr("sepia"),F=hr("skew"),V=hr("space"),j=hr("translate"),W=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",rn,e],U=()=>[rn,e],K=()=>["",Ul,Lc],G=()=>["auto",dd,rn],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",rn],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[dd,Ey],le=()=>[dd,rn];return{cacheSize:500,separator:":",theme:{colors:[y0],spacing:[Ul,Lc],blur:["none","",_c,rn],brightness:q(),borderColor:[t],borderRadius:["none","","full",_c,rn],borderSpacing:U(),borderWidth:K(),contrast:q(),grayscale:re(),hueRotate:le(),invert:re(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[$Q,Lc],inset:O(),margin:O(),opacity:q(),padding:U(),saturate:q(),scale:q(),sepia:re(),skew:le(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",rn]}],container:["container"],columns:[{columns:[_c]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),rn]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",g0,rn]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rn]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",g0,rn]}],"grid-cols":[{"grid-cols":[y0]}],"col-start-end":[{col:["auto",{span:["full",g0,rn]},rn]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[y0]}],"row-start-end":[{row:["auto",{span:[g0,rn]},rn]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rn]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...J()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...J(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...J(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[V]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[V]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rn,e]}],"min-w":[{"min-w":[rn,e,"min","max","fit"]}],"max-w":[{"max-w":[rn,e,"none","full","min","max","fit","prose",{screen:[_c]},_c]}],h:[{h:[rn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_c,Lc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ey]}],"font-family":[{font:[y0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rn]}],"line-clamp":[{"line-clamp":["none",dd,Ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ul,rn]}],"list-image":[{"list-image":["none",rn]}],"list-style-type":[{list:["none","disc","decimal",rn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ul,Lc]}],"underline-offset":[{"underline-offset":["auto",Ul,rn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),RQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Ul,rn]}],"outline-w":[{outline:[Ul,Lc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Ul,Lc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",_c,PQ]}],"shadow-color":[{shadow:[y0]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_c,rn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[$]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[$]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rn]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",rn]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",rn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[g0,rn]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ul,Lc,Ey]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const ze=xQ(zQ);function nd(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function sm(t){if(!nd(t))return t;const e={};for(const n in t)e[n]=sm(t[n]);return e}function it(t,e){if(nd(e)&&Object.keys(e).length===0)return sm({...t,...e});const n={...t,...e};if(nd(e)&&nd(t))for(const r in e)nd(e[r])&&r in t&&nd(t[r])?n[r]=it(t[r],e[r]):n[r]=nd(e[r])?sm(e[r]):e[r];return n}const LQ={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},_Q={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},BQ={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},VQ={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},jQ={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},WQ={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},UQ={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},HQ={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},GQ={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},qQ={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},KQ={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},XQ={button:{base:"inline-flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-3 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",label:"text-center text-sm font-medium text-white sm:w-auto"},withIcon:{base:"absolute end-2 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800",icon:{defaultIcon:"h-4 w-4",successIcon:"h-4 w-4 text-blue-700 dark:text-blue-500"}},withIconText:{base:"absolute end-2.5 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg border border-gray-200 bg-white px-2.5 py-2 text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",icon:{defaultIcon:"me-1.5 h-3 w-3",successIcon:"me-1.5 h-3 w-3 text-blue-700 dark:text-blue-500"},label:{base:"inline-flex items-center",defaultText:"text-xs font-semibold",successText:"text-xs font-semibold text-blue-700 dark:text-blue-500"}}},YQ={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},ZQ={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},QQ={root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}},Vc={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},JQ={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},eJ={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},tJ={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},nJ={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},rJ={root:{base:"my-8 h-px border-0 bg-gray-200 dark:bg-gray-700"},trimmed:{base:"mx-auto my-4 h-1 w-48 rounded border-0 bg-gray-100 dark:bg-gray-700 md:my-10"},icon:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-1 w-64 rounded border-0 bg-gray-200 dark:bg-gray-700",icon:{base:"absolute left-1/2 -translate-x-1/2 bg-white px-4 dark:bg-gray-900",icon:"h-4 w-4 text-gray-700 dark:text-gray-300"}},text:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-px w-64 border-0 bg-gray-200 dark:bg-gray-700",text:"absolute left-1/2 -translate-x-1/2 bg-white px-3 font-medium text-gray-900 dark:bg-gray-900 dark:text-white"},square:{base:"mx-auto my-8 h-8 w-8 rounded border-0 bg-gray-200 dark:bg-gray-700 md:my-12"}},sJ={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},oJ={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},iJ={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},aJ={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},ib={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},lJ={...ib,dropdown:{base:"",toggle:{...Vc,floating:{...Vc.floating,base:ze(Vc.floating.base,"mt-2 block"),content:ze(Vc.floating.content,"text-gray-500 dark:text-gray-400"),style:{...Vc.floating.style,auto:ze(Vc.floating.style.auto,"text-gray-500 dark:text-gray-400")}},inlineWrapper:ze(Vc.inlineWrapper,"flex w-full items-center justify-between")}},dropdownToggle:{base:ze(ib.link.base,ib.link.active.off,"flex w-full items-center justify-between")}},cJ={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},uJ={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},dJ={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},hJ={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},fJ={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},pJ={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},mJ={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},gJ={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},yJ={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},bJ={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},xJ={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},vJ={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},wJ={base:"flex flex-col gap-2",tablist:{base:"flex text-center",variant:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",variant:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",variant:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},kJ={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},CJ={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},SJ={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"",horizontal:"mt-3 sm:pr-8",vertical:""},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},TJ={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},IJ={root:{base:"group flex rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ms-3 mt-0.5 text-start text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"relative rounded-full border after:absolute after:rounded-full after:bg-white after:transition-all group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white rtl:after:-translate-x-full",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 min-w-9 after:left-px after:top-px after:h-4 after:w-4 rtl:after:right-px",md:"h-6 w-11 min-w-11 after:left-px after:top-px after:h-5 after:w-5 rtl:after:right-px",lg:"h-7 w-14 min-w-14 after:left-1 after:top-0.5 after:h-6 after:w-6 rtl:after:right-1"}}},$J={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},NJ={accordion:LQ,alert:_Q,avatar:BQ,badge:VQ,blockquote:jQ,breadcrumb:WQ,button:UQ,buttonGroup:HQ,card:GQ,carousel:qQ,checkbox:KQ,clipboard:XQ,datepicker:ZQ,darkThemeToggle:YQ,drawer:QQ,dropdown:Vc,fileInput:JQ,floatingLabel:eJ,footer:tJ,helperText:nJ,hr:rJ,kbd:sJ,label:oJ,listGroup:aJ,list:iJ,megaMenu:lJ,modal:cJ,navbar:ib,pagination:uJ,popover:dJ,progress:hJ,radio:fJ,rangeSlider:pJ,rating:mJ,ratingAdvanced:gJ,select:yJ,textInput:CJ,textarea:kJ,toggleSwitch:IJ,sidebar:bJ,spinner:xJ,table:vJ,tabs:wJ,timeline:SJ,toast:TJ,tooltip:$J},EJ={theme:sm(NJ)};function Et(){return sm(EJ.theme)}const MA=D.createContext(void 0);function OA(){const t=D.useContext(MA);if(!t)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return t}const FA=({children:t,className:e,theme:n={},...r})=>{const{isOpen:s}=OA(),o=it(Et().accordion.content,n);return z.jsx("div",{className:ze(o.base,e),"data-testid":"flowbite-accordion-content",hidden:!s,...r,children:t})},zA=({children:t,...e})=>{const{alwaysOpen:n}=e,[r,s]=D.useState(e.isOpen),o=n?{...e,isOpen:r,setOpen:()=>s(!r)}:e;return z.jsx(MA.Provider,{value:o,children:t})},LA=({as:t="h2",children:e,className:n,theme:r={},...s})=>{const{arrowIcon:o,flush:i,isOpen:a,setOpen:l}=OA(),c=()=>typeof l<"u"&&l(),u=it(Et().accordion.title,r);return z.jsxs("button",{className:ze(u.base,u.flush[i?"on":"off"],u.open[a?"on":"off"],n),onClick:c,type:"button",...s,children:[z.jsx(t,{className:u.heading,"data-testid":"flowbite-accordion-heading",children:e}),o&&z.jsx(o,{"aria-hidden":!0,className:ze(u.arrow.base,u.arrow.open[a?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},_A=({alwaysOpen:t=!1,arrowIcon:e=IA,children:n,flush:r=!1,collapseAll:s=!1,className:o,theme:i={},...a})=>{const[l,c]=D.useState(s?-1:0),u=D.useMemo(()=>D.Children.map(n,(p,m)=>D.cloneElement(p,{alwaysOpen:t,arrowIcon:e,flush:r,isOpen:l===m,setOpen:()=>c(l===m?-1:m)})),[t,e,n,r,l]),h=it(Et().accordion.root,i);return z.jsx("div",{className:ze(h.base,h.flush[r?"on":"off"],o),"data-testid":"flowbite-accordion",...a,children:u})};_A.displayName="Accordion";zA.displayName="Accordion.Panel";LA.displayName="Accordion.Title";FA.displayName="Accordion.Content";Object.assign(_A,{Panel:zA,Title:LA,Content:FA});const BA=({children:t,className:e,theme:n={},...r})=>{const s=it(Et().avatar.group,n);return z.jsx("div",{"data-testid":"avatar-group-element",className:ze(s.base,e),...r,children:t})};BA.displayName="Avatar.Group";const VA=({className:t,href:e,theme:n={},total:r,...s})=>{const o=it(Et().avatar.groupCounter,n);return z.jsxs("a",{href:e,className:ze(o.base,t),...s,children:["+",r]})};VA.displayName="Avatar.GroupCounter";const jA=({alt:t="",bordered:e=!1,children:n,className:r,color:s="light",img:o,placeholderInitials:i="",rounded:a=!1,size:l="md",stacked:c=!1,status:u,statusPosition:h="top-left",theme:p={},...m})=>{const g=it(Et().avatar,p),x=ze(g.root.img.base,e&&g.root.bordered,e&&g.root.color[s],a&&g.root.rounded,c&&g.root.stacked,g.root.img.on,g.root.size[l]),w={className:ze(x,g.root.img.on),"data-testid":"flowbite-avatar-img"};return z.jsxs("div",{className:ze(g.root.base,r),"data-testid":"flowbite-avatar",...m,children:[z.jsxs("div",{className:"relative",children:[o?typeof o=="string"?z.jsx("img",{alt:t,src:o,...w}):o({alt:t,...w}):i?z.jsx("div",{className:ze(g.root.img.off,g.root.initials.base,c&&g.root.stacked,e&&g.root.bordered,e&&g.root.color[s],g.root.size[l],a&&g.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:z.jsx("span",{className:ze(g.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:i})}):z.jsx("div",{className:ze(x,g.root.img.off),"data-testid":"flowbite-avatar-img",children:z.jsx("svg",{className:g.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),u&&z.jsx("span",{"data-testid":"flowbite-avatar-status",className:ze(g.root.status.base,g.root.status[u],g.root.statusPosition[h])})]}),n&&z.jsx("div",{children:n})]})};jA.displayName="Avatar";Object.assign(jA,{Group:BA,Counter:VA});const WA=({children:t,color:e="info",href:n,icon:r,size:s="xs",className:o,theme:i={},...a})=>{const l=it(Et().badge,i),c=()=>z.jsxs("span",{className:ze(l.root.base,l.root.color[e],l.root.size[s],l.icon[r?"on":"off"],o),"data-testid":"flowbite-badge",...a,children:[r&&z.jsx(r,{"aria-hidden":!0,className:l.icon.size[s],"data-testid":"flowbite-badge-icon"}),t&&z.jsx("span",{children:t})]});return n?z.jsx("a",{className:l.root.href,href:n,children:z.jsx(c,{})}):z.jsx(c,{})};WA.displayName="Badge";const UA=({className:t,color:e="info",light:n,size:r="md",theme:s={},...o})=>{const i=it(Et().spinner,s);return z.jsx("span",{role:"status",...o,children:z.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:ze(i.base,i.color[e],i.light[n?"on":"off"].base,i.light[n?"on":"off"].color[e],i.size[r],t),children:[z.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),z.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};UA.displayName="Spinner";const P5=D.forwardRef(({children:t,as:e,href:n,type:r="button",...s},o)=>{const i=e||(n?"a":"button");return D.createElement(i,{ref:o,href:n,type:r,...s},t)});P5.displayName="ButtonBaseComponent";const HA=(t,e,n)=>D.Children.map(t,(r,s)=>{if(D.isValidElement(r)){const o=r.type==M5?{positionInGroup:RJ(s,D.Children.count(t))}:{};return r.props.children?D.cloneElement(r,{...r.props,children:HA(r.props.children,e,n),...o}):D.cloneElement(r,{outline:e,pill:n,...o})}return r}),RJ=(t,e)=>t===0?"start":t===e-1?"end":"middle",GA=({children:t,className:e,outline:n,pill:r,theme:s={},...o})=>{const i=D.useMemo(()=>HA(t,n,r),[t,n,r]),a=it(Et().buttonGroup,s);return z.jsx("div",{className:ze(a.base,e),role:"group",...o,children:i})};GA.displayName="Button.Group";const qA=D.forwardRef(({children:t,className:e,color:n="info",disabled:r,fullSized:s,isProcessing:o=!1,processingLabel:i="Loading...",processingSpinner:a,gradientDuoTone:l,gradientMonochrome:c,label:u,outline:h=!1,pill:p=!1,positionInGroup:m="none",size:g="md",theme:x={},...w},k)=>{const{buttonGroup:S,button:$}=Et(),T=it($,x),E=w;return z.jsx(P5,{ref:k,disabled:r,className:ze(T.base,r&&T.disabled,!l&&!c&&T.color[n],l&&!c&&T.gradientDuoTone[l],!l&&c&&T.gradient[c],h&&(T.outline.color[n]??T.outline.color.default),T.pill[p?"on":"off"],s&&T.fullSized,S.position[m],e),...E,children:z.jsx("span",{className:ze(T.inner.base,T.outline[h?"on":"off"],T.outline.pill[h&&p?"on":"off"],T.size[g],h&&!T.outline.color[n]&&T.inner.outline,o&&T.isProcessing,o&&T.inner.isProcessingPadding[g],T.inner.position[m]),children:z.jsxs(z.Fragment,{children:[o&&z.jsx("span",{className:ze(T.spinnerSlot,T.spinnerLeftPosition[g]),children:a||z.jsx(UA,{size:g})}),typeof t<"u"?t:z.jsx("span",{"data-testid":"flowbite-button-label",className:ze(T.label),children:o?i:u})]})})})});qA.displayName="Button";const M5=Object.assign(qA,{Group:GA}),KA=({children:t,...e})=>{const n=r=>{const o=r.target.closest('[role="banner"]');o==null||o.remove()};return z.jsx(M5,{onClick:n,...e,children:t})};KA.displayName="Banner.CollapseButton";const XA=({children:t,...e})=>z.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...e,children:t});XA.displayName="Banner";Object.assign(XA,{CollapseButton:KA});const YA=D.forwardRef(({children:t,className:e,href:n,icon:r,theme:s={},...o},i)=>{const a=typeof n<"u",l=a?"a":"span",c=it(Et().breadcrumb.item,s);return z.jsxs("li",{className:ze(c.base,e),...o,children:[z.jsx(NA,{"aria-hidden":!0,className:c.chevron,"data-testid":"flowbite-breadcrumb-separator"}),z.jsxs(l,{ref:i,className:c.href[a?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:n,children:[r&&z.jsx(r,{"aria-hidden":!0,className:c.icon}),t]})]})});YA.displayName="Breadcrumb.Item";const ZA=({children:t,className:e,theme:n={},...r})=>{const s=it(Et().breadcrumb.root,n);return z.jsx("nav",{"aria-label":"Breadcrumb",className:ze(s.base,e),...r,children:z.jsx("ol",{className:s.list,children:t})})};ZA.displayName="Breadcrumb";Object.assign(ZA,{Item:YA});var $4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w$;function AJ(){return w$||(w$=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=s(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=s(i,a));return i}function s(o,i){return i?o?o+" "+i:o+i:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}($4)),$4.exports}var DJ=AJ();const PJ=Im(DJ);var Ry={exports:{}},k$;function MJ(){if(k$)return Ry.exports;k$=1;function t(e,n=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(n<0)throw new RangeError("`wait` must not be negative.");const{immediate:s}=typeof r=="boolean"?{immediate:r}:r;let o,i,a,l,c;function u(){const m=o,g=i;return o=void 0,i=void 0,c=e.apply(m,g),c}function h(){const m=Date.now()-l;m<n&&m>=0?a=setTimeout(h,n-m):(a=void 0,s||(c=u()))}const p=function(...m){if(o&&this!==o)throw new Error("Debounced method called with different contexts.");o=this,i=m,l=Date.now();const g=s&&!a;return a||(a=setTimeout(h,n)),g&&(c=u()),c};return p.clear=()=>{a&&(clearTimeout(a),a=void 0)},p.flush=()=>{a&&p.trigger()},p.trigger=()=>{c=u(),p.clear()},p}return Ry.exports.debounce=t,Ry.exports=t,Ry.exports}var OJ=MJ();const FJ=Im(OJ);var zJ=Object.defineProperty,LJ=(t,e,n)=>e in t?zJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xs=(t,e,n)=>LJ(t,typeof e!="symbol"?e+"":e,n);const _J=300,BJ=0;class VJ extends D.PureComponent{constructor(e){super(e),xs(this,"container"),xs(this,"scrolling"),xs(this,"started"),xs(this,"pressed"),xs(this,"isMobile",!1),xs(this,"internal"),xs(this,"scrollLeft"),xs(this,"scrollTop"),xs(this,"clientX"),xs(this,"clientY"),xs(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()}),xs(this,"onScroll",()=>{const n=this.container.current;(n.scrollLeft!==this.scrollLeft||n.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())}),xs(this,"onTouchStart",n=>{const{nativeMobileScroll:r}=this.props;if(this.isDraggable(n.target))if(this.internal=!0,r&&this.scrolling)this.pressed=!0;else{const s=n.touches[0];this.processClick(s.clientX,s.clientY),!r&&this.props.stopPropagation&&n.stopPropagation()}}),xs(this,"onTouchEnd",()=>{const{nativeMobileScroll:n}=this.props;this.pressed&&(this.started&&(!this.scrolling||!n)?this.processEnd():this.pressed=!1,this.forceUpdate())}),xs(this,"onTouchMove",n=>{const{nativeMobileScroll:r}=this.props;if(this.pressed&&(!r||!this.isMobile)){const s=n.touches[0];s&&this.processMove(s.clientX,s.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation()}}),xs(this,"onMouseDown",n=>{var r,s;this.isDraggable(n.target)&&this.isScrollable()&&(this.internal=!0,((s=(r=this.props)==null?void 0:r.buttons)==null?void 0:s.indexOf(n.button))!==-1&&(this.processClick(n.clientX,n.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation()))}),xs(this,"onMouseMove",n=>{this.pressed&&(this.processMove(n.clientX,n.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation())}),xs(this,"onMouseUp",n=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(n)),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation())}),this.container=fr.createRef(),this.onEndScroll=FJ(this.onEndScroll,_J),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:e}=this.props,n=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),n.addEventListener("touchstart",this.onTouchStart,{passive:!1}),n.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(e){const n=this.props.ignoreElements;if(n){const r=e.closest(n);return r===null||r.contains(this.getElement())}else return!0}isScrollable(){const e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)}processClick(e,n){const r=this.container.current;this.scrollLeft=r==null?void 0:r.scrollLeft,this.scrollTop=r==null?void 0:r.scrollTop,this.clientX=e,this.clientY=n,this.pressed=!0}processStart(e=!0){const{onStartScroll:n}=this.props;this.started=!0,e&&document.body.classList.add("cursor-grab"),n&&n({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:e}=this.props;e&&e({external:!this.internal})}else this.processStart(!1)}processMove(e,n){const{horizontal:r,vertical:s,activationDistance:o,onScroll:i}=this.props,a=this.container.current;this.started?(r&&(a.scrollLeft-=e-this.clientX),s&&(a.scrollTop-=n-this.clientY),i&&i({external:!this.internal}),this.clientX=e,this.clientY=n,this.scrollLeft=a.scrollLeft,this.scrollTop=a.scrollTop):(r&&Math.abs(e-this.clientX)>o||s&&Math.abs(n-this.clientY)>o)&&(this.clientX=e,this.clientY=n,this.processStart())}processEnd(){const{onEndScroll:e}=this.props;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(e){[this.container,this.props.innerRef].forEach(n=>{n&&(typeof n=="function"?n(e):n.current=e)})}render(){const{children:e,draggingClassName:n,className:r,style:s,hideScrollbars:o}=this.props;return z.jsx("div",{className:PJ(r,this.pressed&&n,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":o,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":o}),style:s,ref:this.getRef,onScroll:this.onScroll,children:e})}}xs(VJ,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[BJ]});const jJ=D.forwardRef(({className:t,color:e="default",theme:n={},...r},s)=>{const o=it(Et().checkbox,n);return z.jsx("input",{ref:s,type:"checkbox",className:ze(o.root.base,o.root.color[e],t),...r})});jJ.displayName="Checkbox";function n2(){return typeof window<"u"}function fu(t){return QA(t)?(t.nodeName||"").toLowerCase():"#document"}function Ho(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xl(t){var e;return(e=(QA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function QA(t){return n2()?t instanceof Node||t instanceof Ho(t).Node:!1}function rr(t){return n2()?t instanceof Element||t instanceof Ho(t).Element:!1}function Kr(t){return n2()?t instanceof HTMLElement||t instanceof Ho(t).HTMLElement:!1}function B3(t){return!n2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ho(t).ShadowRoot}function Lm(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ki(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function WJ(t){return["table","td","th"].includes(fu(t))}function r2(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function O5(t){const e=F5(),n=rr(t)?Ki(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function UJ(t){let e=sc(t);for(;Kr(e)&&!nu(e);){if(O5(e))return e;if(r2(e))return null;e=sc(e)}return null}function F5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nu(t){return["html","body","#document"].includes(fu(t))}function Ki(t){return Ho(t).getComputedStyle(t)}function s2(t){return rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sc(t){if(fu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B3(t)&&t.host||xl(t);return B3(e)?e.host:e}function JA(t){const e=sc(t);return nu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kr(e)&&Lm(e)?e:JA(e)}function Xc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JA(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=Ho(s);if(o){const a=V3(i);return e.concat(i,i.visualViewport||[],Lm(s)?s:[],a&&n?Xc(a):[])}return e.concat(s,Xc(s,[],n))}function V3(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ba(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function qr(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&B3(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function z5(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function e9(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function t9(t){return t.mozInputSource===0&&t.isTrusted?!0:j3()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function L5(t){return HJ()?!1:!j3()&&t.width===0&&t.height===0||j3()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function _5(){return/apple/i.test(navigator.vendor)}function j3(){const t=/android/i;return t.test(z5())||t.test(e9())}function n9(){return z5().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function HJ(){return e9().includes("jsdom/")}function om(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function GJ(t){return"nativeEvent"in t}function qJ(t){return t.matches("html,body")}function Ds(t){return(t==null?void 0:t.ownerDocument)||document}function N4(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Gl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const KJ="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function B5(t){return Kr(t)&&t.matches(KJ)}function qs(t){t.preventDefault(),t.stopPropagation()}function r9(t){return t?t.getAttribute("role")==="combobox"&&B5(t):!1}const XJ=["top","right","bottom","left"],C$=["start","end"],S$=XJ.reduce((t,e)=>t.concat(e,e+"-"+C$[0],e+"-"+C$[1]),[]),bf=Math.min,gd=Math.max,Bb=Math.round,Kh=Math.floor,Ja=t=>({x:t,y:t}),YJ={left:"right",right:"left",bottom:"top",top:"bottom"},ZJ={start:"end",end:"start"};function W3(t,e,n){return gd(t,bf(e,n))}function Hf(t,e){return typeof t=="function"?t(e):t}function oc(t){return t.split("-")[0]}function el(t){return t.split("-")[1]}function s9(t){return t==="x"?"y":"x"}function V5(t){return t==="y"?"height":"width"}function xf(t){return["top","bottom"].includes(oc(t))?"y":"x"}function j5(t){return s9(xf(t))}function o9(t,e,n){n===void 0&&(n=!1);const r=el(t),s=j5(t),o=V5(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=jb(i)),[i,jb(i)]}function QJ(t){const e=jb(t);return[Vb(t),e,Vb(e)]}function Vb(t){return t.replace(/start|end/g,e=>ZJ[e])}function JJ(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:i;default:return[]}}function eee(t,e,n,r){const s=el(t);let o=JJ(oc(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Vb)))),o}function jb(t){return t.replace(/left|right|bottom|top/g,e=>YJ[e])}function tee(t){return{top:0,right:0,bottom:0,left:0,...t}}function i9(t){return typeof t!="number"?tee(t):{top:t,right:t,bottom:t,left:t}}function Wb(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nee=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ub=nee.join(","),a9=typeof Element>"u",vf=a9?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Hb=!a9&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Gb=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=s===""||s==="true",i=o||n&&e&&t(e.parentNode);return i},ree=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},see=function(e,n,r){if(Gb(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Ub));return n&&vf.call(e,Ub)&&s.unshift(e),s=s.filter(r),s},oee=function t(e,n,r){for(var s=[],o=Array.from(e);o.length;){var i=o.shift();if(!Gb(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:i,candidates:c})}else{var u=vf.call(i,Ub);u&&r.filter(i)&&(n||!e.includes(i))&&s.push(i);var h=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),p=!Gb(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(h&&p){var m=t(h===!0?i.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:i,candidates:m})}else o.unshift.apply(o,i.children)}}return s},l9=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},c9=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ree(e))&&!l9(e)?0:e.tabIndex},iee=function(e,n){var r=c9(e);return r<0&&n&&!l9(e)?0:r},aee=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},u9=function(e){return e.tagName==="INPUT"},lee=function(e){return u9(e)&&e.type==="hidden"},cee=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},uee=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},dee=function(e){if(!e.name)return!0;var n=e.form||Hb(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=uee(s,e.form);return!o||o===e},hee=function(e){return u9(e)&&e.type==="radio"},fee=function(e){return hee(e)&&!dee(e)},pee=function(e){var n,r=e&&Hb(e),s=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==e){var i,a,l;for(o=!!((i=s)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!o&&s;){var c,u,h;r=Hb(s),s=(c=r)===null||c===void 0?void 0:c.host,o=!!((u=s)!==null&&u!==void 0&&(h=u.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return o},T$=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},mee=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=vf.call(e,"details>summary:first-of-type"),i=o?e.parentElement:e;if(vf.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Hb(e);if(l&&!l.shadowRoot&&s(l)===!0)return T$(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(pee(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return T$(e);return!1},gee=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return vf.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},yee=function(e,n){return!(n.disabled||Gb(n)||lee(n)||mee(n,e)||cee(n)||gee(n))},U3=function(e,n){return!(fee(n)||c9(n)<0||!yee(e,n))},bee=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},xee=function t(e){var n=[],r=[];return e.forEach(function(s,o){var i=!!s.scopeParent,a=i?s.scopeParent:s,l=iee(a,i),c=i?t(s.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:o,tabIndex:l,item:s,isScope:i,content:c})}),r.sort(aee).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},im=function(e,n){n=n||{};var r;return n.getShadowRoot?r=oee([e],n.includeContainer,{filter:U3.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bee}):r=see(e,n.includeContainer,U3.bind(null,n)),xee(r)},vee=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return vf.call(e,Ub)===!1?!1:U3(n,e)};function I$(t,e,n){let{reference:r,floating:s}=t;const o=xf(e),i=j5(e),a=V5(i),l=oc(e),c=o==="y",u=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(el(e)){case"start":m[i]-=p*(n&&c?-1:1);break;case"end":m[i]+=p*(n&&c?-1:1);break}return m}const wee=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=I$(c,r,l),p=r,m={},g=0;for(let x=0;x<a.length;x++){const{name:w,fn:k}=a[x],{x:S,y:$,data:T,reset:E}=await k({x:u,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:i,elements:{reference:t,floating:e}});u=S??u,h=$??h,m={...m,[w]:{...m[w],...T}},E&&g<=50&&(g++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(c=E.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:u,y:h}=I$(c,p,l)),x=-1)}return{x:u,y:h,placement:p,strategy:s,middlewareData:m}};async function W5(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Hf(e,t),g=i9(m),w=a[p?h==="floating"?"reference":"floating":h],k=Wb(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,$=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),T=await(o.isElement==null?void 0:o.isElement($))?await(o.getScale==null?void 0:o.getScale($))||{x:1,y:1}:{x:1,y:1},E=Wb(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:$,strategy:l}):S);return{top:(k.top-E.top+g.top)/T.y,bottom:(E.bottom-k.bottom+g.bottom)/T.y,left:(k.left-E.left+g.left)/T.x,right:(E.right-k.right+g.right)/T.x}}const kee=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Hf(t,e)||{};if(c==null)return{};const h=i9(u),p={x:n,y:r},m=j5(s),g=V5(m),x=await i.getDimensions(c),w=m==="y",k=w?"top":"left",S=w?"bottom":"right",$=w?"clientHeight":"clientWidth",T=o.reference[g]+o.reference[m]-p[m]-o.floating[g],E=p[m]-o.reference[m],F=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let V=F?F[$]:0;(!V||!await(i.isElement==null?void 0:i.isElement(F)))&&(V=a.floating[$]||o.floating[g]);const j=T/2-E/2,W=V/2-x[g]/2-1,R=bf(h[k],W),O=bf(h[S],W),U=R,K=V-x[g]-O,G=V/2-x[g]/2+j,Y=W3(U,G,K),Z=!l.arrow&&el(s)!=null&&G!==Y&&o.reference[g]/2-(G<U?R:O)-x[g]/2<0,ne=Z?G<U?G-U:G-K:0;return{[m]:p[m]+ne,data:{[m]:Y,centerOffset:G-Y-ne,...Z&&{alignmentOffset:ne}},reset:Z}}});function Cee(t,e,n){return(t?[...n.filter(s=>el(s)===t),...n.filter(s=>el(s)!==t)]:n.filter(s=>oc(s)===s)).filter(s=>t?el(s)===t||(e?Vb(s)!==s:!1):!0)}const See=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:o,middlewareData:i,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:h,allowedPlacements:p=S$,autoAlignment:m=!0,...g}=Hf(t,e),x=h!==void 0||p===S$?Cee(h||null,m,p):p,w=await W5(e,g),k=((n=i.autoPlacement)==null?void 0:n.index)||0,S=x[k];if(S==null)return{};const $=o9(S,o,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==S)return{reset:{placement:x[0]}};const T=[w[oc(S)],w[$[0]],w[$[1]]],E=[...((r=i.autoPlacement)==null?void 0:r.overflows)||[],{placement:S,overflows:T}],F=x[k+1];if(F)return{data:{index:k+1,overflows:E},reset:{placement:F}};const V=E.map(R=>{const O=el(R.placement);return[R.placement,O&&u?R.overflows.slice(0,2).reduce((U,K)=>U+K,0):R.overflows[0],R.overflows]}).sort((R,O)=>R[1]-O[1]),W=((s=V.filter(R=>R[2].slice(0,el(R[0])?2:3).every(O=>O<=0))[0])==null?void 0:s[0])||V[0][0];return W!==a?{data:{index:k+1,overflows:E},reset:{placement:W}}:{}}}},Tee=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...w}=Hf(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const k=oc(s),S=xf(a),$=oc(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=p||($||!x?[jb(a)]:QJ(a)),F=g!=="none";!p&&F&&E.push(...eee(a,x,g,T));const V=[a,...E],j=await W5(e,w),W=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&W.push(j[k]),h){const G=o9(s,i,T);W.push(j[G[0]],j[G[1]])}if(R=[...R,{placement:s,overflows:W}],!W.every(G=>G<=0)){var O,U;const G=(((O=o.flip)==null?void 0:O.index)||0)+1,Y=V[G];if(Y)return{data:{index:G,overflows:R},reset:{placement:Y}};let Z=(U=R.filter(ne=>ne.overflows[0]<=0).sort((ne,J)=>ne.overflows[1]-J.overflows[1])[0])==null?void 0:U.placement;if(!Z)switch(m){case"bestFit":{var K;const ne=(K=R.filter(J=>{if(F){const re=xf(J.placement);return re===S||re==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(re=>re>0).reduce((re,se)=>re+se,0)]).sort((J,re)=>J[1]-re[1])[0])==null?void 0:K[0];ne&&(Z=ne);break}case"initialPlacement":Z=a;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};async function Iee(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=oc(n),a=el(n),l=xf(n)==="y",c=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,h=Hf(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const $ee=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=e,l=await Iee(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},Nee=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:k,y:S}=w;return{x:k,y:S}}},...l}=Hf(t,e),c={x:n,y:r},u=await W5(e,l),h=xf(oc(s)),p=s9(h);let m=c[p],g=c[h];if(o){const w=p==="y"?"top":"left",k=p==="y"?"bottom":"right",S=m+u[w],$=m-u[k];m=W3(S,m,$)}if(i){const w=h==="y"?"top":"left",k=h==="y"?"bottom":"right",S=g+u[w],$=g-u[k];g=W3(S,g,$)}const x=a.fn({...e,[p]:m,[h]:g});return{...x,data:{x:x.x-n,y:x.y-r}}}}};function d9(t){const e=Ki(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Kr(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,a=Bb(n)!==o||Bb(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function U5(t){return rr(t)?t:t.contextElement}function of(t){const e=U5(t);if(!Kr(e))return Ja(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=d9(e);let i=(o?Bb(n.width):n.width)/r,a=(o?Bb(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Eee=Ja(0);function h9(t){const e=Ho(t);return!F5()||!e.visualViewport?Eee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ree(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ho(t)?!1:e}function Cd(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=U5(t);let i=Ja(1);e&&(r?rr(r)&&(i=of(r)):i=of(t));const a=Ree(o,n,r)?h9(o):Ja(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,h=s.height/i.y;if(o){const p=Ho(o),m=r&&rr(r)?Ho(r):r;let g=p,x=V3(g);for(;x&&r&&m!==g;){const w=of(x),k=x.getBoundingClientRect(),S=Ki(x),$=k.left+(x.clientLeft+parseFloat(S.paddingLeft))*w.x,T=k.top+(x.clientTop+parseFloat(S.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=$,c+=T,g=Ho(x),x=V3(g)}}return Wb({width:u,height:h,x:l,y:c})}function H5(t,e){const n=s2(t).scrollLeft;return e?e.left+n:Cd(xl(t)).left+n}function f9(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:H5(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function Aee(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=xl(r),a=e?r2(e.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Ja(1);const u=Ja(0),h=Kr(r);if((h||!h&&!o)&&((fu(r)!=="body"||Lm(i))&&(l=s2(r)),Kr(r))){const m=Cd(r);c=of(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=i&&!h&&!o?f9(i,l,!0):Ja(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function Dee(t){return Array.from(t.getClientRects())}function Pee(t){const e=xl(t),n=s2(t),r=t.ownerDocument.body,s=gd(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=gd(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+H5(t);const a=-n.scrollTop;return Ki(r).direction==="rtl"&&(i+=gd(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function Mee(t,e){const n=Ho(t),r=xl(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const c=F5();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function Oee(t,e){const n=Cd(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=Kr(t)?of(t):Ja(1),i=t.clientWidth*o.x,a=t.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function $$(t,e,n){let r;if(e==="viewport")r=Mee(t,n);else if(e==="document")r=Pee(xl(t));else if(rr(e))r=Oee(e,n);else{const s=h9(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wb(r)}function p9(t,e){const n=sc(t);return n===e||!rr(n)||nu(n)?!1:Ki(n).position==="fixed"||p9(n,e)}function Fee(t,e){const n=e.get(t);if(n)return n;let r=Xc(t,[],!1).filter(a=>rr(a)&&fu(a)!=="body"),s=null;const o=Ki(t).position==="fixed";let i=o?sc(t):t;for(;rr(i)&&!nu(i);){const a=Ki(i),l=O5(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Lm(i)&&!l&&p9(t,i))?r=r.filter(u=>u!==i):s=a,i=sc(i)}return e.set(t,r),r}function zee(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?r2(e)?[]:Fee(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const h=$$(e,u,s);return c.top=gd(h.top,c.top),c.right=bf(h.right,c.right),c.bottom=bf(h.bottom,c.bottom),c.left=gd(h.left,c.left),c},$$(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Lee(t){const{width:e,height:n}=d9(t);return{width:e,height:n}}function _ee(t,e,n){const r=Kr(e),s=xl(e),o=n==="fixed",i=Cd(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Ja(0);if(r||!r&&!o)if((fu(e)!=="body"||Lm(s))&&(a=s2(e)),r){const p=Cd(e,!0,o,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=H5(s));const c=s&&!r&&!o?f9(s,a):Ja(0),u=i.left+a.scrollLeft-l.x-c.x,h=i.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:i.width,height:i.height}}function E4(t){return Ki(t).position==="static"}function N$(t,e){if(!Kr(t)||Ki(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xl(t)===n&&(n=n.ownerDocument.body),n}function m9(t,e){const n=Ho(t);if(r2(t))return n;if(!Kr(t)){let s=sc(t);for(;s&&!nu(s);){if(rr(s)&&!E4(s))return s;s=sc(s)}return n}let r=N$(t,e);for(;r&&WJ(r)&&E4(r);)r=N$(r,e);return r&&nu(r)&&E4(r)&&!O5(r)?n:r||UJ(t)||n}const Bee=async function(t){const e=this.getOffsetParent||m9,n=this.getDimensions,r=await n(t.floating);return{reference:_ee(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Vee(t){return Ki(t).direction==="rtl"}const jee={convertOffsetParentRelativeRectToViewportRelativeRect:Aee,getDocumentElement:xl,getClippingRect:zee,getOffsetParent:m9,getElementRects:Bee,getClientRects:Dee,getDimensions:Lee,getScale:of,isElement:rr,isRTL:Vee};function Wee(t,e){let n=null,r;const s=xl(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=Kh(u),g=Kh(s.clientWidth-(c+h)),x=Kh(s.clientHeight-(u+p)),w=Kh(c),S={rootMargin:-m+"px "+-g+"px "+-x+"px "+-w+"px",threshold:gd(0,bf(1,l))||1};let $=!0;function T(E){const F=E[0].intersectionRatio;if(F!==l){if(!$)return i();F?i(!1,F):r=setTimeout(()=>{i(!1,1e-7)},1e3)}$=!1}try{n=new IntersectionObserver(T,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,S)}n.observe(t)}return i(!0),o}function g9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=U5(t),u=s||o?[...c?Xc(c):[],...Xc(e)]:[];u.forEach(k=>{s&&k.addEventListener("scroll",n,{passive:!0}),o&&k.addEventListener("resize",n)});const h=c&&a?Wee(c,n):null;let p=-1,m=null;i&&(m=new ResizeObserver(k=>{let[S]=k;S&&S.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var $;($=m)==null||$.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,x=l?Cd(t):null;l&&w();function w(){const k=Cd(t);x&&(k.x!==x.x||k.y!==x.y||k.width!==x.width||k.height!==x.height)&&n(),x=k,g=requestAnimationFrame(w)}return n(),()=>{var k;u.forEach(S=>{s&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),h==null||h(),(k=m)==null||k.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const Uee=$ee,Hee=See,Gee=Nee,qee=Tee,E$=kee,Kee=(t,e,n)=>{const r=new Map,s={platform:jee,...n},o={...s.platform,_c:r};return wee(t,e,{...s,platform:o})};var ab=typeof document<"u"?D.useLayoutEffect:D.useEffect;function qb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!qb(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!qb(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function y9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function R$(t,e){const n=y9(t);return Math.round(e*n)/n}function R4(t){const e=D.useRef(t);return ab(()=>{e.current=t}),e}function Xee(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=D.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=D.useState(r);qb(p,r)||m(r);const[g,x]=D.useState(null),[w,k]=D.useState(null),S=D.useCallback(J=>{J!==F.current&&(F.current=J,x(J))},[]),$=D.useCallback(J=>{J!==V.current&&(V.current=J,k(J))},[]),T=o||g,E=i||w,F=D.useRef(null),V=D.useRef(null),j=D.useRef(u),W=l!=null,R=R4(l),O=R4(s),U=R4(c),K=D.useCallback(()=>{if(!F.current||!V.current)return;const J={placement:e,strategy:n,middleware:p};O.current&&(J.platform=O.current),Kee(F.current,V.current,J).then(re=>{const se={...re,isPositioned:U.current!==!1};G.current&&!qb(j.current,se)&&(j.current=se,Zx.flushSync(()=>{h(se)}))})},[p,e,n,O,U]);ab(()=>{c===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(J=>({...J,isPositioned:!1})))},[c]);const G=D.useRef(!1);ab(()=>(G.current=!0,()=>{G.current=!1}),[]),ab(()=>{if(T&&(F.current=T),E&&(V.current=E),T&&E){if(R.current)return R.current(T,E,K);K()}},[T,E,K,R,W]);const Y=D.useMemo(()=>({reference:F,floating:V,setReference:S,setFloating:$}),[S,$]),Z=D.useMemo(()=>({reference:T,floating:E}),[T,E]),ne=D.useMemo(()=>{const J={position:n,left:0,top:0};if(!Z.floating)return J;const re=R$(Z.floating,u.x),se=R$(Z.floating,u.y);return a?{...J,transform:"translate("+re+"px, "+se+"px)",...y9(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:se}},[n,a,Z.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:K,refs:Y,elements:Z,floatingStyles:ne}),[u,K,Y,Z,ne])}const Yee=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?E$({element:r.current,padding:s}).fn(n):{}:r?E$({element:r,padding:s}).fn(n):{}}}},Zee=(t,e)=>({...Uee(t),options:[t,e]}),Qee=(t,e)=>({...Gee(t),options:[t,e]}),Jee=(t,e)=>({...qee(t),options:[t,e]}),ete=(t,e)=>({...Hee(t),options:[t,e]}),tte=(t,e)=>({...Yee(t),options:[t,e]});function b9(t){return D.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const x9={...Cb},nte=x9.useInsertionEffect,rte=nte||(t=>t());function Xs(t){const e=D.useRef(()=>{});return rte(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const G5="ArrowUp",_m="ArrowDown",wf="ArrowLeft",Gf="ArrowRight";function Ay(t,e,n){return Math.floor(t/e)!==n}function j0(t,e){return e<0||e>=t.current.length}function A4(t,e){return co(t,{disabledIndices:e})}function A$(t,e){return co(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function co(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:s,amount:o=1}=e===void 0?{}:e;const i=t.current;let a=n;do a+=r?-o:o;while(a>=0&&a<=i.length-1&&lb(i,a,s));return a}function ste(t,e){let{event:n,orientation:r,loop:s,cols:o,disabledIndices:i,minIndex:a,maxIndex:l,prevIndex:c,stopEvent:u=!1}=e,h=c;if(n.key===G5){if(u&&qs(n),c===-1)h=l;else if(h=co(t,{startingIndex:h,amount:o,decrement:!0,disabledIndices:i}),s&&(c-o<a||h<0)){const p=c%o,m=l%o,g=l-(m-p);m===p?h=l:h=m>p?g:g-o}j0(t,h)&&(h=c)}if(n.key===_m&&(u&&qs(n),c===-1?h=a:(h=co(t,{startingIndex:c,amount:o,disabledIndices:i}),s&&c+o>l&&(h=co(t,{startingIndex:c%o-o,amount:o,disabledIndices:i}))),j0(t,h)&&(h=c)),r==="both"){const p=Kh(c/o);n.key===Gf&&(u&&qs(n),c%o!==o-1?(h=co(t,{startingIndex:c,disabledIndices:i}),s&&Ay(h,o,p)&&(h=co(t,{startingIndex:c-c%o-1,disabledIndices:i}))):s&&(h=co(t,{startingIndex:c-c%o-1,disabledIndices:i})),Ay(h,o,p)&&(h=c)),n.key===wf&&(u&&qs(n),c%o!==0?(h=co(t,{startingIndex:c,decrement:!0,disabledIndices:i}),s&&Ay(h,o,p)&&(h=co(t,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:i}))):s&&(h=co(t,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:i})),Ay(h,o,p)&&(h=c));const m=Kh(l/o)===p;j0(t,h)&&(s&&m?h=n.key===wf?l:co(t,{startingIndex:c-c%o-1,disabledIndices:i}):h=c)}return h}function ote(t,e,n){const r=[];let s=0;return t.forEach((o,i)=>{let{width:a,height:l}=o,c=!1;for(n&&(s=0);!c;){const u=[];for(let h=0;h<a;h++)for(let p=0;p<l;p++)u.push(s+h+p*e);s%e+a<=e&&u.every(h=>r[h]==null)?(u.forEach(h=>{r[h]=i}),c=!0):s++}}),[...r]}function ite(t,e,n,r,s){if(t===-1)return-1;const o=n.indexOf(t),i=e[t];switch(s){case"tl":return o;case"tr":return i?o+i.width-1:o;case"bl":return i?o+(i.height-1)*r:o;case"br":return n.lastIndexOf(t)}}function ate(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function lb(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}let D$=0;function Wc(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(D$);const o=()=>t==null?void 0:t.focus({preventScroll:n});s?o():D$=requestAnimationFrame(o)}var Kn=typeof document<"u"?D.useLayoutEffect:D.useEffect;function lte(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function cte(t,e){if(t.size!==e.size)return!1;for(const[n,r]of t.entries())if(r!==e.get(n))return!1;return!0}const v9=D.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function ute(t){const{children:e,elementsRef:n,labelsRef:r}=t,[s,o]=D.useState(()=>new Map),i=D.useCallback(l=>{o(c=>new Map(c).set(l,null))},[]),a=D.useCallback(l=>{o(c=>{const u=new Map(c);return u.delete(l),u})},[]);return Kn(()=>{const l=new Map(s);Array.from(l.keys()).sort(lte).forEach((u,h)=>{l.set(u,h)}),cte(s,l)||o(l)},[s]),D.createElement(v9.Provider,{value:D.useMemo(()=>({register:i,unregister:a,map:s,elementsRef:n,labelsRef:r}),[i,a,s,n,r])},e)}function dte(t){t===void 0&&(t={});const{label:e}=t,{register:n,unregister:r,map:s,elementsRef:o,labelsRef:i}=D.useContext(v9),[a,l]=D.useState(null),c=D.useRef(null),u=D.useCallback(h=>{if(c.current=h,a!==null&&(o.current[a]=h,i)){var p;const m=e!==void 0;i.current[a]=m?e:(p=h==null?void 0:h.textContent)!=null?p:null}},[a,o,i,e]);return Kn(()=>{const h=c.current;if(h)return n(h),()=>{r(h)}},[n,r]),Kn(()=>{const h=c.current?s.get(c.current):null;h!=null&&l(h)},[s]),D.useMemo(()=>({ref:u,index:a??-1}),[a,u])}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},am.apply(this,arguments)}let P$=!1,hte=0;const M$=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+hte++;function fte(){const[t,e]=D.useState(()=>P$?M$():void 0);return Kn(()=>{t==null&&e(M$())},[]),D.useEffect(()=>{P$=!0},[]),t}const pte=x9.useId,o2=pte||fte;function mte(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const gte=D.createContext(null),yte=D.createContext(null),i2=()=>{var t;return((t=D.useContext(gte))==null?void 0:t.id)||null},Bm=()=>D.useContext(yte);function ru(t){return"data-floating-ui-"+t}function ci(t){const e=D.useRef(t);return Kn(()=>{e.current=t}),e}const O$=ru("safe-polygon");function D4(t,e,n){return n&&!om(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function bte(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:o,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:h=0,move:p=!0}=e,m=Bm(),g=i2(),x=ci(c),w=ci(l),k=ci(n),S=D.useRef(),$=D.useRef(-1),T=D.useRef(),E=D.useRef(-1),F=D.useRef(!0),V=D.useRef(!1),j=D.useRef(()=>{}),W=D.useCallback(()=>{var Y;const Z=(Y=s.current.openEvent)==null?void 0:Y.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[s]);D.useEffect(()=>{if(!a)return;function Y(Z){let{open:ne}=Z;ne||(clearTimeout($.current),clearTimeout(E.current),F.current=!0)}return o.on("openchange",Y),()=>{o.off("openchange",Y)}},[a,o]),D.useEffect(()=>{if(!a||!x.current||!n)return;function Y(ne){W()&&r(!1,ne,"hover")}const Z=Ds(i.floating).documentElement;return Z.addEventListener("mouseleave",Y),()=>{Z.removeEventListener("mouseleave",Y)}},[i.floating,n,r,a,x,W]);const R=D.useCallback(function(Y,Z,ne){Z===void 0&&(Z=!0),ne===void 0&&(ne="hover");const J=D4(w.current,"close",S.current);J&&!T.current?(clearTimeout($.current),$.current=window.setTimeout(()=>r(!1,Y,ne),J)):Z&&(clearTimeout($.current),r(!1,Y,ne))},[w,r]),O=Xs(()=>{j.current(),T.current=void 0}),U=Xs(()=>{if(V.current){const Y=Ds(i.floating).body;Y.style.pointerEvents="",Y.removeAttribute(O$),V.current=!1}});D.useEffect(()=>{if(!a)return;function Y(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function Z(se){if(clearTimeout($.current),F.current=!1,u&&!om(S.current)||h>0&&!D4(w.current,"open"))return;const q=D4(w.current,"open",S.current);q?$.current=window.setTimeout(()=>{k.current||r(!0,se,"hover")},q):r(!0,se,"hover")}function ne(se){if(Y())return;j.current();const q=Ds(i.floating);if(clearTimeout(E.current),x.current&&s.current.floatingContext){n||clearTimeout($.current),T.current=x.current({...s.current.floatingContext,tree:m,x:se.clientX,y:se.clientY,onClose(){U(),O(),R(se,!0,"safe-polygon")}});const be=T.current;q.addEventListener("mousemove",be),j.current=()=>{q.removeEventListener("mousemove",be)};return}(S.current==="touch"?!qr(i.floating,se.relatedTarget):!0)&&R(se)}function J(se){Y()||s.current.floatingContext&&(x.current==null||x.current({...s.current.floatingContext,tree:m,x:se.clientX,y:se.clientY,onClose(){U(),O(),R(se)}})(se))}if(rr(i.domReference)){var re;const se=i.domReference;return n&&se.addEventListener("mouseleave",J),(re=i.floating)==null||re.addEventListener("mouseleave",J),p&&se.addEventListener("mousemove",Z,{once:!0}),se.addEventListener("mouseenter",Z),se.addEventListener("mouseleave",ne),()=>{var q;n&&se.removeEventListener("mouseleave",J),(q=i.floating)==null||q.removeEventListener("mouseleave",J),p&&se.removeEventListener("mousemove",Z),se.removeEventListener("mouseenter",Z),se.removeEventListener("mouseleave",ne)}}},[i,a,t,u,h,p,R,O,U,r,n,k,m,w,x,s]),Kn(()=>{var Y;if(a&&n&&(Y=x.current)!=null&&Y.__options.blockPointerEvents&&W()){const ne=Ds(i.floating).body;ne.setAttribute(O$,""),ne.style.pointerEvents="none",V.current=!0;const J=i.floating;if(rr(i.domReference)&&J){var Z;const re=i.domReference,se=m==null||(Z=m.nodesRef.current.find(q=>q.id===g))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return se&&(se.style.pointerEvents=""),re.style.pointerEvents="auto",J.style.pointerEvents="auto",()=>{re.style.pointerEvents="",J.style.pointerEvents=""}}}},[a,n,g,i,m,x,W]),Kn(()=>{n||(S.current=void 0,O(),U())},[n,O,U]),D.useEffect(()=>()=>{O(),clearTimeout($.current),clearTimeout(E.current),U()},[a,i.domReference,O,U]);const K=D.useMemo(()=>{function Y(Z){S.current=Z.pointerType}return{onPointerDown:Y,onPointerEnter:Y,onMouseMove(Z){const{nativeEvent:ne}=Z;function J(){!F.current&&!k.current&&r(!0,ne,"hover")}u&&!om(S.current)||n||h===0||(clearTimeout(E.current),S.current==="touch"?J():E.current=window.setTimeout(J,h))}}},[u,r,n,k,h]),G=D.useMemo(()=>({onMouseEnter(){clearTimeout($.current)},onMouseLeave(Y){R(Y.nativeEvent,!1)}}),[R]);return D.useMemo(()=>a?{reference:K,floating:G}:{},[a,K,G])}function xte(t,e){var n;let r=[],s=(n=t.find(o=>o.id===e))==null?void 0:n.parentId;for(;s;){const o=t.find(i=>i.id===s);s=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function yd(t,e){let n=t.filter(s=>{var o;return s.parentId===e&&((o=s.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=t.filter(s=>{var o;return(o=r)==null?void 0:o.some(i=>{var a;return s.parentId===i.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function vte(t,e){let n,r=-1;function s(o,i){i>r&&(n=o,r=i),yd(t,o).forEach(l=>{s(l.id,i+1)})}return s(e,0),t.find(o=>o.id===n)}let Bh=new WeakMap,Dy=new WeakSet,Py={},P4=0;const wte=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,w9=t=>t&&(t.host||w9(t.parentNode)),kte=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=w9(n);return t.contains(r)?r:null}).filter(n=>n!=null);function Cte(t,e,n,r){const s="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,i=kte(e,t),a=new Set,l=new Set(i),c=[];Py[s]||(Py[s]=new WeakMap);const u=Py[s];i.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||[].forEach.call(m.children,g=>{if(fu(g)!=="script")if(a.has(g))p(g);else{const x=o?g.getAttribute(o):null,w=x!==null&&x!=="false",k=(Bh.get(g)||0)+1,S=(u.get(g)||0)+1;Bh.set(g,k),u.set(g,S),c.push(g),k===1&&w&&Dy.add(g),S===1&&g.setAttribute(s,""),!w&&o&&g.setAttribute(o,"true")}})}return P4++,()=>{c.forEach(m=>{const g=(Bh.get(m)||0)-1,x=(u.get(m)||0)-1;Bh.set(m,g),u.set(m,x),g||(!Dy.has(m)&&o&&m.removeAttribute(o),Dy.delete(m)),x||m.removeAttribute(s)}),P4--,P4||(Bh=new WeakMap,Bh=new WeakMap,Dy=new WeakSet,Py={})}}function F$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Ds(t[0]).body;return Cte(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const kf=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function k9(t,e){const n=im(t,kf());e==="prev"&&n.reverse();const r=n.indexOf(ba(Ds(t)));return n.slice(r+1)[0]}function C9(){return k9(document.body,"next")}function S9(){return k9(document.body,"prev")}function W0(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!qr(n,r)}function Ste(t){im(t,kf()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Tte(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function Ite(t,e,n){const r=t.indexOf(e);function s(i){const a=ru("focus-guard");let l=r+(i?1:0),c=t[l];for(;c&&(!c.isConnected||c.hasAttribute(a)||qr(n,c));)i?l++:l--,c=t[l];return c}const o=s(!0);return o||s(!1)}const q5={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let $te;function z$(t){t.key==="Tab"&&(t.target,clearTimeout($te))}const Kb=D.forwardRef(function(e,n){const[r,s]=D.useState();Kn(()=>(_5()&&s("button"),document.addEventListener("keydown",z$),()=>{document.removeEventListener("keydown",z$)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ru("focus-guard")]:"",style:q5};return D.createElement("span",am({},e,o))}),T9=D.createContext(null),L$=ru("portal");function Nte(t){t===void 0&&(t={});const{id:e,root:n}=t,r=o2(),s=I9(),[o,i]=D.useState(null),a=D.useRef(null);return Kn(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{a.current=null})},[o]),Kn(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(L$,""),l.appendChild(c),a.current=c,i(c)},[e,r]),Kn(()=>{if(!r||a.current)return;let l=n||(s==null?void 0:s.portalNode);l&&!rr(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(L$,""),l=c||l,l.appendChild(u),a.current=u,i(u)},[e,n,r,s]),o}function Ete(t){const{children:e,id:n,root:r=null,preserveTabOrder:s=!0}=t,o=Nte({id:n,root:r}),[i,a]=D.useState(null),l=D.useRef(null),c=D.useRef(null),u=D.useRef(null),h=D.useRef(null),p=!!i&&!i.modal&&i.open&&s&&!!(r||o);return D.useEffect(()=>{if(!o||!s||i!=null&&i.modal)return;function m(g){o&&W0(g)&&(g.type==="focusin"?Tte:Ste)(o)}return o.addEventListener("focusin",m,!0),o.addEventListener("focusout",m,!0),()=>{o.removeEventListener("focusin",m,!0),o.removeEventListener("focusout",m,!0)}},[o,s,i==null?void 0:i.modal]),D.createElement(T9.Provider,{value:D.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:h,portalNode:o,setFocusManagerState:a}),[s,o])},p&&o&&D.createElement(Kb,{"data-type":"outside",ref:l,onFocus:m=>{if(W0(m,o)){var g;(g=u.current)==null||g.focus()}else{const x=S9()||(i==null?void 0:i.refs.domReference.current);x==null||x.focus()}}}),p&&o&&D.createElement("span",{"aria-owns":o.id,style:q5}),o&&Zx.createPortal(e,o),p&&o&&D.createElement(Kb,{"data-type":"outside",ref:c,onFocus:m=>{if(W0(m,o)){var g;(g=h.current)==null||g.focus()}else{const x=C9()||(i==null?void 0:i.refs.domReference.current);x==null||x.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,m.nativeEvent))}}}))}const I9=()=>D.useContext(T9),_$=20;let rd=[];function M4(t){rd=rd.filter(n=>n.isConnected);let e=t;if(!(!e||fu(e)==="body")){if(!vee(e,kf())){const n=im(e,kf())[0];n&&(e=n)}rd.push(e),rd.length>_$&&(rd=rd.slice(-_$))}}function B$(){return rd.slice().reverse().find(t=>t.isConnected)}const Rte=D.forwardRef(function(e,n){return D.createElement("button",am({},e,{type:"button",ref:n,tabIndex:-1,style:q5}))});function $9(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:o=!0,initialFocus:i=0,returnFocus:a=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:h=!0}=t,{open:p,refs:m,nodeId:g,onOpenChange:x,events:w,dataRef:k,floatingId:S,elements:{domReference:$,floating:T}}=e,E=typeof i=="number"&&i<0,F=r9($)&&E,V=wte()?o:!0,j=ci(s),W=ci(i),R=ci(a),O=Bm(),U=I9(),K=D.useRef(null),G=D.useRef(null),Y=D.useRef(!1),Z=D.useRef(!1),ne=D.useRef(-1),J=U!=null,re=T==null?void 0:T.firstElementChild,se=(re==null?void 0:re.id)===S?re:T,q=Xs(function(de){return de===void 0&&(de=se),de?im(de,kf()):[]}),le=Xs(de=>{const we=q(de);return j.current.map(Ne=>$&&Ne==="reference"?$:se&&Ne==="floating"?se:we).filter(Boolean).flat()});D.useEffect(()=>{if(r||!c)return;function de(Ne){if(Ne.key==="Tab"){qr(se,ba(Ds(se)))&&q().length===0&&!F&&qs(Ne);const Te=le(),Ee=Gl(Ne);j.current[0]==="reference"&&Ee===$&&(qs(Ne),Ne.shiftKey?Wc(Te[Te.length-1]):Wc(Te[1])),j.current[1]==="floating"&&Ee===se&&Ne.shiftKey&&(qs(Ne),Wc(Te[0]))}}const we=Ds(se);return we.addEventListener("keydown",de),()=>{we.removeEventListener("keydown",de)}},[r,$,se,c,j,F,q,le]),D.useEffect(()=>{if(r||!T)return;function de(we){const Ne=Gl(we),Ee=q().indexOf(Ne);Ee!==-1&&(ne.current=Ee)}return T.addEventListener("focusin",de),()=>{T.removeEventListener("focusin",de)}},[r,T,q]),D.useEffect(()=>{if(r||!h)return;function de(){Z.current=!0,setTimeout(()=>{Z.current=!1})}function we(Ne){const Te=Ne.relatedTarget;queueMicrotask(()=>{const Ee=!(qr($,Te)||qr(T,Te)||qr(Te,T)||qr(U==null?void 0:U.portalNode,Te)||Te!=null&&Te.hasAttribute(ru("focus-guard"))||O&&(yd(O.nodesRef.current,g).find(We=>{var Xe,Ge;return qr((Xe=We.context)==null?void 0:Xe.elements.floating,Te)||qr((Ge=We.context)==null?void 0:Ge.elements.domReference,Te)})||xte(O.nodesRef.current,g).find(We=>{var Xe,Ge;return((Xe=We.context)==null?void 0:Xe.elements.floating)===Te||((Ge=We.context)==null?void 0:Ge.elements.domReference)===Te})));if(l&&Ee&&ba(Ds(se))===Ds(se).body){Kr(se)&&(se==null||se.focus());const We=ne.current,Xe=q(),Ge=Xe[We]||Xe[Xe.length-1]||se;Kr(Ge)&&Ge.focus()}(F||!c)&&Te&&Ee&&!Z.current&&Te!==B$()&&(Y.current=!0,x(!1,Ne))})}if(T&&Kr($))return $.addEventListener("focusout",we),$.addEventListener("pointerdown",de),T.addEventListener("focusout",we),()=>{$.removeEventListener("focusout",we),$.removeEventListener("pointerdown",de),T.removeEventListener("focusout",we)}},[r,$,T,se,c,g,O,U,x,h,l,q,F]),D.useEffect(()=>{var de;if(r)return;const we=Array.from((U==null||(de=U.portalNode)==null?void 0:de.querySelectorAll("["+ru("portal")+"]"))||[]);if(T){const Ne=[T,...we,K.current,G.current,j.current.includes("reference")||F?$:null].filter(Ee=>Ee!=null),Te=c||F?F$(Ne,V,!V):F$(Ne);return()=>{Te()}}},[r,$,T,c,j,U,F,V]),Kn(()=>{if(r||!Kr(se))return;const de=Ds(se),we=ba(de);queueMicrotask(()=>{const Ne=le(se),Te=W.current,Ee=(typeof Te=="number"?Ne[Te]:Te.current)||se,We=qr(se,we);!E&&!We&&p&&Wc(Ee,{preventScroll:Ee===se})})},[r,p,se,E,le,W]),Kn(()=>{if(r||!se)return;let de=!1;const we=Ds(se),Ne=ba(we);let Ee=k.current.openEvent;const We=m.domReference.current;M4(Ne);function Xe(Ge){let{open:mt,reason:ft,event:ct,nested:Ze}=Ge;mt&&(Ee=ct),ft==="escape-key"&&m.domReference.current&&M4(m.domReference.current),ft==="hover"&&ct.type==="mouseleave"&&(Y.current=!0),ft==="outside-press"&&(Ze?(Y.current=!1,de=!0):Y.current=!(t9(ct)||L5(ct)))}return w.on("openchange",Xe),()=>{w.off("openchange",Xe);const Ge=ba(we),mt=qr(T,Ge)||O&&yd(O.nodesRef.current,g).some(rt=>{var Ke;return qr((Ke=rt.context)==null?void 0:Ke.elements.floating,Ge)});(mt||Ee&&["click","mousedown"].includes(Ee.type))&&m.domReference.current&&M4(m.domReference.current);const ct=We||Ne,Ze=im(Ds(ct).body,kf());queueMicrotask(()=>{let rt=B$();!rt&&Kr(ct)&&T&&(rt=Ite(Ze,ct,T)),R.current&&!Y.current&&Kr(rt)&&(!(rt!==Ge&&Ge!==we.body)||mt)&&rt.focus({preventScroll:de})})}},[r,T,se,R,k,m,w,O,g]),Kn(()=>{if(!r&&U)return U.setFocusManagerState({modal:c,closeOnFocusOut:h,open:p,onOpenChange:x,refs:m}),()=>{U.setFocusManagerState(null)}},[r,U,c,p,x,m,h]),Kn(()=>{if(r||!se||typeof MutationObserver!="function"||E)return;const de=()=>{const Ne=se.getAttribute("tabindex"),Te=q(),Ee=ba(Ds(T)),We=Te.indexOf(Ee);We!==-1&&(ne.current=We),j.current.includes("floating")||Ee!==m.domReference.current&&Te.length===0?Ne!=="0"&&se.setAttribute("tabindex","0"):Ne!=="-1"&&se.setAttribute("tabindex","-1")};de();const we=new MutationObserver(de);return we.observe(se,{childList:!0,subtree:!0,attributes:!0}),()=>{we.disconnect()}},[r,T,se,m,j,q,E]);function be(de){return r||!u||!c?null:D.createElement(Rte,{ref:de==="start"?K:G,onClick:we=>x(!1,we.nativeEvent)},typeof u=="string"?u:"Dismiss")}const pe=!r&&V&&(c?!F:!0)&&(J||c);return D.createElement(D.Fragment,null,pe&&D.createElement(Kb,{"data-type":"inside",ref:U==null?void 0:U.beforeInsideRef,onFocus:de=>{if(c){const Ne=le();Wc(s[0]==="reference"?Ne[0]:Ne[Ne.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(Y.current=!1,W0(de,U.portalNode)){const Ne=C9()||$;Ne==null||Ne.focus()}else{var we;(we=U.beforeOutsideRef.current)==null||we.focus()}}}),!F&&be("start"),n,be("end"),pe&&D.createElement(Kb,{"data-type":"inside",ref:U==null?void 0:U.afterInsideRef,onFocus:de=>{if(c)Wc(le()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(h&&(Y.current=!0),W0(de,U.portalNode)){const Ne=S9()||$;Ne==null||Ne.focus()}else{var we;(we=U.afterOutsideRef.current)==null||we.focus()}}}))}const O4=new Set,Ate=D.forwardRef(function(e,n){const{lockScroll:r=!1,...s}=e,o=o2();return Kn(()=>{if(!r)return;O4.add(o);const i=/iP(hone|ad|od)|iOS/.test(z5()),a=document.body.style,c=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",u=window.innerWidth-document.documentElement.clientWidth,h=a.left?parseFloat(a.left):window.scrollX,p=a.top?parseFloat(a.top):window.scrollY;if(a.overflow="hidden",u&&(a[c]=u+"px"),i){var m,g;const x=((m=window.visualViewport)==null?void 0:m.offsetLeft)||0,w=((g=window.visualViewport)==null?void 0:g.offsetTop)||0;Object.assign(a,{position:"fixed",top:-(p-Math.floor(w))+"px",left:-(h-Math.floor(x))+"px",right:"0"})}return()=>{O4.delete(o),O4.size===0&&(Object.assign(a,{overflow:"",[c]:""}),i&&(Object.assign(a,{position:"",top:"",left:"",right:""}),window.scrollTo(h,p)))}},[o,r]),D.createElement("div",am({ref:n},s,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...s.style}}))});function V$(t){return Kr(t.target)&&t.target.tagName==="BUTTON"}function j$(t){return B5(t)}function N9(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:o}}=t,{enabled:i=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=e,h=D.useRef(),p=D.useRef(!1),m=D.useMemo(()=>({onPointerDown(g){h.current=g.pointerType},onMouseDown(g){const x=h.current;g.button===0&&a!=="click"&&(om(x,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,g.nativeEvent,"click"):(g.preventDefault(),r(!0,g.nativeEvent,"click"))))},onClick(g){const x=h.current;if(a==="mousedown"&&h.current){h.current=void 0;return}om(x,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,g.nativeEvent,"click"):r(!0,g.nativeEvent,"click"))},onKeyDown(g){h.current=void 0,!(g.defaultPrevented||!u||V$(g))&&(g.key===" "&&!j$(o)&&(g.preventDefault(),p.current=!0),g.key==="Enter"&&r(!(n&&l),g.nativeEvent,"click"))},onKeyUp(g){g.defaultPrevented||!u||V$(g)||j$(o)||g.key===" "&&p.current&&(p.current=!1,r(!(n&&l),g.nativeEvent,"click"))}}),[s,o,a,c,u,r,n,l]);return D.useMemo(()=>i?{reference:m}:{},[i,m])}const Dte={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Pte={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},W$=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function E9(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:s,dataRef:o}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=e,x=Bm(),w=Xs(typeof l=="function"?l:()=>!1),k=typeof l=="function"?w:l,S=D.useRef(!1),$=D.useRef(!1),{escapeKey:T,outsidePress:E}=W$(m),{escapeKey:F,outsidePress:V}=W$(g),j=Xs(G=>{var Y;if(!n||!i||!a||G.key!=="Escape")return;const Z=(Y=o.current.floatingContext)==null?void 0:Y.nodeId,ne=x?yd(x.nodesRef.current,Z):[];if(!T&&(G.stopPropagation(),ne.length>0)){let J=!0;if(ne.forEach(re=>{var se;if((se=re.context)!=null&&se.open&&!re.context.dataRef.current.__escapeKeyBubbles){J=!1;return}}),!J)return}r(!1,GJ(G)?G.nativeEvent:G,"escape-key")}),W=Xs(G=>{var Y;const Z=()=>{var ne;j(G),(ne=Gl(G))==null||ne.removeEventListener("keydown",Z)};(Y=Gl(G))==null||Y.addEventListener("keydown",Z)}),R=Xs(G=>{var Y;const Z=S.current;S.current=!1;const ne=$.current;if($.current=!1,c==="click"&&ne||Z||typeof k=="function"&&!k(G))return;const J=Gl(G),re="["+ru("inert")+"]",se=Ds(s.floating).querySelectorAll(re);let q=rr(J)?J:null;for(;q&&!nu(q);){const de=sc(q);if(nu(de)||!rr(de))break;q=de}if(se.length&&rr(J)&&!qJ(J)&&!qr(J,s.floating)&&Array.from(se).every(de=>!qr(q,de)))return;if(Kr(J)&&K){const de=J.clientWidth>0&&J.scrollWidth>J.clientWidth,we=J.clientHeight>0&&J.scrollHeight>J.clientHeight;let Ne=we&&G.offsetX>J.clientWidth;if(we&&Ki(J).direction==="rtl"&&(Ne=G.offsetX<=J.offsetWidth-J.clientWidth),Ne||de&&G.offsetY>J.clientHeight)return}const le=(Y=o.current.floatingContext)==null?void 0:Y.nodeId,be=x&&yd(x.nodesRef.current,le).some(de=>{var we;return N4(G,(we=de.context)==null?void 0:we.elements.floating)});if(N4(G,s.floating)||N4(G,s.domReference)||be)return;const pe=x?yd(x.nodesRef.current,le):[];if(pe.length>0){let de=!0;if(pe.forEach(we=>{var Ne;if((Ne=we.context)!=null&&Ne.open&&!we.context.dataRef.current.__outsidePressBubbles){de=!1;return}}),!de)return}r(!1,G,"outside-press")}),O=Xs(G=>{var Y;const Z=()=>{var ne;R(G),(ne=Gl(G))==null||ne.removeEventListener(c,Z)};(Y=Gl(G))==null||Y.addEventListener(c,Z)});D.useEffect(()=>{if(!n||!i)return;o.current.__escapeKeyBubbles=T,o.current.__outsidePressBubbles=E;function G(ne){r(!1,ne,"ancestor-scroll")}const Y=Ds(s.floating);a&&Y.addEventListener("keydown",F?W:j,F),k&&Y.addEventListener(c,V?O:R,V);let Z=[];return p&&(rr(s.domReference)&&(Z=Xc(s.domReference)),rr(s.floating)&&(Z=Z.concat(Xc(s.floating))),!rr(s.reference)&&s.reference&&s.reference.contextElement&&(Z=Z.concat(Xc(s.reference.contextElement)))),Z=Z.filter(ne=>{var J;return ne!==((J=Y.defaultView)==null?void 0:J.visualViewport)}),Z.forEach(ne=>{ne.addEventListener("scroll",G,{passive:!0})}),()=>{a&&Y.removeEventListener("keydown",F?W:j,F),k&&Y.removeEventListener(c,V?O:R,V),Z.forEach(ne=>{ne.removeEventListener("scroll",G)})}},[o,s,a,k,c,n,r,p,i,T,E,j,F,W,R,V,O]),D.useEffect(()=>{S.current=!1},[k,c]);const U=D.useMemo(()=>({onKeyDown:j,[Dte[h]]:G=>{u&&r(!1,G.nativeEvent,"reference-press")}}),[j,r,u,h]),K=D.useMemo(()=>({onKeyDown:j,onMouseDown(){$.current=!0},onMouseUp(){$.current=!0},[Pte[c]]:()=>{S.current=!0}}),[j,c]);return D.useMemo(()=>i?{reference:U,floating:K}:{},[i,U,K])}function Mte(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=o2(),o=D.useRef({}),[i]=D.useState(()=>mte()),a=i2()!=null,[l,c]=D.useState(r.reference),u=Xs((m,g,x)=>{o.current.openEvent=m?g:void 0,i.emit("openchange",{open:m,event:g,reason:x,nested:a}),n==null||n(m,g,x)}),h=D.useMemo(()=>({setPositionReference:c}),[]),p=D.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return D.useMemo(()=>({dataRef:o,open:e,onOpenChange:u,elements:p,events:i,floatingId:s,refs:h}),[e,u,p,i,s,h])}function R9(t){t===void 0&&(t={});const{nodeId:e}=t,n=Mte({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[o,i]=D.useState(null),[a,l]=D.useState(null),u=(s==null?void 0:s.reference)||o,h=D.useRef(null),p=Bm();Kn(()=>{u&&(h.current=u)},[u]);const m=Xee({...t,elements:{...s,...a&&{reference:a}}}),g=D.useCallback($=>{const T=rr($)?{getBoundingClientRect:()=>$.getBoundingClientRect(),contextElement:$}:$;l(T),m.refs.setReference(T)},[m.refs]),x=D.useCallback($=>{(rr($)||$===null)&&(h.current=$,i($)),(rr(m.refs.reference.current)||m.refs.reference.current===null||$!==null&&!rr($))&&m.refs.setReference($)},[m.refs]),w=D.useMemo(()=>({...m.refs,setReference:x,setPositionReference:g,domReference:h}),[m.refs,x,g]),k=D.useMemo(()=>({...m.elements,domReference:u}),[m.elements,u]),S=D.useMemo(()=>({...m,...r,refs:w,elements:k,nodeId:e}),[m,w,k,e,r]);return Kn(()=>{r.dataRef.current.floatingContext=S;const $=p==null?void 0:p.nodesRef.current.find(T=>T.id===e);$&&($.context=S)}),D.useMemo(()=>({...m,context:S,refs:w,elements:k}),[m,w,k,S])}function Ote(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,dataRef:o,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=D.useRef(!1),u=D.useRef(),h=D.useRef(!0);D.useEffect(()=>{if(!a)return;const m=Ho(i.domReference);function g(){!n&&Kr(i.domReference)&&i.domReference===ba(Ds(i.domReference))&&(c.current=!0)}function x(){h.current=!0}return m.addEventListener("blur",g),m.addEventListener("keydown",x,!0),()=>{m.removeEventListener("blur",g),m.removeEventListener("keydown",x,!0)}},[i.domReference,n,a]),D.useEffect(()=>{if(!a)return;function m(g){let{reason:x}=g;(x==="reference-press"||x==="escape-key")&&(c.current=!0)}return s.on("openchange",m),()=>{s.off("openchange",m)}},[s,a]),D.useEffect(()=>()=>{clearTimeout(u.current)},[]);const p=D.useMemo(()=>({onPointerDown(m){L5(m.nativeEvent)||(h.current=!1)},onMouseLeave(){c.current=!1},onFocus(m){if(c.current)return;const g=Gl(m.nativeEvent);if(l&&rr(g))try{if(_5()&&n9())throw Error();if(!g.matches(":focus-visible"))return}catch{if(!h.current&&!B5(g))return}r(!0,m.nativeEvent,"focus")},onBlur(m){c.current=!1;const g=m.relatedTarget,x=m.nativeEvent,w=rr(g)&&g.hasAttribute(ru("focus-guard"))&&g.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var k;const S=ba(i.domReference?i.domReference.ownerDocument:document);!g&&S===i.domReference||qr((k=o.current.floatingContext)==null?void 0:k.refs.floating.current,S)||qr(i.domReference,S)||w||r(!1,x,"focus")})}}),[o,i.domReference,r,l]);return D.useMemo(()=>a?{reference:p}:{},[a,p])}const U$="active",H$="selected";function F4(t,e,n){const r=new Map,s=n==="item";let o=t;if(s&&t){const{[U$]:i,[H$]:a,...l}=t;o=l}return{...n==="floating"&&{tabIndex:-1},...o,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(s&&[U$,H$].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var h;(h=r.get(c))==null||h.push(u),i[c]=function(){for(var p,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return(p=r.get(c))==null?void 0:p.map(w=>w(...g)).find(w=>w!==void 0)}}}else i[c]=u}),i),{})}}function A9(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),s=D.useCallback(a=>F4(a,t,"reference"),e),o=D.useCallback(a=>F4(a,t,"floating"),n),i=D.useCallback(a=>F4(a,t,"item"),r);return D.useMemo(()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:i}),[s,o,i])}let G$=!1;function a2(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function q$(t,e){return a2(e,t===G5||t===_m,t===wf||t===Gf)}function z4(t,e,n){return a2(e,t===_m,n?t===wf:t===Gf)||t==="Enter"||t===" "||t===""}function Fte(t,e,n){return a2(e,n?t===wf:t===Gf,t===_m)}function K$(t,e,n){return a2(e,n?t===Gf:t===wf,t===G5)}function zte(t,e){const{open:n,onOpenChange:r,elements:s}=t,{listRef:o,activeIndex:i,onNavigate:a=()=>{},enabled:l=!0,selectedIndex:c=null,allowEscape:u=!1,loop:h=!1,nested:p=!1,rtl:m=!1,virtual:g=!1,focusItemOnOpen:x="auto",focusItemOnHover:w=!0,openOnArrowKeyDown:k=!0,disabledIndices:S=void 0,orientation:$="vertical",cols:T=1,scrollItemIntoView:E=!0,virtualItemRef:F,itemSizes:V,dense:j=!1}=e,W=i2(),R=Bm(),O=Xs(a),U=D.useRef(x),K=D.useRef(c??-1),G=D.useRef(null),Y=D.useRef(!0),Z=D.useRef(O),ne=D.useRef(!!s.floating),J=D.useRef(n),re=D.useRef(!1),se=D.useRef(!1),q=ci(S),le=ci(n),be=ci(E),pe=ci(s.floating),de=ci(c),[we,Ne]=D.useState(),[Te,Ee]=D.useState(),We=Xs(function(rt,Ke,at){at===void 0&&(at=!1);function ut(Qe){g?(Ne(Qe.id),R==null||R.events.emit("virtualfocus",Qe),F&&(F.current=Qe)):Wc(Qe,{preventScroll:!0,sync:n9()&&_5()?G$||re.current:!1})}const kt=rt.current[Ke.current];kt&&ut(kt),requestAnimationFrame(()=>{const Qe=rt.current[Ke.current]||kt;if(!Qe)return;kt||ut(Qe);const qt=be.current;qt&&Ge&&(at||!Y.current)&&(Qe.scrollIntoView==null||Qe.scrollIntoView(typeof qt=="boolean"?{block:"nearest",inline:"nearest"}:qt))})});Kn(()=>{document.createElement("div").focus({get preventScroll(){return G$=!0,!1}})},[]),Kn(()=>{l&&(n&&s.floating?U.current&&c!=null&&(se.current=!0,K.current=c,O(c)):ne.current&&(K.current=-1,Z.current(null)))},[l,n,s.floating,c,O]),Kn(()=>{if(l&&n&&s.floating)if(i==null){if(re.current=!1,de.current!=null)return;if(ne.current&&(K.current=-1,We(o,K)),(!J.current||!ne.current)&&U.current&&(G.current!=null||U.current===!0&&G.current==null)){let rt=0;const Ke=()=>{o.current[0]==null?(rt<2&&(rt?requestAnimationFrame:queueMicrotask)(Ke),rt++):(K.current=G.current==null||z4(G.current,$,m)||p?A4(o,q.current):A$(o,q.current),G.current=null,O(K.current))};Ke()}}else j0(o,i)||(K.current=i,We(o,K,se.current),se.current=!1)},[l,n,s.floating,i,de,p,o,$,m,O,We,q]),Kn(()=>{var rt;if(!l||s.floating||!R||g||!ne.current)return;const Ke=R.nodesRef.current,at=(rt=Ke.find(Qe=>Qe.id===W))==null||(rt=rt.context)==null?void 0:rt.elements.floating,ut=ba(Ds(s.floating)),kt=Ke.some(Qe=>Qe.context&&qr(Qe.context.elements.floating,ut));at&&!kt&&Y.current&&at.focus({preventScroll:!0})},[l,s.floating,R,W,g]),Kn(()=>{if(!l||!R||!g||W)return;function rt(Ke){Ee(Ke.id),F&&(F.current=Ke)}return R.events.on("virtualfocus",rt),()=>{R.events.off("virtualfocus",rt)}},[l,R,g,W,F]),Kn(()=>{Z.current=O,ne.current=!!s.floating}),Kn(()=>{n||(G.current=null)},[n]),Kn(()=>{J.current=n},[n]);const Xe=i!=null,Ge=D.useMemo(()=>{function rt(at){if(!n)return;const ut=o.current.indexOf(at);ut!==-1&&O(ut)}return{onFocus(at){let{currentTarget:ut}=at;rt(ut)},onClick:at=>{let{currentTarget:ut}=at;return ut.focus({preventScroll:!0})},...w&&{onMouseMove(at){let{currentTarget:ut}=at;rt(ut)},onPointerLeave(at){let{pointerType:ut}=at;!Y.current||ut==="touch"||(K.current=-1,We(o,K),O(null),g||Wc(pe.current,{preventScroll:!0}))}}}},[n,pe,We,w,o,O,g]),mt=Xs(rt=>{if(Y.current=!1,re.current=!0,!le.current&&rt.currentTarget===pe.current)return;if(p&&K$(rt.key,$,m)){qs(rt),r(!1,rt.nativeEvent,"list-navigation"),Kr(s.domReference)&&!g&&s.domReference.focus();return}const Ke=K.current,at=A4(o,S),ut=A$(o,S);if(rt.key==="Home"&&(qs(rt),K.current=at,O(K.current)),rt.key==="End"&&(qs(rt),K.current=ut,O(K.current)),T>1){const kt=V||Array.from({length:o.current.length},()=>({width:1,height:1})),Qe=ote(kt,T,j),qt=Qe.findIndex(en=>en!=null&&!lb(o.current,en,S)),Wt=Qe.reduce((en,yn,mn)=>yn!=null&&!lb(o.current,yn,S)?mn:en,-1);if(K.current=Qe[ste({current:Qe.map(en=>en!=null?o.current[en]:null)},{event:rt,orientation:$,loop:h,cols:T,disabledIndices:ate([...S||o.current.map((en,yn)=>lb(o.current,yn)?yn:void 0),void 0],Qe),minIndex:qt,maxIndex:Wt,prevIndex:ite(K.current>ut?at:K.current,kt,Qe,T,rt.key===_m?"bl":rt.key===Gf?"tr":"tl"),stopEvent:!0})],O(K.current),$==="both")return}if(q$(rt.key,$)){if(qs(rt),n&&!g&&ba(rt.currentTarget.ownerDocument)===rt.currentTarget){K.current=z4(rt.key,$,m)?at:ut,O(K.current);return}z4(rt.key,$,m)?h?K.current=Ke>=ut?u&&Ke!==o.current.length?-1:at:co(o,{startingIndex:Ke,disabledIndices:S}):K.current=Math.min(ut,co(o,{startingIndex:Ke,disabledIndices:S})):h?K.current=Ke<=at?u&&Ke!==-1?o.current.length:ut:co(o,{startingIndex:Ke,decrement:!0,disabledIndices:S}):K.current=Math.max(at,co(o,{startingIndex:Ke,decrement:!0,disabledIndices:S})),j0(o,K.current)?O(null):O(K.current)}}),ft=D.useMemo(()=>g&&n&&Xe&&{"aria-activedescendant":Te||we},[g,n,Xe,Te,we]),ct=D.useMemo(()=>({"aria-orientation":$==="both"?void 0:$,...!r9(s.domReference)&&ft,onKeyDown:mt,onPointerMove(){Y.current=!0}}),[ft,mt,s.domReference,$]),Ze=D.useMemo(()=>{function rt(at){x==="auto"&&t9(at.nativeEvent)&&(U.current=!0)}function Ke(at){U.current=x,x==="auto"&&L5(at.nativeEvent)&&(U.current=!0)}return{...ft,onKeyDown(at){Y.current=!1;const ut=at.key.indexOf("Arrow")===0,kt=Fte(at.key,$,m),Qe=K$(at.key,$,m),qt=q$(at.key,$),Wt=(p?kt:qt)||at.key==="Enter"||at.key.trim()==="";if(g&&n){const Kt=R==null?void 0:R.nodesRef.current.find(bn=>bn.parentId==null),At=R&&Kt?vte(R.nodesRef.current,Kt.id):null;if(ut&&At&&F){const bn=new KeyboardEvent("keydown",{key:at.key,bubbles:!0});if(kt||Qe){var en,yn;const Gt=((en=At.context)==null?void 0:en.elements.domReference)===at.currentTarget,Er=Qe&&!Gt?(yn=At.context)==null?void 0:yn.elements.domReference:kt?o.current.find(yr=>(yr==null?void 0:yr.id)===we):null;Er&&(qs(at),Er.dispatchEvent(bn),Ee(void 0))}if(qt&&At.context&&At.context.open&&At.parentId&&at.currentTarget!==At.context.elements.domReference){var mn;qs(at),(mn=At.context.elements.domReference)==null||mn.dispatchEvent(bn);return}}return mt(at)}if(!(!n&&!k&&ut)){if(Wt&&(G.current=p&&qt?null:at.key),p){kt&&(qs(at),n?(K.current=A4(o,q.current),O(K.current)):r(!0,at.nativeEvent,"list-navigation"));return}qt&&(c!=null&&(K.current=c),qs(at),!n&&k?r(!0,at.nativeEvent,"list-navigation"):mt(at),n&&O(K.current))}},onFocus(){n&&!g&&O(null)},onPointerDown:Ke,onMouseDown:rt,onClick:rt}},[we,ft,mt,q,x,o,p,O,r,n,k,$,m,c,R,g,F]);return D.useMemo(()=>l?{reference:Ze,floating:ct,item:Ge}:{},[l,Ze,ct,Ge])}const Lte=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function D9(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:s}=t,{enabled:o=!0,role:i="dialog"}=e,a=(n=Lte.get(i))!=null?n:i,l=o2(),u=i2()!=null,h=D.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?s:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,s,u,r,l,i]),p=D.useMemo(()=>{const g={id:s,...a&&{role:a}};return a==="tooltip"||i==="label"?g:{...g,...a==="menu"&&{"aria-labelledby":l}}},[a,s,l,i]),m=D.useCallback(g=>{let{active:x,selected:w}=g;const k={role:"option",...x&&{id:s+"-option"}};switch(i){case"select":return{...k,"aria-selected":x&&w};case"combobox":return{...k,...x&&{"aria-selected":!0}}}return{}},[s,i]);return D.useMemo(()=>o?{reference:h,floating:p,item:m}:{},[o,h,p,m])}function _te(t,e){var n;const{open:r,dataRef:s}=t,{listRef:o,activeIndex:i,onMatch:a,onTypingChange:l,enabled:c=!0,findMatch:u=null,resetMs:h=750,ignoreKeys:p=[],selectedIndex:m=null}=e,g=D.useRef(),x=D.useRef(""),w=D.useRef((n=m??i)!=null?n:-1),k=D.useRef(null),S=Xs(a),$=Xs(l),T=ci(u),E=ci(p);Kn(()=>{r&&(clearTimeout(g.current),k.current=null,x.current="")},[r]),Kn(()=>{if(r&&x.current===""){var R;w.current=(R=m??i)!=null?R:-1}},[r,m,i]);const F=Xs(R=>{R?s.current.typing||(s.current.typing=R,$(R)):s.current.typing&&(s.current.typing=R,$(R))}),V=Xs(R=>{function O(Z,ne,J){const re=T.current?T.current(ne,J):ne.find(se=>(se==null?void 0:se.toLocaleLowerCase().indexOf(J.toLocaleLowerCase()))===0);return re?Z.indexOf(re):-1}const U=o.current;if(x.current.length>0&&x.current[0]!==" "&&(O(U,U,x.current)===-1?F(!1):R.key===" "&&qs(R)),U==null||E.current.includes(R.key)||R.key.length!==1||R.ctrlKey||R.metaKey||R.altKey)return;r&&R.key!==" "&&(qs(R),F(!0)),U.every(Z=>{var ne,J;return Z?((ne=Z[0])==null?void 0:ne.toLocaleLowerCase())!==((J=Z[1])==null?void 0:J.toLocaleLowerCase()):!0})&&x.current===R.key&&(x.current="",w.current=k.current),x.current+=R.key,clearTimeout(g.current),g.current=setTimeout(()=>{x.current="",w.current=k.current,F(!1)},h);const G=w.current,Y=O(U,[...U.slice((G||0)+1),...U.slice(0,(G||0)+1)],x.current);Y!==-1?(S(Y),k.current=Y):R.key!==" "&&(x.current="",F(!1))}),j=D.useMemo(()=>({onKeyDown:V}),[V]),W=D.useMemo(()=>({onKeyDown:V,onKeyUp(R){R.key===" "&&F(!1)}}),[V,F]);return D.useMemo(()=>c?{reference:j,floating:W}:{},[c,j,W])}function X$(t,e){const[n,r]=t;let s=!1;const o=e.length;for(let i=0,a=o-1;i<o;a=i++){const[l,c]=e[i]||[0,0],[u,h]=e[a]||[0,0];c>=r!=h>=r&&n<=(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function Bte(t,e){return t[0]>=e.x&&t[0]<=e.x+e.width&&t[1]>=e.y&&t[1]<=e.y+e.height}function Vte(t){t===void 0&&(t={});const{buffer:e=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=t;let s,o=!1,i=null,a=null,l=performance.now();function c(h,p){const m=performance.now(),g=m-l;if(i===null||a===null||g===0)return i=h,a=p,l=m,null;const x=h-i,w=p-a,S=Math.sqrt(x*x+w*w)/g;return i=h,a=p,l=m,S}const u=h=>{let{x:p,y:m,placement:g,elements:x,onClose:w,nodeId:k,tree:S}=h;return function(T){function E(){clearTimeout(s),w()}if(clearTimeout(s),!x.domReference||!x.floating||g==null||p==null||m==null)return;const{clientX:F,clientY:V}=T,j=[F,V],W=Gl(T),R=T.type==="mouseleave",O=qr(x.floating,W),U=qr(x.domReference,W),K=x.domReference.getBoundingClientRect(),G=x.floating.getBoundingClientRect(),Y=g.split("-")[0],Z=p>G.right-G.width/2,ne=m>G.bottom-G.height/2,J=Bte(j,K),re=G.width>K.width,se=G.height>K.height,q=(re?K:G).left,le=(re?K:G).right,be=(se?K:G).top,pe=(se?K:G).bottom;if(O&&(o=!0,!R))return;if(U&&(o=!1),U&&!R){o=!0;return}if(R&&rr(T.relatedTarget)&&qr(x.floating,T.relatedTarget)||S&&yd(S.nodesRef.current,k).some(Ne=>{let{context:Te}=Ne;return Te==null?void 0:Te.open}))return;if(Y==="top"&&m>=K.bottom-1||Y==="bottom"&&m<=K.top+1||Y==="left"&&p>=K.right-1||Y==="right"&&p<=K.left+1)return E();let de=[];switch(Y){case"top":de=[[q,K.top+1],[q,G.bottom-1],[le,G.bottom-1],[le,K.top+1]];break;case"bottom":de=[[q,G.top+1],[q,K.bottom-1],[le,K.bottom-1],[le,G.top+1]];break;case"left":de=[[G.right-1,pe],[G.right-1,be],[K.left+1,be],[K.left+1,pe]];break;case"right":de=[[K.right-1,pe],[K.right-1,be],[G.left+1,be],[G.left+1,pe]];break}function we(Ne){let[Te,Ee]=Ne;switch(Y){case"top":{const We=[re?Te+e/2:Z?Te+e*4:Te-e*4,Ee+e+1],Xe=[re?Te-e/2:Z?Te+e*4:Te-e*4,Ee+e+1],Ge=[[G.left,Z||re?G.bottom-e:G.top],[G.right,Z?re?G.bottom-e:G.top:G.bottom-e]];return[We,Xe,...Ge]}case"bottom":{const We=[re?Te+e/2:Z?Te+e*4:Te-e*4,Ee-e],Xe=[re?Te-e/2:Z?Te+e*4:Te-e*4,Ee-e],Ge=[[G.left,Z||re?G.top+e:G.bottom],[G.right,Z?re?G.top+e:G.bottom:G.top+e]];return[We,Xe,...Ge]}case"left":{const We=[Te+e+1,se?Ee+e/2:ne?Ee+e*4:Ee-e*4],Xe=[Te+e+1,se?Ee-e/2:ne?Ee+e*4:Ee-e*4];return[...[[ne||se?G.right-e:G.left,G.top],[ne?se?G.right-e:G.left:G.right-e,G.bottom]],We,Xe]}case"right":{const We=[Te-e,se?Ee+e/2:ne?Ee+e*4:Ee-e*4],Xe=[Te-e,se?Ee-e/2:ne?Ee+e*4:Ee-e*4],Ge=[[ne||se?G.left+e:G.right,G.top],[ne?se?G.left+e:G.right:G.left+e,G.bottom]];return[We,Xe,...Ge]}}}if(!X$([F,V],de)){if(o&&!J)return E();if(!R&&r){const Ne=c(T.clientX,T.clientY);if(Ne!==null&&Ne<.1)return E()}X$([F,V],we([p,m]))?!o&&r&&(s=window.setTimeout(E,40)):E()}}};return u.__options={blockPointerEvents:n},u}const jte=({arrowRef:t,placement:e})=>{const n=[];return n.push(Zee(8)),n.push(e==="auto"?ete():Jee()),n.push(Qee({padding:8})),t!=null&&t.current&&n.push(tte({element:t.current})),n},Wte=({placement:t})=>t==="auto"?void 0:t,Ute=({placement:t})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[t.split("-")[0]],P9=({open:t,arrowRef:e,placement:n="top",setOpen:r})=>R9({placement:Wte({placement:n}),open:t,onOpenChange:r,whileElementsMounted:g9,middleware:jte({placement:n,arrowRef:e})}),M9=({context:t,trigger:e,role:n="tooltip",interactions:r=[]})=>A9([N9(t,{enabled:e==="click"}),bte(t,{enabled:e==="hover",handleClose:Vte()}),E9(t),D9(t,{role:n}),...r]),Hte=({animation:t="duration-300",arrow:e=!0,children:n,className:r,content:s,placement:o="top",style:i="dark",theme:a,trigger:l="hover",minWidth:c,...u})=>{const h=D.useRef(null),[p,m]=D.useState(!1),g=P9({open:p,placement:o,arrowRef:h,setOpen:m}),{context:x,middlewareData:{arrow:{x:w,y:k}={}},refs:S,strategy:$,update:T,x:E,y:F}=g,V=Ote(x),{getFloatingProps:j,getReferenceProps:W}=M9({context:x,role:"tooltip",trigger:l,interactions:[V]});return D.useEffect(()=>{if(S.reference.current&&S.floating.current&&p)return g9(S.reference.current,S.floating.current,T)},[p,S.floating,S.reference,T]),z.jsxs(z.Fragment,{children:[z.jsx("div",{ref:S.setReference,className:a.target,"data-testid":"flowbite-tooltip-target",...W(),children:n}),z.jsxs("div",{ref:S.setFloating,"data-testid":"flowbite-tooltip",...j({className:ze(a.base,t&&`${a.animation} ${t}`,!p&&a.hidden,a.style[i],r),style:{position:$,top:F??" ",left:E??" ",minWidth:c},...u}),children:[z.jsx("div",{className:a.content,children:s}),e&&z.jsx("div",{className:ze(a.arrow.base,i==="dark"&&a.arrow.style.dark,i==="light"&&a.arrow.style.light,i==="auto"&&a.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:h,style:{top:k??" ",left:w??" ",right:" ",bottom:" ",[Ute({placement:g.placement})]:a.arrow.placement},children:" "})]})]})},l2=({animation:t="duration-300",arrow:e=!0,children:n,className:r,content:s,placement:o="top",style:i="dark",theme:a={},trigger:l="hover",...c})=>{const u=it(Et().tooltip,a);return z.jsx(Hte,{animation:t,arrow:e,content:s,placement:o,style:i,theme:u,trigger:l,className:r,...c,children:n})};l2.displayName="Tooltip";function O9(t){return Ss({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(t)}function F9(t){return Ss({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z"},child:[]}]})(t)}function Gte(t){return Ss({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 296c0 66.3-53.7 120-120 120h-8c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H320c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72zm-256 0c0 66.3-53.7 120-120 120H64c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72z"},child:[]}]})(t)}const K5=(t,e)=>{var n;e(!0),(n=navigator==null?void 0:navigator.clipboard)==null||n.writeText(t).then(()=>{console.log("Copy Successfull")}).catch(r=>{console.error("Failed to Copy text: ",r),e(!1)}),setTimeout(()=>e(!1),4e3)},z9=D.forwardRef(({valueToCopy:t,icon:e=F9,theme:n={},className:r,...s},o)=>{const[i,a]=D.useState(!1),l=it(Et().clipboard.withIcon,n);return z.jsx("button",{className:ze(l.base,r),onClick:()=>K5(t,a),...s,ref:o,children:i?z.jsx(O9,{"aria-hidden":!0,className:l.icon.successIcon}):z.jsx(e,{"aria-hidden":!0,className:l.icon.defaultIcon})})}),L9=D.forwardRef(({valueToCopy:t,icon:e=F9,label:n="Copy",theme:r={},className:s,...o},i)=>{const[a,l]=D.useState(!1),c=it(Et().clipboard.withIconText,r);return z.jsx("button",{className:ze(c.base,s),onClick:()=>K5(t,l),...o,ref:i,children:a?z.jsxs("span",{className:c.label.base,children:[z.jsx(O9,{"aria-hidden":!0,className:c.icon.successIcon}),z.jsx("span",{className:c.label.successText,children:"Copied"})]}):z.jsxs("span",{className:c.label.base,children:[z.jsx(e,{"aria-hidden":!0,className:c.icon.defaultIcon}),z.jsx("span",{className:c.label.defaultText,children:n})]})})}),_9=D.forwardRef(({className:t,valueToCopy:e,label:n,theme:r={},...s},o)=>{const[i,a]=D.useState(!1),l=it(Et().clipboard.button,r);return z.jsx(l2,{content:i?"Copied":"Copy to clipboard",className:"[&_*]:cursor-pointer",children:z.jsx("button",{className:ze(l.base,t),onClick:()=>K5(e,a),...s,ref:o,children:z.jsx("span",{className:l.label,children:n})})})});_9.displayName="Clipboard";z9.displayName="Clipboard.WithIcon";L9.displayName="Clipboard.WithIconText";Object.assign(_9,{WithIcon:z9,WithIconText:L9});const Vm=({children:t,className:e,color:n="default",theme:r={},value:s,...o})=>{const i=it(Et().helperText,r);return z.jsx("p",{className:ze(i.root.base,i.root.colors[n],e),...o,children:s??t??""})};Vm.displayName="HelperText";const B9=D.forwardRef(({addon:t,className:e,color:n="gray",helperText:r,icon:s,rightIcon:o,shadow:i,sizing:a="md",theme:l={},type:c="text",...u},h)=>{const p=it(Et().textInput,l);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:ze(p.base,e),children:[t&&z.jsx("span",{className:p.addon,children:t}),z.jsxs("div",{className:p.field.base,children:[s&&z.jsx("div",{className:p.field.icon.base,children:z.jsx(s,{className:p.field.icon.svg})}),o&&z.jsx("div",{"data-testid":"right-icon",className:p.field.rightIcon.base,children:z.jsx(o,{className:p.field.rightIcon.svg})}),z.jsx("input",{className:ze(p.field.input.base,p.field.input.colors[n],p.field.input.sizes[a],p.field.input.withIcon[s?"on":"off"],p.field.input.withRightIcon[o?"on":"off"],p.field.input.withAddon[t?"on":"off"],p.field.input.withShadow[i?"on":"off"]),type:c,...u,ref:h})]})]}),r&&z.jsx(Vm,{color:n,children:r})]})});B9.displayName="TextInput";const V9=D.createContext(void 0);function c2(){const t=D.useContext(V9);if(!t)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return t}var wr=(t=>(t[t.Days=0]="Days",t[t.Months=1]="Months",t[t.Years=2]="Years",t[t.Decades=3]="Decades",t))(wr||{}),j9=(t=>(t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday",t))(j9||{});const Cf=(t,e,n)=>{const r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();if(e&&n){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return r>=s&&r<=o}if(e){const s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return r>=s}if(n){const s=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return r<=s}return!0},lm=(t,e)=>(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t.getTime()===e.getTime()),My=(t,e,n)=>(Cf(t,e,n)||(e&&t<e?t=e:n&&t>n&&(t=n)),t),qte=(t,e)=>{const n=new Date(t.getFullYear(),t.getMonth(),1);let s=n.getDay()-e;return s<0&&(s+=7),X5(n,-s)},Kte=(t,e)=>{const n=[],r=new Date(0);r.setDate(r.getDate()-r.getDay()+e);const s=new Intl.DateTimeFormat(t,{weekday:"short"});for(let o=0;o<7;o++)n.push(s.format(X5(r,o)));return n},X5=(t,e)=>{const n=new Date(t);return n.setDate(n.getDate()+e),n},Xte=(t,e)=>{const n=new Date(t);return n.setMonth(n.getMonth()+e),n},Xh=(t,e)=>{const n=new Date(t);return n.setFullYear(n.getFullYear()+e),n},Yh=(t,e,n)=>{let r={day:"numeric",month:"long",year:"numeric"};return n&&(r=n),new Intl.DateTimeFormat(t,r).format(e)},Zh=(t,e)=>{const n=t.getFullYear();return Math.floor(n/e)*e},Yte=(t,e)=>{const n=t.getFullYear(),r=e+9;return n>=e&&n<=r},Zte=({theme:t={}})=>{const{theme:e,weekStart:n,minDate:r,maxDate:s,viewDate:o,selectedDate:i,changeSelectedDate:a,language:l}=c2(),c=it(e.views.days,t),u=Kte(l,n),h=qte(o,n);return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:c.header.base,children:u.map((p,m)=>z.jsx("span",{className:c.header.title,children:p},m))}),z.jsx("div",{className:c.items.base,children:[...Array(42)].map((p,m)=>{const g=X5(h,m),x=Yh(l,g,{day:"numeric"}),w=i&&lm(i,g),k=!Cf(g,r,s);return z.jsx("button",{disabled:k,type:"button",className:ze(c.items.item.base,w&&c.items.item.selected,k&&c.items.item.disabled),onClick:()=>{k||a(g,!0)},children:x},m)})})]})},Qte=({theme:t={}})=>{const{theme:e,viewDate:n,selectedDate:r,minDate:s,maxDate:o,setViewDate:i,setView:a}=c2(),l=it(e.views.decades,t),c=Zh(n,100);return z.jsx("div",{className:l.items.base,children:[...Array(12)].map((u,h)=>{const p=c-10+h*10;new Date(n.getTime()).setFullYear(p+n.getFullYear()%10);const g=new Date(p,0,1),x=Xh(g,9),w=r&&Yte(r,p),k=!Cf(g,s,o)&&!Cf(x,s,o);return z.jsx("button",{disabled:k,type:"button",className:ze(l.items.item.base,w&&l.items.item.selected,k&&l.items.item.disabled),onClick:()=>{k||(r&&i(Xh(n,p-r.getFullYear())),a(wr.Years))},children:p},h)})})},Jte=({theme:t={}})=>{const{theme:e,minDate:n,maxDate:r,selectedDate:s,viewDate:o,language:i,setViewDate:a,setView:l}=c2(),c=it(e.views.months,t);return z.jsx("div",{className:c.items.base,children:[...Array(12)].map((u,h)=>{const p=new Date;p.setMonth(h,1),p.setFullYear(o.getFullYear());const m=Yh(i,p,{month:"short"}),g=s&&lm(s,p),x=!Cf(p,n,r);return z.jsx("button",{disabled:x,type:"button",className:ze(c.items.item.base,g&&c.items.item.selected,x&&c.items.item.disabled),onClick:()=>{x||(a(p),l(wr.Days))},children:m},h)})})},ene=({theme:t={}})=>{const{theme:e,selectedDate:n,minDate:r,maxDate:s,viewDate:o,setViewDate:i,setView:a}=c2(),l=it(e.views.years,t);return z.jsx("div",{className:l.items.base,children:[...Array(12)].map((c,u)=>{const p=Zh(o,10)+u,m=new Date(o.getTime());m.setFullYear(p);const g=n&&lm(n,m),x=!Cf(m,r,s);return z.jsx("button",{disabled:x,type:"button",className:ze(l.items.item.base,g&&l.items.item.selected,x&&l.items.item.disabled),onClick:()=>{x||(i(m),a(wr.Months))},children:p},u)})})},tne=({title:t,open:e,inline:n=!1,autoHide:r=!0,showClearButton:s=!0,labelClearButton:o="Clear",showTodayButton:i=!0,labelTodayButton:a="Today",defaultValue:l,minDate:c,maxDate:u,language:h="en",weekStart:p=j9.Sunday,className:m,theme:g={},onChange:x,label:w,value:k,...S},$)=>{const T=it(Et().datepicker,g),E=l?My(l,c,u):null,F=D.useMemo(()=>l?My(l,c,u):new Date,[]),[V,j]=D.useState(e),[W,R]=D.useState(wr.Days),[O,U]=D.useState(k??E),[K,G]=D.useState(k??F),Y=D.useRef(null),Z=D.useRef(null),ne=(pe,de)=>{U(pe),(pe===null||pe)&&x&&x(pe),r&&W===wr.Days&&de==!0&&!n&&j(!1)},J=()=>{ne(E,!0),l&&G(l)};D.useImperativeHandle($,()=>({focus(){var pe;(pe=Y.current)==null||pe.focus()},clear(){J()}}));const re=pe=>{switch(pe){case wr.Decades:return z.jsx(Qte,{theme:T.views.decades});case wr.Years:return z.jsx(ene,{theme:T.views.years});case wr.Months:return z.jsx(Jte,{theme:T.views.months});case wr.Days:default:return z.jsx(Zte,{theme:T.views.days})}},se=()=>{switch(W){case wr.Days:return wr.Months;case wr.Months:return wr.Years;case wr.Years:return wr.Decades}return W},q=()=>{switch(W){case wr.Decades:return`${Zh(K,100)-10} - ${Zh(K,100)+100}`;case wr.Years:return`${Zh(K,10)} - ${Zh(K,10)+11}`;case wr.Months:return Yh(h,K,{year:"numeric"});case wr.Days:default:return Yh(h,K,{month:"long",year:"numeric"})}},le=(pe,de,we)=>{switch(pe){case wr.Days:return new Date(Xte(de,we));case wr.Months:return new Date(Xh(de,we));case wr.Years:return new Date(Xh(de,we*10));case wr.Decades:return new Date(Xh(de,we*100));default:return new Date(Xh(de,we*10))}};D.useEffect(()=>{const pe=de=>{var Te,Ee;const we=(Te=Z==null?void 0:Z.current)==null?void 0:Te.contains(de.target),Ne=(Ee=Y==null?void 0:Y.current)==null?void 0:Ee.contains(de.target);!we&&!Ne&&j(!1)};return document.addEventListener("mousedown",pe),()=>{document.removeEventListener("mousedown",pe)}},[Y,Z,j]),D.useEffect(()=>{const pe=k&&My(new Date(k),c,u),de=O&&My(new Date(O),c,u);de&&pe&&!lm(pe,de)&&U(pe),O==null&&U(E)},[k,U,G,O]);const be=k===null?w:Yh(h,O||new Date);return z.jsx(V9.Provider,{value:{theme:T,language:h,minDate:c,maxDate:u,weekStart:p,isOpen:V,setIsOpen:j,view:W,setView:R,viewDate:K,setViewDate:G,selectedDate:O,setSelectedDate:U,changeSelectedDate:ne},children:z.jsxs("div",{className:ze(T.root.base,m),children:[!n&&z.jsx(B9,{theme:T.root.input,icon:JZ,ref:Y,onFocus:()=>{O&&!lm(K,O)&&G(O),j(!0)},value:be,readOnly:!0,defaultValue:E?Yh(h,E):w,...S}),(V||n)&&z.jsx("div",{ref:Z,className:ze(T.popup.root.base,n&&T.popup.root.inline),children:z.jsxs("div",{className:T.popup.root.inner,children:[z.jsxs("div",{className:T.popup.header.base,children:[t&&z.jsx("div",{className:T.popup.header.title,children:t}),z.jsxs("div",{className:T.popup.header.selectors.base,children:[z.jsx("button",{type:"button",className:ze(T.popup.header.selectors.button.base,T.popup.header.selectors.button.prev),onClick:()=>G(le(W,K,-1)),children:z.jsx(ZZ,{})}),z.jsx("button",{type:"button",className:ze(T.popup.header.selectors.button.base,T.popup.header.selectors.button.view),onClick:()=>R(se()),children:q()}),z.jsx("button",{type:"button",className:ze(T.popup.header.selectors.button.base,T.popup.header.selectors.button.next),onClick:()=>G(le(W,K,1)),children:z.jsx(QZ,{})})]})]}),z.jsx("div",{className:T.popup.view.base,children:re(W)}),(s||i)&&z.jsxs("div",{className:T.popup.footer.base,children:[i&&z.jsx("button",{type:"button",className:ze(T.popup.footer.button.base,T.popup.footer.button.today),onClick:()=>{const pe=new Date;ne(pe,!0),G(pe)},children:a}),s&&z.jsx("button",{type:"button",className:ze(T.popup.footer.button.base,T.popup.footer.button.clear),onClick:()=>{ne(null,!0)},children:o})]})]})})]})})},nne=D.forwardRef(tne);nne.displayName="Datepicker";const W9=D.createContext(void 0);function U9(){const t=D.useContext(W9);if(!t)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return t}function rne(t){return Ss({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(t)}function sne(t){return Ss({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}const H9=({children:t,className:e,closeIcon:n=sne,theme:r={},title:s,titleIcon:o=rne,...i})=>{const a=D.useId(),{id:l,isOpen:c,onClose:u,theme:h}=U9(),p=it(h.header,r);return z.jsxs("div",{className:e,...i,children:[z.jsxs("h5",{className:p.inner.titleText,id:l,children:[z.jsx(o,{"aria-hidden":!0,className:p.inner.titleIcon}),s]}),z.jsxs("button",{onClick:u,"data-testid":"close-drawer",className:p.inner.closeButton,children:[z.jsx(n,{"aria-hidden":!0,className:p.inner.closeIcon}),z.jsx("span",{className:"sr-only",children:"Close menu"})]}),z.jsx("span",{className:p.collapsed[c?"on":"off"],id:`flowbite-drawer-header-${a}`,children:t})]})};H9.displayName="Drawer.Header";const G9=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=U9(),o=it(s.items,n);return z.jsx("div",{"data-testid":"flowbite-drawer-items",className:ze(o.base,e),...r,children:t})};G9.displayName="Drawer.Items";const q9=({backdrop:t=!0,children:e,className:n,edge:r=!1,position:s="left",onClose:o,open:i=!1,theme:a={},...l})=>{const c=D.useId(),u=it(Et().drawer,a);return D.useEffect(()=>{const h=p=>{p.key==="Escape"&&i&&o&&o()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[o,i]),z.jsxs(W9.Provider,{value:{theme:u,onClose:o,isOpen:i,id:c},children:[z.jsx("div",{"aria-modal":!0,"aria-describedby":`drawer-dialog-${c}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:ze(u.root.base,u.root.position[s][i?"on":"off"],r&&!i&&u.root.edge,n),...l,children:e}),i&&t&&z.jsx("div",{onClick:()=>o(),className:u.root.backdrop})]})};q9.displayName="Drawer";Object.assign(q9,{Header:H9,Items:G9});const K9=D.createContext(void 0);function Y5(){const t=D.useContext(K9);if(!t)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return t}const Z5=({className:t,theme:e={},...n})=>{const{theme:r}=Y5(),s=e.divider??r.floating.divider;return z.jsx("div",{className:ze(s,t),...n})},X9=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=Y5(),o=n.header??s.floating.header;return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:ze(o,e),...r,children:t}),z.jsx(Z5,{})]})},Y9=D.forwardRef(({children:t,className:e,icon:n,onClick:r,theme:s={},...o},i)=>{const{ref:a,index:l}=dte({label:typeof t=="string"?t:void 0}),c=b9([i,a]),{theme:u,activeIndex:h,dismissOnClick:p,getItemProps:m,handleSelect:g}=Y5(),x=h===l,w=it(u.floating.item,s),k=o;return z.jsx("li",{role:"menuitem",className:w.container,children:z.jsxs(P5,{ref:c,className:ze(w.base,e),...k,...m({onClick:()=>{r==null||r(),p&&g(null)}}),tabIndex:x?0:-1,children:[n&&z.jsx(n,{className:w.icon}),t]})})});Y9.displayName="DropdownItem";const one={top:oQ,right:NA,bottom:$A,left:sQ},ine=({refs:t,children:e,inline:n,theme:r,disabled:s,setButtonWidth:o,getReferenceProps:i,renderTrigger:a,...l})=>{const c=t.reference,u=i();if(D.useEffect(()=>{c.current&&(o==null||o(c.current.clientWidth))},[c,o]),a){const h=a(r);return D.cloneElement(h,{ref:t.setReference,disabled:s,...u,...h.props})}return n?z.jsx("button",{type:"button",ref:t.setReference,className:r==null?void 0:r.inlineWrapper,disabled:s,...u,children:e}):z.jsx(M5,{...l,disabled:s,type:"button",ref:t.setReference,...u,children:e})},Z9=({children:t,className:e,dismissOnClick:n=!0,theme:r={},enableTypeAhead:s=!0,renderTrigger:o,...i})=>{const[a,l]=D.useState(!1),[c,u]=D.useState(null),[h,p]=D.useState(null),[m,g]=D.useState(void 0),x=D.useRef([]),w=D.useRef([]),k=it(Et().dropdown,r),S=i,$=i["data-testid"]||"flowbite-dropdown-target",{placement:T=i.inline?"bottom-start":"bottom",trigger:E="click",label:F,inline:V,arrowIcon:j=!0,...W}=S,R=D.useCallback(q=>{p(q),l(!1)},[]),O=D.useCallback(q=>{a?u(q):R(q)},[a,R]),{context:U,floatingStyles:K,refs:G}=P9({open:a,setOpen:l,placement:T}),Y=zte(U,{listRef:x,activeIndex:c,selectedIndex:h,onNavigate:u}),Z=_te(U,{listRef:w,activeIndex:c,selectedIndex:h,onMatch:O,enabled:s}),{getReferenceProps:ne,getFloatingProps:J,getItemProps:re}=M9({context:U,role:"menu",trigger:E,interactions:[Y,Z]}),se=D.useMemo(()=>{const[q]=T.split("-");return one[q]??$A},[T]);return z.jsxs(K9.Provider,{value:{theme:k,activeIndex:c,dismissOnClick:n,getItemProps:re,handleSelect:R},children:[z.jsxs(ine,{...W,refs:G,inline:V,theme:k,"data-testid":$,className:ze(k.floating.target,W.className),setButtonWidth:g,getReferenceProps:ne,renderTrigger:o,children:[F,j&&z.jsx(se,{className:k.arrowIcon})]}),a&&z.jsx($9,{context:U,modal:!1,children:z.jsx("div",{ref:G.setFloating,style:{...K,minWidth:m},"data-testid":"flowbite-dropdown","aria-expanded":a,...J({className:ze(k.floating.base,k.floating.animation,"duration-100",!a&&k.floating.hidden,k.floating.style.auto,e)}),children:z.jsx(ute,{elementsRef:x,labelsRef:w,children:z.jsx("ul",{className:k.content,tabIndex:-1,children:t})})})})]})};Z9.displayName="Dropdown";X9.displayName="Dropdown.Header";Z5.displayName="Dropdown.Divider";const ane=Object.assign(Z9,{Item:Y9,Header:X9,Divider:Z5}),lne=D.forwardRef(({className:t,color:e="gray",helperText:n,sizing:r="md",theme:s={},...o},i)=>{const a=it(Et().fileInput,s);return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:ze(a.root.base,t),children:z.jsx("div",{className:a.field.base,children:z.jsx("input",{className:ze(a.field.input.base,a.field.input.colors[e],a.field.input.sizes[r]),...o,type:"file",ref:i})})}),n&&z.jsx(Vm,{color:e,children:n})]})});lne.displayName="FileInput";const cne=D.forwardRef(({label:t,helperText:e,color:n="default",sizing:r="md",variant:s,disabled:o=!1,theme:i={},className:a,...l},c)=>{const u=D.useId(),h=it(Et().floatingLabel,i);return z.jsxs("div",{children:[z.jsxs("div",{className:ze("relative",s==="standard"?"z-0":""),children:[z.jsx("input",{type:"text",id:l.id?l.id:"floatingLabel"+u,"aria-describedby":"outlined_success_help",className:ze(h.input[n][s][r],a),placeholder:" ","data-testid":"floating-label",disabled:o,...l,ref:c}),z.jsx("label",{htmlFor:l.id?l.id:"floatingLabel"+u,className:ze(h.label[n][s][r],a),children:t})]}),z.jsx("p",{id:"outlined_helper_text"+u,className:ze(h.helperText[n],a),children:e})]})});cne.displayName="FloatingLabel";const Q9=({alt:t,className:e,children:n,href:r,name:s,src:o,theme:i={},...a})=>{const l=it(Et().footer.brand,i);return z.jsx("div",{children:r?z.jsxs("a",{"data-testid":"flowbite-footer-brand",href:r,className:ze(l.base,e),...a,children:[z.jsx("img",{alt:t,src:o,className:l.img}),z.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:l.span,children:s}),n]}):z.jsx("img",{alt:t,"data-testid":"flowbite-footer-brand",src:o,className:ze(l.img,e),...a})})},J9=({by:t,className:e,href:n,theme:r={},year:s,...o})=>{const i=it(Et().footer.copyright,r);return z.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:ze(i.base,e),...o,children:["© ",s,n?z.jsx("a",{href:n,className:i.href,children:t}):z.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:i.span,children:t})]})},eD=({className:t,theme:e={},...n})=>{const r=it(Et().footer.divider,e);return z.jsx("hr",{"data-testid":"footer-divider",className:ze(r.base,t),...n})},tD=({ariaLabel:t,className:e,href:n,icon:r,theme:s={},...o})=>{const i=it(Et().footer.icon,s);return z.jsx("div",{children:n?z.jsx("a",{"aria-label":t,"data-testid":"flowbite-footer-icon",href:n,className:ze(i.base,e),...o,children:z.jsx(r,{className:i.size})}):z.jsx(r,{"data-testid":"flowbite-footer-icon",className:i.size,...o})})},nD=({as:t="a",children:e,className:n,href:r,theme:s={},...o})=>{const i=it(Et().footer.groupLink.link,s);return z.jsx("li",{className:ze(i.base,n),children:z.jsx(t,{href:r,className:i.href,...o,children:e})})},rD=({children:t,className:e,col:n=!1,theme:r={},...s})=>{const o=it(Et().footer.groupLink,r);return z.jsx("ul",{"data-testid":"footer-groupLink",className:ze(o.base,n&&o.col,e),...s,children:t})},sD=({as:t="h2",className:e,theme:n={},title:r,...s})=>{const o=it(Et().footer.title,n);return z.jsx(t,{"data-testid":"flowbite-footer-title",className:ze(o.base,e),...s,children:r})},oD=({bgDark:t=!1,children:e,className:n,container:r=!1,theme:s={},...o})=>{const i=it(Et().footer,s);return z.jsx("footer",{"data-testid":"flowbite-footer",className:ze(i.root.base,t&&i.root.bgDark,r&&i.root.container,n),...o,children:e})};oD.displayName="Footer";J9.displayName="Footer.Copyright";nD.displayName="Footer.Link";Q9.displayName="Footer.Brand";rD.displayName="Footer.LinkGroup";tD.displayName="Footer.Icon";sD.displayName="Footer.Title";eD.displayName="Footer.Divider";Object.assign(oD,{Copyright:J9,Link:nD,LinkGroup:rD,Brand:Q9,Icon:tD,Title:sD,Divider:eD});const iD=D.forwardRef(({theme:t={},icon:e=Gte,className:n,...r},s)=>{const o=it(Et().hr.icon,t);return z.jsxs("div",{className:o.base,children:[z.jsx("hr",{className:ze(o.hrLine,n),role:"separator","data-testid":"flowbite-hr-icon",ref:s,...r}),z.jsx("div",{className:o.icon.base,children:z.jsx(e,{"aria-hidden":!0,className:o.icon.icon})})]})}),aD=D.forwardRef(({theme:t={},className:e,...n},r)=>{const s=it(Et().hr.square,t);return z.jsx("hr",{className:ze(s.base,e),role:"separator","data-testid":"flowbite-hr-square",ref:r,...n})}),lD=D.forwardRef(({theme:t={},text:e,className:n,...r},s)=>{const o=it(Et().hr.text,t);return z.jsxs("div",{className:o.base,children:[z.jsx("hr",{className:ze(o.hrLine,n),"data-testid":"flowbite-hr-text",role:"separator",ref:s,...r}),z.jsx("span",{className:o.text,children:e})]})}),cD=D.forwardRef(({theme:t={},className:e,...n},r)=>{const s=it(Et().hr.trimmed,t);return z.jsx("hr",{className:ze(s.base,e),role:"separator","data-testid":"flowbite-hr-trimmed",ref:r,...n})}),uD=D.forwardRef(({theme:t={},className:e,...n},r)=>{const s=it(Et().hr.root,t);return z.jsx("hr",{className:ze(s.base,e),role:"separator","data-testid":"flowbite-hr",ref:r,...n})});uD.displayName="HR";cD.displayName="HR.Trimmed";iD.displayName="HR.Icon";lD.displayName="HR.Text";aD.displayName="HR.Square";Object.assign(uD,{Trimmed:cD,Icon:iD,Text:lD,Square:aD});const dD=({children:t,className:e,icon:n,theme:r={},...s})=>{const o=it(Et().list.item,r);return z.jsxs("li",{className:ze(o.withIcon[n?"on":"off"],e),...s,children:[n&&z.jsx(n,{className:ze(o.icon)}),t]})},hD=({children:t,className:e,unstyled:n,nested:r,ordered:s,horizontal:o,theme:i={},...a})=>{const l=it(Et().list,i),c=s?"ol":"ul";return z.jsx(c,{className:ze(l.root.base,l.root.ordered[s?"on":"off"],n&&l.root.unstyled,r&&l.root.nested,o&&l.root.horizontal,e),...a,children:t})};hD.displayName="List";dD.displayName="List.Item";Object.assign(hD,{Item:dD});const fD=({active:t,children:e,className:n,href:r,icon:s,onClick:o,theme:i={},disabled:a,...l})=>{const c=it(Et().listGroup.item,i),u=typeof r<"u",h=u?"a":"button";return z.jsx("li",{className:ze(c.base,n),children:z.jsxs(h,{href:r,onClick:o,type:u?void 0:"button",disabled:a,className:ze(c.link.active[t?"on":"off"],c.link.disabled[a?"on":"off"],c.link.base,c.link.href[u?"on":"off"]),...l,children:[s&&z.jsx(s,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:c.link.icon}),e]})})},pD=({children:t,className:e,theme:n={},...r})=>{const s=it(Et().listGroup,n);return z.jsx("ul",{className:ze(s.root.base,e),...r,children:t})};pD.displayName="ListGroup";fD.displayName="ListGroup.Item";Object.assign(pD,{Item:fD});const mD=D.createContext(void 0);function u2(){const t=D.useContext(mD);if(!t)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return t}const gD=({as:t="a",children:e,className:n,theme:r={},...s})=>{const{theme:o}=u2(),i=it(o.brand,r);return z.jsx(t,{className:ze(i.base,n),...s,children:e})},yD=({children:t,className:e,theme:n={},...r})=>{const{theme:s,isOpen:o}=u2(),i=it(s.collapse,n);return z.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:ze(i.base,i.hidden[o?"off":"on"],e),...r,children:z.jsx("ul",{className:i.list,children:t})})},bD=({active:t,as:e="a",disabled:n,children:r,className:s,theme:o={},onClick:i,...a})=>{const{theme:l,setIsOpen:c}=u2(),u=it(l.link,o),h=p=>{c(!1),i==null||i(p)};return z.jsx("li",{children:z.jsx(e,{className:ze(u.base,t&&u.active.on,!t&&!n&&u.active.off,u.disabled[n?"on":"off"],s),onClick:h,...a,children:r})})};function une(t){return Ss({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}const xD=({barIcon:t=une,className:e,theme:n={},...r})=>{const{theme:s,isOpen:o,setIsOpen:i}=u2(),a=it(s.toggle,n),l=()=>{i(!o)};return z.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:l,className:ze(a.base,e),...r,children:[z.jsx("span",{className:"sr-only",children:"Open main menu"}),z.jsx(t,{"aria-hidden":!0,className:a.icon})]})},vD=({border:t,children:e,className:n,fluid:r=!1,menuOpen:s,rounded:o,theme:i={},...a})=>{const[l,c]=D.useState(s),u=it(Et().navbar,i);return z.jsx(mD.Provider,{value:{theme:u,isOpen:l,setIsOpen:c},children:z.jsx("nav",{className:ze(u.root.base,u.root.bordered[t?"on":"off"],u.root.rounded[o?"on":"off"],n),...a,children:z.jsx("div",{className:ze(u.root.inner.base,u.root.inner.fluid[r?"on":"off"]),children:e})})})};vD.displayName="Navbar";gD.displayName="Navbar.Brand";yD.displayName="Navbar.Collapse";bD.displayName="Navbar.Link";xD.displayName="Navbar.Toggle";const dne=Object.assign(vD,{Brand:gD,Collapse:yD,Link:bD,Toggle:xD}),wD=({children:t,className:e,theme:n={},toggle:r,...s})=>{const[o,i]=D.useState(void 0),a=it(Et().megaMenu.dropdown,n);if(r)return z.jsx(ane,{inline:!0,label:r,placement:"bottom",theme:a.toggle,className:ze(a.base,e),children:t});const l=D.useId(),c=D.useRef(null);return D.useEffect(()=>{var h;i((h=function(){var m;const p=(m=c.current)==null?void 0:m.closest("nav");return p==null?void 0:p.querySelector('[aria-haspopup="menu"]')}())==null?void 0:h.id)},[]),z.jsx("div",{"aria-labelledby":o,id:l,ref:c,role:"menu",className:ze(a.base,e),...s,children:t})};wD.displayName="MegaMenu.Dropdown";const kD=({children:t,className:e,theme:n={},...r})=>{const s=D.useId(),o=D.useRef(null),[i,a]=D.useState(void 0),[l,c]=D.useState(void 0),u=it(Et().megaMenu.dropdownToggle,n),h=function(){var g;const m=(g=o.current)==null?void 0:g.closest("nav");return m==null?void 0:m.querySelector('[role="menu"]')},p=function(){var m;(m=h())==null||m.classList.toggle("hidden"),c(!l)};return D.useEffect(()=>{const m=h(),g=m==null?void 0:m.classList.contains("hidden");a(m==null?void 0:m.id),c(!g)},[]),z.jsx("button",{"aria-controls":i,"aria-expanded":l,"aria-haspopup":"menu",id:s,onClick:p,ref:o,className:ze(u.base,e),...r,children:t})};kD.displayName="MegaMenu.DropdownToggle";const CD=({children:t,theme:e={},...n})=>{const r=it(Et().megaMenu,e);return z.jsx(dne,{fluid:!0,theme:r,...n,children:t})};Object.assign(CD,{Dropdown:wD,DropdownToggle:kD});CD.displayName="MegaMenu";const SD=D.createContext(void 0);function Q5(){const t=D.useContext(SD);if(!t)throw new Error("useModalContext should be used within the ModalContext provider!");return t}const TD=({children:t,className:e,theme:n={},...r})=>{const{theme:s,popup:o}=Q5(),i=it(s.body,n);return z.jsx("div",{className:ze(i.base,o&&[i.popup],e),...r,children:t})},ID=({children:t,className:e,theme:n={},...r})=>{const{theme:s,popup:o}=Q5(),i=it(s.footer,n);return z.jsx("div",{className:ze(i.base,!o&&i.popup,e),...r,children:t})},$D=({as:t="h3",children:e,className:n,theme:r={},id:s,...o})=>{const i=D.useId(),a=s||i,{theme:l,popup:c,onClose:u,setHeaderId:h}=Q5(),p=it(l.header,r);return D.useLayoutEffect(()=>(h(a),()=>h(void 0)),[a,h]),z.jsxs("div",{className:ze(p.base,c&&p.popup,n),...o,children:[z.jsx(t,{id:a,className:p.title,children:e}),z.jsx("button",{"aria-label":"Close",className:p.close.base,type:"button",onClick:u,children:z.jsx(iQ,{"aria-hidden":!0,className:p.close.icon})})]})},ND=D.forwardRef(({children:t,className:e,dismissible:n=!1,onClose:r,popup:s,position:o="center",root:i,show:a,size:l="2xl",theme:c={},initialFocus:u,...h},p)=>{const[m,g]=D.useState(void 0),x=it(Et().modal,c),{context:w}=R9({open:a,onOpenChange:()=>r&&r()}),k=b9([w.refs.setFloating,p]),S=N9(w),$=E9(w,{outsidePressEvent:"mousedown",enabled:n}),T=D9(w),{getFloatingProps:E}=A9([S,$,T]);return a?z.jsx(SD.Provider,{value:{theme:x,popup:s,onClose:r,setHeaderId:g},children:z.jsx(Ete,{root:i,children:z.jsx(Ate,{lockScroll:!0,"data-testid":"modal-overlay",className:ze(x.root.base,x.root.positions[o],a?x.root.show.on:x.root.show.off,e),...h,children:z.jsx($9,{context:w,initialFocus:u,children:z.jsx("div",{ref:k,...E(h),"aria-labelledby":m,className:ze(x.content.base,x.root.sizes[l]),children:z.jsx("div",{className:x.content.inner,children:t})})})})})}):null});ND.displayName="Modal";$D.displayName="Modal.Header";TD.displayName="Modal.Body";ID.displayName="Modal.Footer";Object.assign(ND,{Header:$D,Body:TD,Footer:ID});const hne=(t,e)=>t>=e?[]:[...Array(e-t+1).keys()].map(n=>n+t),J5=({active:t,children:e,className:n,onClick:r,theme:s={},...o})=>{const i=it(Et().pagination,s);return z.jsx("button",{type:"button",className:ze(t&&i.pages.selector.active,n),onClick:r,...o,children:e})};J5.displayName="Pagination.Button";const H3=({children:t,className:e,onClick:n,theme:r={},disabled:s=!1,...o})=>{const i=it(Et().pagination,r);return z.jsx("button",{type:"button",className:ze(s&&i.pages.selector.disabled,e),disabled:s,onClick:n,...o,children:t})};H3.displayName="Pagination.Navigation";const ED=({className:t,currentPage:e,layout:n="pagination",nextLabel:r="Next",onPageChange:s,previousLabel:o="Previous",renderPaginationButton:i=h=>z.jsx(J5,{...h}),showIcons:a=!1,theme:l={},totalPages:c,...u})=>{const h=it(Et().pagination,l),p=Math.min(Math.max(n==="pagination"?e+2:e+4,5),c),m=Math.max(1,p-4),g=()=>{s(Math.min(e+1,c))},x=()=>{s(Math.max(e-1,1))};return z.jsxs("nav",{className:ze(h.base,t),...u,children:[n==="table"&&z.jsxs("div",{className:h.layout.table.base,children:["Showing ",z.jsx("span",{className:h.layout.table.span,children:m})," to ",z.jsx("span",{className:h.layout.table.span,children:p})," of ",z.jsx("span",{className:h.layout.table.span,children:c})," Entries"]}),z.jsxs("ul",{className:h.pages.base,children:[z.jsx("li",{children:z.jsxs(H3,{className:ze(h.pages.previous.base,a&&h.pages.showIcon),onClick:x,disabled:e===1,children:[a&&z.jsx(eQ,{"aria-hidden":!0,className:h.pages.previous.icon}),o]})}),n==="pagination"&&hne(m,p).map(w=>z.jsx("li",{"aria-current":w===e?"page":void 0,children:i({className:ze(h.pages.selector.base,e===w&&h.pages.selector.active),active:w===e,onClick:()=>s(w),children:w})},w)),z.jsx("li",{children:z.jsxs(H3,{className:ze(h.pages.next.base,a&&h.pages.showIcon),onClick:g,disabled:e===c,children:[r,a&&z.jsx(tQ,{"aria-hidden":!0,className:h.pages.next.icon})]})})]})]})};ED.displayName="Pagination";Object.assign(ED,{Button:J5});const fne=D.forwardRef(({className:t,theme:e={},...n},r)=>{const s=it(Et().radio,e);return z.jsx("input",{ref:r,type:"radio",className:ze(s.root.base,t),...n})});fne.displayName="Radio";const pne=D.forwardRef(({className:t,sizing:e="md",theme:n={},...r},s)=>{const o=it(Et().rangeSlider,n);return z.jsx(z.Fragment,{children:z.jsx("div",{"data-testid":"flowbite-range-slider",className:ze(o.root.base,t),children:z.jsx("div",{className:o.field.base,children:z.jsx("input",{ref:s,type:"range",className:ze(o.field.input.base,o.field.input.sizes[e]),...r})})})})});pne.displayName="RangeSlider";const RD=({children:t,className:e,percentFilled:n=0,theme:r={},...s})=>{const o=it(Et().ratingAdvanced,r);return z.jsxs("div",{className:ze(o.base,e),...s,children:[z.jsx("span",{className:o.label,children:t}),z.jsx("div",{className:o.progress.base,children:z.jsx("div",{className:o.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${n}%`}})}),z.jsx("span",{className:o.progress.label,children:`${n}%`})]})},AD=D.createContext(void 0);function mne(){const t=D.useContext(AD);if(!t)throw new Error("useRatingContext should be used within the RatingContext provider!");return t}const DD=({className:t,filled:e=!0,starIcon:n=nQ,theme:r={},...s})=>{const{theme:o,size:i="sm"}=mne(),a=it(o.star,r);return z.jsx(n,{"data-testid":"flowbite-rating-star",className:ze(a.sizes[i],a[e?"filled":"empty"],t),...s})},PD=({children:t,className:e,size:n="sm",theme:r={},...s})=>{const o=it(Et().rating,r);return z.jsx(AD.Provider,{value:{theme:o,size:n},children:z.jsx("div",{className:ze(o.root.base,e),...s,children:t})})};PD.displayName="Rating";DD.displayName="Rating.Star";RD.displayName="Rating.Advanced";Object.assign(PD,{Star:DD,Advanced:RD});const gne=D.forwardRef(({addon:t,children:e,className:n,color:r="gray",helperText:s,icon:o,shadow:i,sizing:a="md",theme:l={},...c},u)=>{const h=it(Et().select,l);return z.jsxs("div",{className:ze(h.base,n),children:[t&&z.jsx("span",{className:h.addon,children:t}),z.jsxs("div",{className:h.field.base,children:[o&&z.jsx("div",{className:h.field.icon.base,children:z.jsx(o,{className:h.field.icon.svg})}),z.jsx("select",{className:ze(h.field.select.base,h.field.select.colors[r],h.field.select.sizes[a],h.field.select.withIcon[o?"on":"off"],h.field.select.withAddon[t?"on":"off"],h.field.select.withShadow[i?"on":"off"]),...c,ref:u,children:e}),s&&z.jsx(Vm,{color:r,children:s})]})]})});gne.displayName="Select";const MD=D.createContext(void 0);function qf(){const t=D.useContext(MD);if(!t)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return t}const eC=D.createContext(void 0);function yne(){const t=D.useContext(eC);if(!t)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return t}const OD=({children:t,className:e,icon:n,label:r,chevronIcon:s=IA,renderChevronIcon:o,open:i=!1,theme:a={},...l})=>{const c=D.useId(),[u,h]=D.useState(i),{theme:p,isCollapsed:m}=qf(),g=it(p.collapse,a);D.useEffect(()=>h(i),[i]);const x=({children:w})=>z.jsx("li",{children:m&&!u?z.jsx(l2,{content:r,placement:"right",children:w}):w});return z.jsxs(x,{children:[z.jsxs("button",{id:`flowbite-sidebar-collapse-${c}`,onClick:()=>h(!u),title:r,type:"button",className:ze(g.button,e),...l,children:[n&&z.jsx(n,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:ze(g.icon.base,g.icon.open[u?"on":"off"])}),m?z.jsx("span",{className:"sr-only",children:r}):z.jsxs(z.Fragment,{children:[z.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:g.label.base,children:r}),o?o(g,u):z.jsx(s,{"aria-hidden":!0,className:ze(g.label.icon.base,g.label.icon.open[u?"on":"off"])})]})]}),z.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${c}`,hidden:!u,className:g.list,children:z.jsx(eC.Provider,{value:{isInsideCollapse:!0},children:t})})]})};OD.displayName="Sidebar.Collapse";const FD=({children:t,color:e="info",className:n,theme:r={},...s})=>{const{theme:o,isCollapsed:i}=qf(),a=it(o.cta,r);return z.jsx("div",{"data-testid":"sidebar-cta",hidden:i,className:ze(a.base,a.color[e],n),...s,children:t})};FD.displayName="Sidebar.CTA";const bne=({id:t,theme:e,isCollapsed:n,tooltipChildren:r,children:s,...o})=>z.jsx("li",{...o,children:n?z.jsx(l2,{content:z.jsx(zD,{id:t,theme:e,children:r}),placement:"right",children:s}):s}),zD=({id:t,theme:e,children:n})=>z.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${t}`,className:ze(e.content.base),children:n}),LD=D.forwardRef(({active:t,as:e="a",children:n,className:r,icon:s,label:o,labelColor:i="info",theme:a={},...l},c)=>{var x,w,k,S;const u=D.useId(),{theme:h,isCollapsed:p}=qf(),{isInsideCollapse:m}=yne(),g=it(h.item,a);return z.jsx(bne,{theme:g,className:g.listItem,id:u,isCollapsed:p,tooltipChildren:n,children:z.jsxs(e,{"aria-labelledby":`flowbite-sidebar-item-${u}`,ref:c,className:ze(g.base,t&&g.active,!p&&m&&((x=g.collapsed)==null?void 0:x.insideCollapse),r),...l,children:[s&&z.jsx(s,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:ze((w=g.icon)==null?void 0:w.base,t&&((k=g.icon)==null?void 0:k.active))}),p&&!s&&z.jsx("span",{className:(S=g.collapsed)==null?void 0:S.noIcon,children:n.charAt(0).toLocaleUpperCase()??"?"}),!p&&z.jsx(zD,{id:u,theme:g,children:n}),!p&&o&&z.jsx(WA,{color:i,"data-testid":"flowbite-sidebar-label",hidden:p,className:g.label,children:o})]})})});LD.displayName="Sidebar.Item";const _D=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=qf(),o=it(s.itemGroup,n);return z.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:ze(o.base,e),...r,children:z.jsx(eC.Provider,{value:{isInsideCollapse:!1},children:t})})};_D.displayName="Sidebar.ItemGroup";const BD=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=qf(),o=it(s.items,n);return z.jsx("div",{className:ze(o.base,e),"data-testid":"flowbite-sidebar-items",...r,children:t})};BD.displayName="Sidebar.Items";const VD=({children:t,className:e,href:n,img:r,imgAlt:s="",theme:o={},...i})=>{const a=D.useId(),{theme:l,isCollapsed:c}=qf(),u=it(l.logo,o);return z.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${a}`,href:n,className:ze(u.base,e),...i,children:[z.jsx("img",{alt:s,src:r,className:u.img}),z.jsx("span",{className:u.collapsed[c?"on":"off"],id:`flowbite-sidebar-logo-${a}`,children:t})]})};VD.displayName="Sidebar.Logo";const jD=({children:t,as:e="nav",collapseBehavior:n="collapse",collapsed:r=!1,theme:s={},className:o,...i})=>{const a=it(Et().sidebar,s);return z.jsx(MD.Provider,{value:{theme:a,isCollapsed:r},children:z.jsx(e,{"aria-label":"Sidebar",hidden:r&&n==="hide",className:ze(a.root.base,a.root.collapsed[r?"on":"off"],o),...i,children:z.jsx("div",{className:a.root.inner,children:t})})})};jD.displayName="Sidebar";const U0=Object.assign(jD,{Collapse:OD,CTA:FD,Item:LD,Items:BD,ItemGroup:_D,Logo:VD}),WD=D.createContext(void 0);function xne(){const t=D.useContext(WD);if(!t)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return t}const UD=D.createContext(void 0);function tC(){const t=D.useContext(UD);if(!t)throw new Error("useTableContext should be used within the TableContext provider!");return t}const HD=D.forwardRef(({children:t,className:e,theme:n={},...r},s)=>{const{theme:o}=tC(),i=it(o.body,n);return z.jsx(WD.Provider,{value:{theme:i},children:z.jsx("tbody",{className:ze(i.base,e),ref:s,...r,children:t})})});HD.displayName="Table.Body";const GD=D.forwardRef(({children:t,className:e,theme:n={},...r},s)=>{const{theme:o}=xne(),i=it(o.cell,n);return z.jsx("td",{className:ze(i.base,e),ref:s,...r,children:t})});GD.displayName="Table.Cell";const qD=D.createContext(void 0);function vne(){const t=D.useContext(qD);if(!t)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return t}const KD=D.forwardRef(({children:t,className:e,theme:n={},...r},s)=>{const{theme:o}=tC(),i=it(o.head,n);return z.jsx(qD.Provider,{value:{theme:i},children:z.jsx("thead",{className:ze(i.base,e),ref:s,...r,children:z.jsx("tr",{children:t})})})});KD.displayName="Table.Head";const XD=D.forwardRef(({children:t,className:e,theme:n={},...r},s)=>{const{theme:o}=vne(),i=it(o.cell,n);return z.jsx("th",{className:ze(i.base,e),ref:s,...r,children:t})});XD.displayName="Table.HeadCell";const YD=D.forwardRef(({children:t,className:e,theme:n={},...r},s)=>{const{theme:o,hoverable:i,striped:a}=tC(),l=it(o.row,n);return z.jsx("tr",{ref:s,"data-testid":"table-row-element",className:ze(l.base,a&&l.striped,i&&l.hovered,e),...r,children:t})});YD.displayName="Table.Row";const ZD=D.forwardRef(({children:t,className:e,striped:n,hoverable:r,theme:s={},...o},i)=>{const a=it(Et().table,s);return z.jsx("div",{"data-testid":"table-element",className:ze(a.root.wrapper),children:z.jsxs(UD.Provider,{value:{theme:a,striped:n,hoverable:r},children:[z.jsx("div",{className:ze(a.root.shadow,e)}),z.jsx("table",{className:ze(a.root.base,e),...o,ref:i,children:t})]})})});ZD.displayName="Table";Object.assign(ZD,{Head:KD,Body:HD,Row:YD,Cell:GD,HeadCell:XD});const QD=({children:t,className:e})=>z.jsx("div",{className:e,children:t});QD.displayName="Tabs.Item";const JD=D.forwardRef(({children:t,className:e,onActiveTabChange:n,variant:r="default",theme:s={},...o},i)=>{const a=it(Et().tabs,s),l=D.useId(),c=D.useMemo(()=>D.Children.map(D.Children.toArray(t),({props:T})=>T),[t]),u=D.useRef([]),[h,p]=D.useState(Math.max(0,c.findIndex(T=>T.active))),[m,g]=D.useState(-1),x=T=>{p(T),n&&n(T)},w=({target:T})=>{x(T),g(T)},k=({event:T,target:E})=>{T.key==="ArrowLeft"&&g(Math.max(0,m-1)),T.key==="ArrowRight"&&g(Math.min(c.length-1,m+1)),T.key==="Enter"&&(x(E),g(E))},S=a.tablist.tabitem.variant[r],$=a.tabitemcontainer.variant[r];return D.useEffect(()=>{var T;(T=u.current[m])==null||T.focus()},[m]),D.useImperativeHandle(i,()=>({setActiveTab:x})),z.jsxs("div",{className:ze(a.base,e),children:[z.jsx("div",{"aria-label":"Tabs",role:"tablist",className:ze(a.tablist.base,a.tablist.variant[r],e),...o,children:c.map((T,E)=>z.jsxs("button",{type:"button","aria-controls":`${l}-tabpanel-${E}`,"aria-selected":E===h,className:ze(a.tablist.tabitem.base,S.base,E===h&&S.active.on,E!==h&&!T.disabled&&S.active.off),disabled:T.disabled,id:`${l}-tab-${E}`,onClick:()=>w({target:E}),onKeyDown:F=>k({event:F,target:E}),ref:F=>u.current[E]=F,role:"tab",tabIndex:E===m?0:-1,style:{zIndex:E===m?2:1},children:[T.icon&&z.jsx(T.icon,{className:a.tablist.tabitem.icon}),T.title]},E))}),z.jsx("div",{className:ze(a.tabitemcontainer.base,$),children:c.map((T,E)=>z.jsx("div",{"aria-labelledby":`${l}-tab-${E}`,className:a.tabpanel,hidden:E!==h,id:`${l}-tabpanel-${E}`,role:"tabpanel",tabIndex:0,children:T.children},E))})]})});JD.displayName="Tabs";Object.assign(JD,{Item:QD});const wne=D.forwardRef(({className:t,color:e="gray",helperText:n,shadow:r,theme:s={},...o},i)=>{const a=it(Et().textarea,s);return z.jsxs(z.Fragment,{children:[z.jsx("textarea",{ref:i,className:ze(a.base,a.colors[e],a.withShadow[r?"on":"off"],t),...o}),n&&z.jsx(Vm,{color:e,children:n})]})});wne.displayName="Textarea";const eP=D.createContext(void 0);function nC(){const t=D.useContext(eP);if(!t)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return t}const tP=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=nC(),o=it(s.body,n);return z.jsx("div",{className:ze(o.base,e),...r,children:t})},nP=D.createContext(void 0);function rC(){const t=D.useContext(nP);if(!t)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return t}const rP=D.createContext(void 0);function sP(){const t=D.useContext(rP);if(!t)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return t}const oP=({children:t,className:e,theme:n={},...r})=>{const{horizontal:s}=rC(),{theme:o}=sP(),i=it(o.content,n);return z.jsx(eP.Provider,{value:{theme:i},children:z.jsx("div",{"data-testid":"timeline-content",className:ze(i.root.base,s?i.root.horizontal:i.root.vertical,e),...r,children:t})})},iP=({children:t,className:e,theme:n={},...r})=>{const{theme:s,horizontal:o}=rC(),i=it(s.item,n);return z.jsx(rP.Provider,{value:{theme:i},children:z.jsx("li",{"data-testid":"timeline-item",className:ze(o&&i.root.horizontal,!o&&i.root.vertical,e),...r,children:t})})},aP=({children:t,className:e,icon:n,theme:r={},...s})=>{const{horizontal:o}=rC(),{theme:i}=sP(),a=it(i.point,r);return z.jsxs("div",{"data-testid":"timeline-point",className:ze(o&&a.horizontal,!o&&a.vertical,e),...s,children:[t,n?z.jsx("span",{className:ze(a.marker.icon.wrapper),children:z.jsx(n,{"aria-hidden":!0,className:ze(a.marker.icon.base)})}):z.jsx("div",{className:ze(o&&a.marker.base.horizontal,!o&&a.marker.base.vertical)}),o&&z.jsx("div",{className:ze(a.line)})]})},lP=({children:t,className:e,theme:n={},...r})=>{const{theme:s}=nC(),o=it(s.time,n);return z.jsx("time",{className:ze(o.base,e),...r,children:t})},cP=({as:t="h3",children:e,className:n,theme:r={},...s})=>{const{theme:o}=nC(),i=it(o.title,r);return z.jsx(t,{className:ze(i.base,n),...s,children:e})},uP=({children:t,className:e,horizontal:n,theme:r={},...s})=>{const o=it(Et().timeline,r);return z.jsx(nP.Provider,{value:{theme:o,horizontal:n},children:z.jsx("ol",{"data-testid":"timeline-component",className:ze(n&&o.root.direction.horizontal,!n&&o.root.direction.vertical,e),...s,children:t})})};uP.displayName="Timeline";iP.displayName="Timeline.Item";aP.displayName="Timeline.Point";oP.displayName="Timeline.Content";lP.displayName="Timeline.Time";cP.displayName="Timeline.Title";tP.displayName="Timeline.Body";Object.assign(uP,{Item:iP,Point:aP,Content:oP,Time:lP,Title:cP,Body:tP});const dP=D.createContext(void 0);function kne(){const t=D.useContext(dP);if(!t)throw new Error("useToastContext should be used within the ToastContext provider!");return t}const hP=({className:t,onClick:e,theme:n={},xIcon:r=rQ,onDismiss:s,...o})=>{const{theme:i,duration:a,isClosed:l,isRemoved:c,setIsClosed:u,setIsRemoved:h}=kne(),p=it(i.toggle,n),m=g=>{if(e&&e(g),s){s();return}u(!l),setTimeout(()=>h(!c),a)};return z.jsx("button",{"aria-label":"Close",onClick:m,type:"button",className:ze(p.base,t),...o,children:z.jsx(r,{"aria-hidden":!0,className:p.icon})})},Cne={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},fP=({children:t,className:e,duration:n=300,theme:r={},...s})=>{const[o,i]=D.useState(!1),[a,l]=D.useState(!1),c=it(Et().toast,r);return a?null:z.jsx(dP.Provider,{value:{theme:c,duration:n,isClosed:o,isRemoved:a,setIsClosed:i,setIsRemoved:l},children:z.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:ze(c.root.base,Cne[n],o&&c.root.closed,e),...s,children:t})})};fP.displayName="Toast";hP.displayName="Toast.Toggle";Object.assign(fP,{Toggle:hP});const Sne=D.forwardRef(({checked:t,className:e,color:n="blue",sizing:r="md",disabled:s,label:o,name:i,onChange:a,theme:l={},...c},u)=>{const h=D.useId(),p=it(Et().toggleSwitch,l),m=()=>a(!t),g=()=>{m()},x=w=>{w.code=="Enter"&&w.preventDefault()};return z.jsxs(z.Fragment,{children:[i&&t?z.jsx("input",{ref:u,checked:t,hidden:!0,name:i,readOnly:!0,type:"checkbox",className:"sr-only"}):null,z.jsxs("button",{"aria-checked":t,"aria-labelledby":`${h}-flowbite-toggleswitch-label`,disabled:s,id:`${h}-flowbite-toggleswitch`,onClick:g,onKeyDown:x,role:"switch",tabIndex:0,type:"button",className:ze(p.root.base,p.root.active[s?"off":"on"],e),...c,children:[z.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:ze(p.toggle.base,p.toggle.checked[t?"on":"off"],t&&p.toggle.checked.color[n],p.toggle.sizes[r])}),o!=null&&o.length?z.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${h}-flowbite-toggleswitch-label`,className:p.root.label,children:o}):null]})]})});Sne.displayName="ToggleSwitch";var pP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y$=fr.createContext&&fr.createContext(pP),Tne=["attr","size","title"];function Ine(t,e){if(t==null)return{};var n=$ne(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Xb(){return Xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xb.apply(this,arguments)}function Z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(n),!0).forEach(function(r){Nne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nne(t,e,n){return e=Ene(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ene(t){var e=Rne(t,"string");return typeof e=="symbol"?e:e+""}function Rne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mP(t){return t&&t.map((e,n)=>fr.createElement(e.tag,Yb({key:n},e.attr),mP(e.child)))}function dc(t){return e=>fr.createElement(Ane,Xb({attr:Yb({},t.attr)},e),mP(t.child))}function Ane(t){var e=n=>{var{attr:r,size:s,title:o}=t,i=Ine(t,Tne),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),fr.createElement("svg",Xb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Yb(Yb({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&fr.createElement("title",null,o),t.children)};return Y$!==void 0?fr.createElement(Y$.Consumer,null,n=>e(n)):e(pP)}function Dne(t){return dc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"},child:[]}]})(t)}function Pne(t){return dc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M5 20V4h2v7l2.5-1.5L12 11V4h5v7.08c.33-.05.66-.08 1-.08s.67.03 1 .08V4c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h7.26c-.42-.6-.75-1.28-.97-2H5zm13-7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm-1.25 7.5v-5l4 2.5-4 2.5z"},child:[]}]})(t)}const Mne=({topics:t,onTopicSelect:e,selectedTopic:n})=>z.jsx(z.Fragment,{children:t.map(r=>z.jsx(U0.Item,{onClick:()=>e(r.id),className:"px-5 py-3 text-xs font-medium !justify-start cursor-pointer",children:z.jsxs("div",{className:"flex items-center gap-2 w-full",children:[z.jsx(Pne,{className:n===r.id?"text-activeTextColor":"text-inactiveTextColor",size:15}),z.jsx("span",{className:n===r.id?"text-activeTextColor":"text-inactiveTextColor",children:r.title})]})},r.id))}),One=({section:t,isExpanded:e,isActive:n,onToggle:r,onTopicSelect:s,selectedTopic:o})=>z.jsx(U0.Collapse,{label:z.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-2 cursor-pointer w-full hover:bg-transparent",onClick:i=>{i.stopPropagation(),r()},children:[z.jsx(Dne,{className:n?"text-activeTextColor":"text-inactiveTextColor",size:15}),z.jsx("span",{className:`font-bold text-sm ${n?"text-activeTextColor":"text-inactiveTextColor"}`,children:t.title})]}),open:e,className:`bg-transparent pt-2 mt-1 pb-2 pl-5 pr-5 ${n?"text-activeTextColor":"text-inactiveTextColor"}`,theme:{root:{base:"group"},chevron:{base:`${n?"text-activeTextColor":"text-inactiveTextColor"} h-6 w-6 shrink-0 transition-transform`,open:{off:"",on:"rotate-180"}}},children:z.jsx(Mne,{topics:t.topics,onTopicSelect:s,selectedTopic:o})});function Fne(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function d2(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const G3=t=>Array.isArray(t);function gP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function cm(t){return typeof t=="string"||Array.isArray(t)}function Q$(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sC(t,e,n,r){if(typeof e=="function"){const[s,o]=Q$(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Q$(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function h2(t,e,n){const r=t.getProps();return sC(r,e,n!==void 0?n:r.custom,t)}const oC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iC=["initial",...oC],jm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bd=new Set(jm),Yl=t=>t*1e3,Zl=t=>t/1e3,zne={type:"spring",stiffness:500,damping:25,restSpeed:10},Lne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_ne={type:"keyframes",duration:.8},Bne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vne=(t,{keyframes:e})=>e.length>2?_ne:Bd.has(t)?t.startsWith("scale")?Lne(e[1]):zne:Bne;function aC(t,e){return t?t[e]||t.default||t:void 0}const jne={skipAnimations:!1,useManualTiming:!1},Wne=t=>t!==null;function f2(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Wne),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const fi=t=>t;let q3=fi;function Une(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(c){o.has(c)&&(l.schedule(c),t()),c(i)}const l={schedule:(c,u=!1,h=!1)=>{const m=h&&r?e:n;return u&&o.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(i=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const Oy=["read","resolveKeyframes","update","preRender","render","postRender"],Hne=40;function yP(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=Oy.reduce((k,S)=>(k[S]=Une(o),k),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:p}=i,m=()=>{const k=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(k-s.timestamp,Hne),1),s.timestamp=k,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),p.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))},g=()=>{n=!0,r=!0,s.isProcessing||t(m)};return{schedule:Oy.reduce((k,S)=>{const $=i[S];return k[S]=(T,E=!1,F=!1)=>(n||g(),$.schedule(T,E,F)),k},{}),cancel:k=>{for(let S=0;S<Oy.length;S++)i[Oy[S]].cancel(k)},state:s,steps:i}}const{schedule:mr,cancel:su,state:Gs,steps:L4}=yP(typeof requestAnimationFrame<"u"?requestAnimationFrame:fi,!0),bP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Gne=1e-7,qne=12;function Kne(t,e,n,r,s){let o,i,a=0;do i=e+(n-e)/2,o=bP(i,r,s)-t,o>0?n=i:e=i;while(Math.abs(o)>Gne&&++a<qne);return i}function Wm(t,e,n,r){if(t===e&&n===r)return fi;const s=o=>Kne(o,0,1,t,n);return o=>o===0||o===1?o:bP(s(o),e,r)}const xP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vP=t=>e=>1-t(1-e),wP=Wm(.33,1.53,.69,.99),lC=vP(wP),kP=xP(lC),CP=t=>(t*=2)<1?.5*lC(t):.5*(2-Math.pow(2,-10*(t-1))),cC=t=>1-Math.sin(Math.acos(t)),SP=vP(cC),TP=xP(cC),IP=t=>/^0[^.\s]+$/u.test(t);function Xne(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||IP(t):!0}const $P=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),NP=t=>e=>typeof e=="string"&&e.startsWith(t),EP=NP("--"),Yne=NP("var(--"),uC=t=>Yne(t)?Zne.test(t.split("/*")[0].trim()):!1,Zne=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jne(t){const e=Qne.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function RP(t,e,n=1){const[r,s]=Jne(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const i=o.trim();return $P(i)?parseFloat(i):i}return uC(s)?RP(s,e,n+1):s}const ic=(t,e,n)=>n>e?e:n<t?t:n,Kf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},um={...Kf,transform:t=>ic(0,1,t)},Fy={...Kf,default:1},Um=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jc=Um("deg"),tl=Um("%"),Vt=Um("px"),ere=Um("vh"),tre=Um("vw"),J$={...tl,parse:t=>tl.parse(t)/100,transform:t=>tl.transform(t*100)},nre=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),e8=t=>t===Kf||t===Vt,t8=(t,e)=>parseFloat(t.split(", ")[e]),n8=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return t8(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?t8(o[1],t):0}},rre=new Set(["x","y","z"]),sre=jm.filter(t=>!rre.has(t));function ore(t){const e=[];return sre.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:n8(4,13),y:n8(5,14)};Sf.translateX=Sf.x;Sf.translateY=Sf.y;const AP=t=>e=>e.test(t),ire={test:t=>t==="auto",parse:t=>t},DP=[Kf,Vt,tl,jc,tre,ere,ire],r8=t=>DP.find(AP(t)),bd=new Set;let K3=!1,X3=!1;function PP(){if(X3){const t=Array.from(bd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=ore(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,i])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}X3=!1,K3=!1,bd.forEach(t=>t.complete()),bd.clear()}function MP(){bd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(X3=!0)})}function are(){MP(),PP()}class dC{constructor(e,n,r,s,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(bd.add(this),K3||(K3=!0,mr.read(MP),mr.resolveKeyframes(PP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),bd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,bd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const H0=t=>Math.round(t*1e5)/1e5,hC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lre(t){return t==null}const cre=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fC=(t,e)=>n=>!!(typeof n=="string"&&cre.test(n)&&n.startsWith(t)||e&&!lre(n)&&Object.prototype.hasOwnProperty.call(n,e)),OP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,i,a]=r.match(hC);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},ure=t=>ic(0,255,t),_4={...Kf,transform:t=>Math.round(ure(t))},hd={test:fC("rgb","red"),parse:OP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_4.transform(t)+", "+_4.transform(e)+", "+_4.transform(n)+", "+H0(um.transform(r))+")"};function dre(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Y3={test:fC("#"),parse:dre,transform:hd.transform},Qh={test:fC("hsl","hue"),parse:OP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tl.transform(H0(e))+", "+tl.transform(H0(n))+", "+H0(um.transform(r))+")"},uo={test:t=>hd.test(t)||Y3.test(t)||Qh.test(t),parse:t=>hd.test(t)?hd.parse(t):Qh.test(t)?Qh.parse(t):Y3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hd.transform(t):Qh.transform(t)},hre=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fre(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hC))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hre))===null||n===void 0?void 0:n.length)||0)>0}const FP="number",zP="color",pre="var",mre="var(",s8="${}",gre=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const a=e.replace(gre,l=>(uo.test(l)?(r.color.push(o),s.push(zP),n.push(uo.parse(l))):l.startsWith(mre)?(r.var.push(o),s.push(pre),n.push(l)):(r.number.push(o),s.push(FP),n.push(parseFloat(l))),++o,s8)).split(s8);return{values:n,split:a,indexes:r,types:s}}function LP(t){return dm(t).values}function _P(t){const{split:e,types:n}=dm(t),r=e.length;return s=>{let o="";for(let i=0;i<r;i++)if(o+=e[i],s[i]!==void 0){const a=n[i];a===FP?o+=H0(s[i]):a===zP?o+=uo.transform(s[i]):o+=s[i]}return o}}const yre=t=>typeof t=="number"?0:t;function bre(t){const e=LP(t);return _P(t)(e.map(yre))}const ou={test:fre,parse:LP,createTransformer:_P,getAnimatableNone:bre},xre=new Set(["brightness","contrast","saturate","opacity"]);function vre(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(hC)||[];if(!r)return t;const s=n.replace(r,"");let o=xre.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const wre=/\b([a-z-]*)\(.*?\)/gu,Z3={...ou,getAnimatableNone:t=>{const e=t.match(wre);return e?e.map(vre).join(" "):t}},kre={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,backgroundPositionX:Vt,backgroundPositionY:Vt},Cre={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:Fy,scaleX:Fy,scaleY:Fy,scaleZ:Fy,skew:jc,skewX:jc,skewY:jc,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:um,originX:J$,originY:J$,originZ:Vt},o8={...Kf,transform:Math.round},pC={...kre,...Cre,zIndex:o8,size:Vt,fillOpacity:um,strokeOpacity:um,numOctaves:o8},Sre={...pC,color:uo,backgroundColor:uo,outlineColor:uo,fill:uo,stroke:uo,borderColor:uo,borderTopColor:uo,borderRightColor:uo,borderBottomColor:uo,borderLeftColor:uo,filter:Z3,WebkitFilter:Z3},mC=t=>Sre[t];function BP(t,e){let n=mC(t);return n!==Z3&&(n=ou),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Tre=new Set(["auto","none","0"]);function Ire(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!Tre.has(o)&&dm(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=BP(n,s)}class VP extends dC{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),uC(c))){const u=RP(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!nre.has(r)||e.length!==2)return;const[s,o]=e,i=r8(s),a=r8(o);if(i!==a)if(e8(i)&&e8(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)Xne(e[s])&&r.push(s);r.length&&Ire(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=Sf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function gC(t){return typeof t=="function"}let cb;function $re(){cb=void 0}const nl={now:()=>(cb===void 0&&nl.set(Gs.isProcessing||jne.useManualTiming?Gs.timestamp:performance.now()),cb),set:t=>{cb=t,queueMicrotask($re)}},i8=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ou.test(t)||t==="0")&&!t.startsWith("url("));function Nre(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Ere(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],i=i8(s,e),a=i8(o,e);return!i||!a?!1:Nre(t)||(n==="spring"||gC(n))&&r}const Rre=40;class jP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nl.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Rre?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&are(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=nl.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:i,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Ere(e,r,s,o))if(i)this.options.duration=0;else{l==null||l(f2(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},WP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(Tf(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function UP(t,e){return e?t*(1e3/e):0}const Are=5;function HP(t,e,n){const r=Math.max(e-Are,0);return UP(n-t(r),e-r)}const Fr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},B4=.001;function Dre({duration:t=Fr.duration,bounce:e=Fr.bounce,velocity:n=Fr.velocity,mass:r=Fr.mass}){let s,o,i=1-e;i=ic(Fr.minDamping,Fr.maxDamping,i),t=ic(Fr.minDuration,Fr.maxDuration,Zl(t)),i<1?(s=c=>{const u=c*i,h=u*t,p=u-n,m=Q3(c,i),g=Math.exp(-h);return B4-p/m*g},o=c=>{const h=c*i*t,p=h*n+n,m=Math.pow(i,2)*Math.pow(c,2)*t,g=Math.exp(-h),x=Q3(Math.pow(c,2),i);return(-s(c)+B4>0?-1:1)*((p-m)*g)/x}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-B4+u*h},o=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=Mre(s,o,a);if(t=Yl(t),isNaN(l))return{stiffness:Fr.stiffness,damping:Fr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const Pre=12;function Mre(t,e,n){let r=n;for(let s=1;s<Pre;s++)r=r-t(r)/e(r);return r}function Q3(t,e){return t*Math.sqrt(1-e*e)}const J3=2e4;function GP(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<J3;)e+=n,r=t.next(e);return e>=J3?1/0:e}const Ore=["duration","bounce"],Fre=["stiffness","damping","mass"];function a8(t,e){return e.some(n=>t[n]!==void 0)}function zre(t){let e={velocity:Fr.velocity,stiffness:Fr.stiffness,damping:Fr.damping,mass:Fr.mass,isResolvedFromDuration:!1,...t};if(!a8(t,Fre)&&a8(t,Ore))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*ic(.05,1,1-t.bounce)*Math.sqrt(s);e={...e,mass:Fr.mass,stiffness:s,damping:o}}else{const n=Dre(t);e={...e,...n,mass:Fr.mass},e.isResolvedFromDuration=!0}return e}function qP(t=Fr.visualDuration,e=Fr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:h,velocity:p,isResolvedFromDuration:m}=zre({...n,velocity:-Zl(n.velocity||0)}),g=p||0,x=c/(2*Math.sqrt(l*u)),w=i-o,k=Zl(Math.sqrt(l/u)),S=Math.abs(w)<5;r||(r=S?Fr.restSpeed.granular:Fr.restSpeed.default),s||(s=S?Fr.restDelta.granular:Fr.restDelta.default);let $;if(x<1){const E=Q3(k,x);$=F=>{const V=Math.exp(-x*k*F);return i-V*((g+x*k*w)/E*Math.sin(E*F)+w*Math.cos(E*F))}}else if(x===1)$=E=>i-Math.exp(-k*E)*(w+(g+k*w)*E);else{const E=k*Math.sqrt(x*x-1);$=F=>{const V=Math.exp(-x*k*F),j=Math.min(E*F,300);return i-V*((g+x*k*w)*Math.sinh(j)+E*w*Math.cosh(j))/E}}const T={calculatedDuration:m&&h||null,next:E=>{const F=$(E);if(m)a.done=E>=h;else{let V=0;x<1&&(V=E===0?Yl(g):HP($,E,F));const j=Math.abs(V)<=r,W=Math.abs(i-F)<=s;a.done=j&&W}return a.value=a.done?i:F,a},toString:()=>{const E=Math.min(GP(T),J3),F=WP(V=>T.next(E*V).value,E,30);return E+"ms "+F}};return T}function l8({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],p={done:!1,value:h},m=j=>a!==void 0&&j<a||l!==void 0&&j>l,g=j=>a===void 0?l:l===void 0||Math.abs(a-j)<Math.abs(l-j)?a:l;let x=n*e;const w=h+x,k=i===void 0?w:i(w);k!==w&&(x=k-h);const S=j=>-x*Math.exp(-j/r),$=j=>k+S(j),T=j=>{const W=S(j),R=$(j);p.done=Math.abs(W)<=c,p.value=p.done?k:R};let E,F;const V=j=>{m(p.value)&&(E=j,F=qP({keyframes:[p.value,g(p.value)],velocity:HP($,j,p.value),damping:s,stiffness:o,restDelta:c,restSpeed:u}))};return V(0),{calculatedDuration:null,next:j=>{let W=!1;return!F&&E===void 0&&(W=!0,T(j),V(j)),E!==void 0&&j>=E?F.next(j-E):(!W&&T(j),p)}}}const Lre=Wm(.42,0,1,1),_re=Wm(0,0,.58,1),KP=Wm(.42,0,.58,1),Bre=t=>Array.isArray(t)&&typeof t[0]!="number",yC=t=>Array.isArray(t)&&typeof t[0]=="number",c8={linear:fi,easeIn:Lre,easeInOut:KP,easeOut:_re,circIn:cC,circInOut:TP,circOut:SP,backIn:lC,backInOut:kP,backOut:wP,anticipate:CP},u8=t=>{if(yC(t)){q3(t.length===4);const[e,n,r,s]=t;return Wm(e,n,r,s)}else if(typeof t=="string")return q3(c8[t]!==void 0),c8[t];return t},Vre=(t,e)=>n=>e(t(n)),Hm=(...t)=>t.reduce(Vre),$r=(t,e,n)=>t+(e-t)*n;function V4(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jre({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,i=0;if(!e)s=o=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=V4(l,a,t+1/3),o=V4(l,a,t),i=V4(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}function Zb(t,e){return n=>n>0?e:t}const j4=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Wre=[Y3,hd,Qh],Ure=t=>Wre.find(e=>e.test(t));function d8(t){const e=Ure(t);if(!e)return!1;let n=e.parse(t);return e===Qh&&(n=jre(n)),n}const h8=(t,e)=>{const n=d8(t),r=d8(e);if(!n||!r)return Zb(t,e);const s={...n};return o=>(s.red=j4(n.red,r.red,o),s.green=j4(n.green,r.green,o),s.blue=j4(n.blue,r.blue,o),s.alpha=$r(n.alpha,r.alpha,o),hd.transform(s))},ek=new Set(["none","hidden"]);function Hre(t,e){return ek.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Gre(t,e){return n=>$r(t,e,n)}function bC(t){return typeof t=="number"?Gre:typeof t=="string"?uC(t)?Zb:uo.test(t)?h8:Xre:Array.isArray(t)?XP:typeof t=="object"?uo.test(t)?h8:qre:Zb}function XP(t,e){const n=[...t],r=n.length,s=t.map((o,i)=>bC(o)(o,e[i]));return o=>{for(let i=0;i<r;i++)n[i]=s[i](o);return n}}function qre(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=bC(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function Kre(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const i=e.types[o],a=t.indexes[i][s[i]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[o]=l,s[i]++}return r}const Xre=(t,e)=>{const n=ou.createTransformer(e),r=dm(t),s=dm(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ek.has(t)&&!s.values.length||ek.has(e)&&!r.values.length?Hre(t,e):Hm(XP(Kre(r,s),s.values),n):Zb(t,e)};function YP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$r(t,e,n):bC(t)(t,e)}function Yre(t,e,n){const r=[],s=n||YP,o=t.length-1;for(let i=0;i<o;i++){let a=s(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||fi:e;a=Hm(l,a)}r.push(a)}return r}function Zre(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(q3(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const i=Yre(e,r,s),a=i.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Tf(t[u],t[u+1],c);return i[u](h)};return n?c=>l(ic(t[0],t[o-1],c)):l}function Qre(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Tf(0,e,r);t.push($r(n,1,s))}}function Jre(t){const e=[0];return Qre(e,t.length-1),e}function ese(t,e){return t.map(n=>n*e)}function tse(t,e){return t.map(()=>e||KP).splice(0,t.length-1)}function Qb({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Bre(r)?r.map(u8):u8(r),o={done:!1,value:e[0]},i=ese(n&&n.length===e.length?n:Jre(e),t),a=Zre(i,e,{ease:Array.isArray(s)?s:tse(e,s)});return{calculatedDuration:t,next:l=>(o.value=a(l),o.done=l>=t,o)}}const nse=t=>{const e=({timestamp:n})=>t(n);return{start:()=>mr.update(e,!0),stop:()=>su(e),now:()=>Gs.isProcessing?Gs.timestamp:nl.now()}},rse={decay:l8,inertia:l8,tween:Qb,keyframes:Qb,spring:qP},sse=t=>t/100;class xC extends jP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,i=(s==null?void 0:s.KeyframeResolver)||dC,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new i(o,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:i=0}=this.options,a=gC(n)?n:rse[n]||Qb;let l,c;a!==Qb&&typeof e[0]!="number"&&(l=Hm(sse,YP(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});o==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=GP(u));const{calculatedDuration:h}=u,p=h+s,m=p*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:j}=this.options;return{done:!0,value:j[j.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return o.next(0);const{delay:p,repeat:m,repeatType:g,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-p*(this.speed>=0?1:-1),S=this.speed>=0?k<0:k>u;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let $=this.currentTime,T=o;if(m){const j=Math.min(this.currentTime,u)/h;let W=Math.floor(j),R=j%1;!R&&j>=1&&(R=1),R===1&&W--,W=Math.min(W,m+1),!!(W%2)&&(g==="reverse"?(R=1-R,x&&(R-=x/h)):g==="mirror"&&(T=i)),$=ic(0,1,R)*h}const E=S?{done:!1,value:l[0]}:T.next($);a&&(E.value=a(E.value));let{done:F}=E;!S&&c!==null&&(F=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return V&&s!==void 0&&(E.value=f2(l,this.options,s)),w&&w(E.value),V&&this.finish(),E}get duration(){const{resolved:e}=this;return e?Zl(e.calculatedDuration):0}get time(){return Zl(this.currentTime)}set time(e){e=Yl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Zl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nse,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ose=new Set(["opacity","clipPath","filter","transform"]);function vC(t){let e;return()=>(e===void 0&&(e=t()),e)}const ise={linearEasing:void 0};function ase(t,e){const n=vC(t);return()=>{var r;return(r=ise[e])!==null&&r!==void 0?r:n()}}const Jb=ase(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function ZP(t){return!!(typeof t=="function"&&Jb()||!t||typeof t=="string"&&(t in tk||Jb())||yC(t)||Array.isArray(t)&&t.every(ZP))}const I0=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,tk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:I0([0,.65,.55,1]),circOut:I0([.55,0,1,.45]),backIn:I0([.31,.01,.66,-.59]),backOut:I0([.33,1.53,.69,.99])};function QP(t,e){if(t)return typeof t=="function"&&Jb()?WP(t,e):yC(t)?I0(t):Array.isArray(t)?t.map(n=>QP(n,e)||tk.easeOut):tk[t]}function lse(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:i="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=QP(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function f8(t,e){t.timeline=e,t.onfinish=null}const cse=vC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ex=10,use=2e4;function dse(t){return gC(t.type)||t.type==="spring"||!ZP(t.ease)}function hse(t,e){const n=new xC({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<use;)r=n.sample(o),s.push(r.value),o+=ex;return{times:void 0,keyframes:s,duration:o-ex,ease:"linear"}}const JP={anticipate:CP,backInOut:kP,circInOut:TP};function fse(t){return t in JP}class p8 extends jP{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new VP(o,(i,a)=>this.onKeyframesResolved(i,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:s=300,times:o,ease:i,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof i=="string"&&Jb()&&fse(i)&&(i=JP[i]),dse(this.options)){const{onComplete:p,onUpdate:m,motionValue:g,element:x,...w}=this.options,k=hse(e,w);e=k.keyframes,e.length===1&&(e[1]=e[0]),s=k.duration,o=k.times,i=k.ease,a="keyframes"}const h=lse(l.owner.current,c,e,{...this.options,duration:s,times:o,ease:i});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(f8(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;l.set(f2(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:o,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Zl(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Zl(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Yl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return fi;const{animation:r}=n;f8(r,e)}return fi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:i,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:p,...m}=this.options,g=new xC({...m,keyframes:r,duration:s,type:o,ease:i,times:a,isGenerator:!0}),x=Yl(this.time);c.setWithVelocity(g.sample(x-ex).value,g.sample(x).value,ex)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:i,type:a}=e;return cse()&&r&&ose.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&o!=="mirror"&&i!==0&&a!=="inertia"}}const pse=vC(()=>window.ScrollTimeline!==void 0);class mse{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>pse()&&s.attachTimeline?s.attachTimeline(e):n(s));return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function gse({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:i,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const wC=(t,e,n,r={},s,o)=>i=>{const a=aC(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Yl(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:s};gse(a)||(u={...u,...Vne(t,u)}),u.duration&&(u.duration=Yl(u.duration)),u.repeatDelay&&(u.repeatDelay=Yl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const p=f2(u.keyframes,a);if(p!==void 0)return mr.update(()=>{u.onUpdate(p),u.onComplete()}),new mse([])}return!o&&p8.supports(u)?new p8(u):new xC(u)},yse=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),bse=t=>G3(t)?t[t.length-1]||0:t;function kC(t,e){t.indexOf(e)===-1&&t.push(e)}function CC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class SC{constructor(){this.subscriptions=[]}add(e){return kC(this.subscriptions,e),()=>CC(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const i=this.subscriptions[o];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const m8=30,xse=t=>!isNaN(parseFloat(t));class vse{constructor(e,n={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=nl.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xse(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SC);const r=this.events[e].add(n);return e==="change"?()=>{r(),mr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>m8)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,m8);return UP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hm(t,e){return new vse(t,e)}function wse(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,hm(n))}function kse(t,e){const n=h2(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const i in o){const a=bse(o[i]);wse(t,i,a)}}const TC=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cse="framerAppearId",eM="data-"+TC(Cse);function tM(t){return t.props[eM]}const go=t=>!!(t&&t.getVelocity);function Sse(t){return!!(go(t)&&t.add)}function nk(t,e){const n=t.getValue("willChange");if(Sse(n))return n.add(e)}function Tse({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nM(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:i=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const p=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=l[h];if(m===void 0||u&&Tse(u,h))continue;const g={delay:n,...aC(i||{},h)};let x=!1;if(window.MotionHandoffAnimation){const k=tM(t);if(k){const S=window.MotionHandoffAnimation(k,h,mr);S!==null&&(g.startTime=S,x=!0)}}nk(t,h),p.start(wC(h,p,m,t.shouldReduceMotion&&Bd.has(h)?{type:!1}:g,t,x));const w=p.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{mr.update(()=>{a&&kse(t,a)})}),c}function rk(t,e,n={}){var r;const s=h2(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const i=s?()=>Promise.all(nM(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:p}=o;return Ise(t,e,u+c,h,p,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function Ise(t,e,n=0,r=0,s=1,o){const i=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort($se).forEach((c,u)=>{c.notify("AnimationStart",e),i.push(rk(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function $se(t,e){return t.sortNodePosition(e)}function Nse(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>rk(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=rk(t,e,n);else{const s=typeof e=="function"?h2(t,e,n.custom):e;r=Promise.all(nM(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Ese=iC.length;function rM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?rM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ese;n++){const r=iC[n],s=t.props[r];(cm(s)||s===!1)&&(e[r]=s)}return e}const Rse=[...oC].reverse(),Ase=oC.length;function Dse(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Nse(t,n,r)))}function Pse(t){let e=Dse(t),n=g8(),r=!0;const s=l=>(c,u)=>{var h;const p=h2(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:g,...x}=p;c={...c,...x,...g}}return c};function o(l){e=l(t)}function i(l){const{props:c}=t,u=rM(t.parent)||{},h=[],p=new Set;let m={},g=1/0;for(let w=0;w<Ase;w++){const k=Rse[w],S=n[k],$=c[k]!==void 0?c[k]:u[k],T=cm($),E=k===l?S.isActive:null;E===!1&&(g=w);let F=$===u[k]&&$!==c[k]&&T;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),S.protectedKeys={...m},!S.isActive&&E===null||!$&&!S.prevProp||d2($)||typeof $=="boolean")continue;const V=Mse(S.prevProp,$);let j=V||k===l&&S.isActive&&!F&&T||w>g&&T,W=!1;const R=Array.isArray($)?$:[$];let O=R.reduce(s(k),{});E===!1&&(O={});const{prevResolvedValues:U={}}=S,K={...U,...O},G=ne=>{j=!0,p.has(ne)&&(W=!0,p.delete(ne)),S.needsAnimating[ne]=!0;const J=t.getValue(ne);J&&(J.liveStyle=!1)};for(const ne in K){const J=O[ne],re=U[ne];if(m.hasOwnProperty(ne))continue;let se=!1;G3(J)&&G3(re)?se=!gP(J,re):se=J!==re,se?J!=null?G(ne):p.add(ne):J!==void 0&&p.has(ne)?G(ne):S.protectedKeys[ne]=!0}S.prevProp=$,S.prevResolvedValues=O,S.isActive&&(m={...m,...O}),r&&t.blockInitialAnimation&&(j=!1),j&&(!(F&&V)||W)&&h.push(...R.map(ne=>({animation:ne,options:{type:k}})))}if(p.size){const w={};p.forEach(k=>{const S=t.getBaseTarget(k),$=t.getValue(k);$&&($.liveStyle=!0),w[k]=S??null}),h.push({animation:w})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const h=i(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=g8(),r=!0}}}function Mse(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gP(e,t):!1}function Zu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function g8(){return{animate:Zu(!0),whileInView:Zu(),whileHover:Zu(),whileTap:Zu(),whileDrag:Zu(),whileFocus:Zu(),exit:Zu()}}class pu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ose extends pu{constructor(e){super(e),e.animationState||(e.animationState=Pse(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();d2(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Fse=0;class zse extends pu{constructor(){super(...arguments),this.id=Fse++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Lse={animation:{Feature:Ose},exit:{Feature:zse}},ga={x:!1,y:!1};function sM(){return ga.x||ga.y}function _se(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function oM(t,e){const n=_se(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function y8(t){return e=>{e.pointerType==="touch"||sM()||t(e)}}function Bse(t,e,n={}){const[r,s,o]=oM(t,n),i=y8(a=>{const{target:l}=a,c=e(a);if(!c||!l)return;const u=y8(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",i,s)}),o}const IC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$0=new WeakSet;function b8(t){return e=>{e.key==="Enter"&&t(e)}}function W4(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Vse=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=b8(()=>{if($0.has(n))return;W4(n,"down");const s=b8(()=>{W4(n,"up")}),o=()=>W4(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)},jse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Wse(t){return jse.has(t.tagName)||t.tabIndex!==-1}const iM=(t,e)=>e?t===e?!0:iM(t,e.parentElement):!1;function x8(t){return IC(t)&&!sM()}function Use(t,e,n={}){const[r,s,o]=oM(t,n),i=a=>{const l=a.currentTarget;if(!x8(a)||$0.has(l))return;$0.add(l);const c=e(a),u=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!x8(m)||!$0.has(l))&&($0.delete(l),c&&c(m,{success:g}))},h=m=>{u(m,n.useGlobalTarget||iM(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{Wse(a)||(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,s),a.addEventListener("focus",c=>Vse(c,s),s)}),o}function Hse(t){return t==="x"||t==="y"?ga[t]?null:(ga[t]=!0,()=>{ga[t]=!1}):ga.x||ga.y?null:(ga.x=ga.y=!0,()=>{ga.x=ga.y=!1})}function Gm(t){return{point:{x:t.pageX,y:t.pageY}}}const Gse=t=>e=>IC(e)&&t(e,Gm(e));function fm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function G0(t,e,n,r){return fm(t,e,Gse(n),r)}const v8=(t,e)=>Math.abs(t-e);function qse(t,e){const n=v8(t.x,e.x),r=v8(t.y,e.y);return Math.sqrt(n**2+r**2)}class aM{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=H4(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=qse(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=h,{timestamp:x}=Gs;this.history.push({...g,timestamp:x});const{onStart:w,onMove:k}=this.handlers;p||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=U4(p,this.transformPagePoint),mr.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=H4(h.type==="pointercancel"?this.lastMoveEventInfo:U4(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,w),g&&g(h,w)},!IC(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const i=Gm(e),a=U4(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,H4(a,this.history)),this.removeListeners=Hm(G0(this.contextWindow,"pointermove",this.handlePointerMove),G0(this.contextWindow,"pointerup",this.handlePointerUp),G0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),su(this.updatePoint)}}function U4(t,e){return e?{point:e(t.point)}:t}function w8(t,e){return{x:t.x-e.x,y:t.y-e.y}}function H4({point:t},e){return{point:t,delta:w8(t,lM(e)),offset:w8(t,Kse(e)),velocity:Xse(e,.1)}}function Kse(t){return t[0]}function lM(t){return t[t.length-1]}function Xse(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=lM(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Yl(e)));)n--;if(!r)return{x:0,y:0};const o=Zl(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Jh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const cM=1e-4,Yse=1-cM,Zse=1+cM,uM=.01,Qse=0-uM,Jse=0+uM;function yi(t){return t.max-t.min}function eoe(t,e,n){return Math.abs(t-e)<=n}function k8(t,e,n,r=.5){t.origin=r,t.originPoint=$r(e.min,e.max,t.origin),t.scale=yi(n)/yi(e),t.translate=$r(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Yse&&t.scale<=Zse||isNaN(t.scale))&&(t.scale=1),(t.translate>=Qse&&t.translate<=Jse||isNaN(t.translate))&&(t.translate=0)}function q0(t,e,n,r){k8(t.x,e.x,n.x,r?r.originX:void 0),k8(t.y,e.y,n.y,r?r.originY:void 0)}function C8(t,e,n){t.min=n.min+e.min,t.max=t.min+yi(e)}function toe(t,e,n){C8(t.x,e.x,n.x),C8(t.y,e.y,n.y)}function S8(t,e,n){t.min=e.min-n.min,t.max=t.min+yi(e)}function K0(t,e,n){S8(t.x,e.x,n.x),S8(t.y,e.y,n.y)}function noe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$r(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$r(n,t,r.max):Math.min(t,n)),t}function T8(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function roe(t,{top:e,left:n,bottom:r,right:s}){return{x:T8(t.x,n,s),y:T8(t.y,e,r)}}function I8(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function soe(t,e){return{x:I8(t.x,e.x),y:I8(t.y,e.y)}}function ooe(t,e){let n=.5;const r=yi(t),s=yi(e);return s>r?n=Tf(e.min,e.max-r,t.min):r>s&&(n=Tf(t.min,t.max-s,e.min)),ic(0,1,n)}function ioe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const sk=.35;function aoe(t=sk){return t===!1?t=0:t===!0&&(t=sk),{x:$8(t,"left","right"),y:$8(t,"top","bottom")}}function $8(t,e,n){return{min:N8(t,e),max:N8(t,n)}}function N8(t,e){return typeof t=="number"?t:t[e]||0}const E8=()=>({translate:0,scale:1,origin:0,originPoint:0}),ef=()=>({x:E8(),y:E8()}),R8=()=>({min:0,max:0}),Gr=()=>({x:R8(),y:R8()});function Li(t){return[t("x"),t("y")]}function dM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function loe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function coe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function G4(t){return t===void 0||t===1}function ok({scale:t,scaleX:e,scaleY:n}){return!G4(t)||!G4(e)||!G4(n)}function sd(t){return ok(t)||hM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hM(t){return A8(t.x)||A8(t.y)}function A8(t){return t&&t!=="0%"}function tx(t,e,n){const r=t-n,s=e*r;return n+s}function D8(t,e,n,r,s){return s!==void 0&&(t=tx(t,s,r)),tx(t,n,r)+e}function ik(t,e=0,n=1,r,s){t.min=D8(t.min,e,n,r,s),t.max=D8(t.max,e,n,r,s)}function fM(t,{x:e,y:n}){ik(t.x,e.translate,e.scale,e.originPoint),ik(t.y,n.translate,n.scale,n.originPoint)}const P8=.999999999999,M8=1.0000000000001;function uoe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,i;for(let a=0;a<s;a++){o=n[a],i=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nf(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,fM(t,i)),r&&sd(o.latestValues)&&nf(t,o.latestValues))}e.x<M8&&e.x>P8&&(e.x=1),e.y<M8&&e.y>P8&&(e.y=1)}function tf(t,e){t.min=t.min+e,t.max=t.max+e}function O8(t,e,n,r,s=.5){const o=$r(t.min,t.max,s);ik(t,e,n,o,r)}function nf(t,e){O8(t.x,e.x,e.scaleX,e.scale,e.originX),O8(t.y,e.y,e.scaleY,e.scale,e.originY)}function pM(t,e){return dM(coe(t.getBoundingClientRect(),e))}function doe(t,e,n){const r=pM(t,n),{scroll:s}=e;return s&&(tf(r.x,s.offset.x),tf(r.y,s.offset.y)),r}const mM=({current:t})=>t?t.ownerDocument.defaultView:null,hoe=new WeakMap;class foe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gm(u).point)},o=(u,h)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Hse(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Li(w=>{let k=this.getAxisMotionValue(w).get()||0;if(tl.test(k)){const{projection:S}=this.visualElement;if(S&&S.layout){const $=S.layout.layoutBox[w];$&&(k=yi($)*(parseFloat(k)/100))}}this.originPoint[w]=k}),g&&mr.postRender(()=>g(u,h)),nk(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},i=(u,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=h;if(m&&this.currentDirection===null){this.currentDirection=poe(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),x&&x(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Li(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new aM(e,{onSessionStart:s,onStart:o,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mM(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&mr.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!zy(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=noe(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Jh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=roe(s.layoutBox,n):this.constraints=!1,this.elastic=aoe(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Li(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=ioe(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Jh(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=doe(r,s.root,this.visualElement.getTransformPagePoint());let i=soe(s.layout.layoutBox,o);if(n){const a=n(loe(i));this.hasMutatedConstraints=!!a,a&&(i=dM(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Li(u=>{if(!zy(u,n,this.currentDirection))return;let h=l[u]||{};i&&(h={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return nk(this.visualElement,e),r.start(wC(e,r,0,n,this.visualElement,!1))}stopAnimation(){Li(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Li(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Li(n=>{const{drag:r}=this.getProps();if(!zy(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:a}=s.layout.layoutBox[n];o.set(e[n]-$r(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Jh(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Li(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();s[i]=ooe({min:l,max:l},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Li(i=>{if(!zy(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set($r(l,c,s[i]))})}addListeners(){if(!this.visualElement.current)return;hoe.set(this.visualElement,this);const e=this.visualElement.current,n=G0(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Jh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),mr.read(r);const i=fm(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Li(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:i=sk,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function zy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function poe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class moe extends pu{constructor(e){super(e),this.removeGroupControls=fi,this.removeListeners=fi,this.controls=new foe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fi}unmount(){this.removeGroupControls(),this.removeListeners()}}const F8=t=>(e,n)=>{t&&mr.postRender(()=>t(e,n))};class goe extends pu{constructor(){super(...arguments),this.removePointerDownListener=fi}onPointerDown(e){this.session=new aM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:F8(e),onStart:F8(n),onMove:r,onEnd:(o,i)=>{delete this.session,s&&mr.postRender(()=>s(o,i))}}}mount(){this.removePointerDownListener=G0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $C=D.createContext(null);function yoe(){const t=D.useContext($C);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=D.useId();D.useEffect(()=>r(s),[]);const o=D.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,o]:[!0]}const gM=D.createContext({}),yM=D.createContext({}),ub={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z8(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const b0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Vt.test(t))t=parseFloat(t);else return t;const n=z8(t,e.target.x),r=z8(t,e.target.y);return`${n}% ${r}%`}},boe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ou.parse(t);if(s.length>5)return r;const o=ou.createTransformer(t),i=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+i]/=a,s[1+i]/=l;const c=$r(a,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=c),typeof s[3+i]=="number"&&(s[3+i]/=c),o(s)}},nx={};function xoe(t){Object.assign(nx,t)}const{schedule:NC,cancel:B8e}=yP(queueMicrotask,!1);class voe extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;xoe(woe),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ub.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,s||e.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||mr.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),NC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bM(t){const[e,n]=yoe(),r=D.useContext(gM);return z.jsx(voe,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(yM),isPresent:e,safeToRemove:n})}const woe={borderRadius:{...b0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:b0,borderTopRightRadius:b0,borderBottomLeftRadius:b0,borderBottomRightRadius:b0,boxShadow:boe},xM=["TopLeft","TopRight","BottomLeft","BottomRight"],koe=xM.length,L8=t=>typeof t=="string"?parseFloat(t):t,_8=t=>typeof t=="number"||Vt.test(t);function Coe(t,e,n,r,s,o){s?(t.opacity=$r(0,n.opacity!==void 0?n.opacity:1,Soe(r)),t.opacityExit=$r(e.opacity!==void 0?e.opacity:1,0,Toe(r))):o&&(t.opacity=$r(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<koe;i++){const a=`border${xM[i]}Radius`;let l=B8(e,a),c=B8(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||_8(l)===_8(c)?(t[a]=Math.max($r(L8(l),L8(c),r),0),(tl.test(c)||tl.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$r(e.rotate||0,n.rotate||0,r))}function B8(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Soe=vM(0,.5,SP),Toe=vM(.5,.95,fi);function vM(t,e,n){return r=>r<t?0:r>e?1:n(Tf(t,e,r))}function V8(t,e){t.min=e.min,t.max=e.max}function Mi(t,e){V8(t.x,e.x),V8(t.y,e.y)}function j8(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function W8(t,e,n,r,s){return t-=e,t=tx(t,1/n,r),s!==void 0&&(t=tx(t,1/s,r)),t}function Ioe(t,e=0,n=1,r=.5,s,o=t,i=t){if(tl.test(e)&&(e=parseFloat(e),e=$r(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=$r(o.min,o.max,r);t===o&&(a-=e),t.min=W8(t.min,e,n,a,s),t.max=W8(t.max,e,n,a,s)}function U8(t,e,[n,r,s],o,i){Ioe(t,e[n],e[r],e[s],e.scale,o,i)}const $oe=["x","scaleX","originX"],Noe=["y","scaleY","originY"];function H8(t,e,n,r){U8(t.x,e,$oe,n?n.x:void 0,r?r.x:void 0),U8(t.y,e,Noe,n?n.y:void 0,r?r.y:void 0)}function G8(t){return t.translate===0&&t.scale===1}function wM(t){return G8(t.x)&&G8(t.y)}function q8(t,e){return t.min===e.min&&t.max===e.max}function Eoe(t,e){return q8(t.x,e.x)&&q8(t.y,e.y)}function K8(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kM(t,e){return K8(t.x,e.x)&&K8(t.y,e.y)}function X8(t){return yi(t.x)/yi(t.y)}function Y8(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Roe{constructor(){this.members=[]}add(e){kC(this.members,e),e.scheduleRender()}remove(e){if(CC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Aoe(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((s||o||i)&&(r=`translate3d(${s}px, ${o}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:p,skewX:m,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Doe=(t,e)=>t.depth-e.depth;class Poe{constructor(){this.children=[],this.isDirty=!1}add(e){kC(this.children,e),this.isDirty=!0}remove(e){CC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Doe),this.isDirty=!1,this.children.forEach(e)}}function db(t){const e=go(t)?t.get():t;return yse(e)?e.toValue():e}function Moe(t,e){const n=nl.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(su(r),t(o-e))};return mr.read(r,!0),()=>su(r)}function Ooe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Foe(t,e,n){const r=go(t)?t:hm(t);return r.start(wC("",r,e,n)),r.animation}const od={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},N0=typeof window<"u"&&window.MotionDebug!==void 0,q4=["","X","Y","Z"],zoe={visibility:"hidden"},Z8=1e3;let Loe=0;function K4(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function CM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=tM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mr,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&CM(r)}function SM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},a=e==null?void 0:e()){this.id=Loe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,N0&&(od.totalNodes=od.resolvedTargetDeltas=od.recalculatedProjection=0),this.nodes.forEach(Voe),this.nodes.forEach(Goe),this.nodes.forEach(qoe),this.nodes.forEach(joe),N0&&window.MotionDebug.record(od)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Poe)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new SC),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ooe(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Moe(p,250),ub.hasAnimatedSinceResize&&(ub.hasAnimatedSinceResize=!1,this.nodes.forEach(J8))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Qoe,{onLayoutAnimationStart:w,onLayoutAnimationComplete:k}=u.getProps(),S=!this.targetLayout||!kM(this.targetLayout,g)||m,$=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||$||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,$);const T={...aC(x,"layout"),onPlay:w,onComplete:k};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else p||J8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,su(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Koe),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Q8);return}this.isUpdating||this.nodes.forEach(Uoe),this.isUpdating=!1,this.nodes.forEach(Hoe),this.nodes.forEach(_oe),this.nodes.forEach(Boe),this.clearAllSnapshots();const a=nl.now();Gs.delta=ic(0,1e3/60,a-Gs.timestamp),Gs.timestamp=a,Gs.isProcessing=!0,L4.update.process(Gs),L4.preRender.process(Gs),L4.render.process(Gs),Gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,NC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Woe),this.sharedNodes.forEach(Xoe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!wM(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;i&&(a||sd(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),Joe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Gr();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(eie))){const{scroll:u}=this.root;u&&(tf(l.x,u.offset.x),tf(l.y,u.offset.y))}return l}removeElementScroll(i){var a;const l=Gr();if(Mi(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:p}=u;u!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Mi(l,i),tf(l.x,h.offset.x),tf(l.y,h.offset.y))}return l}applyTransform(i,a=!1){const l=Gr();Mi(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&nf(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),sd(u.latestValues)&&nf(l,u.latestValues)}return sd(this.latestValues)&&nf(l,this.latestValues),l}removeTransform(i){const a=Gr();Mi(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!sd(c.latestValues))continue;ok(c.latestValues)&&c.updateSnapshot();const u=Gr(),h=c.measurePageBox();Mi(u,h),H8(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return sd(this.latestValues)&&H8(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Gs.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gr(),this.relativeTargetOrigin=Gr(),K0(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gr(),this.targetWithTransforms=Gr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),toe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mi(this.target,this.layout.layoutBox),fM(this.target,this.targetDelta)):Mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gr(),this.relativeTargetOrigin=Gr(),K0(this.relativeTargetOrigin,this.target,m.target),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}N0&&od.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ok(this.parent.latestValues)||hM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Mi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;uoe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Gr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(j8(this.prevProjectionDelta.x,this.projectionDelta.x),j8(this.prevProjectionDelta.y,this.projectionDelta.y)),q0(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Y8(this.projectionDelta.x,this.prevProjectionDelta.x)||!Y8(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),N0&&od.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ef(),this.projectionDelta=ef(),this.projectionDeltaWithTransform=ef()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=ef();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Gr(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=m!==g,w=this.getStack(),k=!w||w.members.length<=1,S=!!(x&&!k&&this.options.crossfade===!0&&!this.path.some(Zoe));this.animationProgress=0;let $;this.mixTargetDelta=T=>{const E=T/1e3;eN(h.x,i.x,E),eN(h.y,i.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(K0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Yoe(this.relativeTarget,this.relativeTargetOrigin,p,E),$&&Eoe(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=Gr()),Mi($,this.relativeTarget)),x&&(this.animationValues=u,Coe(u,c,this.latestValues,E,S,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(su(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mr.update(()=>{ub.hasAnimatedSinceResize=!0,this.currentAnimation=Foe(0,Z8,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Z8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&TM(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Gr();const h=yi(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+h;const p=yi(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+p}Mi(a,l),nf(a,u),q0(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Roe),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&K4("z",i,c,this.animationValues);for(let u=0;u<q4.length;u++)K4(`rotate${q4[u]}`,i,c,this.animationValues),K4(`skew${q4[u]}`,i,c,this.animationValues);i.render();for(const u in c)i.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zoe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=db(i==null?void 0:i.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=db(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!sd(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Aoe(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in nx){if(p[x]===void 0)continue;const{correct:w,applyTo:k}=nx[x],S=c.transform==="none"?p[x]:w(p[x],h);if(k){const $=k.length;for(let T=0;T<$;T++)c[k[T]]=S}else c[x]=S}return this.options.layoutId&&(c.pointerEvents=h===this?db(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Q8),this.root.sharedNodes.clear()}}}function _oe(t){t.updateLayout()}function Boe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,i=n.source!==t.layout.source;o==="size"?Li(h=>{const p=i?n.measuredBox[h]:n.layoutBox[h],m=yi(p);p.min=r[h].min,p.max=p.min+m}):TM(o,n.layoutBox,r)&&Li(h=>{const p=i?n.measuredBox[h]:n.layoutBox[h],m=yi(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=ef();q0(a,r,n.layoutBox);const l=ef();i?q0(l,t.applyTransform(s,!0),n.measuredBox):q0(l,r,n.layoutBox);const c=!wM(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const g=Gr();K0(g,n.layoutBox,p.layoutBox);const x=Gr();K0(x,r,m.layoutBox),kM(g,x)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Voe(t){N0&&od.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function joe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Woe(t){t.clearSnapshot()}function Q8(t){t.clearMeasurements()}function Uoe(t){t.isLayoutDirty=!1}function Hoe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function J8(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Goe(t){t.resolveTargetDelta()}function qoe(t){t.calcProjection()}function Koe(t){t.resetSkewAndRotation()}function Xoe(t){t.removeLeadSnapshot()}function eN(t,e,n){t.translate=$r(e.translate,0,n),t.scale=$r(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function tN(t,e,n,r){t.min=$r(e.min,n.min,r),t.max=$r(e.max,n.max,r)}function Yoe(t,e,n,r){tN(t.x,e.x,n.x,r),tN(t.y,e.y,n.y,r)}function Zoe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Qoe={duration:.45,ease:[.4,0,.1,1]},nN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rN=nN("applewebkit/")&&!nN("chrome/")?Math.round:fi;function sN(t){t.min=rN(t.min),t.max=rN(t.max)}function Joe(t){sN(t.x),sN(t.y)}function TM(t,e,n){return t==="position"||t==="preserve-aspect"&&!eoe(X8(e),X8(n),.2)}function eie(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const tie=SM({attachResizeListener:(t,e)=>fm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X4={current:void 0},IM=SM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!X4.current){const t=new tie({});t.mount(window),t.setOptions({layoutScroll:!0}),X4.current=t}return X4.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nie={pan:{Feature:goe},drag:{Feature:moe,ProjectionNode:IM,MeasureLayout:bM}};function oN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&mr.postRender(()=>o(e,Gm(e)))}class rie extends pu{mount(){const{current:e}=this.node;e&&(this.unmount=Bse(e,n=>(oN(this.node,n,"Start"),r=>oN(this.node,r,"End"))))}unmount(){}}class sie extends pu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hm(fm(this.node.current,"focus",()=>this.onFocus()),fm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function iN(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&mr.postRender(()=>o(e,Gm(e)))}class oie extends pu{mount(){const{current:e}=this.node;e&&(this.unmount=Use(e,n=>(iN(this.node,n,"Start"),(r,{success:s})=>iN(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ak=new WeakMap,Y4=new WeakMap,iie=t=>{const e=ak.get(t.target);e&&e(t)},aie=t=>{t.forEach(iie)};function lie({root:t,...e}){const n=t||document;Y4.has(n)||Y4.set(n,{});const r=Y4.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(aie,{root:t,...e})),r[s]}function cie(t,e,n){const r=lie(e);return ak.set(t,n),r.observe(t),()=>{ak.delete(t),r.unobserve(t)}}const uie={some:0,all:1};class die extends pu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:uie[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),p=c?u:h;p&&p(l)};return cie(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hie(e,n))&&this.startObserver()}unmount(){}}function hie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const fie={inView:{Feature:die},tap:{Feature:oie},focus:{Feature:sie},hover:{Feature:rie}},pie={layout:{ProjectionNode:IM,MeasureLayout:bM}},$M=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),p2=D.createContext({}),EC=typeof window<"u",mie=EC?D.useLayoutEffect:D.useEffect,NM=D.createContext({strict:!1});function gie(t,e,n,r,s){var o,i;const{visualElement:a}=D.useContext(p2),l=D.useContext(NM),c=D.useContext($C),u=D.useContext($M).reducedMotion,h=D.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=h.current,m=D.useContext(yM);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&yie(h.current,n,s,m);const g=D.useRef(!1);D.useInsertionEffect(()=>{p&&g.current&&p.update(n,c)});const x=n[eM],w=D.useRef(!!x&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,x))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,x)));return mie(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),NC.render(p.render),w.current&&p.animationState&&p.animationState.animateChanges())}),D.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,x)}),w.current=!1))}),p}function yie(t,e,n,r){const{layoutId:s,layout:o,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EM(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!i||a&&Jh(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function EM(t){if(t)return t.options.allowProjection!==!1?t.projection:EM(t.parent)}function bie(t,e,n){return D.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Jh(n)&&(n.current=r))},[e])}function m2(t){return d2(t.animate)||iC.some(e=>cm(t[e]))}function RM(t){return!!(m2(t)||t.variants)}function xie(t,e){if(m2(t)){const{initial:n,animate:r}=t;return{initial:n===!1||cm(n)?n:void 0,animate:cm(r)?r:void 0}}return t.inherit!==!1?e:{}}function vie(t){const{initial:e,animate:n}=xie(t,D.useContext(p2));return D.useMemo(()=>({initial:e,animate:n}),[aN(e),aN(n)])}function aN(t){return Array.isArray(t)?t.join(" "):t}const lN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},If={};for(const t in lN)If[t]={isEnabled:e=>lN[t].some(n=>!!e[n])};function wie(t){for(const e in t)If[e]={...If[e],...t[e]}}const kie=Symbol.for("motionComponentSymbol");function Cie({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&wie(t);function o(a,l){let c;const u={...D.useContext($M),...a,layoutId:Sie(a)},{isStatic:h}=u,p=vie(a),m=r(a,h);if(!h&&EC){Tie();const g=Iie(u);c=g.MeasureLayout,p.visualElement=gie(s,m,u,e,g.ProjectionNode)}return z.jsxs(p2.Provider,{value:p,children:[c&&p.visualElement?z.jsx(c,{visualElement:p.visualElement,...u}):null,n(s,a,bie(m,p.visualElement,l),m,h,p.visualElement)]})}const i=D.forwardRef(o);return i[kie]=s,i}function Sie({layoutId:t}){const e=D.useContext(gM).id;return e&&t!==void 0?e+"-"+t:t}function Tie(t,e){D.useContext(NM).strict}function Iie(t){const{drag:e,layout:n}=If;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $ie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RC(t){return typeof t!="string"||t.includes("-")?!1:!!($ie.indexOf(t)>-1||/[A-Z]/u.test(t))}function AM(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const DM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PM(t,e,n,r){AM(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(DM.has(s)?s:TC(s),e.attrs[s])}function MM(t,{layout:e,layoutId:n}){return Bd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!nx[t]||t==="opacity")}function AC(t,e,n){var r;const{style:s}=t,o={};for(const i in s)(go(s[i])||e.style&&go(e.style[i])||MM(i,t)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[i]=s[i]);return o}function OM(t,e,n){const r=AC(t,e,n);for(const s in t)if(go(t[s])||go(e[s])){const o=jm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function Nie(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}function Eie({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,o){const i={latestValues:Rie(r,s,o,t),renderState:e()};return n&&(i.mount=a=>n(r,a,i)),i}const FM=t=>(e,n)=>{const r=D.useContext(p2),s=D.useContext($C),o=()=>Eie(t,e,r,s);return n?o():Nie(o)};function Rie(t,e,n,r){const s={},o=r(t,{});for(const p in o)s[p]=db(o[p]);let{initial:i,animate:a}=t;const l=m2(t),c=RM(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const h=u?a:i;if(h&&typeof h!="boolean"&&!d2(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const g=sC(t,p[m]);if(g){const{transitionEnd:x,transition:w,...k}=g;for(const S in k){let $=k[S];if(Array.isArray($)){const T=u?$.length-1:0;$=$[T]}$!==null&&(s[S]=$)}for(const S in x)s[S]=x[S]}}}return s}const DC=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),zM=()=>({...DC(),attrs:{}}),LM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Aie={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Die=jm.length;function Pie(t,e,n){let r="",s=!0;for(let o=0;o<Die;o++){const i=jm[o],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=LM(a,pC[i]);if(!l){s=!1;const u=Aie[i]||i;r+=`${u}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function PC(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(Bd.has(l)){i=!0;continue}else if(EP(l)){s[l]=c;continue}else{const u=LM(c,pC[l]);l.startsWith("origin")?(a=!0,o[l]=u):r[l]=u}}if(e.transform||(i||n?r.transform=Pie(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}function cN(t,e,n){return typeof t=="string"?t:Vt.transform(e+n*t)}function Mie(t,e,n){const r=cN(e,t.x,t.width),s=cN(n,t.y,t.height);return`${r} ${s}`}const Oie={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fie={offset:"strokeDashoffset",array:"strokeDasharray"};function zie(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?Oie:Fie;t[o.offset]=Vt.transform(-r);const i=Vt.transform(e),a=Vt.transform(n);t[o.array]=`${i} ${a}`}function MC(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(PC(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:g}=t;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(s!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=Mie(g,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&zie(p,i,a,l,!1)}const OC=t=>typeof t=="string"&&t.toLowerCase()==="svg",Lie={useVisualState:FM({scrapeMotionValuesFromProps:OM,createRenderState:zM,onMount:(t,e,{renderState:n,latestValues:r})=>{mr.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),mr.render(()=>{MC(n,r,OC(e.tagName),t.transformTemplate),PM(e,n)})}})},_ie={useVisualState:FM({scrapeMotionValuesFromProps:AC,createRenderState:DC})};function _M(t,e,n){for(const r in e)!go(e[r])&&!MM(r,n)&&(t[r]=e[r])}function Bie({transformTemplate:t},e){return D.useMemo(()=>{const n=DC();return PC(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Vie(t,e){const n=t.style||{},r={};return _M(r,n,t),Object.assign(r,Bie(t,e)),r}function jie(t,e){const n={},r=Vie(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Wie=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Wie.has(t)}let BM=t=>!rx(t);function Uie(t){t&&(BM=e=>e.startsWith("on")?!rx(e):t(e))}try{Uie(require("@emotion/is-prop-valid").default)}catch{}function Hie(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(BM(s)||n===!0&&rx(s)||!e&&!rx(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Gie(t,e,n,r){const s=D.useMemo(()=>{const o=zM();return MC(o,e,OC(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_M(o,t.style,t),s.style={...o,...s.style}}return s}function qie(t=!1){return(n,r,s,{latestValues:o},i)=>{const l=(RC(n)?Gie:jie)(r,o,i,n),c=Hie(r,typeof n=="string",t),u=n!==D.Fragment?{...c,...l,ref:s}:{},{children:h}=r,p=D.useMemo(()=>go(h)?h.get():h,[h]);return D.createElement(n,{...u,children:p})}}function Kie(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const i={...RC(r)?Lie:_ie,preloadedFeatures:t,useRender:qie(s),createVisualElement:e,Component:r};return Cie(i)}}const lk={current:null},VM={current:!1};function Xie(){if(VM.current=!0,!!EC)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lk.current=t.matches;t.addListener(e),e()}else lk.current=!1}function Yie(t,e,n){for(const r in e){const s=e[r],o=n[r];if(go(s))t.addValue(r,s);else if(go(o))t.addValue(r,hm(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(r);t.addValue(r,hm(i!==void 0?i:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const uN=new WeakMap,Zie=[...DP,uo,ou],Qie=t=>Zie.find(AP(t)),dN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jie{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=nl.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,mr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=m2(n),this.isVariantNode=RM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];l[p]!==void 0&&go(m)&&m.set(l[p],!1)}}mount(e){this.current=e,uN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VM.current||Xie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uN.delete(this.current),this.projection&&this.projection.unmount(),su(this.notifyUpdate),su(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bd.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&mr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in If){const n=If[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dN.length;r++){const s=dN[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,i=e[o];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Yie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=hm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&($P(s)||IP(s))?s=parseFloat(s):!Qie(s)&&ou.test(n)&&(s=BP(e,n)),this.setBaseTarget(e,go(s)?s.get():s)),go(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const i=sC(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(s=i[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!go(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SC),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class jM extends Jie{constructor(){super(...arguments),this.KeyframeResolver=VP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;go(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eae(t){return window.getComputedStyle(t)}class tae extends jM{constructor(){super(...arguments),this.type="html",this.renderInstance=AM}readValueFromInstance(e,n){if(Bd.has(n)){const r=mC(n);return r&&r.default||0}else{const r=eae(e),s=(EP(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pM(e,n)}build(e,n,r){PC(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return AC(e,n,r)}}class nae extends jM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bd.has(n)){const r=mC(n);return r&&r.default||0}return n=DM.has(n)?n:TC(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return OM(e,n,r)}build(e,n,r){MC(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){PM(e,n,r,s)}mount(e){this.isSVGTag=OC(e.tagName),super.mount(e)}}const rae=(t,e)=>RC(t)?new nae(e):new tae(e,{allowProjection:t!==D.Fragment}),sae=Kie({...Lse,...fie,...nie,...pie},rae),jo=Fne(sae),oae={initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,type:"spring",stiffness:100}},iae=({onTopicSelect:t})=>{const[e,n]=D.useState({}),[r,s]=D.useState(null),[o,i]=D.useState(null),a={root:{base:"h-full w-64",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white px-3 py-4"}},l=u=>{n(h=>{const p={...h,[u]:!h[u]};return p[u]?s(u):u===r&&s(null),p})},c=u=>{t(u)};return z.jsx(jo.div,{className:"w-60 mt-10",...oae,children:z.jsx(U0,{theme:a,children:z.jsx(U0.Items,{children:z.jsx(U0.ItemGroup,{children:aA.map(u=>z.jsx(One,{section:u,isExpanded:e[u.id],isActive:r===u.id,onToggle:()=>l(u.id),onTopicSelect:c,selectedTopic:o},u.id))})})})})},Ly={hidden:{y:50,opacity:0},visible:{y:0,opacity:1}},aae={hover:{scale:1.05},tap:{scale:.95}},_y={duration:.8,ease:"easeOut"},hN=({onNavigate:t})=>{const e=[{title:"1 Dział",desc:"Kompleksowy program nauczania"},{title:"5 Tematów",desc:"Szczegółowo opracowane zagadnienia"},{title:"50+ Zadań",desc:"Praktyczne ćwiczenia z rozwiązaniami"}];return z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[z.jsx(jo.h1,{variants:Ly,initial:"hidden",animate:"visible",transition:_y,className:"text-6xl font-bold text-blueTextColor mt-32",children:"MathPath"}),z.jsx(jo.div,{variants:Ly,initial:"hidden",animate:"visible",transition:{..._y,delay:.2},className:"flex flex-col gap-4 text-center",children:z.jsx("p",{className:"text-base text-gray-600 max-w-3xl",children:"Platforma edukacyjna stworzona, aby pomóc Ci zrozumieć matematykę poprzez interaktywne materiały i praktyczne przykłady"})}),z.jsx(jo.button,{variants:{...Ly,...aae},initial:"hidden",animate:"visible",whileHover:"hover",whileTap:"tap",transition:{..._y,delay:.4},className:`bg-blueBgColor hover:bg-blueBgColor text-white text-base font-semibold 
                   py-4 px-8 rounded-lg transform transition-all duration-200 
                   shadow-lg hover:shadow-xl mt-4`,onClick:()=>t("topics"),children:"Rozpocznij naukę"}),z.jsx("div",{className:"mt-16 grid grid-cols-3 gap-8 text-center w-full",children:e.map((n,r)=>z.jsxs(jo.div,{variants:Ly,initial:"hidden",animate:"visible",transition:{..._y,delay:.6},className:"p-8 bg-blueBgColor bg-opacity-10 rounded-lg",children:[z.jsx("h3",{className:"text-base font-bold text-gray-600 mb-2",children:n.title}),z.jsx("p",{className:"text-gray-600",children:n.desc})]},r))})]})};function lae(t){return dc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function cae(t){return dc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function uae(t){return dc({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(t)}function dae(t){return dc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function WM(t){return dc({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function hae(t){return dc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}const fae=({prevLesson:t,nextLesson:e,onNavigate:n})=>z.jsxs("div",{className:"mt-8 flex justify-between items-center pt-6 border-t",children:[t?z.jsxs("button",{onClick:()=>n(t.id),className:"text-gray-600 hover:text-blueBgColor text-sm flex items-center gap-2",children:[z.jsx(lae,{size:12}),t.title]}):z.jsx("div",{}),e?z.jsxs("button",{onClick:()=>n(e.id),className:"bg-blueBgColor text-white text-sm px-6 py-2 rounded-lg hover:opacity-90 flex items-center gap-2",children:[e.title,z.jsx(cae,{size:12})]}):z.jsx("div",{})]});var E0={exports:{}},hb={exports:{}},pae=hb.exports,fN;function mae(){return fN||(fN=1,function(t,e){(function(r,s){t.exports=s()})(typeof self<"u"?self:pae,function(){return function(){var n={};(function(){n.d=function(b,y){for(var C in y)n.o(y,C)&&!n.o(b,C)&&Object.defineProperty(b,C,{enumerable:!0,get:y[C]})}})(),function(){n.o=function(b,y){return Object.prototype.hasOwnProperty.call(b,y)}}();var r={};n.d(r,{default:function(){return Th}});class s{constructor(y,C){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let N="KaTeX parse error: "+y,P,B;const H=C&&C.loc;if(H&&H.start<=H.end){const ie=H.lexer.input;P=H.start,B=H.end,P===ie.length?N+=" at end of input: ":N+=" at position "+(P+1)+": ";const fe=ie.slice(P,B).replace(/[^]/g,"$&̲");let ve;P>15?ve="…"+ie.slice(P-15,P):ve=ie.slice(0,P);let Ce;B+15<ie.length?Ce=ie.slice(B,B+15)+"…":Ce=ie.slice(B),N+=ve+fe+Ce}const ee=new Error(N);return ee.name="ParseError",ee.__proto__=s.prototype,ee.position=P,P!=null&&B!=null&&(ee.length=B-P),ee.rawMessage=y,ee}}s.prototype.__proto__=Error.prototype;var o=s;const i=function(b,y){return b.indexOf(y)!==-1},a=function(b,y){return b===void 0?y:b},l=/([A-Z])/g,c=function(b){return b.replace(l,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},h=/[&><"']/g;function p(b){return String(b).replace(h,y=>u[y])}const m=function(b){return b.type==="ordgroup"||b.type==="color"?b.body.length===1?m(b.body[0]):b:b.type==="font"?m(b.body):b},g=function(b){const y=m(b);return y.type==="mathord"||y.type==="textord"||y.type==="atom"},x=function(b){if(!b)throw new Error("Expected non-null, but got "+String(b));return b};var k={contains:i,deflt:a,escape:p,hyphenate:c,getBaseElem:m,isCharacterBox:g,protocolFromUrl:function(b){const y=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(b);return y?y[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(y[1])?null:y[1].toLowerCase():"_relative"}};const S={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:b=>"#"+b},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(b,y)=>(y.push(b),y)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:b=>Math.max(0,b),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:b=>Math.max(0,b),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:b=>Math.max(0,b),cli:"-e, --max-expand <n>",cliProcessor:b=>b==="Infinity"?1/0:parseInt(b)},globalGroup:{type:"boolean",cli:!1}};function $(b){if(b.default)return b.default;const y=b.type,C=Array.isArray(y)?y[0]:y;if(typeof C!="string")return C.enum[0];switch(C){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class T{constructor(y){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,y=y||{};for(const C in S)if(S.hasOwnProperty(C)){const N=S[C];this[C]=y[C]!==void 0?N.processor?N.processor(y[C]):y[C]:$(N)}}reportNonstrict(y,C,N){let P=this.strict;if(typeof P=="function"&&(P=P(y,C,N)),!(!P||P==="ignore")){if(P===!0||P==="error")throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+(C+" ["+y+"]"),N);P==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(C+" ["+y+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+P+"': "+C+" ["+y+"]"))}}useStrictBehavior(y,C,N){let P=this.strict;if(typeof P=="function")try{P=P(y,C,N)}catch{P="error"}return!P||P==="ignore"?!1:P===!0||P==="error"?!0:P==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(C+" ["+y+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+P+"': "+C+" ["+y+"]")),!1)}isTrusted(y){if(y.url&&!y.protocol){const N=k.protocolFromUrl(y.url);if(N==null)return!1;y.protocol=N}return!!(typeof this.trust=="function"?this.trust(y):this.trust)}}class E{constructor(y,C,N){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=y,this.size=C,this.cramped=N}sup(){return G[Y[this.id]]}sub(){return G[Z[this.id]]}fracNum(){return G[ne[this.id]]}fracDen(){return G[J[this.id]]}cramp(){return G[re[this.id]]}text(){return G[se[this.id]]}isTight(){return this.size>=2}}const F=0,V=1,j=2,W=3,R=4,O=5,U=6,K=7,G=[new E(F,0,!1),new E(V,0,!0),new E(j,1,!1),new E(W,1,!0),new E(R,2,!1),new E(O,2,!0),new E(U,3,!1),new E(K,3,!0)],Y=[R,O,R,O,U,K,U,K],Z=[O,O,O,O,K,K,K,K],ne=[j,W,R,O,U,K,U,K],J=[W,W,O,O,K,K,K,K],re=[V,V,W,W,O,O,K,K],se=[F,V,j,W,j,W,j,W];var q={DISPLAY:G[F],TEXT:G[j],SCRIPT:G[R],SCRIPTSCRIPT:G[U]};const le=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function be(b){for(let y=0;y<le.length;y++){const C=le[y];for(let N=0;N<C.blocks.length;N++){const P=C.blocks[N];if(b>=P[0]&&b<=P[1])return C.name}}return null}const pe=[];le.forEach(b=>b.blocks.forEach(y=>pe.push(...y)));function de(b){for(let y=0;y<pe.length;y+=2)if(b>=pe[y]&&b<=pe[y+1])return!0;return!1}const we=80,Ne=function(b,y){return"M95,"+(622+b+y)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+b/2.075+" -"+b+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+b)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+b)+" "+y+"h400000v"+(40+b)+"h-400000z"},Te=function(b,y){return"M263,"+(601+b+y)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+b/2.084+" -"+b+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+b)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+b)+" "+y+"h400000v"+(40+b)+"h-400000z"},Ee=function(b,y){return"M983 "+(10+b+y)+`
l`+b/3.13+" -"+b+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+b)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+b)+" "+y+"h400000v"+(40+b)+"h-400000z"},We=function(b,y){return"M424,"+(2398+b+y)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+b/4.223+" -"+b+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+b)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+b)+" "+y+`
h400000v`+(40+b)+"h-400000z"},Xe=function(b,y){return"M473,"+(2713+b+y)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+b/5.298+" -"+b+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+b)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+b)+" "+y+"h400000v"+(40+b)+"H1017.7z"},Ge=function(b){const y=b/2;return"M400000 "+b+" H0 L"+y+" 0 l65 45 L145 "+(b-80)+" H400000z"},mt=function(b,y,C){const N=C-54-y-b;return"M702 "+(b+y)+"H400000"+(40+b)+`
H742v`+N+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+y+"H400000v"+(40+b)+"H742z"},ft=function(b,y,C){y=1e3*y;let N="";switch(b){case"sqrtMain":N=Ne(y,we);break;case"sqrtSize1":N=Te(y,we);break;case"sqrtSize2":N=Ee(y,we);break;case"sqrtSize3":N=We(y,we);break;case"sqrtSize4":N=Xe(y,we);break;case"sqrtTall":N=mt(y,we,C)}return N},ct=function(b,y){switch(b){case"⎜":return"M291 0 H417 V"+y+" H291z M291 0 H417 V"+y+" H291z";case"∣":return"M145 0 H188 V"+y+" H145z M145 0 H188 V"+y+" H145z";case"∥":return"M145 0 H188 V"+y+" H145z M145 0 H188 V"+y+" H145z"+("M367 0 H410 V"+y+" H367z M367 0 H410 V"+y+" H367z");case"⎟":return"M457 0 H583 V"+y+" H457z M457 0 H583 V"+y+" H457z";case"⎢":return"M319 0 H403 V"+y+" H319z M319 0 H403 V"+y+" H319z";case"⎥":return"M263 0 H347 V"+y+" H263z M263 0 H347 V"+y+" H263z";case"⎪":return"M384 0 H504 V"+y+" H384z M384 0 H504 V"+y+" H384z";case"⏐":return"M312 0 H355 V"+y+" H312z M312 0 H355 V"+y+" H312z";case"‖":return"M257 0 H300 V"+y+" H257z M257 0 H300 V"+y+" H257z"+("M478 0 H521 V"+y+" H478z M478 0 H521 V"+y+" H478z");default:return""}},Ze={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},rt=function(b,y){switch(b){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+y+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+y+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+y+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+y+" v1759 h84z";case"vert":return"M145 15 v585 v"+y+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-y+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+y+" v585 h43z";case"doublevert":return"M145 15 v585 v"+y+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-y+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+y+` v585 h43z
M367 15 v585 v`+y+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-y+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+y+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+y+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+y+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+y+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+y+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+y+` v602 h84z
M403 1759 V0 H319 V1759 v`+y+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+y+` v602 h84z
M347 1759 V0 h-84 V1759 v`+y+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(y+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(y+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(y+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(y+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ke{constructor(y){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=y,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(y){return k.contains(this.classes,y)}toNode(){const y=document.createDocumentFragment();for(let C=0;C<this.children.length;C++)y.appendChild(this.children[C].toNode());return y}toMarkup(){let y="";for(let C=0;C<this.children.length;C++)y+=this.children[C].toMarkup();return y}toText(){const y=C=>C.toText();return this.children.map(y).join("")}}var at={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const ut={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},kt={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Qe(b,y){at[b]=y}function qt(b,y,C){if(!at[y])throw new Error("Font metrics not found for font: "+y+".");let N=b.charCodeAt(0),P=at[y][N];if(!P&&b[0]in kt&&(N=kt[b[0]].charCodeAt(0),P=at[y][N]),!P&&C==="text"&&de(N)&&(P=at[y][77]),P)return{depth:P[0],height:P[1],italic:P[2],skew:P[3],width:P[4]}}const Wt={};function en(b){let y;if(b>=5?y=0:b>=3?y=1:y=2,!Wt[y]){const C=Wt[y]={cssEmPerMu:ut.quad[y]/18};for(const N in ut)ut.hasOwnProperty(N)&&(C[N]=ut[N][y])}return Wt[y]}const yn=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],mn=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Kt=function(b,y){return y.size<2?b:yn[b-1][y.size-1]};class At{constructor(y){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=y.style,this.color=y.color,this.size=y.size||At.BASESIZE,this.textSize=y.textSize||this.size,this.phantom=!!y.phantom,this.font=y.font||"",this.fontFamily=y.fontFamily||"",this.fontWeight=y.fontWeight||"",this.fontShape=y.fontShape||"",this.sizeMultiplier=mn[this.size-1],this.maxSize=y.maxSize,this.minRuleThickness=y.minRuleThickness,this._fontMetrics=void 0}extend(y){const C={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const N in y)y.hasOwnProperty(N)&&(C[N]=y[N]);return new At(C)}havingStyle(y){return this.style===y?this:this.extend({style:y,size:Kt(this.textSize,y)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(y){return this.size===y&&this.textSize===y?this:this.extend({style:this.style.text(),size:y,textSize:y,sizeMultiplier:mn[y-1]})}havingBaseStyle(y){y=y||this.style.text();const C=Kt(At.BASESIZE,y);return this.size===C&&this.textSize===At.BASESIZE&&this.style===y?this:this.extend({style:y,size:C})}havingBaseSizing(){let y;switch(this.style.id){case 4:case 5:y=3;break;case 6:case 7:y=1;break;default:y=6}return this.extend({style:this.style.text(),size:y})}withColor(y){return this.extend({color:y})}withPhantom(){return this.extend({phantom:!0})}withFont(y){return this.extend({font:y})}withTextFontFamily(y){return this.extend({fontFamily:y,font:""})}withTextFontWeight(y){return this.extend({fontWeight:y,font:""})}withTextFontShape(y){return this.extend({fontShape:y,font:""})}sizingClasses(y){return y.size!==this.size?["sizing","reset-size"+y.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==At.BASESIZE?["sizing","reset-size"+this.size,"size"+At.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=en(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}At.BASESIZE=6;var bn=At;const Gt={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Er={ex:!0,em:!0,mu:!0},yr=function(b){return typeof b!="string"&&(b=b.unit),b in Gt||b in Er||b==="ex"},tn=function(b,y){let C;if(b.unit in Gt)C=Gt[b.unit]/y.fontMetrics().ptPerEm/y.sizeMultiplier;else if(b.unit==="mu")C=y.fontMetrics().cssEmPerMu;else{let N;if(y.style.isTight()?N=y.havingStyle(y.style.text()):N=y,b.unit==="ex")C=N.fontMetrics().xHeight;else if(b.unit==="em")C=N.fontMetrics().quad;else throw new o("Invalid unit: '"+b.unit+"'");N!==y&&(C*=N.sizeMultiplier/y.sizeMultiplier)}return Math.min(b.number*C,y.maxSize)},Fe=function(b){return+b.toFixed(4)+"em"},Qt=function(b){return b.filter(y=>y).join(" ")},zn=function(b,y,C){if(this.classes=b||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=C||{},y){y.style.isTight()&&this.classes.push("mtight");const N=y.getColor();N&&(this.style.color=N)}},Ls=function(b){const y=document.createElement(b);y.className=Qt(this.classes);for(const C in this.style)this.style.hasOwnProperty(C)&&(y.style[C]=this.style[C]);for(const C in this.attributes)this.attributes.hasOwnProperty(C)&&y.setAttribute(C,this.attributes[C]);for(let C=0;C<this.children.length;C++)y.appendChild(this.children[C].toNode());return y},ls=function(b){let y="<"+b;this.classes.length&&(y+=' class="'+k.escape(Qt(this.classes))+'"');let C="";for(const N in this.style)this.style.hasOwnProperty(N)&&(C+=k.hyphenate(N)+":"+this.style[N]+";");C&&(y+=' style="'+k.escape(C)+'"');for(const N in this.attributes)this.attributes.hasOwnProperty(N)&&(y+=" "+N+'="'+k.escape(this.attributes[N])+'"');y+=">";for(let N=0;N<this.children.length;N++)y+=this.children[N].toMarkup();return y+="</"+b+">",y};class cs{constructor(y,C,N,P){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,zn.call(this,y,N,P),this.children=C||[]}setAttribute(y,C){this.attributes[y]=C}hasClass(y){return k.contains(this.classes,y)}toNode(){return Ls.call(this,"span")}toMarkup(){return ls.call(this,"span")}}class us{constructor(y,C,N,P){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,zn.call(this,C,P),this.children=N||[],this.setAttribute("href",y)}setAttribute(y,C){this.attributes[y]=C}hasClass(y){return k.contains(this.classes,y)}toNode(){return Ls.call(this,"a")}toMarkup(){return ls.call(this,"a")}}class wo{constructor(y,C,N){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=C,this.src=y,this.classes=["mord"],this.style=N}hasClass(y){return k.contains(this.classes,y)}toNode(){const y=document.createElement("img");y.src=this.src,y.alt=this.alt,y.className="mord";for(const C in this.style)this.style.hasOwnProperty(C)&&(y.style[C]=this.style[C]);return y}toMarkup(){let y='<img src="'+k.escape(this.src)+'"'+(' alt="'+k.escape(this.alt)+'"'),C="";for(const N in this.style)this.style.hasOwnProperty(N)&&(C+=k.hyphenate(N)+":"+this.style[N]+";");return C&&(y+=' style="'+k.escape(C)+'"'),y+="'/>",y}}const wi={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Rr{constructor(y,C,N,P,B,H,ee,ie){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=y,this.height=C||0,this.depth=N||0,this.italic=P||0,this.skew=B||0,this.width=H||0,this.classes=ee||[],this.style=ie||{},this.maxFontSize=0;const fe=be(this.text.charCodeAt(0));fe&&this.classes.push(fe+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=wi[this.text])}hasClass(y){return k.contains(this.classes,y)}toNode(){const y=document.createTextNode(this.text);let C=null;this.italic>0&&(C=document.createElement("span"),C.style.marginRight=Fe(this.italic)),this.classes.length>0&&(C=C||document.createElement("span"),C.className=Qt(this.classes));for(const N in this.style)this.style.hasOwnProperty(N)&&(C=C||document.createElement("span"),C.style[N]=this.style[N]);return C?(C.appendChild(y),C):y}toMarkup(){let y=!1,C="<span";this.classes.length&&(y=!0,C+=' class="',C+=k.escape(Qt(this.classes)),C+='"');let N="";this.italic>0&&(N+="margin-right:"+this.italic+"em;");for(const B in this.style)this.style.hasOwnProperty(B)&&(N+=k.hyphenate(B)+":"+this.style[B]+";");N&&(y=!0,C+=' style="'+k.escape(N)+'"');const P=k.escape(this.text);return y?(C+=">",C+=P,C+="</span>",C):P}}class Is{constructor(y,C){this.children=void 0,this.attributes=void 0,this.children=y||[],this.attributes=C||{}}toNode(){const C=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&C.setAttribute(N,this.attributes[N]);for(let N=0;N<this.children.length;N++)C.appendChild(this.children[N].toNode());return C}toMarkup(){let y='<svg xmlns="http://www.w3.org/2000/svg"';for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&(y+=" "+C+'="'+k.escape(this.attributes[C])+'"');y+=">";for(let C=0;C<this.children.length;C++)y+=this.children[C].toMarkup();return y+="</svg>",y}}class no{constructor(y,C){this.pathName=void 0,this.alternate=void 0,this.pathName=y,this.alternate=C}toNode(){const C=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?C.setAttribute("d",this.alternate):C.setAttribute("d",Ze[this.pathName]),C}toMarkup(){return this.alternate?'<path d="'+k.escape(this.alternate)+'"/>':'<path d="'+k.escape(Ze[this.pathName])+'"/>'}}class Yo{constructor(y){this.attributes=void 0,this.attributes=y||{}}toNode(){const C=document.createElementNS("http://www.w3.org/2000/svg","line");for(const N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&C.setAttribute(N,this.attributes[N]);return C}toMarkup(){let y="<line";for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&(y+=" "+C+'="'+k.escape(this.attributes[C])+'"');return y+="/>",y}}function Ra(b){if(b instanceof Rr)return b;throw new Error("Expected symbolNode but got "+String(b)+".")}function wl(b){if(b instanceof cs)return b;throw new Error("Expected span<HtmlDomNode> but got "+String(b)+".")}const Mo={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ta={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ro={math:{},text:{}};var Wn=ro;function M(b,y,C,N,P,B){ro[b][P]={font:y,group:C,replace:N},B&&N&&(ro[b][N]=ro[b][P])}const _="math",qe="text",X="main",ce="ams",Ut="accent-token",dt="bin",_e="close",je="inner",He="mathord",Ct="op-token",Mt="open",Ln="punct",ae="rel",br="spacing",ye="textord";M(_,X,ae,"≡","\\equiv",!0),M(_,X,ae,"≺","\\prec",!0),M(_,X,ae,"≻","\\succ",!0),M(_,X,ae,"∼","\\sim",!0),M(_,X,ae,"⊥","\\perp"),M(_,X,ae,"⪯","\\preceq",!0),M(_,X,ae,"⪰","\\succeq",!0),M(_,X,ae,"≃","\\simeq",!0),M(_,X,ae,"∣","\\mid",!0),M(_,X,ae,"≪","\\ll",!0),M(_,X,ae,"≫","\\gg",!0),M(_,X,ae,"≍","\\asymp",!0),M(_,X,ae,"∥","\\parallel"),M(_,X,ae,"⋈","\\bowtie",!0),M(_,X,ae,"⌣","\\smile",!0),M(_,X,ae,"⊑","\\sqsubseteq",!0),M(_,X,ae,"⊒","\\sqsupseteq",!0),M(_,X,ae,"≐","\\doteq",!0),M(_,X,ae,"⌢","\\frown",!0),M(_,X,ae,"∋","\\ni",!0),M(_,X,ae,"∝","\\propto",!0),M(_,X,ae,"⊢","\\vdash",!0),M(_,X,ae,"⊣","\\dashv",!0),M(_,X,ae,"∋","\\owns"),M(_,X,Ln,".","\\ldotp"),M(_,X,Ln,"⋅","\\cdotp"),M(_,X,ye,"#","\\#"),M(qe,X,ye,"#","\\#"),M(_,X,ye,"&","\\&"),M(qe,X,ye,"&","\\&"),M(_,X,ye,"ℵ","\\aleph",!0),M(_,X,ye,"∀","\\forall",!0),M(_,X,ye,"ℏ","\\hbar",!0),M(_,X,ye,"∃","\\exists",!0),M(_,X,ye,"∇","\\nabla",!0),M(_,X,ye,"♭","\\flat",!0),M(_,X,ye,"ℓ","\\ell",!0),M(_,X,ye,"♮","\\natural",!0),M(_,X,ye,"♣","\\clubsuit",!0),M(_,X,ye,"℘","\\wp",!0),M(_,X,ye,"♯","\\sharp",!0),M(_,X,ye,"♢","\\diamondsuit",!0),M(_,X,ye,"ℜ","\\Re",!0),M(_,X,ye,"♡","\\heartsuit",!0),M(_,X,ye,"ℑ","\\Im",!0),M(_,X,ye,"♠","\\spadesuit",!0),M(_,X,ye,"§","\\S",!0),M(qe,X,ye,"§","\\S"),M(_,X,ye,"¶","\\P",!0),M(qe,X,ye,"¶","\\P"),M(_,X,ye,"†","\\dag"),M(qe,X,ye,"†","\\dag"),M(qe,X,ye,"†","\\textdagger"),M(_,X,ye,"‡","\\ddag"),M(qe,X,ye,"‡","\\ddag"),M(qe,X,ye,"‡","\\textdaggerdbl"),M(_,X,_e,"⎱","\\rmoustache",!0),M(_,X,Mt,"⎰","\\lmoustache",!0),M(_,X,_e,"⟯","\\rgroup",!0),M(_,X,Mt,"⟮","\\lgroup",!0),M(_,X,dt,"∓","\\mp",!0),M(_,X,dt,"⊖","\\ominus",!0),M(_,X,dt,"⊎","\\uplus",!0),M(_,X,dt,"⊓","\\sqcap",!0),M(_,X,dt,"∗","\\ast"),M(_,X,dt,"⊔","\\sqcup",!0),M(_,X,dt,"◯","\\bigcirc",!0),M(_,X,dt,"∙","\\bullet",!0),M(_,X,dt,"‡","\\ddagger"),M(_,X,dt,"≀","\\wr",!0),M(_,X,dt,"⨿","\\amalg"),M(_,X,dt,"&","\\And"),M(_,X,ae,"⟵","\\longleftarrow",!0),M(_,X,ae,"⇐","\\Leftarrow",!0),M(_,X,ae,"⟸","\\Longleftarrow",!0),M(_,X,ae,"⟶","\\longrightarrow",!0),M(_,X,ae,"⇒","\\Rightarrow",!0),M(_,X,ae,"⟹","\\Longrightarrow",!0),M(_,X,ae,"↔","\\leftrightarrow",!0),M(_,X,ae,"⟷","\\longleftrightarrow",!0),M(_,X,ae,"⇔","\\Leftrightarrow",!0),M(_,X,ae,"⟺","\\Longleftrightarrow",!0),M(_,X,ae,"↦","\\mapsto",!0),M(_,X,ae,"⟼","\\longmapsto",!0),M(_,X,ae,"↗","\\nearrow",!0),M(_,X,ae,"↩","\\hookleftarrow",!0),M(_,X,ae,"↪","\\hookrightarrow",!0),M(_,X,ae,"↘","\\searrow",!0),M(_,X,ae,"↼","\\leftharpoonup",!0),M(_,X,ae,"⇀","\\rightharpoonup",!0),M(_,X,ae,"↙","\\swarrow",!0),M(_,X,ae,"↽","\\leftharpoondown",!0),M(_,X,ae,"⇁","\\rightharpoondown",!0),M(_,X,ae,"↖","\\nwarrow",!0),M(_,X,ae,"⇌","\\rightleftharpoons",!0),M(_,ce,ae,"≮","\\nless",!0),M(_,ce,ae,"","\\@nleqslant"),M(_,ce,ae,"","\\@nleqq"),M(_,ce,ae,"⪇","\\lneq",!0),M(_,ce,ae,"≨","\\lneqq",!0),M(_,ce,ae,"","\\@lvertneqq"),M(_,ce,ae,"⋦","\\lnsim",!0),M(_,ce,ae,"⪉","\\lnapprox",!0),M(_,ce,ae,"⊀","\\nprec",!0),M(_,ce,ae,"⋠","\\npreceq",!0),M(_,ce,ae,"⋨","\\precnsim",!0),M(_,ce,ae,"⪹","\\precnapprox",!0),M(_,ce,ae,"≁","\\nsim",!0),M(_,ce,ae,"","\\@nshortmid"),M(_,ce,ae,"∤","\\nmid",!0),M(_,ce,ae,"⊬","\\nvdash",!0),M(_,ce,ae,"⊭","\\nvDash",!0),M(_,ce,ae,"⋪","\\ntriangleleft"),M(_,ce,ae,"⋬","\\ntrianglelefteq",!0),M(_,ce,ae,"⊊","\\subsetneq",!0),M(_,ce,ae,"","\\@varsubsetneq"),M(_,ce,ae,"⫋","\\subsetneqq",!0),M(_,ce,ae,"","\\@varsubsetneqq"),M(_,ce,ae,"≯","\\ngtr",!0),M(_,ce,ae,"","\\@ngeqslant"),M(_,ce,ae,"","\\@ngeqq"),M(_,ce,ae,"⪈","\\gneq",!0),M(_,ce,ae,"≩","\\gneqq",!0),M(_,ce,ae,"","\\@gvertneqq"),M(_,ce,ae,"⋧","\\gnsim",!0),M(_,ce,ae,"⪊","\\gnapprox",!0),M(_,ce,ae,"⊁","\\nsucc",!0),M(_,ce,ae,"⋡","\\nsucceq",!0),M(_,ce,ae,"⋩","\\succnsim",!0),M(_,ce,ae,"⪺","\\succnapprox",!0),M(_,ce,ae,"≆","\\ncong",!0),M(_,ce,ae,"","\\@nshortparallel"),M(_,ce,ae,"∦","\\nparallel",!0),M(_,ce,ae,"⊯","\\nVDash",!0),M(_,ce,ae,"⋫","\\ntriangleright"),M(_,ce,ae,"⋭","\\ntrianglerighteq",!0),M(_,ce,ae,"","\\@nsupseteqq"),M(_,ce,ae,"⊋","\\supsetneq",!0),M(_,ce,ae,"","\\@varsupsetneq"),M(_,ce,ae,"⫌","\\supsetneqq",!0),M(_,ce,ae,"","\\@varsupsetneqq"),M(_,ce,ae,"⊮","\\nVdash",!0),M(_,ce,ae,"⪵","\\precneqq",!0),M(_,ce,ae,"⪶","\\succneqq",!0),M(_,ce,ae,"","\\@nsubseteqq"),M(_,ce,dt,"⊴","\\unlhd"),M(_,ce,dt,"⊵","\\unrhd"),M(_,ce,ae,"↚","\\nleftarrow",!0),M(_,ce,ae,"↛","\\nrightarrow",!0),M(_,ce,ae,"⇍","\\nLeftarrow",!0),M(_,ce,ae,"⇏","\\nRightarrow",!0),M(_,ce,ae,"↮","\\nleftrightarrow",!0),M(_,ce,ae,"⇎","\\nLeftrightarrow",!0),M(_,ce,ae,"△","\\vartriangle"),M(_,ce,ye,"ℏ","\\hslash"),M(_,ce,ye,"▽","\\triangledown"),M(_,ce,ye,"◊","\\lozenge"),M(_,ce,ye,"Ⓢ","\\circledS"),M(_,ce,ye,"®","\\circledR"),M(qe,ce,ye,"®","\\circledR"),M(_,ce,ye,"∡","\\measuredangle",!0),M(_,ce,ye,"∄","\\nexists"),M(_,ce,ye,"℧","\\mho"),M(_,ce,ye,"Ⅎ","\\Finv",!0),M(_,ce,ye,"⅁","\\Game",!0),M(_,ce,ye,"‵","\\backprime"),M(_,ce,ye,"▲","\\blacktriangle"),M(_,ce,ye,"▼","\\blacktriangledown"),M(_,ce,ye,"■","\\blacksquare"),M(_,ce,ye,"⧫","\\blacklozenge"),M(_,ce,ye,"★","\\bigstar"),M(_,ce,ye,"∢","\\sphericalangle",!0),M(_,ce,ye,"∁","\\complement",!0),M(_,ce,ye,"ð","\\eth",!0),M(qe,X,ye,"ð","ð"),M(_,ce,ye,"╱","\\diagup"),M(_,ce,ye,"╲","\\diagdown"),M(_,ce,ye,"□","\\square"),M(_,ce,ye,"□","\\Box"),M(_,ce,ye,"◊","\\Diamond"),M(_,ce,ye,"¥","\\yen",!0),M(qe,ce,ye,"¥","\\yen",!0),M(_,ce,ye,"✓","\\checkmark",!0),M(qe,ce,ye,"✓","\\checkmark"),M(_,ce,ye,"ℶ","\\beth",!0),M(_,ce,ye,"ℸ","\\daleth",!0),M(_,ce,ye,"ℷ","\\gimel",!0),M(_,ce,ye,"ϝ","\\digamma",!0),M(_,ce,ye,"ϰ","\\varkappa"),M(_,ce,Mt,"┌","\\@ulcorner",!0),M(_,ce,_e,"┐","\\@urcorner",!0),M(_,ce,Mt,"└","\\@llcorner",!0),M(_,ce,_e,"┘","\\@lrcorner",!0),M(_,ce,ae,"≦","\\leqq",!0),M(_,ce,ae,"⩽","\\leqslant",!0),M(_,ce,ae,"⪕","\\eqslantless",!0),M(_,ce,ae,"≲","\\lesssim",!0),M(_,ce,ae,"⪅","\\lessapprox",!0),M(_,ce,ae,"≊","\\approxeq",!0),M(_,ce,dt,"⋖","\\lessdot"),M(_,ce,ae,"⋘","\\lll",!0),M(_,ce,ae,"≶","\\lessgtr",!0),M(_,ce,ae,"⋚","\\lesseqgtr",!0),M(_,ce,ae,"⪋","\\lesseqqgtr",!0),M(_,ce,ae,"≑","\\doteqdot"),M(_,ce,ae,"≓","\\risingdotseq",!0),M(_,ce,ae,"≒","\\fallingdotseq",!0),M(_,ce,ae,"∽","\\backsim",!0),M(_,ce,ae,"⋍","\\backsimeq",!0),M(_,ce,ae,"⫅","\\subseteqq",!0),M(_,ce,ae,"⋐","\\Subset",!0),M(_,ce,ae,"⊏","\\sqsubset",!0),M(_,ce,ae,"≼","\\preccurlyeq",!0),M(_,ce,ae,"⋞","\\curlyeqprec",!0),M(_,ce,ae,"≾","\\precsim",!0),M(_,ce,ae,"⪷","\\precapprox",!0),M(_,ce,ae,"⊲","\\vartriangleleft"),M(_,ce,ae,"⊴","\\trianglelefteq"),M(_,ce,ae,"⊨","\\vDash",!0),M(_,ce,ae,"⊪","\\Vvdash",!0),M(_,ce,ae,"⌣","\\smallsmile"),M(_,ce,ae,"⌢","\\smallfrown"),M(_,ce,ae,"≏","\\bumpeq",!0),M(_,ce,ae,"≎","\\Bumpeq",!0),M(_,ce,ae,"≧","\\geqq",!0),M(_,ce,ae,"⩾","\\geqslant",!0),M(_,ce,ae,"⪖","\\eqslantgtr",!0),M(_,ce,ae,"≳","\\gtrsim",!0),M(_,ce,ae,"⪆","\\gtrapprox",!0),M(_,ce,dt,"⋗","\\gtrdot"),M(_,ce,ae,"⋙","\\ggg",!0),M(_,ce,ae,"≷","\\gtrless",!0),M(_,ce,ae,"⋛","\\gtreqless",!0),M(_,ce,ae,"⪌","\\gtreqqless",!0),M(_,ce,ae,"≖","\\eqcirc",!0),M(_,ce,ae,"≗","\\circeq",!0),M(_,ce,ae,"≜","\\triangleq",!0),M(_,ce,ae,"∼","\\thicksim"),M(_,ce,ae,"≈","\\thickapprox"),M(_,ce,ae,"⫆","\\supseteqq",!0),M(_,ce,ae,"⋑","\\Supset",!0),M(_,ce,ae,"⊐","\\sqsupset",!0),M(_,ce,ae,"≽","\\succcurlyeq",!0),M(_,ce,ae,"⋟","\\curlyeqsucc",!0),M(_,ce,ae,"≿","\\succsim",!0),M(_,ce,ae,"⪸","\\succapprox",!0),M(_,ce,ae,"⊳","\\vartriangleright"),M(_,ce,ae,"⊵","\\trianglerighteq"),M(_,ce,ae,"⊩","\\Vdash",!0),M(_,ce,ae,"∣","\\shortmid"),M(_,ce,ae,"∥","\\shortparallel"),M(_,ce,ae,"≬","\\between",!0),M(_,ce,ae,"⋔","\\pitchfork",!0),M(_,ce,ae,"∝","\\varpropto"),M(_,ce,ae,"◀","\\blacktriangleleft"),M(_,ce,ae,"∴","\\therefore",!0),M(_,ce,ae,"∍","\\backepsilon"),M(_,ce,ae,"▶","\\blacktriangleright"),M(_,ce,ae,"∵","\\because",!0),M(_,ce,ae,"⋘","\\llless"),M(_,ce,ae,"⋙","\\gggtr"),M(_,ce,dt,"⊲","\\lhd"),M(_,ce,dt,"⊳","\\rhd"),M(_,ce,ae,"≂","\\eqsim",!0),M(_,X,ae,"⋈","\\Join"),M(_,ce,ae,"≑","\\Doteq",!0),M(_,ce,dt,"∔","\\dotplus",!0),M(_,ce,dt,"∖","\\smallsetminus"),M(_,ce,dt,"⋒","\\Cap",!0),M(_,ce,dt,"⋓","\\Cup",!0),M(_,ce,dt,"⩞","\\doublebarwedge",!0),M(_,ce,dt,"⊟","\\boxminus",!0),M(_,ce,dt,"⊞","\\boxplus",!0),M(_,ce,dt,"⋇","\\divideontimes",!0),M(_,ce,dt,"⋉","\\ltimes",!0),M(_,ce,dt,"⋊","\\rtimes",!0),M(_,ce,dt,"⋋","\\leftthreetimes",!0),M(_,ce,dt,"⋌","\\rightthreetimes",!0),M(_,ce,dt,"⋏","\\curlywedge",!0),M(_,ce,dt,"⋎","\\curlyvee",!0),M(_,ce,dt,"⊝","\\circleddash",!0),M(_,ce,dt,"⊛","\\circledast",!0),M(_,ce,dt,"⋅","\\centerdot"),M(_,ce,dt,"⊺","\\intercal",!0),M(_,ce,dt,"⋒","\\doublecap"),M(_,ce,dt,"⋓","\\doublecup"),M(_,ce,dt,"⊠","\\boxtimes",!0),M(_,ce,ae,"⇢","\\dashrightarrow",!0),M(_,ce,ae,"⇠","\\dashleftarrow",!0),M(_,ce,ae,"⇇","\\leftleftarrows",!0),M(_,ce,ae,"⇆","\\leftrightarrows",!0),M(_,ce,ae,"⇚","\\Lleftarrow",!0),M(_,ce,ae,"↞","\\twoheadleftarrow",!0),M(_,ce,ae,"↢","\\leftarrowtail",!0),M(_,ce,ae,"↫","\\looparrowleft",!0),M(_,ce,ae,"⇋","\\leftrightharpoons",!0),M(_,ce,ae,"↶","\\curvearrowleft",!0),M(_,ce,ae,"↺","\\circlearrowleft",!0),M(_,ce,ae,"↰","\\Lsh",!0),M(_,ce,ae,"⇈","\\upuparrows",!0),M(_,ce,ae,"↿","\\upharpoonleft",!0),M(_,ce,ae,"⇃","\\downharpoonleft",!0),M(_,X,ae,"⊶","\\origof",!0),M(_,X,ae,"⊷","\\imageof",!0),M(_,ce,ae,"⊸","\\multimap",!0),M(_,ce,ae,"↭","\\leftrightsquigarrow",!0),M(_,ce,ae,"⇉","\\rightrightarrows",!0),M(_,ce,ae,"⇄","\\rightleftarrows",!0),M(_,ce,ae,"↠","\\twoheadrightarrow",!0),M(_,ce,ae,"↣","\\rightarrowtail",!0),M(_,ce,ae,"↬","\\looparrowright",!0),M(_,ce,ae,"↷","\\curvearrowright",!0),M(_,ce,ae,"↻","\\circlearrowright",!0),M(_,ce,ae,"↱","\\Rsh",!0),M(_,ce,ae,"⇊","\\downdownarrows",!0),M(_,ce,ae,"↾","\\upharpoonright",!0),M(_,ce,ae,"⇂","\\downharpoonright",!0),M(_,ce,ae,"⇝","\\rightsquigarrow",!0),M(_,ce,ae,"⇝","\\leadsto"),M(_,ce,ae,"⇛","\\Rrightarrow",!0),M(_,ce,ae,"↾","\\restriction"),M(_,X,ye,"‘","`"),M(_,X,ye,"$","\\$"),M(qe,X,ye,"$","\\$"),M(qe,X,ye,"$","\\textdollar"),M(_,X,ye,"%","\\%"),M(qe,X,ye,"%","\\%"),M(_,X,ye,"_","\\_"),M(qe,X,ye,"_","\\_"),M(qe,X,ye,"_","\\textunderscore"),M(_,X,ye,"∠","\\angle",!0),M(_,X,ye,"∞","\\infty",!0),M(_,X,ye,"′","\\prime"),M(_,X,ye,"△","\\triangle"),M(_,X,ye,"Γ","\\Gamma",!0),M(_,X,ye,"Δ","\\Delta",!0),M(_,X,ye,"Θ","\\Theta",!0),M(_,X,ye,"Λ","\\Lambda",!0),M(_,X,ye,"Ξ","\\Xi",!0),M(_,X,ye,"Π","\\Pi",!0),M(_,X,ye,"Σ","\\Sigma",!0),M(_,X,ye,"Υ","\\Upsilon",!0),M(_,X,ye,"Φ","\\Phi",!0),M(_,X,ye,"Ψ","\\Psi",!0),M(_,X,ye,"Ω","\\Omega",!0),M(_,X,ye,"A","Α"),M(_,X,ye,"B","Β"),M(_,X,ye,"E","Ε"),M(_,X,ye,"Z","Ζ"),M(_,X,ye,"H","Η"),M(_,X,ye,"I","Ι"),M(_,X,ye,"K","Κ"),M(_,X,ye,"M","Μ"),M(_,X,ye,"N","Ν"),M(_,X,ye,"O","Ο"),M(_,X,ye,"P","Ρ"),M(_,X,ye,"T","Τ"),M(_,X,ye,"X","Χ"),M(_,X,ye,"¬","\\neg",!0),M(_,X,ye,"¬","\\lnot"),M(_,X,ye,"⊤","\\top"),M(_,X,ye,"⊥","\\bot"),M(_,X,ye,"∅","\\emptyset"),M(_,ce,ye,"∅","\\varnothing"),M(_,X,He,"α","\\alpha",!0),M(_,X,He,"β","\\beta",!0),M(_,X,He,"γ","\\gamma",!0),M(_,X,He,"δ","\\delta",!0),M(_,X,He,"ϵ","\\epsilon",!0),M(_,X,He,"ζ","\\zeta",!0),M(_,X,He,"η","\\eta",!0),M(_,X,He,"θ","\\theta",!0),M(_,X,He,"ι","\\iota",!0),M(_,X,He,"κ","\\kappa",!0),M(_,X,He,"λ","\\lambda",!0),M(_,X,He,"μ","\\mu",!0),M(_,X,He,"ν","\\nu",!0),M(_,X,He,"ξ","\\xi",!0),M(_,X,He,"ο","\\omicron",!0),M(_,X,He,"π","\\pi",!0),M(_,X,He,"ρ","\\rho",!0),M(_,X,He,"σ","\\sigma",!0),M(_,X,He,"τ","\\tau",!0),M(_,X,He,"υ","\\upsilon",!0),M(_,X,He,"ϕ","\\phi",!0),M(_,X,He,"χ","\\chi",!0),M(_,X,He,"ψ","\\psi",!0),M(_,X,He,"ω","\\omega",!0),M(_,X,He,"ε","\\varepsilon",!0),M(_,X,He,"ϑ","\\vartheta",!0),M(_,X,He,"ϖ","\\varpi",!0),M(_,X,He,"ϱ","\\varrho",!0),M(_,X,He,"ς","\\varsigma",!0),M(_,X,He,"φ","\\varphi",!0),M(_,X,dt,"∗","*",!0),M(_,X,dt,"+","+"),M(_,X,dt,"−","-",!0),M(_,X,dt,"⋅","\\cdot",!0),M(_,X,dt,"∘","\\circ",!0),M(_,X,dt,"÷","\\div",!0),M(_,X,dt,"±","\\pm",!0),M(_,X,dt,"×","\\times",!0),M(_,X,dt,"∩","\\cap",!0),M(_,X,dt,"∪","\\cup",!0),M(_,X,dt,"∖","\\setminus",!0),M(_,X,dt,"∧","\\land"),M(_,X,dt,"∨","\\lor"),M(_,X,dt,"∧","\\wedge",!0),M(_,X,dt,"∨","\\vee",!0),M(_,X,ye,"√","\\surd"),M(_,X,Mt,"⟨","\\langle",!0),M(_,X,Mt,"∣","\\lvert"),M(_,X,Mt,"∥","\\lVert"),M(_,X,_e,"?","?"),M(_,X,_e,"!","!"),M(_,X,_e,"⟩","\\rangle",!0),M(_,X,_e,"∣","\\rvert"),M(_,X,_e,"∥","\\rVert"),M(_,X,ae,"=","="),M(_,X,ae,":",":"),M(_,X,ae,"≈","\\approx",!0),M(_,X,ae,"≅","\\cong",!0),M(_,X,ae,"≥","\\ge"),M(_,X,ae,"≥","\\geq",!0),M(_,X,ae,"←","\\gets"),M(_,X,ae,">","\\gt",!0),M(_,X,ae,"∈","\\in",!0),M(_,X,ae,"","\\@not"),M(_,X,ae,"⊂","\\subset",!0),M(_,X,ae,"⊃","\\supset",!0),M(_,X,ae,"⊆","\\subseteq",!0),M(_,X,ae,"⊇","\\supseteq",!0),M(_,ce,ae,"⊈","\\nsubseteq",!0),M(_,ce,ae,"⊉","\\nsupseteq",!0),M(_,X,ae,"⊨","\\models"),M(_,X,ae,"←","\\leftarrow",!0),M(_,X,ae,"≤","\\le"),M(_,X,ae,"≤","\\leq",!0),M(_,X,ae,"<","\\lt",!0),M(_,X,ae,"→","\\rightarrow",!0),M(_,X,ae,"→","\\to"),M(_,ce,ae,"≱","\\ngeq",!0),M(_,ce,ae,"≰","\\nleq",!0),M(_,X,br," ","\\ "),M(_,X,br," ","\\space"),M(_,X,br," ","\\nobreakspace"),M(qe,X,br," ","\\ "),M(qe,X,br," "," "),M(qe,X,br," ","\\space"),M(qe,X,br," ","\\nobreakspace"),M(_,X,br,null,"\\nobreak"),M(_,X,br,null,"\\allowbreak"),M(_,X,Ln,",",","),M(_,X,Ln,";",";"),M(_,ce,dt,"⊼","\\barwedge",!0),M(_,ce,dt,"⊻","\\veebar",!0),M(_,X,dt,"⊙","\\odot",!0),M(_,X,dt,"⊕","\\oplus",!0),M(_,X,dt,"⊗","\\otimes",!0),M(_,X,ye,"∂","\\partial",!0),M(_,X,dt,"⊘","\\oslash",!0),M(_,ce,dt,"⊚","\\circledcirc",!0),M(_,ce,dt,"⊡","\\boxdot",!0),M(_,X,dt,"△","\\bigtriangleup"),M(_,X,dt,"▽","\\bigtriangledown"),M(_,X,dt,"†","\\dagger"),M(_,X,dt,"⋄","\\diamond"),M(_,X,dt,"⋆","\\star"),M(_,X,dt,"◃","\\triangleleft"),M(_,X,dt,"▹","\\triangleright"),M(_,X,Mt,"{","\\{"),M(qe,X,ye,"{","\\{"),M(qe,X,ye,"{","\\textbraceleft"),M(_,X,_e,"}","\\}"),M(qe,X,ye,"}","\\}"),M(qe,X,ye,"}","\\textbraceright"),M(_,X,Mt,"{","\\lbrace"),M(_,X,_e,"}","\\rbrace"),M(_,X,Mt,"[","\\lbrack",!0),M(qe,X,ye,"[","\\lbrack",!0),M(_,X,_e,"]","\\rbrack",!0),M(qe,X,ye,"]","\\rbrack",!0),M(_,X,Mt,"(","\\lparen",!0),M(_,X,_e,")","\\rparen",!0),M(qe,X,ye,"<","\\textless",!0),M(qe,X,ye,">","\\textgreater",!0),M(_,X,Mt,"⌊","\\lfloor",!0),M(_,X,_e,"⌋","\\rfloor",!0),M(_,X,Mt,"⌈","\\lceil",!0),M(_,X,_e,"⌉","\\rceil",!0),M(_,X,ye,"\\","\\backslash"),M(_,X,ye,"∣","|"),M(_,X,ye,"∣","\\vert"),M(qe,X,ye,"|","\\textbar",!0),M(_,X,ye,"∥","\\|"),M(_,X,ye,"∥","\\Vert"),M(qe,X,ye,"∥","\\textbardbl"),M(qe,X,ye,"~","\\textasciitilde"),M(qe,X,ye,"\\","\\textbackslash"),M(qe,X,ye,"^","\\textasciicircum"),M(_,X,ae,"↑","\\uparrow",!0),M(_,X,ae,"⇑","\\Uparrow",!0),M(_,X,ae,"↓","\\downarrow",!0),M(_,X,ae,"⇓","\\Downarrow",!0),M(_,X,ae,"↕","\\updownarrow",!0),M(_,X,ae,"⇕","\\Updownarrow",!0),M(_,X,Ct,"∐","\\coprod"),M(_,X,Ct,"⋁","\\bigvee"),M(_,X,Ct,"⋀","\\bigwedge"),M(_,X,Ct,"⨄","\\biguplus"),M(_,X,Ct,"⋂","\\bigcap"),M(_,X,Ct,"⋃","\\bigcup"),M(_,X,Ct,"∫","\\int"),M(_,X,Ct,"∫","\\intop"),M(_,X,Ct,"∬","\\iint"),M(_,X,Ct,"∭","\\iiint"),M(_,X,Ct,"∏","\\prod"),M(_,X,Ct,"∑","\\sum"),M(_,X,Ct,"⨂","\\bigotimes"),M(_,X,Ct,"⨁","\\bigoplus"),M(_,X,Ct,"⨀","\\bigodot"),M(_,X,Ct,"∮","\\oint"),M(_,X,Ct,"∯","\\oiint"),M(_,X,Ct,"∰","\\oiiint"),M(_,X,Ct,"⨆","\\bigsqcup"),M(_,X,Ct,"∫","\\smallint"),M(qe,X,je,"…","\\textellipsis"),M(_,X,je,"…","\\mathellipsis"),M(qe,X,je,"…","\\ldots",!0),M(_,X,je,"…","\\ldots",!0),M(_,X,je,"⋯","\\@cdots",!0),M(_,X,je,"⋱","\\ddots",!0),M(_,X,ye,"⋮","\\varvdots"),M(qe,X,ye,"⋮","\\varvdots"),M(_,X,Ut,"ˊ","\\acute"),M(_,X,Ut,"ˋ","\\grave"),M(_,X,Ut,"¨","\\ddot"),M(_,X,Ut,"~","\\tilde"),M(_,X,Ut,"ˉ","\\bar"),M(_,X,Ut,"˘","\\breve"),M(_,X,Ut,"ˇ","\\check"),M(_,X,Ut,"^","\\hat"),M(_,X,Ut,"⃗","\\vec"),M(_,X,Ut,"˙","\\dot"),M(_,X,Ut,"˚","\\mathring"),M(_,X,He,"","\\@imath"),M(_,X,He,"","\\@jmath"),M(_,X,ye,"ı","ı"),M(_,X,ye,"ȷ","ȷ"),M(qe,X,ye,"ı","\\i",!0),M(qe,X,ye,"ȷ","\\j",!0),M(qe,X,ye,"ß","\\ss",!0),M(qe,X,ye,"æ","\\ae",!0),M(qe,X,ye,"œ","\\oe",!0),M(qe,X,ye,"ø","\\o",!0),M(qe,X,ye,"Æ","\\AE",!0),M(qe,X,ye,"Œ","\\OE",!0),M(qe,X,ye,"Ø","\\O",!0),M(qe,X,Ut,"ˊ","\\'"),M(qe,X,Ut,"ˋ","\\`"),M(qe,X,Ut,"ˆ","\\^"),M(qe,X,Ut,"˜","\\~"),M(qe,X,Ut,"ˉ","\\="),M(qe,X,Ut,"˘","\\u"),M(qe,X,Ut,"˙","\\."),M(qe,X,Ut,"¸","\\c"),M(qe,X,Ut,"˚","\\r"),M(qe,X,Ut,"ˇ","\\v"),M(qe,X,Ut,"¨",'\\"'),M(qe,X,Ut,"˝","\\H"),M(qe,X,Ut,"◯","\\textcircled");const hp={"--":!0,"---":!0,"``":!0,"''":!0};M(qe,X,ye,"–","--",!0),M(qe,X,ye,"–","\\textendash"),M(qe,X,ye,"—","---",!0),M(qe,X,ye,"—","\\textemdash"),M(qe,X,ye,"‘","`",!0),M(qe,X,ye,"‘","\\textquoteleft"),M(qe,X,ye,"’","'",!0),M(qe,X,ye,"’","\\textquoteright"),M(qe,X,ye,"“","``",!0),M(qe,X,ye,"“","\\textquotedblleft"),M(qe,X,ye,"”","''",!0),M(qe,X,ye,"”","\\textquotedblright"),M(_,X,ye,"°","\\degree",!0),M(qe,X,ye,"°","\\degree"),M(qe,X,ye,"°","\\textdegree",!0),M(_,X,ye,"£","\\pounds"),M(_,X,ye,"£","\\mathsterling",!0),M(qe,X,ye,"£","\\pounds"),M(qe,X,ye,"£","\\textsterling",!0),M(_,ce,ye,"✠","\\maltese"),M(qe,ce,ye,"✠","\\maltese");const ar='0123456789/@."';for(let b=0;b<ar.length;b++){const y=ar.charAt(b);M(_,X,ye,y,y)}const Tu='0123456789!@*()-=+";:?/.,';for(let b=0;b<Tu.length;b++){const y=Tu.charAt(b);M(qe,X,ye,y,y)}const Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let b=0;b<Zo.length;b++){const y=Zo.charAt(b);M(_,X,He,y,y),M(qe,X,ye,y,y)}M(_,ce,ye,"C","ℂ"),M(qe,ce,ye,"C","ℂ"),M(_,ce,ye,"H","ℍ"),M(qe,ce,ye,"H","ℍ"),M(_,ce,ye,"N","ℕ"),M(qe,ce,ye,"N","ℕ"),M(_,ce,ye,"P","ℙ"),M(qe,ce,ye,"P","ℙ"),M(_,ce,ye,"Q","ℚ"),M(qe,ce,ye,"Q","ℚ"),M(_,ce,ye,"R","ℝ"),M(qe,ce,ye,"R","ℝ"),M(_,ce,ye,"Z","ℤ"),M(qe,ce,ye,"Z","ℤ"),M(_,X,He,"h","ℎ"),M(qe,X,He,"h","ℎ");let Ot="";for(let b=0;b<Zo.length;b++){const y=Zo.charAt(b);Ot=String.fromCharCode(55349,56320+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56372+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56424+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56580+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56684+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56736+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56788+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56840+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56944+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),b<26&&(Ot=String.fromCharCode(55349,56632+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,56476+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot))}Ot="𝕜",M(_,X,He,"k",Ot),M(qe,X,ye,"k",Ot);for(let b=0;b<10;b++){const y=b.toString();Ot=String.fromCharCode(55349,57294+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,57314+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,57324+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot),Ot=String.fromCharCode(55349,57334+b),M(_,X,He,y,Ot),M(qe,X,ye,y,Ot)}const ki="ÐÞþ";for(let b=0;b<ki.length;b++){const y=ki.charAt(b);M(_,X,He,y,y),M(qe,X,ye,y,y)}const na=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],cn=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],_s=function(b,y){const C=b.charCodeAt(0),N=b.charCodeAt(1),P=(C-55296)*1024+(N-56320)+65536,B=y==="math"?0:1;if(119808<=P&&P<120484){const H=Math.floor((P-119808)/26);return[na[H][2],na[H][B]]}else if(120782<=P&&P<=120831){const H=Math.floor((P-120782)/10);return[cn[H][2],cn[H][B]]}else{if(P===120485||P===120486)return[na[0][2],na[0][B]];if(120486<P&&P<120782)return["",""];throw new o("Unsupported character: "+b)}},xr=function(b,y,C){return Wn[C][b]&&Wn[C][b].replace&&(b=Wn[C][b].replace),{value:b,metrics:qt(b,y,C)}},ds=function(b,y,C,N,P){const B=xr(b,y,C),H=B.metrics;b=B.value;let ee;if(H){let ie=H.italic;(C==="text"||N&&N.font==="mathit")&&(ie=0),ee=new Rr(b,H.height,H.depth,ie,H.skew,H.width,P)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+b+"' in style '"+y+"' and mode '"+C+"'")),ee=new Rr(b,0,0,0,0,0,P);if(N){ee.maxFontSize=N.sizeMultiplier,N.style.isTight()&&ee.classes.push("mtight");const ie=N.getColor();ie&&(ee.style.color=ie)}return ee},ko=function(b,y,C,N){return N===void 0&&(N=[]),C.font==="boldsymbol"&&xr(b,"Main-Bold",y).metrics?ds(b,"Main-Bold",y,C,N.concat(["mathbf"])):b==="\\"||Wn[y][b].font==="main"?ds(b,"Main-Regular",y,C,N):ds(b,"AMS-Regular",y,C,N.concat(["amsrm"]))},Gv=function(b,y,C,N,P){return P!=="textord"&&xr(b,"Math-BoldItalic",y).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},qv=function(b,y,C){const N=b.mode,P=b.text,B=["mord"],H=N==="math"||N==="text"&&y.font,ee=H?y.font:y.fontFamily;let ie="",fe="";if(P.charCodeAt(0)===55349&&([ie,fe]=_s(P,N)),ie.length>0)return ds(P,ie,N,y,B.concat(fe));if(ee){let ve,Ce;if(ee==="boldsymbol"){const Pe=Gv(P,N,y,B,C);ve=Pe.fontName,Ce=[Pe.fontClass]}else H?(ve=Nn[ee].fontName,Ce=[ee]):(ve=yc(ee,y.fontWeight,y.fontShape),Ce=[ee,y.fontWeight,y.fontShape]);if(xr(P,ve,N).metrics)return ds(P,ve,N,y,B.concat(Ce));if(hp.hasOwnProperty(P)&&ve.slice(0,10)==="Typewriter"){const Pe=[];for(let Ye=0;Ye<P.length;Ye++)Pe.push(ds(P[Ye],ve,N,y,B.concat(Ce)));return Qd(Pe)}}if(C==="mathord")return ds(P,"Math-Italic",N,y,B.concat(["mathnormal"]));if(C==="textord"){const ve=Wn[N][P]&&Wn[N][P].font;if(ve==="ams"){const Ce=yc("amsrm",y.fontWeight,y.fontShape);return ds(P,Ce,N,y,B.concat("amsrm",y.fontWeight,y.fontShape))}else if(ve==="main"||!ve){const Ce=yc("textrm",y.fontWeight,y.fontShape);return ds(P,Ce,N,y,B.concat(y.fontWeight,y.fontShape))}else{const Ce=yc(ve,y.fontWeight,y.fontShape);return ds(P,Ce,N,y,B.concat(Ce,y.fontWeight,y.fontShape))}}else throw new Error("unexpected type: "+C+" in makeOrd")},Kv=(b,y)=>{if(Qt(b.classes)!==Qt(y.classes)||b.skew!==y.skew||b.maxFontSize!==y.maxFontSize)return!1;if(b.classes.length===1){const C=b.classes[0];if(C==="mbin"||C==="mord")return!1}for(const C in b.style)if(b.style.hasOwnProperty(C)&&b.style[C]!==y.style[C])return!1;for(const C in y.style)if(y.style.hasOwnProperty(C)&&b.style[C]!==y.style[C])return!1;return!0},Zd=b=>{for(let y=0;y<b.length-1;y++){const C=b[y],N=b[y+1];C instanceof Rr&&N instanceof Rr&&Kv(C,N)&&(C.text+=N.text,C.height=Math.max(C.height,N.height),C.depth=Math.max(C.depth,N.depth),C.italic=N.italic,b.splice(y+1,1),y--)}return b},gc=function(b){let y=0,C=0,N=0;for(let P=0;P<b.children.length;P++){const B=b.children[P];B.height>y&&(y=B.height),B.depth>C&&(C=B.depth),B.maxFontSize>N&&(N=B.maxFontSize)}b.height=y,b.depth=C,b.maxFontSize=N},Qr=function(b,y,C,N){const P=new cs(b,y,C,N);return gc(P),P},Iu=(b,y,C,N)=>new cs(b,y,C,N),Xv=function(b,y,C){const N=Qr([b],[],y);return N.height=Math.max(C||y.fontMetrics().defaultRuleThickness,y.minRuleThickness),N.style.borderBottomWidth=Fe(N.height),N.maxFontSize=1,N},Yv=function(b,y,C,N){const P=new us(b,y,C,N);return gc(P),P},Qd=function(b){const y=new Ke(b);return gc(y),y},d1=function(b,y){return b instanceof Ke?Qr([],[b],y):b},fp=function(b){if(b.positionType==="individualShift"){const C=b.children,N=[C[0]],P=-C[0].shift-C[0].elem.depth;let B=P;for(let H=1;H<C.length;H++){const ee=-C[H].shift-B-C[H].elem.depth,ie=ee-(C[H-1].elem.height+C[H-1].elem.depth);B=B+ee,N.push({type:"kern",size:ie}),N.push(C[H])}return{children:N,depth:P}}let y;if(b.positionType==="top"){let C=b.positionData;for(let N=0;N<b.children.length;N++){const P=b.children[N];C-=P.type==="kern"?P.size:P.elem.height+P.elem.depth}y=C}else if(b.positionType==="bottom")y=-b.positionData;else{const C=b.children[0];if(C.type!=="elem")throw new Error('First child must have type "elem".');if(b.positionType==="shift")y=-C.elem.depth-b.positionData;else if(b.positionType==="firstBaseline")y=-C.elem.depth;else throw new Error("Invalid positionType "+b.positionType+".")}return{children:b.children,depth:y}},$u=function(b,y){const{children:C,depth:N}=fp(b);let P=0;for(let Ye=0;Ye<C.length;Ye++){const bt=C[Ye];if(bt.type==="elem"){const St=bt.elem;P=Math.max(P,St.maxFontSize,St.height)}}P+=2;const B=Qr(["pstrut"],[]);B.style.height=Fe(P);const H=[];let ee=N,ie=N,fe=N;for(let Ye=0;Ye<C.length;Ye++){const bt=C[Ye];if(bt.type==="kern")fe+=bt.size;else{const St=bt.elem,un=bt.wrapperClasses||[],nn=bt.wrapperStyle||{},dn=Qr(un,[B,St],void 0,nn);dn.style.top=Fe(-P-fe-St.depth),bt.marginLeft&&(dn.style.marginLeft=bt.marginLeft),bt.marginRight&&(dn.style.marginRight=bt.marginRight),H.push(dn),fe+=St.height+St.depth}ee=Math.min(ee,fe),ie=Math.max(ie,fe)}const ve=Qr(["vlist"],H);ve.style.height=Fe(ie);let Ce;if(ee<0){const Ye=Qr([],[]),bt=Qr(["vlist"],[Ye]);bt.style.height=Fe(-ee);const St=Qr(["vlist-s"],[new Rr("​")]);Ce=[Qr(["vlist-r"],[ve,St]),Qr(["vlist-r"],[bt])]}else Ce=[Qr(["vlist-r"],[ve])];const Pe=Qr(["vlist-t"],Ce);return Ce.length===2&&Pe.classes.push("vlist-t2"),Pe.height=ie,Pe.depth=-ee,Pe},Zv=(b,y)=>{const C=Qr(["mspace"],[],y),N=tn(b,y);return C.style.marginRight=Fe(N),C},yc=function(b,y,C){let N="";switch(b){case"amsrm":N="AMS";break;case"textrm":N="Main";break;case"textsf":N="SansSerif";break;case"texttt":N="Typewriter";break;default:N=b}let P;return y==="textbf"&&C==="textit"?P="BoldItalic":y==="textbf"?P="Bold":y==="textit"?P="Italic":P="Regular",N+"-"+P},Nn={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},pp={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var Ae={fontMap:Nn,makeSymbol:ds,mathsym:ko,makeSpan:Qr,makeSvgSpan:Iu,makeLineSpan:Xv,makeAnchor:Yv,makeFragment:Qd,wrapFragment:d1,makeVList:$u,makeOrd:qv,makeGlue:Zv,staticSvg:function(b,y){const[C,N,P]=pp[b],B=new no(C),H=new Is([B],{width:Fe(N),height:Fe(P),style:"width:"+Fe(N),viewBox:"0 0 "+1e3*N+" "+1e3*P,preserveAspectRatio:"xMinYMin"}),ee=Iu(["overlay"],[H],y);return ee.height=P,ee.style.height=Fe(P),ee.style.width=Fe(N),ee},svgData:pp,tryCombineChars:Zd};const lr={number:3,unit:"mu"},Aa={number:4,unit:"mu"},Ci={number:5,unit:"mu"},mp={mord:{mop:lr,mbin:Aa,mrel:Ci,minner:lr},mop:{mord:lr,mop:lr,mrel:Ci,minner:lr},mbin:{mord:Aa,mop:Aa,mopen:Aa,minner:Aa},mrel:{mord:Ci,mop:Ci,mopen:Ci,minner:Ci},mopen:{},mclose:{mop:lr,mbin:Aa,mrel:Ci,minner:lr},mpunct:{mord:lr,mop:lr,mrel:Ci,mopen:lr,mclose:lr,mpunct:lr,minner:lr},minner:{mord:lr,mop:lr,mbin:Aa,mrel:Ci,mopen:lr,mpunct:lr,minner:lr}},Jd={mord:{mop:lr},mop:{mord:lr,mop:lr},mbin:{},mrel:{},mopen:{},mclose:{mop:lr},mpunct:{},minner:{mop:lr}},ra={},Qo={},Jo={};function pt(b){let{type:y,names:C,props:N,handler:P,htmlBuilder:B,mathmlBuilder:H}=b;const ee={type:y,numArgs:N.numArgs,argTypes:N.argTypes,allowedInArgument:!!N.allowedInArgument,allowedInText:!!N.allowedInText,allowedInMath:N.allowedInMath===void 0?!0:N.allowedInMath,numOptionalArgs:N.numOptionalArgs||0,infix:!!N.infix,primitive:!!N.primitive,handler:P};for(let ie=0;ie<C.length;++ie)ra[C[ie]]=ee;y&&(B&&(Qo[y]=B),H&&(Jo[y]=H))}function ei(b){let{type:y,htmlBuilder:C,mathmlBuilder:N}=b;pt({type:y,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:C,mathmlBuilder:N})}const ti=function(b){return b.type==="ordgroup"&&b.body.length===1?b.body[0]:b},Sr=function(b){return b.type==="ordgroup"?b.body:[b]},Si=Ae.makeSpan,Nu=["leftmost","mbin","mopen","mrel","mop","mpunct"],Jv=["rightmost","mrel","mclose","mpunct"],h1={display:q.DISPLAY,text:q.TEXT,script:q.SCRIPT,scriptscript:q.SCRIPTSCRIPT},eh={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ar=function(b,y,C,N){N===void 0&&(N=[null,null]);const P=[];for(let fe=0;fe<b.length;fe++){const ve=xn(b[fe],y);if(ve instanceof Ke){const Ce=ve.children;P.push(...Ce)}else P.push(ve)}if(Ae.tryCombineChars(P),!C)return P;let B=y;if(b.length===1){const fe=b[0];fe.type==="sizing"?B=y.havingSize(fe.size):fe.type==="styling"&&(B=y.havingStyle(h1[fe.style]))}const H=Si([N[0]||"leftmost"],[],y),ee=Si([N[1]||"rightmost"],[],y),ie=C==="root";return gp(P,(fe,ve)=>{const Ce=ve.classes[0],Pe=fe.classes[0];Ce==="mbin"&&k.contains(Jv,Pe)?ve.classes[0]="mord":Pe==="mbin"&&k.contains(Nu,Ce)&&(fe.classes[0]="mord")},{node:H},ee,ie),gp(P,(fe,ve)=>{const Ce=Da(ve),Pe=Da(fe),Ye=Ce&&Pe?fe.hasClass("mtight")?Jd[Ce][Pe]:mp[Ce][Pe]:null;if(Ye)return Ae.makeGlue(Ye,B)},{node:H},ee,ie),P},gp=function(b,y,C,N,P){N&&b.push(N);let B=0;for(;B<b.length;B++){const H=b[B],ee=bc(H);if(ee){gp(ee.children,y,C,null,P);continue}const ie=!H.hasClass("mspace");if(ie){const fe=y(H,C.node);fe&&(C.insertAfter?C.insertAfter(fe):(b.unshift(fe),B++))}ie?C.node=H:P&&H.hasClass("newline")&&(C.node=Si(["leftmost"])),C.insertAfter=(fe=>ve=>{b.splice(fe+1,0,ve),B++})(B)}N&&b.pop()},bc=function(b){return b instanceof Ke||b instanceof us||b instanceof cs&&b.hasClass("enclosing")?b:null},kl=function(b,y){const C=bc(b);if(C){const N=C.children;if(N.length){if(y==="right")return kl(N[N.length-1],"right");if(y==="left")return kl(N[0],"left")}}return b},Da=function(b,y){return b?(y&&(b=kl(b,y)),eh[b.classes[0]]||null):null},Pa=function(b,y){const C=["nulldelimiter"].concat(b.baseSizingClasses());return Si(y.concat(C))},xn=function(b,y,C){if(!b)return Si();if(Qo[b.type]){let N=Qo[b.type](b,y);if(C&&y.size!==C.size){N=Si(y.sizingClasses(C),[N],y);const P=y.sizeMultiplier/C.sizeMultiplier;N.height*=P,N.depth*=P}return N}else throw new o("Got group of unknown type: '"+b.type+"'")};function th(b,y){const C=Si(["base"],b,y),N=Si(["strut"]);return N.style.height=Fe(C.height+C.depth),C.depth&&(N.style.verticalAlign=Fe(-C.depth)),C.children.unshift(N),C}function Eu(b,y){let C=null;b.length===1&&b[0].type==="tag"&&(C=b[0].tag,b=b[0].body);const N=Ar(b,y,"root");let P;N.length===2&&N[1].hasClass("tag")&&(P=N.pop());const B=[];let H=[];for(let fe=0;fe<N.length;fe++)if(H.push(N[fe]),N[fe].hasClass("mbin")||N[fe].hasClass("mrel")||N[fe].hasClass("allowbreak")){let ve=!1;for(;fe<N.length-1&&N[fe+1].hasClass("mspace")&&!N[fe+1].hasClass("newline");)fe++,H.push(N[fe]),N[fe].hasClass("nobreak")&&(ve=!0);ve||(B.push(th(H,y)),H=[])}else N[fe].hasClass("newline")&&(H.pop(),H.length>0&&(B.push(th(H,y)),H=[]),B.push(N[fe]));H.length>0&&B.push(th(H,y));let ee;C?(ee=th(Ar(C,y,!0)),ee.classes=["tag"],B.push(ee)):P&&B.push(P);const ie=Si(["katex-html"],B);if(ie.setAttribute("aria-hidden","true"),ee){const fe=ee.children[0];fe.style.height=Fe(ie.height+ie.depth),ie.depth&&(fe.style.verticalAlign=Fe(-ie.depth))}return ie}function Ru(b){return new Ke(b)}class Bs{constructor(y,C,N){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=y,this.attributes={},this.children=C||[],this.classes=N||[]}setAttribute(y,C){this.attributes[y]=C}getAttribute(y){return this.attributes[y]}toNode(){const y=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&y.setAttribute(C,this.attributes[C]);this.classes.length>0&&(y.className=Qt(this.classes));for(let C=0;C<this.children.length;C++)if(this.children[C]instanceof ni&&this.children[C+1]instanceof ni){let N=this.children[C].toText()+this.children[++C].toText();for(;this.children[C+1]instanceof ni;)N+=this.children[++C].toText();y.appendChild(new ni(N).toNode())}else y.appendChild(this.children[C].toNode());return y}toMarkup(){let y="<"+this.type;for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&(y+=" "+C+'="',y+=k.escape(this.attributes[C]),y+='"');this.classes.length>0&&(y+=' class ="'+k.escape(Qt(this.classes))+'"'),y+=">";for(let C=0;C<this.children.length;C++)y+=this.children[C].toMarkup();return y+="</"+this.type+">",y}toText(){return this.children.map(y=>y.toText()).join("")}}class ni{constructor(y){this.text=void 0,this.text=y}toNode(){return document.createTextNode(this.text)}toMarkup(){return k.escape(this.toText())}toText(){return this.text}}class Ma{constructor(y){this.width=void 0,this.character=void 0,this.width=y,y>=.05555&&y<=.05556?this.character=" ":y>=.1666&&y<=.1667?this.character=" ":y>=.2222&&y<=.2223?this.character=" ":y>=.2777&&y<=.2778?this.character="  ":y>=-.05556&&y<=-.05555?this.character=" ⁣":y>=-.1667&&y<=-.1666?this.character=" ⁣":y>=-.2223&&y<=-.2222?this.character=" ⁣":y>=-.2778&&y<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const y=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return y.setAttribute("width",Fe(this.width)),y}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Fe(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var nt={MathNode:Bs,TextNode:ni,SpaceNode:Ma,newDocumentFragment:Ru};const Vs=function(b,y,C){return Wn[y][b]&&Wn[y][b].replace&&b.charCodeAt(0)!==55349&&!(hp.hasOwnProperty(b)&&C&&(C.fontFamily&&C.fontFamily.slice(4,6)==="tt"||C.font&&C.font.slice(4,6)==="tt"))&&(b=Wn[y][b].replace),new nt.TextNode(b)},nh=function(b){return b.length===1?b[0]:new nt.MathNode("mrow",b)},xc=function(b,y){if(y.fontFamily==="texttt")return"monospace";if(y.fontFamily==="textsf")return y.fontShape==="textit"&&y.fontWeight==="textbf"?"sans-serif-bold-italic":y.fontShape==="textit"?"sans-serif-italic":y.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(y.fontShape==="textit"&&y.fontWeight==="textbf")return"bold-italic";if(y.fontShape==="textit")return"italic";if(y.fontWeight==="textbf")return"bold";const C=y.font;if(!C||C==="mathnormal")return null;const N=b.mode;if(C==="mathit")return"italic";if(C==="boldsymbol")return b.type==="textord"?"bold":"bold-italic";if(C==="mathbf")return"bold";if(C==="mathbb")return"double-struck";if(C==="mathsfit")return"sans-serif-italic";if(C==="mathfrak")return"fraktur";if(C==="mathscr"||C==="mathcal")return"script";if(C==="mathsf")return"sans-serif";if(C==="mathtt")return"monospace";let P=b.text;if(k.contains(["\\imath","\\jmath"],P))return null;Wn[N][P]&&Wn[N][P].replace&&(P=Wn[N][P].replace);const B=Ae.fontMap[C].fontName;return qt(P,B,N)?Ae.fontMap[C].variant:null};function vc(b){if(!b)return!1;if(b.type==="mi"&&b.children.length===1){const y=b.children[0];return y instanceof ni&&y.text==="."}else if(b.type==="mo"&&b.children.length===1&&b.getAttribute("separator")==="true"&&b.getAttribute("lspace")==="0em"&&b.getAttribute("rspace")==="0em"){const y=b.children[0];return y instanceof ni&&y.text===","}else return!1}const js=function(b,y,C){if(b.length===1){const B=Cn(b[0],y);return C&&B instanceof Bs&&B.type==="mo"&&(B.setAttribute("lspace","0em"),B.setAttribute("rspace","0em")),[B]}const N=[];let P;for(let B=0;B<b.length;B++){const H=Cn(b[B],y);if(H instanceof Bs&&P instanceof Bs){if(H.type==="mtext"&&P.type==="mtext"&&H.getAttribute("mathvariant")===P.getAttribute("mathvariant")){P.children.push(...H.children);continue}else if(H.type==="mn"&&P.type==="mn"){P.children.push(...H.children);continue}else if(vc(H)&&P.type==="mn"){P.children.push(...H.children);continue}else if(H.type==="mn"&&vc(P))H.children=[...P.children,...H.children],N.pop();else if((H.type==="msup"||H.type==="msub")&&H.children.length>=1&&(P.type==="mn"||vc(P))){const ee=H.children[0];ee instanceof Bs&&ee.type==="mn"&&(ee.children=[...P.children,...ee.children],N.pop())}else if(P.type==="mi"&&P.children.length===1){const ee=P.children[0];if(ee instanceof ni&&ee.text==="̸"&&(H.type==="mo"||H.type==="mi"||H.type==="mn")){const ie=H.children[0];ie instanceof ni&&ie.text.length>0&&(ie.text=ie.text.slice(0,1)+"̸"+ie.text.slice(1),N.pop())}}}N.push(H),P=H}return N},Dr=function(b,y,C){return nh(js(b,y,C))},Cn=function(b,y){if(!b)return new nt.MathNode("mrow");if(Jo[b.type])return Jo[b.type](b,y);throw new o("Got group of unknown type: '"+b.type+"'")};function rh(b,y,C,N,P){const B=js(b,C);let H;B.length===1&&B[0]instanceof Bs&&k.contains(["mrow","mtable"],B[0].type)?H=B[0]:H=new nt.MathNode("mrow",B);const ee=new nt.MathNode("annotation",[new nt.TextNode(y)]);ee.setAttribute("encoding","application/x-tex");const ie=new nt.MathNode("semantics",[H,ee]),fe=new nt.MathNode("math",[ie]);fe.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),N&&fe.setAttribute("display","block");const ve=P?"katex":"katex-mathml";return Ae.makeSpan([ve],[fe])}const wc=function(b){return new bn({style:b.displayMode?q.DISPLAY:q.TEXT,maxSize:b.maxSize,minRuleThickness:b.minRuleThickness})},f1=function(b,y){if(y.displayMode){const C=["katex-display"];y.leqno&&C.push("leqno"),y.fleqn&&C.push("fleqn"),b=Ae.makeSpan(C,[b])}return b},yp=function(b,y,C){const N=wc(C);let P;if(C.output==="mathml")return rh(b,y,N,C.displayMode,!0);if(C.output==="html"){const B=Eu(b,N);P=Ae.makeSpan(["katex"],[B])}else{const B=rh(b,y,N,C.displayMode,!1),H=Eu(b,N);P=Ae.makeSpan(["katex"],[B,H])}return f1(P,C)},bp=function(b,y,C){const N=wc(C),P=Eu(b,N),B=Ae.makeSpan(["katex"],[P]);return f1(B,C)},Au={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},sh=function(b){const y=new nt.MathNode("mo",[new nt.TextNode(Au[b.replace(/^\\/,"")])]);return y.setAttribute("stretchy","true"),y},p1={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ew=function(b){return b.type==="ordgroup"?b.body.length:1};var ri={encloseSpan:function(b,y,C,N,P){let B;const H=b.height+b.depth+C+N;if(/fbox|color|angl/.test(y)){if(B=Ae.makeSpan(["stretchy",y],[],P),y==="fbox"){const ee=P.color&&P.getColor();ee&&(B.style.borderColor=ee)}}else{const ee=[];/^[bx]cancel$/.test(y)&&ee.push(new Yo({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(y)&&ee.push(new Yo({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const ie=new Is(ee,{width:"100%",height:Fe(H)});B=Ae.makeSvgSpan([],[ie],P)}return B.height=H,B.style.height=Fe(H),B},mathMLnode:sh,svgSpan:function(b,y){function C(){let H=4e5;const ee=b.label.slice(1);if(k.contains(["widehat","widecheck","widetilde","utilde"],ee)){const fe=ew(b.base);let ve,Ce,Pe;if(fe>5)ee==="widehat"||ee==="widecheck"?(ve=420,H=2364,Pe=.42,Ce=ee+"4"):(ve=312,H=2340,Pe=.34,Ce="tilde4");else{const St=[1,1,2,2,3,3][fe];ee==="widehat"||ee==="widecheck"?(H=[0,1062,2364,2364,2364][St],ve=[0,239,300,360,420][St],Pe=[0,.24,.3,.3,.36,.42][St],Ce=ee+St):(H=[0,600,1033,2339,2340][St],ve=[0,260,286,306,312][St],Pe=[0,.26,.286,.3,.306,.34][St],Ce="tilde"+St)}const Ye=new no(Ce),bt=new Is([Ye],{width:"100%",height:Fe(Pe),viewBox:"0 0 "+H+" "+ve,preserveAspectRatio:"none"});return{span:Ae.makeSvgSpan([],[bt],y),minWidth:0,height:Pe}}else{const ie=[],fe=p1[ee],[ve,Ce,Pe]=fe,Ye=Pe/1e3,bt=ve.length;let St,un;if(bt===1){const nn=fe[3];St=["hide-tail"],un=[nn]}else if(bt===2)St=["halfarrow-left","halfarrow-right"],un=["xMinYMin","xMaxYMin"];else if(bt===3)St=["brace-left","brace-center","brace-right"],un=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+bt+" children.");for(let nn=0;nn<bt;nn++){const dn=new no(ve[nn]),Sn=new Is([dn],{width:"400em",height:Fe(Ye),viewBox:"0 0 "+H+" "+Pe,preserveAspectRatio:un[nn]+" slice"}),In=Ae.makeSvgSpan([St[nn]],[Sn],y);if(bt===1)return{span:In,minWidth:Ce,height:Ye};In.style.height=Fe(Ye),ie.push(In)}return{span:Ae.makeSpan(["stretchy"],ie,y),minWidth:Ce,height:Ye}}}const{span:N,minWidth:P,height:B}=C();return N.height=B,N.style.height=Fe(B),P>0&&(N.style.minWidth=Fe(P)),N}};function Zt(b,y){if(!b||b.type!==y)throw new Error("Expected node of type "+y+", but got "+(b?"node of type "+b.type:String(b)));return b}function xp(b){const y=oh(b);if(!y)throw new Error("Expected node of symbol group type, but got "+(b?"node of type "+b.type:String(b)));return y}function oh(b){return b&&(b.type==="atom"||ta.hasOwnProperty(b.type))?b:null}const vp=(b,y)=>{let C,N,P;b&&b.type==="supsub"?(N=Zt(b.base,"accent"),C=N.base,b.base=C,P=wl(xn(b,y)),b.base=N):(N=Zt(b,"accent"),C=N.base);const B=xn(C,y.havingCrampedStyle()),H=N.isShifty&&k.isCharacterBox(C);let ee=0;if(H){const Pe=k.getBaseElem(C),Ye=xn(Pe,y.havingCrampedStyle());ee=Ra(Ye).skew}const ie=N.label==="\\c";let fe=ie?B.height+B.depth:Math.min(B.height,y.fontMetrics().xHeight),ve;if(N.isStretchy)ve=ri.svgSpan(N,y),ve=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:B},{type:"elem",elem:ve,wrapperClasses:["svg-align"],wrapperStyle:ee>0?{width:"calc(100% - "+Fe(2*ee)+")",marginLeft:Fe(2*ee)}:void 0}]},y);else{let Pe,Ye;N.label==="\\vec"?(Pe=Ae.staticSvg("vec",y),Ye=Ae.svgData.vec[1]):(Pe=Ae.makeOrd({mode:N.mode,text:N.label},y,"textord"),Pe=Ra(Pe),Pe.italic=0,Ye=Pe.width,ie&&(fe+=Pe.depth)),ve=Ae.makeSpan(["accent-body"],[Pe]);const bt=N.label==="\\textcircled";bt&&(ve.classes.push("accent-full"),fe=B.height);let St=ee;bt||(St-=Ye/2),ve.style.left=Fe(St),N.label==="\\textcircled"&&(ve.style.top=".2em"),ve=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:B},{type:"kern",size:-fe},{type:"elem",elem:ve}]},y)}const Ce=Ae.makeSpan(["mord","accent"],[ve],y);return P?(P.children[0]=Ce,P.height=Math.max(Ce.height,P.height),P.classes[0]="mord",P):Ce},m1=(b,y)=>{const C=b.isStretchy?ri.mathMLnode(b.label):new nt.MathNode("mo",[Vs(b.label,b.mode)]),N=new nt.MathNode("mover",[Cn(b.base,y),C]);return N.setAttribute("accent","true"),N},g1=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(b=>"\\"+b).join("|"));pt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(b,y)=>{const C=ti(y[0]),N=!g1.test(b.funcName),P=!N||b.funcName==="\\widehat"||b.funcName==="\\widetilde"||b.funcName==="\\widecheck";return{type:"accent",mode:b.parser.mode,label:b.funcName,isStretchy:N,isShifty:P,base:C}},htmlBuilder:vp,mathmlBuilder:m1}),pt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(b,y)=>{const C=y[0];let N=b.parser.mode;return N==="math"&&(b.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+b.funcName+" works only in text mode"),N="text"),{type:"accent",mode:N,label:b.funcName,isStretchy:!1,isShifty:!0,base:C}},htmlBuilder:vp,mathmlBuilder:m1}),pt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0];return{type:"accentUnder",mode:C.mode,label:N,base:P}},htmlBuilder:(b,y)=>{const C=xn(b.base,y),N=ri.svgSpan(b,y),P=b.label==="\\utilde"?.12:0,B=Ae.makeVList({positionType:"top",positionData:C.height,children:[{type:"elem",elem:N,wrapperClasses:["svg-align"]},{type:"kern",size:P},{type:"elem",elem:C}]},y);return Ae.makeSpan(["mord","accentunder"],[B],y)},mathmlBuilder:(b,y)=>{const C=ri.mathMLnode(b.label),N=new nt.MathNode("munder",[Cn(b.base,y),C]);return N.setAttribute("accentunder","true"),N}});const ih=b=>{const y=new nt.MathNode("mpadded",b?[b]:[]);return y.setAttribute("width","+0.6em"),y.setAttribute("lspace","0.3em"),y};pt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(b,y,C){let{parser:N,funcName:P}=b;return{type:"xArrow",mode:N.mode,label:P,body:y[0],below:C[0]}},htmlBuilder(b,y){const C=y.style;let N=y.havingStyle(C.sup());const P=Ae.wrapFragment(xn(b.body,N,y),y),B=b.label.slice(0,2)==="\\x"?"x":"cd";P.classes.push(B+"-arrow-pad");let H;b.below&&(N=y.havingStyle(C.sub()),H=Ae.wrapFragment(xn(b.below,N,y),y),H.classes.push(B+"-arrow-pad"));const ee=ri.svgSpan(b,y),ie=-y.fontMetrics().axisHeight+.5*ee.height;let fe=-y.fontMetrics().axisHeight-.5*ee.height-.111;(P.depth>.25||b.label==="\\xleftequilibrium")&&(fe-=P.depth);let ve;if(H){const Ce=-y.fontMetrics().axisHeight+H.height+.5*ee.height+.111;ve=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:fe},{type:"elem",elem:ee,shift:ie},{type:"elem",elem:H,shift:Ce}]},y)}else ve=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:fe},{type:"elem",elem:ee,shift:ie}]},y);return ve.children[0].children[0].children[1].classes.push("svg-align"),Ae.makeSpan(["mrel","x-arrow"],[ve],y)},mathmlBuilder(b,y){const C=ri.mathMLnode(b.label);C.setAttribute("minsize",b.label.charAt(0)==="x"?"1.75em":"3.0em");let N;if(b.body){const P=ih(Cn(b.body,y));if(b.below){const B=ih(Cn(b.below,y));N=new nt.MathNode("munderover",[C,B,P])}else N=new nt.MathNode("mover",[C,P])}else if(b.below){const P=ih(Cn(b.below,y));N=new nt.MathNode("munder",[C,P])}else N=ih(),N=new nt.MathNode("mover",[C,N]);return N}});const tw=Ae.makeSpan;function y1(b,y){const C=Ar(b.body,y,!0);return tw([b.mclass],C,y)}function b1(b,y){let C;const N=js(b.body,y);return b.mclass==="minner"?C=new nt.MathNode("mpadded",N):b.mclass==="mord"?b.isCharacterBox?(C=N[0],C.type="mi"):C=new nt.MathNode("mi",N):(b.isCharacterBox?(C=N[0],C.type="mo"):C=new nt.MathNode("mo",N),b.mclass==="mbin"?(C.attributes.lspace="0.22em",C.attributes.rspace="0.22em"):b.mclass==="mpunct"?(C.attributes.lspace="0em",C.attributes.rspace="0.17em"):b.mclass==="mopen"||b.mclass==="mclose"?(C.attributes.lspace="0em",C.attributes.rspace="0em"):b.mclass==="minner"&&(C.attributes.lspace="0.0556em",C.attributes.width="+0.1111em")),C}pt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(b,y){let{parser:C,funcName:N}=b;const P=y[0];return{type:"mclass",mode:C.mode,mclass:"m"+N.slice(5),body:Sr(P),isCharacterBox:k.isCharacterBox(P)}},htmlBuilder:y1,mathmlBuilder:b1});const kc=b=>{const y=b.type==="ordgroup"&&b.body.length?b.body[0]:b;return y.type==="atom"&&(y.family==="bin"||y.family==="rel")?"m"+y.family:"mord"};pt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(b,y){let{parser:C}=b;return{type:"mclass",mode:C.mode,mclass:kc(y[0]),body:Sr(y[1]),isCharacterBox:k.isCharacterBox(y[1])}}}),pt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(b,y){let{parser:C,funcName:N}=b;const P=y[1],B=y[0];let H;N!=="\\stackrel"?H=kc(P):H="mrel";const ee={type:"op",mode:P.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:N!=="\\stackrel",body:Sr(P)},ie={type:"supsub",mode:B.mode,base:ee,sup:N==="\\underset"?null:B,sub:N==="\\underset"?B:null};return{type:"mclass",mode:C.mode,mclass:H,body:[ie],isCharacterBox:k.isCharacterBox(ie)}},htmlBuilder:y1,mathmlBuilder:b1}),pt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(b,y){let{parser:C}=b;return{type:"pmb",mode:C.mode,mclass:kc(y[0]),body:Sr(y[0])}},htmlBuilder(b,y){const C=Ar(b.body,y,!0),N=Ae.makeSpan([b.mclass],C,y);return N.style.textShadow="0.02em 0.01em 0.04px",N},mathmlBuilder(b,y){const C=js(b.body,y),N=new nt.MathNode("mstyle",C);return N.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),N}});const nw={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},x1=()=>({type:"styling",body:[],mode:"math",style:"display"}),v1=b=>b.type==="textord"&&b.text==="@",w1=(b,y)=>(b.type==="mathord"||b.type==="atom")&&b.text===y;function rw(b,y,C){const N=nw[b];switch(N){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return C.callFunction(N,[y[0]],[y[1]]);case"\\uparrow":case"\\downarrow":{const P=C.callFunction("\\\\cdleft",[y[0]],[]),B={type:"atom",text:N,mode:"math",family:"rel"},H=C.callFunction("\\Big",[B],[]),ee=C.callFunction("\\\\cdright",[y[1]],[]),ie={type:"ordgroup",mode:"math",body:[P,H,ee]};return C.callFunction("\\\\cdparent",[ie],[])}case"\\\\cdlongequal":return C.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const P={type:"textord",text:"\\Vert",mode:"math"};return C.callFunction("\\Big",[P],[])}default:return{type:"textord",text:" ",mode:"math"}}}function sw(b){const y=[];for(b.gullet.beginGroup(),b.gullet.macros.set("\\cr","\\\\\\relax"),b.gullet.beginGroup();;){y.push(b.parseExpression(!1,"\\\\")),b.gullet.endGroup(),b.gullet.beginGroup();const B=b.fetch().text;if(B==="&"||B==="\\\\")b.consume();else if(B==="\\end"){y[y.length-1].length===0&&y.pop();break}else throw new o("Expected \\\\ or \\cr or \\end",b.nextToken)}let C=[];const N=[C];for(let B=0;B<y.length;B++){const H=y[B];let ee=x1();for(let ie=0;ie<H.length;ie++)if(!v1(H[ie]))ee.body.push(H[ie]);else{C.push(ee),ie+=1;const fe=xp(H[ie]).text,ve=new Array(2);if(ve[0]={type:"ordgroup",mode:"math",body:[]},ve[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(fe)>-1))if("<>AV".indexOf(fe)>-1)for(let Ye=0;Ye<2;Ye++){let bt=!0;for(let St=ie+1;St<H.length;St++){if(w1(H[St],fe)){bt=!1,ie=St;break}if(v1(H[St]))throw new o("Missing a "+fe+" character to complete a CD arrow.",H[St]);ve[Ye].body.push(H[St])}if(bt)throw new o("Missing a "+fe+" character to complete a CD arrow.",H[ie])}else throw new o('Expected one of "<>AV=|." after @',H[ie]);const Pe={type:"styling",body:[rw(fe,ve,b)],mode:"math",style:"display"};C.push(Pe),ee=x1()}B%2===0?C.push(ee):C.shift(),C=[],N.push(C)}b.gullet.endGroup(),b.gullet.endGroup();const P=new Array(N[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:N,arraystretch:1,addJot:!0,rowGaps:[null],cols:P,colSeparationType:"CD",hLinesBeforeRow:new Array(N.length+1).fill([])}}pt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(b,y){let{parser:C,funcName:N}=b;return{type:"cdlabel",mode:C.mode,side:N.slice(4),label:y[0]}},htmlBuilder(b,y){const C=y.havingStyle(y.style.sup()),N=Ae.wrapFragment(xn(b.label,C,y),y);return N.classes.push("cd-label-"+b.side),N.style.bottom=Fe(.8-N.depth),N.height=0,N.depth=0,N},mathmlBuilder(b,y){let C=new nt.MathNode("mrow",[Cn(b.label,y)]);return C=new nt.MathNode("mpadded",[C]),C.setAttribute("width","0"),b.side==="left"&&C.setAttribute("lspace","-1width"),C.setAttribute("voffset","0.7em"),C=new nt.MathNode("mstyle",[C]),C.setAttribute("displaystyle","false"),C.setAttribute("scriptlevel","1"),C}}),pt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(b,y){let{parser:C}=b;return{type:"cdlabelparent",mode:C.mode,fragment:y[0]}},htmlBuilder(b,y){const C=Ae.wrapFragment(xn(b.fragment,y),y);return C.classes.push("cd-vert-arrow"),C},mathmlBuilder(b,y){return new nt.MathNode("mrow",[Cn(b.fragment,y)])}}),pt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(b,y){let{parser:C}=b;const P=Zt(y[0],"ordgroup").body;let B="";for(let ie=0;ie<P.length;ie++){const fe=Zt(P[ie],"textord");B+=fe.text}let H=parseInt(B),ee;if(isNaN(H))throw new o("\\@char has non-numeric argument "+B);if(H<0||H>=1114111)throw new o("\\@char with invalid code point "+B);return H<=65535?ee=String.fromCharCode(H):(H-=65536,ee=String.fromCharCode((H>>10)+55296,(H&1023)+56320)),{type:"textord",mode:C.mode,text:ee}}});const k1=(b,y)=>{const C=Ar(b.body,y.withColor(b.color),!1);return Ae.makeFragment(C)},C1=(b,y)=>{const C=js(b.body,y.withColor(b.color)),N=new nt.MathNode("mstyle",C);return N.setAttribute("mathcolor",b.color),N};pt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(b,y){let{parser:C}=b;const N=Zt(y[0],"color-token").color,P=y[1];return{type:"color",mode:C.mode,color:N,body:Sr(P)}},htmlBuilder:k1,mathmlBuilder:C1}),pt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(b,y){let{parser:C,breakOnTokenText:N}=b;const P=Zt(y[0],"color-token").color;C.gullet.macros.set("\\current@color",P);const B=C.parseExpression(!0,N);return{type:"color",mode:C.mode,color:P,body:B}},htmlBuilder:k1,mathmlBuilder:C1}),pt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(b,y,C){let{parser:N}=b;const P=N.gullet.future().text==="["?N.parseSizeGroup(!0):null,B=!N.settings.displayMode||!N.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:N.mode,newLine:B,size:P&&Zt(P,"size").value}},htmlBuilder(b,y){const C=Ae.makeSpan(["mspace"],[],y);return b.newLine&&(C.classes.push("newline"),b.size&&(C.style.marginTop=Fe(tn(b.size,y)))),C},mathmlBuilder(b,y){const C=new nt.MathNode("mspace");return b.newLine&&(C.setAttribute("linebreak","newline"),b.size&&C.setAttribute("height",Fe(tn(b.size,y)))),C}});const wp={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},S1=b=>{const y=b.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(y))throw new o("Expected a control sequence",b);return y},ow=b=>{let y=b.gullet.popToken();return y.text==="="&&(y=b.gullet.popToken(),y.text===" "&&(y=b.gullet.popToken())),y},ah=(b,y,C,N)=>{let P=b.gullet.macros.get(C.text);P==null&&(C.noexpand=!0,P={tokens:[C],numArgs:0,unexpandable:!b.gullet.isExpandable(C.text)}),b.gullet.macros.set(y,P,N)};pt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(b){let{parser:y,funcName:C}=b;y.consumeSpaces();const N=y.fetch();if(wp[N.text])return(C==="\\global"||C==="\\\\globallong")&&(N.text=wp[N.text]),Zt(y.parseFunction(),"internal");throw new o("Invalid token after macro prefix",N)}}),pt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(b){let{parser:y,funcName:C}=b,N=y.gullet.popToken();const P=N.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(P))throw new o("Expected a control sequence",N);let B=0,H;const ee=[[]];for(;y.gullet.future().text!=="{";)if(N=y.gullet.popToken(),N.text==="#"){if(y.gullet.future().text==="{"){H=y.gullet.future(),ee[B].push("{");break}if(N=y.gullet.popToken(),!/^[1-9]$/.test(N.text))throw new o('Invalid argument number "'+N.text+'"');if(parseInt(N.text)!==B+1)throw new o('Argument number "'+N.text+'" out of order');B++,ee.push([])}else{if(N.text==="EOF")throw new o("Expected a macro definition");ee[B].push(N.text)}let{tokens:ie}=y.gullet.consumeArg();return H&&ie.unshift(H),(C==="\\edef"||C==="\\xdef")&&(ie=y.gullet.expandTokens(ie),ie.reverse()),y.gullet.macros.set(P,{tokens:ie,numArgs:B,delimiters:ee},C===wp[C]),{type:"internal",mode:y.mode}}}),pt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(b){let{parser:y,funcName:C}=b;const N=S1(y.gullet.popToken());y.gullet.consumeSpaces();const P=ow(y);return ah(y,N,P,C==="\\\\globallet"),{type:"internal",mode:y.mode}}}),pt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(b){let{parser:y,funcName:C}=b;const N=S1(y.gullet.popToken()),P=y.gullet.popToken(),B=y.gullet.popToken();return ah(y,N,B,C==="\\\\globalfuture"),y.gullet.pushToken(B),y.gullet.pushToken(P),{type:"internal",mode:y.mode}}});const sa=function(b,y,C){const N=Wn.math[b]&&Wn.math[b].replace,P=qt(N||b,y,C);if(!P)throw new Error("Unsupported symbol "+b+" and font size "+y+".");return P},kp=function(b,y,C,N){const P=C.havingBaseStyle(y),B=Ae.makeSpan(N.concat(P.sizingClasses(C)),[b],C),H=P.sizeMultiplier/C.sizeMultiplier;return B.height*=H,B.depth*=H,B.maxFontSize=P.sizeMultiplier,B},Cp=function(b,y,C){const N=y.havingBaseStyle(C),P=(1-y.sizeMultiplier/N.sizeMultiplier)*y.fontMetrics().axisHeight;b.classes.push("delimcenter"),b.style.top=Fe(P),b.height-=P,b.depth+=P},T1=function(b,y,C,N,P,B){const H=Ae.makeSymbol(b,"Main-Regular",P,N),ee=kp(H,y,N,B);return C&&Cp(ee,N,y),ee},I1=function(b,y,C,N){return Ae.makeSymbol(b,"Size"+y+"-Regular",C,N)},Sp=function(b,y,C,N,P,B){const H=I1(b,y,P,N),ee=kp(Ae.makeSpan(["delimsizing","size"+y],[H],N),q.TEXT,N,B);return C&&Cp(ee,N,q.TEXT),ee},lh=function(b,y,C){let N;return y==="Size1-Regular"?N="delim-size1":N="delim-size4",{type:"elem",elem:Ae.makeSpan(["delimsizinginner",N],[Ae.makeSpan([],[Ae.makeSymbol(b,y,C)])])}},Oa=function(b,y,C){const N=at["Size4-Regular"][b.charCodeAt(0)]?at["Size4-Regular"][b.charCodeAt(0)][4]:at["Size1-Regular"][b.charCodeAt(0)][4],P=new no("inner",ct(b,Math.round(1e3*y))),B=new Is([P],{width:Fe(N),height:Fe(y),style:"width:"+Fe(N),viewBox:"0 0 "+1e3*N+" "+Math.round(1e3*y),preserveAspectRatio:"xMinYMin"}),H=Ae.makeSvgSpan([],[B],C);return H.height=y,H.style.height=Fe(y),H.style.width=Fe(N),{type:"elem",elem:H}},Tp=.008,ch={type:"kern",size:-1*Tp},iw=["|","\\lvert","\\rvert","\\vert"],$1=["\\|","\\lVert","\\rVert","\\Vert"],Ip=function(b,y,C,N,P,B){let H,ee,ie,fe,ve="",Ce=0;H=ie=fe=b,ee=null;let Pe="Size1-Regular";b==="\\uparrow"?ie=fe="⏐":b==="\\Uparrow"?ie=fe="‖":b==="\\downarrow"?H=ie="⏐":b==="\\Downarrow"?H=ie="‖":b==="\\updownarrow"?(H="\\uparrow",ie="⏐",fe="\\downarrow"):b==="\\Updownarrow"?(H="\\Uparrow",ie="‖",fe="\\Downarrow"):k.contains(iw,b)?(ie="∣",ve="vert",Ce=333):k.contains($1,b)?(ie="∥",ve="doublevert",Ce=556):b==="["||b==="\\lbrack"?(H="⎡",ie="⎢",fe="⎣",Pe="Size4-Regular",ve="lbrack",Ce=667):b==="]"||b==="\\rbrack"?(H="⎤",ie="⎥",fe="⎦",Pe="Size4-Regular",ve="rbrack",Ce=667):b==="\\lfloor"||b==="⌊"?(ie=H="⎢",fe="⎣",Pe="Size4-Regular",ve="lfloor",Ce=667):b==="\\lceil"||b==="⌈"?(H="⎡",ie=fe="⎢",Pe="Size4-Regular",ve="lceil",Ce=667):b==="\\rfloor"||b==="⌋"?(ie=H="⎥",fe="⎦",Pe="Size4-Regular",ve="rfloor",Ce=667):b==="\\rceil"||b==="⌉"?(H="⎤",ie=fe="⎥",Pe="Size4-Regular",ve="rceil",Ce=667):b==="("||b==="\\lparen"?(H="⎛",ie="⎜",fe="⎝",Pe="Size4-Regular",ve="lparen",Ce=875):b===")"||b==="\\rparen"?(H="⎞",ie="⎟",fe="⎠",Pe="Size4-Regular",ve="rparen",Ce=875):b==="\\{"||b==="\\lbrace"?(H="⎧",ee="⎨",fe="⎩",ie="⎪",Pe="Size4-Regular"):b==="\\}"||b==="\\rbrace"?(H="⎫",ee="⎬",fe="⎭",ie="⎪",Pe="Size4-Regular"):b==="\\lgroup"||b==="⟮"?(H="⎧",fe="⎩",ie="⎪",Pe="Size4-Regular"):b==="\\rgroup"||b==="⟯"?(H="⎫",fe="⎭",ie="⎪",Pe="Size4-Regular"):b==="\\lmoustache"||b==="⎰"?(H="⎧",fe="⎭",ie="⎪",Pe="Size4-Regular"):(b==="\\rmoustache"||b==="⎱")&&(H="⎫",fe="⎩",ie="⎪",Pe="Size4-Regular");const Ye=sa(H,Pe,P),bt=Ye.height+Ye.depth,St=sa(ie,Pe,P),un=St.height+St.depth,nn=sa(fe,Pe,P),dn=nn.height+nn.depth;let Sn=0,In=1;if(ee!==null){const Qn=sa(ee,Pe,P);Sn=Qn.height+Qn.depth,In=2}const ms=bt+dn+Sn,Ur=Math.max(0,Math.ceil((y-ms)/(In*un))),$s=ms+Ur*In*un;let ca=N.fontMetrics().axisHeight;C&&(ca*=N.sizeMultiplier);const gn=$s/2-ca,En=[];if(ve.length>0){const Qn=$s-bt-dn,qn=Math.round($s*1e3),gs=rt(ve,Math.round(Qn*1e3)),Gp=new no(ve,gs),Ih=(Ce/1e3).toFixed(3)+"em",$h=(qn/1e3).toFixed(3)+"em",qp=new Is([Gp],{width:Ih,height:$h,viewBox:"0 0 "+Ce+" "+qn}),ua=Ae.makeSvgSpan([],[qp],N);ua.height=qn/1e3,ua.style.width=Ih,ua.style.height=$h,En.push({type:"elem",elem:ua})}else{if(En.push(lh(fe,Pe,P)),En.push(ch),ee===null){const Qn=$s-bt-dn+2*Tp;En.push(Oa(ie,Qn,N))}else{const Qn=($s-bt-dn-Sn)/2+2*Tp;En.push(Oa(ie,Qn,N)),En.push(ch),En.push(lh(ee,Pe,P)),En.push(ch),En.push(Oa(ie,Qn,N))}En.push(ch),En.push(lh(H,Pe,P))}const Rn=N.havingBaseStyle(q.TEXT),Zn=Ae.makeVList({positionType:"bottom",positionData:gn,children:En},Rn);return kp(Ae.makeSpan(["delimsizing","mult"],[Zn],Rn),q.TEXT,N,B)},Cl=80,Sl=.08,$p=function(b,y,C,N,P){const B=ft(b,N,C),H=new no(b,B),ee=new Is([H],{width:"400em",height:Fe(y),viewBox:"0 0 400000 "+C,preserveAspectRatio:"xMinYMin slice"});return Ae.makeSvgSpan(["hide-tail"],[ee],P)},uh=function(b,y){const C=y.havingBaseSizing(),N=M1("\\surd",b*C.sizeMultiplier,P1,C);let P=C.sizeMultiplier;const B=Math.max(0,y.minRuleThickness-y.fontMetrics().sqrtRuleThickness);let H,ee=0,ie=0,fe=0,ve;return N.type==="small"?(fe=1e3+1e3*B+Cl,b<1?P=1:b<1.4&&(P=.7),ee=(1+B+Sl)/P,ie=(1+B)/P,H=$p("sqrtMain",ee,fe,B,y),H.style.minWidth="0.853em",ve=.833/P):N.type==="large"?(fe=(1e3+Cl)*Tl[N.size],ie=(Tl[N.size]+B)/P,ee=(Tl[N.size]+B+Sl)/P,H=$p("sqrtSize"+N.size,ee,fe,B,y),H.style.minWidth="1.02em",ve=1/P):(ee=b+B+Sl,ie=b+B,fe=Math.floor(1e3*b+B)+Cl,H=$p("sqrtTall",ee,fe,B,y),H.style.minWidth="0.742em",ve=1.056),H.height=ie,H.style.height=Fe(ee),{span:H,advanceWidth:ve,ruleWidth:(y.fontMetrics().sqrtRuleThickness+B)*P}},N1=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],E1=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],dh=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Tl=[0,1.2,1.8,2.4,3],R1=function(b,y,C,N,P){if(b==="<"||b==="\\lt"||b==="⟨"?b="\\langle":(b===">"||b==="\\gt"||b==="⟩")&&(b="\\rangle"),k.contains(N1,b)||k.contains(dh,b))return Sp(b,y,!1,C,N,P);if(k.contains(E1,b))return Ip(b,Tl[y],!1,C,N,P);throw new o("Illegal delimiter: '"+b+"'")},A1=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],D1=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"stack"}],P1=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],aw=function(b){if(b.type==="small")return"Main-Regular";if(b.type==="large")return"Size"+b.size+"-Regular";if(b.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+b.type+"' here.")},M1=function(b,y,C,N){const P=Math.min(2,3-N.style.size);for(let B=P;B<C.length&&C[B].type!=="stack";B++){const H=sa(b,aw(C[B]),"math");let ee=H.height+H.depth;if(C[B].type==="small"){const ie=N.havingBaseStyle(C[B].style);ee*=ie.sizeMultiplier}if(ee>y)return C[B]}return C[C.length-1]},O1=function(b,y,C,N,P,B){b==="<"||b==="\\lt"||b==="⟨"?b="\\langle":(b===">"||b==="\\gt"||b==="⟩")&&(b="\\rangle");let H;k.contains(dh,b)?H=A1:k.contains(N1,b)?H=P1:H=D1;const ee=M1(b,y,H,N);return ee.type==="small"?T1(b,ee.style,C,N,P,B):ee.type==="large"?Sp(b,ee.size,C,N,P,B):Ip(b,y,C,N,P,B)};var Wr={sqrtImage:uh,sizedDelim:R1,sizeToMaxHeight:Tl,customSizedDelim:O1,leftRightDelim:function(b,y,C,N,P,B){const H=N.fontMetrics().axisHeight*N.sizeMultiplier,ee=901,ie=5/N.fontMetrics().ptPerEm,fe=Math.max(y-H,C+H),ve=Math.max(fe/500*ee,2*fe-ie);return O1(b,ve,!0,N,P,B)}};const Cc={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},F1=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Du(b,y){const C=oh(b);if(C&&k.contains(F1,C.text))return C;throw C?new o("Invalid delimiter '"+C.text+"' after '"+y.funcName+"'",b):new o("Invalid delimiter type '"+b.type+"'",b)}pt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(b,y)=>{const C=Du(y[0],b);return{type:"delimsizing",mode:b.parser.mode,size:Cc[b.funcName].size,mclass:Cc[b.funcName].mclass,delim:C.text}},htmlBuilder:(b,y)=>b.delim==="."?Ae.makeSpan([b.mclass]):Wr.sizedDelim(b.delim,b.size,y,b.mode,[b.mclass]),mathmlBuilder:b=>{const y=[];b.delim!=="."&&y.push(Vs(b.delim,b.mode));const C=new nt.MathNode("mo",y);b.mclass==="mopen"||b.mclass==="mclose"?C.setAttribute("fence","true"):C.setAttribute("fence","false"),C.setAttribute("stretchy","true");const N=Fe(Wr.sizeToMaxHeight[b.size]);return C.setAttribute("minsize",N),C.setAttribute("maxsize",N),C}});function Np(b){if(!b.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}pt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(b,y)=>{const C=b.parser.gullet.macros.get("\\current@color");if(C&&typeof C!="string")throw new o("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:b.parser.mode,delim:Du(y[0],b).text,color:C}}}),pt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(b,y)=>{const C=Du(y[0],b),N=b.parser;++N.leftrightDepth;const P=N.parseExpression(!1);--N.leftrightDepth,N.expect("\\right",!1);const B=Zt(N.parseFunction(),"leftright-right");return{type:"leftright",mode:N.mode,body:P,left:C.text,right:B.delim,rightColor:B.color}},htmlBuilder:(b,y)=>{Np(b);const C=Ar(b.body,y,!0,["mopen","mclose"]);let N=0,P=0,B=!1;for(let ie=0;ie<C.length;ie++)C[ie].isMiddle?B=!0:(N=Math.max(C[ie].height,N),P=Math.max(C[ie].depth,P));N*=y.sizeMultiplier,P*=y.sizeMultiplier;let H;if(b.left==="."?H=Pa(y,["mopen"]):H=Wr.leftRightDelim(b.left,N,P,y,b.mode,["mopen"]),C.unshift(H),B)for(let ie=1;ie<C.length;ie++){const ve=C[ie].isMiddle;ve&&(C[ie]=Wr.leftRightDelim(ve.delim,N,P,ve.options,b.mode,[]))}let ee;if(b.right===".")ee=Pa(y,["mclose"]);else{const ie=b.rightColor?y.withColor(b.rightColor):y;ee=Wr.leftRightDelim(b.right,N,P,ie,b.mode,["mclose"])}return C.push(ee),Ae.makeSpan(["minner"],C,y)},mathmlBuilder:(b,y)=>{Np(b);const C=js(b.body,y);if(b.left!=="."){const N=new nt.MathNode("mo",[Vs(b.left,b.mode)]);N.setAttribute("fence","true"),C.unshift(N)}if(b.right!=="."){const N=new nt.MathNode("mo",[Vs(b.right,b.mode)]);N.setAttribute("fence","true"),b.rightColor&&N.setAttribute("mathcolor",b.rightColor),C.push(N)}return nh(C)}}),pt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(b,y)=>{const C=Du(y[0],b);if(!b.parser.leftrightDepth)throw new o("\\middle without preceding \\left",C);return{type:"middle",mode:b.parser.mode,delim:C.text}},htmlBuilder:(b,y)=>{let C;if(b.delim===".")C=Pa(y,[]);else{C=Wr.sizedDelim(b.delim,1,y,b.mode,[]);const N={delim:b.delim,options:y};C.isMiddle=N}return C},mathmlBuilder:(b,y)=>{const C=b.delim==="\\vert"||b.delim==="|"?Vs("|","text"):Vs(b.delim,b.mode),N=new nt.MathNode("mo",[C]);return N.setAttribute("fence","true"),N.setAttribute("lspace","0.05em"),N.setAttribute("rspace","0.05em"),N}});const hh=(b,y)=>{const C=Ae.wrapFragment(xn(b.body,y),y),N=b.label.slice(1);let P=y.sizeMultiplier,B,H=0;const ee=k.isCharacterBox(b.body);if(N==="sout")B=Ae.makeSpan(["stretchy","sout"]),B.height=y.fontMetrics().defaultRuleThickness/P,H=-.5*y.fontMetrics().xHeight;else if(N==="phase"){const fe=tn({number:.6,unit:"pt"},y),ve=tn({number:.35,unit:"ex"},y),Ce=y.havingBaseSizing();P=P/Ce.sizeMultiplier;const Pe=C.height+C.depth+fe+ve;C.style.paddingLeft=Fe(Pe/2+fe);const Ye=Math.floor(1e3*Pe*P),bt=Ge(Ye),St=new Is([new no("phase",bt)],{width:"400em",height:Fe(Ye/1e3),viewBox:"0 0 400000 "+Ye,preserveAspectRatio:"xMinYMin slice"});B=Ae.makeSvgSpan(["hide-tail"],[St],y),B.style.height=Fe(Pe),H=C.depth+fe+ve}else{/cancel/.test(N)?ee||C.classes.push("cancel-pad"):N==="angl"?C.classes.push("anglpad"):C.classes.push("boxpad");let fe=0,ve=0,Ce=0;/box/.test(N)?(Ce=Math.max(y.fontMetrics().fboxrule,y.minRuleThickness),fe=y.fontMetrics().fboxsep+(N==="colorbox"?0:Ce),ve=fe):N==="angl"?(Ce=Math.max(y.fontMetrics().defaultRuleThickness,y.minRuleThickness),fe=4*Ce,ve=Math.max(0,.25-C.depth)):(fe=ee?.2:0,ve=fe),B=ri.encloseSpan(C,N,fe,ve,y),/fbox|boxed|fcolorbox/.test(N)?(B.style.borderStyle="solid",B.style.borderWidth=Fe(Ce)):N==="angl"&&Ce!==.049&&(B.style.borderTopWidth=Fe(Ce),B.style.borderRightWidth=Fe(Ce)),H=C.depth+ve,b.backgroundColor&&(B.style.backgroundColor=b.backgroundColor,b.borderColor&&(B.style.borderColor=b.borderColor))}let ie;if(b.backgroundColor)ie=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:B,shift:H},{type:"elem",elem:C,shift:0}]},y);else{const fe=/cancel|phase/.test(N)?["svg-align"]:[];ie=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:C,shift:0},{type:"elem",elem:B,shift:H,wrapperClasses:fe}]},y)}return/cancel/.test(N)&&(ie.height=C.height,ie.depth=C.depth),/cancel/.test(N)&&!ee?Ae.makeSpan(["mord","cancel-lap"],[ie],y):Ae.makeSpan(["mord"],[ie],y)},Pu=(b,y)=>{let C=0;const N=new nt.MathNode(b.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Cn(b.body,y)]);switch(b.label){case"\\cancel":N.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":N.setAttribute("notation","downdiagonalstrike");break;case"\\phase":N.setAttribute("notation","phasorangle");break;case"\\sout":N.setAttribute("notation","horizontalstrike");break;case"\\fbox":N.setAttribute("notation","box");break;case"\\angl":N.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(C=y.fontMetrics().fboxsep*y.fontMetrics().ptPerEm,N.setAttribute("width","+"+2*C+"pt"),N.setAttribute("height","+"+2*C+"pt"),N.setAttribute("lspace",C+"pt"),N.setAttribute("voffset",C+"pt"),b.label==="\\fcolorbox"){const P=Math.max(y.fontMetrics().fboxrule,y.minRuleThickness);N.setAttribute("style","border: "+P+"em solid "+String(b.borderColor))}break;case"\\xcancel":N.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return b.backgroundColor&&N.setAttribute("mathbackground",b.backgroundColor),N};pt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(b,y,C){let{parser:N,funcName:P}=b;const B=Zt(y[0],"color-token").color,H=y[1];return{type:"enclose",mode:N.mode,label:P,backgroundColor:B,body:H}},htmlBuilder:hh,mathmlBuilder:Pu}),pt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(b,y,C){let{parser:N,funcName:P}=b;const B=Zt(y[0],"color-token").color,H=Zt(y[1],"color-token").color,ee=y[2];return{type:"enclose",mode:N.mode,label:P,backgroundColor:H,borderColor:B,body:ee}},htmlBuilder:hh,mathmlBuilder:Pu}),pt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(b,y){let{parser:C}=b;return{type:"enclose",mode:C.mode,label:"\\fbox",body:y[0]}}}),pt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(b,y){let{parser:C,funcName:N}=b;const P=y[0];return{type:"enclose",mode:C.mode,label:N,body:P}},htmlBuilder:hh,mathmlBuilder:Pu}),pt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(b,y){let{parser:C}=b;return{type:"enclose",mode:C.mode,label:"\\angl",body:y[0]}}});const z1={};function Ti(b){let{type:y,names:C,props:N,handler:P,htmlBuilder:B,mathmlBuilder:H}=b;const ee={type:y,numArgs:N.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:P};for(let ie=0;ie<C.length;++ie)z1[C[ie]]=ee;B&&(Qo[y]=B),H&&(Jo[y]=H)}const Il={};function te(b,y){Il[b]=y}class hs{constructor(y,C,N){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=y,this.start=C,this.end=N}static range(y,C){return C?!y||!y.loc||!C.loc||y.loc.lexer!==C.loc.lexer?null:new hs(y.loc.lexer,y.loc.start,C.loc.end):y&&y.loc}}class so{constructor(y,C){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=y,this.loc=C}range(y,C){return new so(C,hs.range(this,y))}}function Ep(b){const y=[];b.consumeSpaces();let C=b.fetch().text;for(C==="\\relax"&&(b.consume(),b.consumeSpaces(),C=b.fetch().text);C==="\\hline"||C==="\\hdashline";)b.consume(),y.push(C==="\\hdashline"),b.consumeSpaces(),C=b.fetch().text;return y}const $l=b=>{if(!b.parser.settings.displayMode)throw new o("{"+b.envName+"} can be used only in display mode.")};function Fa(b){if(b.indexOf("ed")===-1)return b.indexOf("*")===-1}function Ii(b,y,C){let{hskipBeforeAndAfter:N,addJot:P,cols:B,arraystretch:H,colSeparationType:ee,autoTag:ie,singleRow:fe,emptySingleRow:ve,maxNumCols:Ce,leqno:Pe}=y;if(b.gullet.beginGroup(),fe||b.gullet.macros.set("\\cr","\\\\\\relax"),!H){const In=b.gullet.expandMacroAsText("\\arraystretch");if(In==null)H=1;else if(H=parseFloat(In),!H||H<0)throw new o("Invalid \\arraystretch: "+In)}b.gullet.beginGroup();let Ye=[];const bt=[Ye],St=[],un=[],nn=ie!=null?[]:void 0;function dn(){ie&&b.gullet.macros.set("\\@eqnsw","1",!0)}function Sn(){nn&&(b.gullet.macros.get("\\df@tag")?(nn.push(b.subparse([new so("\\df@tag")])),b.gullet.macros.set("\\df@tag",void 0,!0)):nn.push(!!ie&&b.gullet.macros.get("\\@eqnsw")==="1"))}for(dn(),un.push(Ep(b));;){let In=b.parseExpression(!1,fe?"\\end":"\\\\");b.gullet.endGroup(),b.gullet.beginGroup(),In={type:"ordgroup",mode:b.mode,body:In},C&&(In={type:"styling",mode:b.mode,style:C,body:[In]}),Ye.push(In);const ms=b.fetch().text;if(ms==="&"){if(Ce&&Ye.length===Ce){if(fe||ee)throw new o("Too many tab characters: &",b.nextToken);b.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}b.consume()}else if(ms==="\\end"){Sn(),Ye.length===1&&In.type==="styling"&&In.body[0].body.length===0&&(bt.length>1||!ve)&&bt.pop(),un.length<bt.length+1&&un.push([]);break}else if(ms==="\\\\"){b.consume();let Ur;b.gullet.future().text!==" "&&(Ur=b.parseSizeGroup(!0)),St.push(Ur?Ur.value:null),Sn(),un.push(Ep(b)),Ye=[],bt.push(Ye),dn()}else throw new o("Expected & or \\\\ or \\cr or \\end",b.nextToken)}return b.gullet.endGroup(),b.gullet.endGroup(),{type:"array",mode:b.mode,addJot:P,arraystretch:H,body:bt,cols:B,rowGaps:St,hskipBeforeAndAfter:N,hLinesBeforeRow:un,colSeparationType:ee,tags:nn,leqno:Pe}}function fh(b){return b.slice(0,1)==="d"?"display":"text"}const Co=function(b,y){let C,N;const P=b.body.length,B=b.hLinesBeforeRow;let H=0,ee=new Array(P);const ie=[],fe=Math.max(y.fontMetrics().arrayRuleWidth,y.minRuleThickness),ve=1/y.fontMetrics().ptPerEm;let Ce=5*ve;b.colSeparationType&&b.colSeparationType==="small"&&(Ce=.2778*(y.havingStyle(q.SCRIPT).sizeMultiplier/y.sizeMultiplier));const Pe=b.colSeparationType==="CD"?tn({number:3,unit:"ex"},y):12*ve,Ye=3*ve,bt=b.arraystretch*Pe,St=.7*bt,un=.3*bt;let nn=0;function dn(gn){for(let En=0;En<gn.length;++En)En>0&&(nn+=.25),ie.push({pos:nn,isDashed:gn[En]})}for(dn(B[0]),C=0;C<b.body.length;++C){const gn=b.body[C];let En=St,Rn=un;H<gn.length&&(H=gn.length);const Zn=new Array(gn.length);for(N=0;N<gn.length;++N){const gs=xn(gn[N],y);Rn<gs.depth&&(Rn=gs.depth),En<gs.height&&(En=gs.height),Zn[N]=gs}const Qn=b.rowGaps[C];let qn=0;Qn&&(qn=tn(Qn,y),qn>0&&(qn+=un,Rn<qn&&(Rn=qn),qn=0)),b.addJot&&(Rn+=Ye),Zn.height=En,Zn.depth=Rn,nn+=En,Zn.pos=nn,nn+=Rn+qn,ee[C]=Zn,dn(B[C+1])}const Sn=nn/2+y.fontMetrics().axisHeight,In=b.cols||[],ms=[];let Ur,$s;const ca=[];if(b.tags&&b.tags.some(gn=>gn))for(C=0;C<P;++C){const gn=ee[C],En=gn.pos-Sn,Rn=b.tags[C];let Zn;Rn===!0?Zn=Ae.makeSpan(["eqn-num"],[],y):Rn===!1?Zn=Ae.makeSpan([],[],y):Zn=Ae.makeSpan([],Ar(Rn,y,!0),y),Zn.depth=gn.depth,Zn.height=gn.height,ca.push({type:"elem",elem:Zn,shift:En})}for(N=0,$s=0;N<H||$s<In.length;++N,++$s){let gn=In[$s]||{},En=!0;for(;gn.type==="separator";){if(En||(Ur=Ae.makeSpan(["arraycolsep"],[]),Ur.style.width=Fe(y.fontMetrics().doubleRuleSep),ms.push(Ur)),gn.separator==="|"||gn.separator===":"){const Qn=gn.separator==="|"?"solid":"dashed",qn=Ae.makeSpan(["vertical-separator"],[],y);qn.style.height=Fe(nn),qn.style.borderRightWidth=Fe(fe),qn.style.borderRightStyle=Qn,qn.style.margin="0 "+Fe(-fe/2);const gs=nn-Sn;gs&&(qn.style.verticalAlign=Fe(-gs)),ms.push(qn)}else throw new o("Invalid separator type: "+gn.separator);$s++,gn=In[$s]||{},En=!1}if(N>=H)continue;let Rn;(N>0||b.hskipBeforeAndAfter)&&(Rn=k.deflt(gn.pregap,Ce),Rn!==0&&(Ur=Ae.makeSpan(["arraycolsep"],[]),Ur.style.width=Fe(Rn),ms.push(Ur)));let Zn=[];for(C=0;C<P;++C){const Qn=ee[C],qn=Qn[N];if(!qn)continue;const gs=Qn.pos-Sn;qn.depth=Qn.depth,qn.height=Qn.height,Zn.push({type:"elem",elem:qn,shift:gs})}Zn=Ae.makeVList({positionType:"individualShift",children:Zn},y),Zn=Ae.makeSpan(["col-align-"+(gn.align||"c")],[Zn]),ms.push(Zn),(N<H-1||b.hskipBeforeAndAfter)&&(Rn=k.deflt(gn.postgap,Ce),Rn!==0&&(Ur=Ae.makeSpan(["arraycolsep"],[]),Ur.style.width=Fe(Rn),ms.push(Ur)))}if(ee=Ae.makeSpan(["mtable"],ms),ie.length>0){const gn=Ae.makeLineSpan("hline",y,fe),En=Ae.makeLineSpan("hdashline",y,fe),Rn=[{type:"elem",elem:ee,shift:0}];for(;ie.length>0;){const Zn=ie.pop(),Qn=Zn.pos-Sn;Zn.isDashed?Rn.push({type:"elem",elem:En,shift:Qn}):Rn.push({type:"elem",elem:gn,shift:Qn})}ee=Ae.makeVList({positionType:"individualShift",children:Rn},y)}if(ca.length===0)return Ae.makeSpan(["mord"],[ee],y);{let gn=Ae.makeVList({positionType:"individualShift",children:ca},y);return gn=Ae.makeSpan(["tag"],[gn],y),Ae.makeFragment([ee,gn])}},L1={c:"center ",l:"left ",r:"right "},si=function(b,y){const C=[],N=new nt.MathNode("mtd",[],["mtr-glue"]),P=new nt.MathNode("mtd",[],["mml-eqn-num"]);for(let Ce=0;Ce<b.body.length;Ce++){const Pe=b.body[Ce],Ye=[];for(let bt=0;bt<Pe.length;bt++)Ye.push(new nt.MathNode("mtd",[Cn(Pe[bt],y)]));b.tags&&b.tags[Ce]&&(Ye.unshift(N),Ye.push(N),b.leqno?Ye.unshift(P):Ye.push(P)),C.push(new nt.MathNode("mtr",Ye))}let B=new nt.MathNode("mtable",C);const H=b.arraystretch===.5?.1:.16+b.arraystretch-1+(b.addJot?.09:0);B.setAttribute("rowspacing",Fe(H));let ee="",ie="";if(b.cols&&b.cols.length>0){const Ce=b.cols;let Pe="",Ye=!1,bt=0,St=Ce.length;Ce[0].type==="separator"&&(ee+="top ",bt=1),Ce[Ce.length-1].type==="separator"&&(ee+="bottom ",St-=1);for(let un=bt;un<St;un++)Ce[un].type==="align"?(ie+=L1[Ce[un].align],Ye&&(Pe+="none "),Ye=!0):Ce[un].type==="separator"&&Ye&&(Pe+=Ce[un].separator==="|"?"solid ":"dashed ",Ye=!1);B.setAttribute("columnalign",ie.trim()),/[sd]/.test(Pe)&&B.setAttribute("columnlines",Pe.trim())}if(b.colSeparationType==="align"){const Ce=b.cols||[];let Pe="";for(let Ye=1;Ye<Ce.length;Ye++)Pe+=Ye%2?"0em ":"1em ";B.setAttribute("columnspacing",Pe.trim())}else b.colSeparationType==="alignat"||b.colSeparationType==="gather"?B.setAttribute("columnspacing","0em"):b.colSeparationType==="small"?B.setAttribute("columnspacing","0.2778em"):b.colSeparationType==="CD"?B.setAttribute("columnspacing","0.5em"):B.setAttribute("columnspacing","1em");let fe="";const ve=b.hLinesBeforeRow;ee+=ve[0].length>0?"left ":"",ee+=ve[ve.length-1].length>0?"right ":"";for(let Ce=1;Ce<ve.length-1;Ce++)fe+=ve[Ce].length===0?"none ":ve[Ce][0]?"dashed ":"solid ";return/[sd]/.test(fe)&&B.setAttribute("rowlines",fe.trim()),ee!==""&&(B=new nt.MathNode("menclose",[B]),B.setAttribute("notation",ee.trim())),b.arraystretch&&b.arraystretch<1&&(B=new nt.MathNode("mstyle",[B]),B.setAttribute("scriptlevel","1")),B},Rp=function(b,y){b.envName.indexOf("ed")===-1&&$l(b);const C=[],N=b.envName.indexOf("at")>-1?"alignat":"align",P=b.envName==="split",B=Ii(b.parser,{cols:C,addJot:!0,autoTag:P?void 0:Fa(b.envName),emptySingleRow:!0,colSeparationType:N,maxNumCols:P?2:void 0,leqno:b.parser.settings.leqno},"display");let H,ee=0;const ie={type:"ordgroup",mode:b.mode,body:[]};if(y[0]&&y[0].type==="ordgroup"){let ve="";for(let Ce=0;Ce<y[0].body.length;Ce++){const Pe=Zt(y[0].body[Ce],"textord");ve+=Pe.text}H=Number(ve),ee=H*2}const fe=!ee;B.body.forEach(function(ve){for(let Ce=1;Ce<ve.length;Ce+=2){const Pe=Zt(ve[Ce],"styling");Zt(Pe.body[0],"ordgroup").body.unshift(ie)}if(fe)ee<ve.length&&(ee=ve.length);else{const Ce=ve.length/2;if(H<Ce)throw new o("Too many math in a row: "+("expected "+H+", but got "+Ce),ve[0])}});for(let ve=0;ve<ee;++ve){let Ce="r",Pe=0;ve%2===1?Ce="l":ve>0&&fe&&(Pe=1),C[ve]={type:"align",align:Ce,pregap:Pe,postgap:0}}return B.colSeparationType=fe?"align":"alignat",B};Ti({type:"array",names:["array","darray"],props:{numArgs:1},handler(b,y){const P=(oh(y[0])?[y[0]]:Zt(y[0],"ordgroup").body).map(function(H){const ie=xp(H).text;if("lcr".indexOf(ie)!==-1)return{type:"align",align:ie};if(ie==="|")return{type:"separator",separator:"|"};if(ie===":")return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+ie,H)}),B={cols:P,hskipBeforeAndAfter:!0,maxNumCols:P.length};return Ii(b.parser,B,fh(b.envName))},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(b){const y={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[b.envName.replace("*","")];let C="c";const N={hskipBeforeAndAfter:!1,cols:[{type:"align",align:C}]};if(b.envName.charAt(b.envName.length-1)==="*"){const H=b.parser;if(H.consumeSpaces(),H.fetch().text==="["){if(H.consume(),H.consumeSpaces(),C=H.fetch().text,"lcr".indexOf(C)===-1)throw new o("Expected l or c or r",H.nextToken);H.consume(),H.consumeSpaces(),H.expect("]"),H.consume(),N.cols=[{type:"align",align:C}]}}const P=Ii(b.parser,N,fh(b.envName)),B=Math.max(0,...P.body.map(H=>H.length));return P.cols=new Array(B).fill({type:"align",align:C}),y?{type:"leftright",mode:b.mode,body:[P],left:y[0],right:y[1],rightColor:void 0}:P},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(b){const y={arraystretch:.5},C=Ii(b.parser,y,"script");return C.colSeparationType="small",C},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["subarray"],props:{numArgs:1},handler(b,y){const P=(oh(y[0])?[y[0]]:Zt(y[0],"ordgroup").body).map(function(H){const ie=xp(H).text;if("lc".indexOf(ie)!==-1)return{type:"align",align:ie};throw new o("Unknown column alignment: "+ie,H)});if(P.length>1)throw new o("{subarray} can contain only one column");let B={cols:P,hskipBeforeAndAfter:!1,arraystretch:.5};if(B=Ii(b.parser,B,"script"),B.body.length>0&&B.body[0].length>1)throw new o("{subarray} can contain only one column");return B},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(b){const y={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},C=Ii(b.parser,y,fh(b.envName));return{type:"leftright",mode:b.mode,body:[C],left:b.envName.indexOf("r")>-1?".":"\\{",right:b.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Rp,htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(b){k.contains(["gather","gather*"],b.envName)&&$l(b);const y={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Fa(b.envName),emptySingleRow:!0,leqno:b.parser.settings.leqno};return Ii(b.parser,y,"display")},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Rp,htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(b){$l(b);const y={autoTag:Fa(b.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:b.parser.settings.leqno};return Ii(b.parser,y,"display")},htmlBuilder:Co,mathmlBuilder:si}),Ti({type:"array",names:["CD"],props:{numArgs:0},handler(b){return $l(b),sw(b.parser)},htmlBuilder:Co,mathmlBuilder:si}),te("\\nonumber","\\gdef\\@eqnsw{0}"),te("\\notag","\\nonumber"),pt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(b,y){throw new o(b.funcName+" valid only within array environment")}});var Ap=z1;pt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(b,y){let{parser:C,funcName:N}=b;const P=y[0];if(P.type!=="ordgroup")throw new o("Invalid environment name",P);let B="";for(let H=0;H<P.body.length;++H)B+=Zt(P.body[H],"textord").text;if(N==="\\begin"){if(!Ap.hasOwnProperty(B))throw new o("No such environment: "+B,P);const H=Ap[B],{args:ee,optArgs:ie}=C.parseArguments("\\begin{"+B+"}",H),fe={mode:C.mode,envName:B,parser:C},ve=H.handler(fe,ee,ie);C.expect("\\end",!1);const Ce=C.nextToken,Pe=Zt(C.parseFunction(),"environment");if(Pe.name!==B)throw new o("Mismatch: \\begin{"+B+"} matched by \\end{"+Pe.name+"}",Ce);return ve}return{type:"environment",mode:C.mode,name:B,nameGroup:P}}});const Dp=(b,y)=>{const C=b.font,N=y.withFont(C);return xn(b.body,N)},oa=(b,y)=>{const C=b.font,N=y.withFont(C);return Cn(b.body,N)},ph={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};pt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=ti(y[0]);let B=N;return B in ph&&(B=ph[B]),{type:"font",mode:C.mode,font:B.slice(1),body:P}},htmlBuilder:Dp,mathmlBuilder:oa}),pt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(b,y)=>{let{parser:C}=b;const N=y[0],P=k.isCharacterBox(N);return{type:"mclass",mode:C.mode,mclass:kc(N),body:[{type:"font",mode:C.mode,font:"boldsymbol",body:N}],isCharacterBox:P}}}),pt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(b,y)=>{let{parser:C,funcName:N,breakOnTokenText:P}=b;const{mode:B}=C,H=C.parseExpression(!0,P),ee="math"+N.slice(1);return{type:"font",mode:B,font:ee,body:{type:"ordgroup",mode:C.mode,body:H}}},htmlBuilder:Dp,mathmlBuilder:oa});const mh=(b,y)=>{let C=y;return b==="display"?C=C.id>=q.SCRIPT.id?C.text():q.DISPLAY:b==="text"&&C.size===q.DISPLAY.size?C=q.TEXT:b==="script"?C=q.SCRIPT:b==="scriptscript"&&(C=q.SCRIPTSCRIPT),C},Pp=(b,y)=>{const C=mh(b.size,y.style),N=C.fracNum(),P=C.fracDen();let B;B=y.havingStyle(N);const H=xn(b.numer,B,y);if(b.continued){const dn=8.5/y.fontMetrics().ptPerEm,Sn=3.5/y.fontMetrics().ptPerEm;H.height=H.height<dn?dn:H.height,H.depth=H.depth<Sn?Sn:H.depth}B=y.havingStyle(P);const ee=xn(b.denom,B,y);let ie,fe,ve;b.hasBarLine?(b.barSize?(fe=tn(b.barSize,y),ie=Ae.makeLineSpan("frac-line",y,fe)):ie=Ae.makeLineSpan("frac-line",y),fe=ie.height,ve=ie.height):(ie=null,fe=0,ve=y.fontMetrics().defaultRuleThickness);let Ce,Pe,Ye;C.size===q.DISPLAY.size||b.size==="display"?(Ce=y.fontMetrics().num1,fe>0?Pe=3*ve:Pe=7*ve,Ye=y.fontMetrics().denom1):(fe>0?(Ce=y.fontMetrics().num2,Pe=ve):(Ce=y.fontMetrics().num3,Pe=3*ve),Ye=y.fontMetrics().denom2);let bt;if(ie){const dn=y.fontMetrics().axisHeight;Ce-H.depth-(dn+.5*fe)<Pe&&(Ce+=Pe-(Ce-H.depth-(dn+.5*fe))),dn-.5*fe-(ee.height-Ye)<Pe&&(Ye+=Pe-(dn-.5*fe-(ee.height-Ye)));const Sn=-(dn-.5*fe);bt=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:Ye},{type:"elem",elem:ie,shift:Sn},{type:"elem",elem:H,shift:-Ce}]},y)}else{const dn=Ce-H.depth-(ee.height-Ye);dn<Pe&&(Ce+=.5*(Pe-dn),Ye+=.5*(Pe-dn)),bt=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:Ye},{type:"elem",elem:H,shift:-Ce}]},y)}B=y.havingStyle(C),bt.height*=B.sizeMultiplier/y.sizeMultiplier,bt.depth*=B.sizeMultiplier/y.sizeMultiplier;let St;C.size===q.DISPLAY.size?St=y.fontMetrics().delim1:C.size===q.SCRIPTSCRIPT.size?St=y.havingStyle(q.SCRIPT).fontMetrics().delim2:St=y.fontMetrics().delim2;let un,nn;return b.leftDelim==null?un=Pa(y,["mopen"]):un=Wr.customSizedDelim(b.leftDelim,St,!0,y.havingStyle(C),b.mode,["mopen"]),b.continued?nn=Ae.makeSpan([]):b.rightDelim==null?nn=Pa(y,["mclose"]):nn=Wr.customSizedDelim(b.rightDelim,St,!0,y.havingStyle(C),b.mode,["mclose"]),Ae.makeSpan(["mord"].concat(B.sizingClasses(y)),[un,Ae.makeSpan(["mfrac"],[bt]),nn],y)},Mp=(b,y)=>{let C=new nt.MathNode("mfrac",[Cn(b.numer,y),Cn(b.denom,y)]);if(!b.hasBarLine)C.setAttribute("linethickness","0px");else if(b.barSize){const P=tn(b.barSize,y);C.setAttribute("linethickness",Fe(P))}const N=mh(b.size,y.style);if(N.size!==y.style.size){C=new nt.MathNode("mstyle",[C]);const P=N.size===q.DISPLAY.size?"true":"false";C.setAttribute("displaystyle",P),C.setAttribute("scriptlevel","0")}if(b.leftDelim!=null||b.rightDelim!=null){const P=[];if(b.leftDelim!=null){const B=new nt.MathNode("mo",[new nt.TextNode(b.leftDelim.replace("\\",""))]);B.setAttribute("fence","true"),P.push(B)}if(P.push(C),b.rightDelim!=null){const B=new nt.MathNode("mo",[new nt.TextNode(b.rightDelim.replace("\\",""))]);B.setAttribute("fence","true"),P.push(B)}return nh(P)}return C};pt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0],B=y[1];let H,ee=null,ie=null,fe="auto";switch(N){case"\\dfrac":case"\\frac":case"\\tfrac":H=!0;break;case"\\\\atopfrac":H=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":H=!1,ee="(",ie=")";break;case"\\\\bracefrac":H=!1,ee="\\{",ie="\\}";break;case"\\\\brackfrac":H=!1,ee="[",ie="]";break;default:throw new Error("Unrecognized genfrac command")}switch(N){case"\\dfrac":case"\\dbinom":fe="display";break;case"\\tfrac":case"\\tbinom":fe="text";break}return{type:"genfrac",mode:C.mode,continued:!1,numer:P,denom:B,hasBarLine:H,leftDelim:ee,rightDelim:ie,size:fe,barSize:null}},htmlBuilder:Pp,mathmlBuilder:Mp}),pt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0],B=y[1];return{type:"genfrac",mode:C.mode,continued:!0,numer:P,denom:B,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),pt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(b){let{parser:y,funcName:C,token:N}=b,P;switch(C){case"\\over":P="\\frac";break;case"\\choose":P="\\binom";break;case"\\atop":P="\\\\atopfrac";break;case"\\brace":P="\\\\bracefrac";break;case"\\brack":P="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:y.mode,replaceWith:P,token:N}}});const Sc=["display","text","script","scriptscript"],_1=function(b){let y=null;return b.length>0&&(y=b,y=y==="."?null:y),y};pt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(b,y){let{parser:C}=b;const N=y[4],P=y[5],B=ti(y[0]),H=B.type==="atom"&&B.family==="open"?_1(B.text):null,ee=ti(y[1]),ie=ee.type==="atom"&&ee.family==="close"?_1(ee.text):null,fe=Zt(y[2],"size");let ve,Ce=null;fe.isBlank?ve=!0:(Ce=fe.value,ve=Ce.number>0);let Pe="auto",Ye=y[3];if(Ye.type==="ordgroup"){if(Ye.body.length>0){const bt=Zt(Ye.body[0],"textord");Pe=Sc[Number(bt.text)]}}else Ye=Zt(Ye,"textord"),Pe=Sc[Number(Ye.text)];return{type:"genfrac",mode:C.mode,numer:N,denom:P,continued:!1,hasBarLine:ve,barSize:Ce,leftDelim:H,rightDelim:ie,size:Pe}},htmlBuilder:Pp,mathmlBuilder:Mp}),pt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(b,y){let{parser:C,funcName:N,token:P}=b;return{type:"infix",mode:C.mode,replaceWith:"\\\\abovefrac",size:Zt(y[0],"size").value,token:P}}}),pt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0],B=x(Zt(y[1],"infix").size),H=y[2],ee=B.number>0;return{type:"genfrac",mode:C.mode,numer:P,denom:H,continued:!1,hasBarLine:ee,barSize:B,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Pp,mathmlBuilder:Mp});const Op=(b,y)=>{const C=y.style;let N,P;b.type==="supsub"?(N=b.sup?xn(b.sup,y.havingStyle(C.sup()),y):xn(b.sub,y.havingStyle(C.sub()),y),P=Zt(b.base,"horizBrace")):P=Zt(b,"horizBrace");const B=xn(P.base,y.havingBaseStyle(q.DISPLAY)),H=ri.svgSpan(P,y);let ee;if(P.isOver?(ee=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:B},{type:"kern",size:.1},{type:"elem",elem:H}]},y),ee.children[0].children[0].children[1].classes.push("svg-align")):(ee=Ae.makeVList({positionType:"bottom",positionData:B.depth+.1+H.height,children:[{type:"elem",elem:H},{type:"kern",size:.1},{type:"elem",elem:B}]},y),ee.children[0].children[0].children[0].classes.push("svg-align")),N){const ie=Ae.makeSpan(["mord",P.isOver?"mover":"munder"],[ee],y);P.isOver?ee=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"kern",size:.2},{type:"elem",elem:N}]},y):ee=Ae.makeVList({positionType:"bottom",positionData:ie.depth+.2+N.height+N.depth,children:[{type:"elem",elem:N},{type:"kern",size:.2},{type:"elem",elem:ie}]},y)}return Ae.makeSpan(["mord",P.isOver?"mover":"munder"],[ee],y)};pt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(b,y){let{parser:C,funcName:N}=b;return{type:"horizBrace",mode:C.mode,label:N,isOver:/^\\over/.test(N),base:y[0]}},htmlBuilder:Op,mathmlBuilder:(b,y)=>{const C=ri.mathMLnode(b.label);return new nt.MathNode(b.isOver?"mover":"munder",[Cn(b.base,y),C])}}),pt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;const N=y[1],P=Zt(y[0],"url").url;return C.settings.isTrusted({command:"\\href",url:P})?{type:"href",mode:C.mode,href:P,body:Sr(N)}:C.formatUnsupportedCmd("\\href")},htmlBuilder:(b,y)=>{const C=Ar(b.body,y,!1);return Ae.makeAnchor(b.href,[],C,y)},mathmlBuilder:(b,y)=>{let C=Dr(b.body,y);return C instanceof Bs||(C=new Bs("mrow",[C])),C.setAttribute("href",b.href),C}}),pt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;const N=Zt(y[0],"url").url;if(!C.settings.isTrusted({command:"\\url",url:N}))return C.formatUnsupportedCmd("\\url");const P=[];for(let H=0;H<N.length;H++){let ee=N[H];ee==="~"&&(ee="\\textasciitilde"),P.push({type:"textord",mode:"text",text:ee})}const B={type:"text",mode:C.mode,font:"\\texttt",body:P};return{type:"href",mode:C.mode,href:N,body:Sr(B)}}}),pt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(b,y){let{parser:C}=b;return{type:"hbox",mode:C.mode,body:Sr(y[0])}},htmlBuilder(b,y){const C=Ar(b.body,y,!1);return Ae.makeFragment(C)},mathmlBuilder(b,y){return new nt.MathNode("mrow",js(b.body,y))}}),pt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(b,y)=>{let{parser:C,funcName:N,token:P}=b;const B=Zt(y[0],"raw").string,H=y[1];C.settings.strict&&C.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let ee;const ie={};switch(N){case"\\htmlClass":ie.class=B,ee={command:"\\htmlClass",class:B};break;case"\\htmlId":ie.id=B,ee={command:"\\htmlId",id:B};break;case"\\htmlStyle":ie.style=B,ee={command:"\\htmlStyle",style:B};break;case"\\htmlData":{const fe=B.split(",");for(let ve=0;ve<fe.length;ve++){const Ce=fe[ve].split("=");if(Ce.length!==2)throw new o("Error parsing key-value for \\htmlData");ie["data-"+Ce[0].trim()]=Ce[1].trim()}ee={command:"\\htmlData",attributes:ie};break}default:throw new Error("Unrecognized html command")}return C.settings.isTrusted(ee)?{type:"html",mode:C.mode,attributes:ie,body:Sr(H)}:C.formatUnsupportedCmd(N)},htmlBuilder:(b,y)=>{const C=Ar(b.body,y,!1),N=["enclosing"];b.attributes.class&&N.push(...b.attributes.class.trim().split(/\s+/));const P=Ae.makeSpan(N,C,y);for(const B in b.attributes)B!=="class"&&b.attributes.hasOwnProperty(B)&&P.setAttribute(B,b.attributes[B]);return P},mathmlBuilder:(b,y)=>Dr(b.body,y)}),pt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;return{type:"htmlmathml",mode:C.mode,html:Sr(y[0]),mathml:Sr(y[1])}},htmlBuilder:(b,y)=>{const C=Ar(b.html,y,!1);return Ae.makeFragment(C)},mathmlBuilder:(b,y)=>Dr(b.mathml,y)});const Un=function(b){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(b))return{number:+b,unit:"bp"};{const y=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(b);if(!y)throw new o("Invalid size: '"+b+"' in \\includegraphics");const C={number:+(y[1]+y[2]),unit:y[3]};if(!yr(C))throw new o("Invalid unit: '"+C.unit+"' in \\includegraphics.");return C}};pt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(b,y,C)=>{let{parser:N}=b,P={number:0,unit:"em"},B={number:.9,unit:"em"},H={number:0,unit:"em"},ee="";if(C[0]){const ve=Zt(C[0],"raw").string.split(",");for(let Ce=0;Ce<ve.length;Ce++){const Pe=ve[Ce].split("=");if(Pe.length===2){const Ye=Pe[1].trim();switch(Pe[0].trim()){case"alt":ee=Ye;break;case"width":P=Un(Ye);break;case"height":B=Un(Ye);break;case"totalheight":H=Un(Ye);break;default:throw new o("Invalid key: '"+Pe[0]+"' in \\includegraphics.")}}}}const ie=Zt(y[0],"url").url;return ee===""&&(ee=ie,ee=ee.replace(/^.*[\\/]/,""),ee=ee.substring(0,ee.lastIndexOf("."))),N.settings.isTrusted({command:"\\includegraphics",url:ie})?{type:"includegraphics",mode:N.mode,alt:ee,width:P,height:B,totalheight:H,src:ie}:N.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(b,y)=>{const C=tn(b.height,y);let N=0;b.totalheight.number>0&&(N=tn(b.totalheight,y)-C);let P=0;b.width.number>0&&(P=tn(b.width,y));const B={height:Fe(C+N)};P>0&&(B.width=Fe(P)),N>0&&(B.verticalAlign=Fe(-N));const H=new wo(b.src,b.alt,B);return H.height=C,H.depth=N,H},mathmlBuilder:(b,y)=>{const C=new nt.MathNode("mglyph",[]);C.setAttribute("alt",b.alt);const N=tn(b.height,y);let P=0;if(b.totalheight.number>0&&(P=tn(b.totalheight,y)-N,C.setAttribute("valign",Fe(-P))),C.setAttribute("height",Fe(N+P)),b.width.number>0){const B=tn(b.width,y);C.setAttribute("width",Fe(B))}return C.setAttribute("src",b.src),C}}),pt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(b,y){let{parser:C,funcName:N}=b;const P=Zt(y[0],"size");if(C.settings.strict){const B=N[1]==="m",H=P.value.unit==="mu";B?(H||C.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" supports only mu units, "+("not "+P.value.unit+" units")),C.mode!=="math"&&C.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" works only in math mode")):H&&C.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" doesn't support mu units")}return{type:"kern",mode:C.mode,dimension:P.value}},htmlBuilder(b,y){return Ae.makeGlue(b.dimension,y)},mathmlBuilder(b,y){const C=tn(b.dimension,y);return new nt.SpaceNode(C)}}),pt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0];return{type:"lap",mode:C.mode,alignment:N.slice(5),body:P}},htmlBuilder:(b,y)=>{let C;b.alignment==="clap"?(C=Ae.makeSpan([],[xn(b.body,y)]),C=Ae.makeSpan(["inner"],[C],y)):C=Ae.makeSpan(["inner"],[xn(b.body,y)]);const N=Ae.makeSpan(["fix"],[]);let P=Ae.makeSpan([b.alignment],[C,N],y);const B=Ae.makeSpan(["strut"]);return B.style.height=Fe(P.height+P.depth),P.depth&&(B.style.verticalAlign=Fe(-P.depth)),P.children.unshift(B),P=Ae.makeSpan(["thinbox"],[P],y),Ae.makeSpan(["mord","vbox"],[P],y)},mathmlBuilder:(b,y)=>{const C=new nt.MathNode("mpadded",[Cn(b.body,y)]);if(b.alignment!=="rlap"){const N=b.alignment==="llap"?"-1":"-0.5";C.setAttribute("lspace",N+"width")}return C.setAttribute("width","0px"),C}}),pt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(b,y){let{funcName:C,parser:N}=b;const P=N.mode;N.switchMode("math");const B=C==="\\("?"\\)":"$",H=N.parseExpression(!1,B);return N.expect(B),N.switchMode(P),{type:"styling",mode:N.mode,style:"text",body:H}}}),pt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(b,y){throw new o("Mismatched "+b.funcName)}});const gh=(b,y)=>{switch(y.style.size){case q.DISPLAY.size:return b.display;case q.TEXT.size:return b.text;case q.SCRIPT.size:return b.script;case q.SCRIPTSCRIPT.size:return b.scriptscript;default:return b.text}};pt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(b,y)=>{let{parser:C}=b;return{type:"mathchoice",mode:C.mode,display:Sr(y[0]),text:Sr(y[1]),script:Sr(y[2]),scriptscript:Sr(y[3])}},htmlBuilder:(b,y)=>{const C=gh(b,y),N=Ar(C,y,!1);return Ae.makeFragment(N)},mathmlBuilder:(b,y)=>{const C=gh(b,y);return Dr(C,y)}});const Mu=(b,y,C,N,P,B,H)=>{b=Ae.makeSpan([],[b]);const ee=C&&k.isCharacterBox(C);let ie,fe;if(y){const Pe=xn(y,N.havingStyle(P.sup()),N);fe={elem:Pe,kern:Math.max(N.fontMetrics().bigOpSpacing1,N.fontMetrics().bigOpSpacing3-Pe.depth)}}if(C){const Pe=xn(C,N.havingStyle(P.sub()),N);ie={elem:Pe,kern:Math.max(N.fontMetrics().bigOpSpacing2,N.fontMetrics().bigOpSpacing4-Pe.height)}}let ve;if(fe&&ie){const Pe=N.fontMetrics().bigOpSpacing5+ie.elem.height+ie.elem.depth+ie.kern+b.depth+H;ve=Ae.makeVList({positionType:"bottom",positionData:Pe,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:Fe(-B)},{type:"kern",size:ie.kern},{type:"elem",elem:b},{type:"kern",size:fe.kern},{type:"elem",elem:fe.elem,marginLeft:Fe(B)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else if(ie){const Pe=b.height-H;ve=Ae.makeVList({positionType:"top",positionData:Pe,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:ie.elem,marginLeft:Fe(-B)},{type:"kern",size:ie.kern},{type:"elem",elem:b}]},N)}else if(fe){const Pe=b.depth+H;ve=Ae.makeVList({positionType:"bottom",positionData:Pe,children:[{type:"elem",elem:b},{type:"kern",size:fe.kern},{type:"elem",elem:fe.elem,marginLeft:Fe(B)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else return b;const Ce=[ve];if(ie&&B!==0&&!ee){const Pe=Ae.makeSpan(["mspace"],[],N);Pe.style.marginRight=Fe(B),Ce.unshift(Pe)}return Ae.makeSpan(["mop","op-limits"],Ce,N)},Tc=["\\smallint"],Nl=(b,y)=>{let C,N,P=!1,B;b.type==="supsub"?(C=b.sup,N=b.sub,B=Zt(b.base,"op"),P=!0):B=Zt(b,"op");const H=y.style;let ee=!1;H.size===q.DISPLAY.size&&B.symbol&&!k.contains(Tc,B.name)&&(ee=!0);let ie;if(B.symbol){const Ce=ee?"Size2-Regular":"Size1-Regular";let Pe="";if((B.name==="\\oiint"||B.name==="\\oiiint")&&(Pe=B.name.slice(1),B.name=Pe==="oiint"?"\\iint":"\\iiint"),ie=Ae.makeSymbol(B.name,Ce,"math",y,["mop","op-symbol",ee?"large-op":"small-op"]),Pe.length>0){const Ye=ie.italic,bt=Ae.staticSvg(Pe+"Size"+(ee?"2":"1"),y);ie=Ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ie,shift:0},{type:"elem",elem:bt,shift:ee?.08:0}]},y),B.name="\\"+Pe,ie.classes.unshift("mop"),ie.italic=Ye}}else if(B.body){const Ce=Ar(B.body,y,!0);Ce.length===1&&Ce[0]instanceof Rr?(ie=Ce[0],ie.classes[0]="mop"):ie=Ae.makeSpan(["mop"],Ce,y)}else{const Ce=[];for(let Pe=1;Pe<B.name.length;Pe++)Ce.push(Ae.mathsym(B.name[Pe],B.mode,y));ie=Ae.makeSpan(["mop"],Ce,y)}let fe=0,ve=0;return(ie instanceof Rr||B.name==="\\oiint"||B.name==="\\oiiint")&&!B.suppressBaseShift&&(fe=(ie.height-ie.depth)/2-y.fontMetrics().axisHeight,ve=ie.italic),P?Mu(ie,C,N,y,H,ve,fe):(fe&&(ie.style.position="relative",ie.style.top=Fe(fe)),ie)},El=(b,y)=>{let C;if(b.symbol)C=new Bs("mo",[Vs(b.name,b.mode)]),k.contains(Tc,b.name)&&C.setAttribute("largeop","false");else if(b.body)C=new Bs("mo",js(b.body,y));else{C=new Bs("mi",[new ni(b.name.slice(1))]);const N=new Bs("mo",[Vs("⁡","text")]);b.parentIsSupSub?C=new Bs("mrow",[C,N]):C=Ru([C,N])}return C},Ou={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};pt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(b,y)=>{let{parser:C,funcName:N}=b,P=N;return P.length===1&&(P=Ou[P]),{type:"op",mode:C.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:P}},htmlBuilder:Nl,mathmlBuilder:El}),pt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(b,y)=>{let{parser:C}=b;const N=y[0];return{type:"op",mode:C.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Sr(N)}},htmlBuilder:Nl,mathmlBuilder:El});const yh={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};pt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(b){let{parser:y,funcName:C}=b;return{type:"op",mode:y.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:C}},htmlBuilder:Nl,mathmlBuilder:El}),pt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(b){let{parser:y,funcName:C}=b;return{type:"op",mode:y.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:C}},htmlBuilder:Nl,mathmlBuilder:El}),pt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(b){let{parser:y,funcName:C}=b,N=C;return N.length===1&&(N=yh[N]),{type:"op",mode:y.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:N}},htmlBuilder:Nl,mathmlBuilder:El});const Rl=(b,y)=>{let C,N,P=!1,B;b.type==="supsub"?(C=b.sup,N=b.sub,B=Zt(b.base,"operatorname"),P=!0):B=Zt(b,"operatorname");let H;if(B.body.length>0){const ee=B.body.map(fe=>{const ve=fe.text;return typeof ve=="string"?{type:"textord",mode:fe.mode,text:ve}:fe}),ie=Ar(ee,y.withFont("mathrm"),!0);for(let fe=0;fe<ie.length;fe++){const ve=ie[fe];ve instanceof Rr&&(ve.text=ve.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}H=Ae.makeSpan(["mop"],ie,y)}else H=Ae.makeSpan(["mop"],[],y);return P?Mu(H,C,N,y,y.style,0,0):H};pt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(b,y)=>{let{parser:C,funcName:N}=b;const P=y[0];return{type:"operatorname",mode:C.mode,body:Sr(P),alwaysHandleSupSub:N==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Rl,mathmlBuilder:(b,y)=>{let C=js(b.body,y.withFont("mathrm")),N=!0;for(let H=0;H<C.length;H++){const ee=C[H];if(!(ee instanceof nt.SpaceNode))if(ee instanceof nt.MathNode)switch(ee.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const ie=ee.children[0];ee.children.length===1&&ie instanceof nt.TextNode?ie.text=ie.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):N=!1;break}default:N=!1}else N=!1}if(N){const H=C.map(ee=>ee.toText()).join("");C=[new nt.TextNode(H)]}const P=new nt.MathNode("mi",C);P.setAttribute("mathvariant","normal");const B=new nt.MathNode("mo",[Vs("⁡","text")]);return b.parentIsSupSub?new nt.MathNode("mrow",[P,B]):nt.newDocumentFragment([P,B])}}),te("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),ei({type:"ordgroup",htmlBuilder(b,y){return b.semisimple?Ae.makeFragment(Ar(b.body,y,!1)):Ae.makeSpan(["mord"],Ar(b.body,y,!0),y)},mathmlBuilder(b,y){return Dr(b.body,y,!0)}}),pt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(b,y){let{parser:C}=b;const N=y[0];return{type:"overline",mode:C.mode,body:N}},htmlBuilder(b,y){const C=xn(b.body,y.havingCrampedStyle()),N=Ae.makeLineSpan("overline-line",y),P=y.fontMetrics().defaultRuleThickness,B=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:C},{type:"kern",size:3*P},{type:"elem",elem:N},{type:"kern",size:P}]},y);return Ae.makeSpan(["mord","overline"],[B],y)},mathmlBuilder(b,y){const C=new nt.MathNode("mo",[new nt.TextNode("‾")]);C.setAttribute("stretchy","true");const N=new nt.MathNode("mover",[Cn(b.body,y),C]);return N.setAttribute("accent","true"),N}}),pt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;const N=y[0];return{type:"phantom",mode:C.mode,body:Sr(N)}},htmlBuilder:(b,y)=>{const C=Ar(b.body,y.withPhantom(),!1);return Ae.makeFragment(C)},mathmlBuilder:(b,y)=>{const C=js(b.body,y);return new nt.MathNode("mphantom",C)}}),pt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;const N=y[0];return{type:"hphantom",mode:C.mode,body:N}},htmlBuilder:(b,y)=>{let C=Ae.makeSpan([],[xn(b.body,y.withPhantom())]);if(C.height=0,C.depth=0,C.children)for(let N=0;N<C.children.length;N++)C.children[N].height=0,C.children[N].depth=0;return C=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:C}]},y),Ae.makeSpan(["mord"],[C],y)},mathmlBuilder:(b,y)=>{const C=js(Sr(b.body),y),N=new nt.MathNode("mphantom",C),P=new nt.MathNode("mpadded",[N]);return P.setAttribute("height","0px"),P.setAttribute("depth","0px"),P}}),pt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(b,y)=>{let{parser:C}=b;const N=y[0];return{type:"vphantom",mode:C.mode,body:N}},htmlBuilder:(b,y)=>{const C=Ae.makeSpan(["inner"],[xn(b.body,y.withPhantom())]),N=Ae.makeSpan(["fix"],[]);return Ae.makeSpan(["mord","rlap"],[C,N],y)},mathmlBuilder:(b,y)=>{const C=js(Sr(b.body),y),N=new nt.MathNode("mphantom",C),P=new nt.MathNode("mpadded",[N]);return P.setAttribute("width","0px"),P}}),pt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(b,y){let{parser:C}=b;const N=Zt(y[0],"size").value,P=y[1];return{type:"raisebox",mode:C.mode,dy:N,body:P}},htmlBuilder(b,y){const C=xn(b.body,y),N=tn(b.dy,y);return Ae.makeVList({positionType:"shift",positionData:-N,children:[{type:"elem",elem:C}]},y)},mathmlBuilder(b,y){const C=new nt.MathNode("mpadded",[Cn(b.body,y)]),N=b.dy.number+b.dy.unit;return C.setAttribute("voffset",N),C}}),pt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(b){let{parser:y}=b;return{type:"internal",mode:y.mode}}}),pt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(b,y,C){let{parser:N}=b;const P=C[0],B=Zt(y[0],"size"),H=Zt(y[1],"size");return{type:"rule",mode:N.mode,shift:P&&Zt(P,"size").value,width:B.value,height:H.value}},htmlBuilder(b,y){const C=Ae.makeSpan(["mord","rule"],[],y),N=tn(b.width,y),P=tn(b.height,y),B=b.shift?tn(b.shift,y):0;return C.style.borderRightWidth=Fe(N),C.style.borderTopWidth=Fe(P),C.style.bottom=Fe(B),C.width=N,C.height=P+B,C.depth=-B,C.maxFontSize=P*1.125*y.sizeMultiplier,C},mathmlBuilder(b,y){const C=tn(b.width,y),N=tn(b.height,y),P=b.shift?tn(b.shift,y):0,B=y.color&&y.getColor()||"black",H=new nt.MathNode("mspace");H.setAttribute("mathbackground",B),H.setAttribute("width",Fe(C)),H.setAttribute("height",Fe(N));const ee=new nt.MathNode("mpadded",[H]);return P>=0?ee.setAttribute("height",Fe(P)):(ee.setAttribute("height",Fe(P)),ee.setAttribute("depth",Fe(-P))),ee.setAttribute("voffset",Fe(P)),ee}});function B1(b,y,C){const N=Ar(b,y,!1),P=y.sizeMultiplier/C.sizeMultiplier;for(let B=0;B<N.length;B++){const H=N[B].classes.indexOf("sizing");H<0?Array.prototype.push.apply(N[B].classes,y.sizingClasses(C)):N[B].classes[H+1]==="reset-size"+y.size&&(N[B].classes[H+1]="reset-size"+C.size),N[B].height*=P,N[B].depth*=P}return Ae.makeFragment(N)}const V1=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];pt({type:"sizing",names:V1,props:{numArgs:0,allowedInText:!0},handler:(b,y)=>{let{breakOnTokenText:C,funcName:N,parser:P}=b;const B=P.parseExpression(!1,C);return{type:"sizing",mode:P.mode,size:V1.indexOf(N)+1,body:B}},htmlBuilder:(b,y)=>{const C=y.havingSize(b.size);return B1(b.body,C,y)},mathmlBuilder:(b,y)=>{const C=y.havingSize(b.size),N=js(b.body,C),P=new nt.MathNode("mstyle",N);return P.setAttribute("mathsize",Fe(C.sizeMultiplier)),P}}),pt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(b,y,C)=>{let{parser:N}=b,P=!1,B=!1;const H=C[0]&&Zt(C[0],"ordgroup");if(H){let ie="";for(let fe=0;fe<H.body.length;++fe)if(ie=H.body[fe].text,ie==="t")P=!0;else if(ie==="b")B=!0;else{P=!1,B=!1;break}}else P=!0,B=!0;const ee=y[0];return{type:"smash",mode:N.mode,body:ee,smashHeight:P,smashDepth:B}},htmlBuilder:(b,y)=>{const C=Ae.makeSpan([],[xn(b.body,y)]);if(!b.smashHeight&&!b.smashDepth)return C;if(b.smashHeight&&(C.height=0,C.children))for(let P=0;P<C.children.length;P++)C.children[P].height=0;if(b.smashDepth&&(C.depth=0,C.children))for(let P=0;P<C.children.length;P++)C.children[P].depth=0;const N=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:C}]},y);return Ae.makeSpan(["mord"],[N],y)},mathmlBuilder:(b,y)=>{const C=new nt.MathNode("mpadded",[Cn(b.body,y)]);return b.smashHeight&&C.setAttribute("height","0px"),b.smashDepth&&C.setAttribute("depth","0px"),C}}),pt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(b,y,C){let{parser:N}=b;const P=C[0],B=y[0];return{type:"sqrt",mode:N.mode,body:B,index:P}},htmlBuilder(b,y){let C=xn(b.body,y.havingCrampedStyle());C.height===0&&(C.height=y.fontMetrics().xHeight),C=Ae.wrapFragment(C,y);const P=y.fontMetrics().defaultRuleThickness;let B=P;y.style.id<q.TEXT.id&&(B=y.fontMetrics().xHeight);let H=P+B/4;const ee=C.height+C.depth+H+P,{span:ie,ruleWidth:fe,advanceWidth:ve}=Wr.sqrtImage(ee,y),Ce=ie.height-fe;Ce>C.height+C.depth+H&&(H=(H+Ce-C.height-C.depth)/2);const Pe=ie.height-C.height-H-fe;C.style.paddingLeft=Fe(ve);const Ye=Ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:C,wrapperClasses:["svg-align"]},{type:"kern",size:-(C.height+Pe)},{type:"elem",elem:ie},{type:"kern",size:fe}]},y);if(b.index){const bt=y.havingStyle(q.SCRIPTSCRIPT),St=xn(b.index,bt,y),un=.6*(Ye.height-Ye.depth),nn=Ae.makeVList({positionType:"shift",positionData:-un,children:[{type:"elem",elem:St}]},y),dn=Ae.makeSpan(["root"],[nn]);return Ae.makeSpan(["mord","sqrt"],[dn,Ye],y)}else return Ae.makeSpan(["mord","sqrt"],[Ye],y)},mathmlBuilder(b,y){const{body:C,index:N}=b;return N?new nt.MathNode("mroot",[Cn(C,y),Cn(N,y)]):new nt.MathNode("msqrt",[Cn(C,y)])}});const Fu={display:q.DISPLAY,text:q.TEXT,script:q.SCRIPT,scriptscript:q.SCRIPTSCRIPT};pt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(b,y){let{breakOnTokenText:C,funcName:N,parser:P}=b;const B=P.parseExpression(!0,C),H=N.slice(1,N.length-5);return{type:"styling",mode:P.mode,style:H,body:B}},htmlBuilder(b,y){const C=Fu[b.style],N=y.havingStyle(C).withFont("");return B1(b.body,N,y)},mathmlBuilder(b,y){const C=Fu[b.style],N=y.havingStyle(C),P=js(b.body,N),B=new nt.MathNode("mstyle",P),ee={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[b.style];return B.setAttribute("scriptlevel",ee[0]),B.setAttribute("displaystyle",ee[1]),B}});const bh=function(b,y){const C=b.base;return C?C.type==="op"?C.limits&&(y.style.size===q.DISPLAY.size||C.alwaysHandleSupSub)?Nl:null:C.type==="operatorname"?C.alwaysHandleSupSub&&(y.style.size===q.DISPLAY.size||C.limits)?Rl:null:C.type==="accent"?k.isCharacterBox(C.base)?vp:null:C.type==="horizBrace"&&!b.sub===C.isOver?Op:null:null};ei({type:"supsub",htmlBuilder(b,y){const C=bh(b,y);if(C)return C(b,y);const{base:N,sup:P,sub:B}=b,H=xn(N,y);let ee,ie;const fe=y.fontMetrics();let ve=0,Ce=0;const Pe=N&&k.isCharacterBox(N);if(P){const Sn=y.havingStyle(y.style.sup());ee=xn(P,Sn,y),Pe||(ve=H.height-Sn.fontMetrics().supDrop*Sn.sizeMultiplier/y.sizeMultiplier)}if(B){const Sn=y.havingStyle(y.style.sub());ie=xn(B,Sn,y),Pe||(Ce=H.depth+Sn.fontMetrics().subDrop*Sn.sizeMultiplier/y.sizeMultiplier)}let Ye;y.style===q.DISPLAY?Ye=fe.sup1:y.style.cramped?Ye=fe.sup3:Ye=fe.sup2;const bt=y.sizeMultiplier,St=Fe(.5/fe.ptPerEm/bt);let un=null;if(ie){const Sn=b.base&&b.base.type==="op"&&b.base.name&&(b.base.name==="\\oiint"||b.base.name==="\\oiiint");(H instanceof Rr||Sn)&&(un=Fe(-H.italic))}let nn;if(ee&&ie){ve=Math.max(ve,Ye,ee.depth+.25*fe.xHeight),Ce=Math.max(Ce,fe.sub2);const In=4*fe.defaultRuleThickness;if(ve-ee.depth-(ie.height-Ce)<In){Ce=In-(ve-ee.depth)+ie.height;const Ur=.8*fe.xHeight-(ve-ee.depth);Ur>0&&(ve+=Ur,Ce-=Ur)}const ms=[{type:"elem",elem:ie,shift:Ce,marginRight:St,marginLeft:un},{type:"elem",elem:ee,shift:-ve,marginRight:St}];nn=Ae.makeVList({positionType:"individualShift",children:ms},y)}else if(ie){Ce=Math.max(Ce,fe.sub1,ie.height-.8*fe.xHeight);const Sn=[{type:"elem",elem:ie,marginLeft:un,marginRight:St}];nn=Ae.makeVList({positionType:"shift",positionData:Ce,children:Sn},y)}else if(ee)ve=Math.max(ve,Ye,ee.depth+.25*fe.xHeight),nn=Ae.makeVList({positionType:"shift",positionData:-ve,children:[{type:"elem",elem:ee,marginRight:St}]},y);else throw new Error("supsub must have either sup or sub.");const dn=Da(H,"right")||"mord";return Ae.makeSpan([dn],[H,Ae.makeSpan(["msupsub"],[nn])],y)},mathmlBuilder(b,y){let C=!1,N,P;b.base&&b.base.type==="horizBrace"&&(P=!!b.sup,P===b.base.isOver&&(C=!0,N=b.base.isOver)),b.base&&(b.base.type==="op"||b.base.type==="operatorname")&&(b.base.parentIsSupSub=!0);const B=[Cn(b.base,y)];b.sub&&B.push(Cn(b.sub,y)),b.sup&&B.push(Cn(b.sup,y));let H;if(C)H=N?"mover":"munder";else if(b.sub)if(b.sup){const ee=b.base;ee&&ee.type==="op"&&ee.limits&&y.style===q.DISPLAY||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(y.style===q.DISPLAY||ee.limits)?H="munderover":H="msubsup"}else{const ee=b.base;ee&&ee.type==="op"&&ee.limits&&(y.style===q.DISPLAY||ee.alwaysHandleSupSub)||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(ee.limits||y.style===q.DISPLAY)?H="munder":H="msub"}else{const ee=b.base;ee&&ee.type==="op"&&ee.limits&&(y.style===q.DISPLAY||ee.alwaysHandleSupSub)||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(ee.limits||y.style===q.DISPLAY)?H="mover":H="msup"}return new nt.MathNode(H,B)}}),ei({type:"atom",htmlBuilder(b,y){return Ae.mathsym(b.text,b.mode,y,["m"+b.family])},mathmlBuilder(b,y){const C=new nt.MathNode("mo",[Vs(b.text,b.mode)]);if(b.family==="bin"){const N=xc(b,y);N==="bold-italic"&&C.setAttribute("mathvariant",N)}else b.family==="punct"?C.setAttribute("separator","true"):(b.family==="open"||b.family==="close")&&C.setAttribute("stretchy","false");return C}});const xh={mi:"italic",mn:"normal",mtext:"normal"};ei({type:"mathord",htmlBuilder(b,y){return Ae.makeOrd(b,y,"mathord")},mathmlBuilder(b,y){const C=new nt.MathNode("mi",[Vs(b.text,b.mode,y)]),N=xc(b,y)||"italic";return N!==xh[C.type]&&C.setAttribute("mathvariant",N),C}}),ei({type:"textord",htmlBuilder(b,y){return Ae.makeOrd(b,y,"textord")},mathmlBuilder(b,y){const C=Vs(b.text,b.mode,y),N=xc(b,y)||"normal";let P;return b.mode==="text"?P=new nt.MathNode("mtext",[C]):/[0-9]/.test(b.text)?P=new nt.MathNode("mn",[C]):b.text==="\\prime"?P=new nt.MathNode("mo",[C]):P=new nt.MathNode("mi",[C]),N!==xh[P.type]&&P.setAttribute("mathvariant",N),P}});const zu={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Lu={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ei({type:"spacing",htmlBuilder(b,y){if(Lu.hasOwnProperty(b.text)){const C=Lu[b.text].className||"";if(b.mode==="text"){const N=Ae.makeOrd(b,y,"textord");return N.classes.push(C),N}else return Ae.makeSpan(["mspace",C],[Ae.mathsym(b.text,b.mode,y)],y)}else{if(zu.hasOwnProperty(b.text))return Ae.makeSpan(["mspace",zu[b.text]],[],y);throw new o('Unknown type of space "'+b.text+'"')}},mathmlBuilder(b,y){let C;if(Lu.hasOwnProperty(b.text))C=new nt.MathNode("mtext",[new nt.TextNode(" ")]);else{if(zu.hasOwnProperty(b.text))return new nt.MathNode("mspace");throw new o('Unknown type of space "'+b.text+'"')}return C}});const vh=()=>{const b=new nt.MathNode("mtd",[]);return b.setAttribute("width","50%"),b};ei({type:"tag",mathmlBuilder(b,y){const C=new nt.MathNode("mtable",[new nt.MathNode("mtr",[vh(),new nt.MathNode("mtd",[Dr(b.body,y)]),vh(),new nt.MathNode("mtd",[Dr(b.tag,y)])])]);return C.setAttribute("width","100%"),C}});const j1={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Fp={"\\textbf":"textbf","\\textmd":"textmd"},hw={"\\textit":"textit","\\textup":"textup"},W1=(b,y)=>{const C=b.font;if(C){if(j1[C])return y.withTextFontFamily(j1[C]);if(Fp[C])return y.withTextFontWeight(Fp[C]);if(C==="\\emph")return y.fontShape==="textit"?y.withTextFontShape("textup"):y.withTextFontShape("textit")}else return y;return y.withTextFontShape(hw[C])};pt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(b,y){let{parser:C,funcName:N}=b;const P=y[0];return{type:"text",mode:C.mode,body:Sr(P),font:N}},htmlBuilder(b,y){const C=W1(b,y),N=Ar(b.body,C,!0);return Ae.makeSpan(["mord","text"],N,C)},mathmlBuilder(b,y){const C=W1(b,y);return Dr(b.body,C)}}),pt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(b,y){let{parser:C}=b;return{type:"underline",mode:C.mode,body:y[0]}},htmlBuilder(b,y){const C=xn(b.body,y),N=Ae.makeLineSpan("underline-line",y),P=y.fontMetrics().defaultRuleThickness,B=Ae.makeVList({positionType:"top",positionData:C.height,children:[{type:"kern",size:P},{type:"elem",elem:N},{type:"kern",size:3*P},{type:"elem",elem:C}]},y);return Ae.makeSpan(["mord","underline"],[B],y)},mathmlBuilder(b,y){const C=new nt.MathNode("mo",[new nt.TextNode("‾")]);C.setAttribute("stretchy","true");const N=new nt.MathNode("munder",[Cn(b.body,y),C]);return N.setAttribute("accentunder","true"),N}}),pt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(b,y){let{parser:C}=b;return{type:"vcenter",mode:C.mode,body:y[0]}},htmlBuilder(b,y){const C=xn(b.body,y),N=y.fontMetrics().axisHeight,P=.5*(C.height-N-(C.depth+N));return Ae.makeVList({positionType:"shift",positionData:P,children:[{type:"elem",elem:C}]},y)},mathmlBuilder(b,y){return new nt.MathNode("mpadded",[Cn(b.body,y)],["vcenter"])}}),pt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(b,y,C){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(b,y){const C=wh(b),N=[],P=y.havingStyle(y.style.text());for(let B=0;B<C.length;B++){let H=C[B];H==="~"&&(H="\\textasciitilde"),N.push(Ae.makeSymbol(H,"Typewriter-Regular",b.mode,P,["mord","texttt"]))}return Ae.makeSpan(["mord","text"].concat(P.sizingClasses(y)),Ae.tryCombineChars(N),P)},mathmlBuilder(b,y){const C=new nt.TextNode(wh(b)),N=new nt.MathNode("mtext",[C]);return N.setAttribute("mathvariant","monospace"),N}});const wh=b=>b.body.replace(/ /g,b.star?"␣":" ");var ia=ra;const Dl=`[ \r
	]`,$i="\\\\[a-zA-Z@]+",_u="\\\\[^\uD800-\uDFFF]",aa="("+$i+")"+Dl+"*",zp=`\\\\(
|[ \r	]+
?)[ \r	]*`,Lp="[̀-ͯ]",fw=new RegExp(Lp+"+$"),Pl="("+Dl+"+)|"+(zp+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(Lp+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Lp+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+aa)+("|"+_u+")");class Ic{constructor(y,C){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=y,this.settings=C,this.tokenRegex=new RegExp(Pl,"g"),this.catcodes={"%":14,"~":13}}setCatcode(y,C){this.catcodes[y]=C}lex(){const y=this.input,C=this.tokenRegex.lastIndex;if(C===y.length)return new so("EOF",new hs(this,C,C));const N=this.tokenRegex.exec(y);if(N===null||N.index!==C)throw new o("Unexpected character: '"+y[C]+"'",new so(y[C],new hs(this,C,C+1)));const P=N[6]||N[3]||(N[2]?"\\ ":" ");if(this.catcodes[P]===14){const B=y.indexOf(`
`,this.tokenRegex.lastIndex);return B===-1?(this.tokenRegex.lastIndex=y.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=B+1,this.lex()}return new so(P,new hs(this,C,this.tokenRegex.lastIndex))}}class $c{constructor(y,C){y===void 0&&(y={}),C===void 0&&(C={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=C,this.builtins=y,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const y=this.undefStack.pop();for(const C in y)y.hasOwnProperty(C)&&(y[C]==null?delete this.current[C]:this.current[C]=y[C])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(y){return this.current.hasOwnProperty(y)||this.builtins.hasOwnProperty(y)}get(y){return this.current.hasOwnProperty(y)?this.current[y]:this.builtins[y]}set(y,C,N){if(N===void 0&&(N=!1),N){for(let P=0;P<this.undefStack.length;P++)delete this.undefStack[P][y];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][y]=C)}else{const P=this.undefStack[this.undefStack.length-1];P&&!P.hasOwnProperty(y)&&(P[y]=this.current[y])}C==null?delete this.current[y]:this.current[y]=C}}var Bp=Il;te("\\noexpand",function(b){const y=b.popToken();return b.isExpandable(y.text)&&(y.noexpand=!0,y.treatAsRelax=!0),{tokens:[y],numArgs:0}}),te("\\expandafter",function(b){const y=b.popToken();return b.expandOnce(!0),{tokens:[y],numArgs:0}}),te("\\@firstoftwo",function(b){return{tokens:b.consumeArgs(2)[0],numArgs:0}}),te("\\@secondoftwo",function(b){return{tokens:b.consumeArgs(2)[1],numArgs:0}}),te("\\@ifnextchar",function(b){const y=b.consumeArgs(3);b.consumeSpaces();const C=b.future();return y[0].length===1&&y[0][0].text===C.text?{tokens:y[1],numArgs:0}:{tokens:y[2],numArgs:0}}),te("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),te("\\TextOrMath",function(b){const y=b.consumeArgs(2);return b.mode==="text"?{tokens:y[0],numArgs:0}:{tokens:y[1],numArgs:0}});const Ml={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};te("\\char",function(b){let y=b.popToken(),C,N="";if(y.text==="'")C=8,y=b.popToken();else if(y.text==='"')C=16,y=b.popToken();else if(y.text==="`")if(y=b.popToken(),y.text[0]==="\\")N=y.text.charCodeAt(1);else{if(y.text==="EOF")throw new o("\\char` missing argument");N=y.text.charCodeAt(0)}else C=10;if(C){if(N=Ml[y.text],N==null||N>=C)throw new o("Invalid base-"+C+" digit "+y.text);let P;for(;(P=Ml[b.future().text])!=null&&P<C;)N*=C,N+=P,b.popToken()}return"\\@char{"+N+"}"});const Ni=(b,y,C)=>{let N=b.consumeArg().tokens;if(N.length!==1)throw new o("\\newcommand's first argument must be a macro name");const P=N[0].text,B=b.isDefined(P);if(B&&!y)throw new o("\\newcommand{"+P+"} attempting to redefine "+(P+"; use \\renewcommand"));if(!B&&!C)throw new o("\\renewcommand{"+P+"} when command "+P+" does not yet exist; use \\newcommand");let H=0;if(N=b.consumeArg().tokens,N.length===1&&N[0].text==="["){let ee="",ie=b.expandNextToken();for(;ie.text!=="]"&&ie.text!=="EOF";)ee+=ie.text,ie=b.expandNextToken();if(!ee.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+ee);H=parseInt(ee),N=b.consumeArg().tokens}return b.macros.set(P,{tokens:N,numArgs:H}),""};te("\\newcommand",b=>Ni(b,!1,!0)),te("\\renewcommand",b=>Ni(b,!0,!1)),te("\\providecommand",b=>Ni(b,!0,!0)),te("\\message",b=>{const y=b.consumeArgs(1)[0];return console.log(y.reverse().map(C=>C.text).join("")),""}),te("\\errmessage",b=>{const y=b.consumeArgs(1)[0];return console.error(y.reverse().map(C=>C.text).join("")),""}),te("\\show",b=>{const y=b.popToken(),C=y.text;return console.log(y,b.macros.get(C),ia[C],Wn.math[C],Wn.text[C]),""}),te("\\bgroup","{"),te("\\egroup","}"),te("~","\\nobreakspace"),te("\\lq","`"),te("\\rq","'"),te("\\aa","\\r a"),te("\\AA","\\r A"),te("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),te("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),te("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),te("ℬ","\\mathscr{B}"),te("ℰ","\\mathscr{E}"),te("ℱ","\\mathscr{F}"),te("ℋ","\\mathscr{H}"),te("ℐ","\\mathscr{I}"),te("ℒ","\\mathscr{L}"),te("ℳ","\\mathscr{M}"),te("ℛ","\\mathscr{R}"),te("ℭ","\\mathfrak{C}"),te("ℌ","\\mathfrak{H}"),te("ℨ","\\mathfrak{Z}"),te("\\Bbbk","\\Bbb{k}"),te("·","\\cdotp"),te("\\llap","\\mathllap{\\textrm{#1}}"),te("\\rlap","\\mathrlap{\\textrm{#1}}"),te("\\clap","\\mathclap{\\textrm{#1}}"),te("\\mathstrut","\\vphantom{(}"),te("\\underbar","\\underline{\\text{#1}}"),te("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),te("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),te("\\ne","\\neq"),te("≠","\\neq"),te("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),te("∉","\\notin"),te("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),te("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),te("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),te("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),te("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),te("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),te("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),te("⟂","\\perp"),te("‼","\\mathclose{!\\mkern-0.8mu!}"),te("∌","\\notni"),te("⌜","\\ulcorner"),te("⌝","\\urcorner"),te("⌞","\\llcorner"),te("⌟","\\lrcorner"),te("©","\\copyright"),te("®","\\textregistered"),te("️","\\textregistered"),te("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),te("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),te("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),te("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),te("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),te("⋮","\\vdots"),te("\\varGamma","\\mathit{\\Gamma}"),te("\\varDelta","\\mathit{\\Delta}"),te("\\varTheta","\\mathit{\\Theta}"),te("\\varLambda","\\mathit{\\Lambda}"),te("\\varXi","\\mathit{\\Xi}"),te("\\varPi","\\mathit{\\Pi}"),te("\\varSigma","\\mathit{\\Sigma}"),te("\\varUpsilon","\\mathit{\\Upsilon}"),te("\\varPhi","\\mathit{\\Phi}"),te("\\varPsi","\\mathit{\\Psi}"),te("\\varOmega","\\mathit{\\Omega}"),te("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),te("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),te("\\boxed","\\fbox{$\\displaystyle{#1}$}"),te("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),te("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),te("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),te("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),te("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const Gn={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};te("\\dots",function(b){let y="\\dotso";const C=b.expandAfterFuture().text;return C in Gn?y=Gn[C]:(C.slice(0,4)==="\\not"||C in Wn.math&&k.contains(["bin","rel"],Wn.math[C].group))&&(y="\\dotsb"),y});const _n={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};te("\\dotso",function(b){return b.future().text in _n?"\\ldots\\,":"\\ldots"}),te("\\dotsc",function(b){const y=b.future().text;return y in _n&&y!==","?"\\ldots\\,":"\\ldots"}),te("\\cdots",function(b){return b.future().text in _n?"\\@cdots\\,":"\\@cdots"}),te("\\dotsb","\\cdots"),te("\\dotsm","\\cdots"),te("\\dotsi","\\!\\cdots"),te("\\dotsx","\\ldots\\,"),te("\\DOTSI","\\relax"),te("\\DOTSB","\\relax"),te("\\DOTSX","\\relax"),te("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),te("\\,","\\tmspace+{3mu}{.1667em}"),te("\\thinspace","\\,"),te("\\>","\\mskip{4mu}"),te("\\:","\\tmspace+{4mu}{.2222em}"),te("\\medspace","\\:"),te("\\;","\\tmspace+{5mu}{.2777em}"),te("\\thickspace","\\;"),te("\\!","\\tmspace-{3mu}{.1667em}"),te("\\negthinspace","\\!"),te("\\negmedspace","\\tmspace-{4mu}{.2222em}"),te("\\negthickspace","\\tmspace-{5mu}{.277em}"),te("\\enspace","\\kern.5em "),te("\\enskip","\\hskip.5em\\relax"),te("\\quad","\\hskip1em\\relax"),te("\\qquad","\\hskip2em\\relax"),te("\\tag","\\@ifstar\\tag@literal\\tag@paren"),te("\\tag@paren","\\tag@literal{({#1})}"),te("\\tag@literal",b=>{if(b.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),te("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),te("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),te("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),te("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),te("\\newline","\\\\\\relax"),te("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const la=Fe(at["Main-Regular"][84][1]-.7*at["Main-Regular"][65][1]);te("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+la+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),te("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+la+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),te("\\hspace","\\@ifstar\\@hspacer\\@hspace"),te("\\@hspace","\\hskip #1\\relax"),te("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),te("\\ordinarycolon",":"),te("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),te("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),te("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),te("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),te("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),te("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),te("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),te("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),te("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),te("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),te("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),te("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),te("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),te("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),te("∷","\\dblcolon"),te("∹","\\eqcolon"),te("≔","\\coloneqq"),te("≕","\\eqqcolon"),te("⩴","\\Coloneqq"),te("\\ratio","\\vcentcolon"),te("\\coloncolon","\\dblcolon"),te("\\colonequals","\\coloneqq"),te("\\coloncolonequals","\\Coloneqq"),te("\\equalscolon","\\eqqcolon"),te("\\equalscoloncolon","\\Eqqcolon"),te("\\colonminus","\\coloneq"),te("\\coloncolonminus","\\Coloneq"),te("\\minuscolon","\\eqcolon"),te("\\minuscoloncolon","\\Eqcolon"),te("\\coloncolonapprox","\\Colonapprox"),te("\\coloncolonsim","\\Colonsim"),te("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),te("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),te("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),te("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),te("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),te("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),te("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),te("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),te("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),te("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),te("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),te("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),te("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),te("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),te("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),te("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),te("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),te("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),te("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),te("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),te("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),te("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),te("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),te("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),te("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),te("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),te("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),te("\\imath","\\html@mathml{\\@imath}{ı}"),te("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),te("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),te("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),te("⟦","\\llbracket"),te("⟧","\\rrbracket"),te("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),te("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),te("⦃","\\lBrace"),te("⦄","\\rBrace"),te("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),te("⦵","\\minuso"),te("\\darr","\\downarrow"),te("\\dArr","\\Downarrow"),te("\\Darr","\\Downarrow"),te("\\lang","\\langle"),te("\\rang","\\rangle"),te("\\uarr","\\uparrow"),te("\\uArr","\\Uparrow"),te("\\Uarr","\\Uparrow"),te("\\N","\\mathbb{N}"),te("\\R","\\mathbb{R}"),te("\\Z","\\mathbb{Z}"),te("\\alef","\\aleph"),te("\\alefsym","\\aleph"),te("\\Alpha","\\mathrm{A}"),te("\\Beta","\\mathrm{B}"),te("\\bull","\\bullet"),te("\\Chi","\\mathrm{X}"),te("\\clubs","\\clubsuit"),te("\\cnums","\\mathbb{C}"),te("\\Complex","\\mathbb{C}"),te("\\Dagger","\\ddagger"),te("\\diamonds","\\diamondsuit"),te("\\empty","\\emptyset"),te("\\Epsilon","\\mathrm{E}"),te("\\Eta","\\mathrm{H}"),te("\\exist","\\exists"),te("\\harr","\\leftrightarrow"),te("\\hArr","\\Leftrightarrow"),te("\\Harr","\\Leftrightarrow"),te("\\hearts","\\heartsuit"),te("\\image","\\Im"),te("\\infin","\\infty"),te("\\Iota","\\mathrm{I}"),te("\\isin","\\in"),te("\\Kappa","\\mathrm{K}"),te("\\larr","\\leftarrow"),te("\\lArr","\\Leftarrow"),te("\\Larr","\\Leftarrow"),te("\\lrarr","\\leftrightarrow"),te("\\lrArr","\\Leftrightarrow"),te("\\Lrarr","\\Leftrightarrow"),te("\\Mu","\\mathrm{M}"),te("\\natnums","\\mathbb{N}"),te("\\Nu","\\mathrm{N}"),te("\\Omicron","\\mathrm{O}"),te("\\plusmn","\\pm"),te("\\rarr","\\rightarrow"),te("\\rArr","\\Rightarrow"),te("\\Rarr","\\Rightarrow"),te("\\real","\\Re"),te("\\reals","\\mathbb{R}"),te("\\Reals","\\mathbb{R}"),te("\\Rho","\\mathrm{P}"),te("\\sdot","\\cdot"),te("\\sect","\\S"),te("\\spades","\\spadesuit"),te("\\sub","\\subset"),te("\\sube","\\subseteq"),te("\\supe","\\supseteq"),te("\\Tau","\\mathrm{T}"),te("\\thetasym","\\vartheta"),te("\\weierp","\\wp"),te("\\Zeta","\\mathrm{Z}"),te("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),te("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),te("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),te("\\bra","\\mathinner{\\langle{#1}|}"),te("\\ket","\\mathinner{|{#1}\\rangle}"),te("\\braket","\\mathinner{\\langle{#1}\\rangle}"),te("\\Bra","\\left\\langle#1\\right|"),te("\\Ket","\\left|#1\\right\\rangle");const fs=b=>y=>{const C=y.consumeArg().tokens,N=y.consumeArg().tokens,P=y.consumeArg().tokens,B=y.consumeArg().tokens,H=y.macros.get("|"),ee=y.macros.get("\\|");y.macros.beginGroup();const ie=Ce=>Pe=>{b&&(Pe.macros.set("|",H),P.length&&Pe.macros.set("\\|",ee));let Ye=Ce;return!Ce&&P.length&&Pe.future().text==="|"&&(Pe.popToken(),Ye=!0),{tokens:Ye?P:N,numArgs:0}};y.macros.set("|",ie(!1)),P.length&&y.macros.set("\\|",ie(!0));const fe=y.consumeArg().tokens,ve=y.expandTokens([...B,...fe,...C]);return y.macros.endGroup(),{tokens:ve.reverse(),numArgs:0}};te("\\bra@ket",fs(!1)),te("\\bra@set",fs(!0)),te("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),te("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),te("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),te("\\angln","{\\angl n}"),te("\\blue","\\textcolor{##6495ed}{#1}"),te("\\orange","\\textcolor{##ffa500}{#1}"),te("\\pink","\\textcolor{##ff00af}{#1}"),te("\\red","\\textcolor{##df0030}{#1}"),te("\\green","\\textcolor{##28ae7b}{#1}"),te("\\gray","\\textcolor{gray}{#1}"),te("\\purple","\\textcolor{##9d38bd}{#1}"),te("\\blueA","\\textcolor{##ccfaff}{#1}"),te("\\blueB","\\textcolor{##80f6ff}{#1}"),te("\\blueC","\\textcolor{##63d9ea}{#1}"),te("\\blueD","\\textcolor{##11accd}{#1}"),te("\\blueE","\\textcolor{##0c7f99}{#1}"),te("\\tealA","\\textcolor{##94fff5}{#1}"),te("\\tealB","\\textcolor{##26edd5}{#1}"),te("\\tealC","\\textcolor{##01d1c1}{#1}"),te("\\tealD","\\textcolor{##01a995}{#1}"),te("\\tealE","\\textcolor{##208170}{#1}"),te("\\greenA","\\textcolor{##b6ffb0}{#1}"),te("\\greenB","\\textcolor{##8af281}{#1}"),te("\\greenC","\\textcolor{##74cf70}{#1}"),te("\\greenD","\\textcolor{##1fab54}{#1}"),te("\\greenE","\\textcolor{##0d923f}{#1}"),te("\\goldA","\\textcolor{##ffd0a9}{#1}"),te("\\goldB","\\textcolor{##ffbb71}{#1}"),te("\\goldC","\\textcolor{##ff9c39}{#1}"),te("\\goldD","\\textcolor{##e07d10}{#1}"),te("\\goldE","\\textcolor{##a75a05}{#1}"),te("\\redA","\\textcolor{##fca9a9}{#1}"),te("\\redB","\\textcolor{##ff8482}{#1}"),te("\\redC","\\textcolor{##f9685d}{#1}"),te("\\redD","\\textcolor{##e84d39}{#1}"),te("\\redE","\\textcolor{##bc2612}{#1}"),te("\\maroonA","\\textcolor{##ffbde0}{#1}"),te("\\maroonB","\\textcolor{##ff92c6}{#1}"),te("\\maroonC","\\textcolor{##ed5fa6}{#1}"),te("\\maroonD","\\textcolor{##ca337c}{#1}"),te("\\maroonE","\\textcolor{##9e034e}{#1}"),te("\\purpleA","\\textcolor{##ddd7ff}{#1}"),te("\\purpleB","\\textcolor{##c6b9fc}{#1}"),te("\\purpleC","\\textcolor{##aa87ff}{#1}"),te("\\purpleD","\\textcolor{##7854ab}{#1}"),te("\\purpleE","\\textcolor{##543b78}{#1}"),te("\\mintA","\\textcolor{##f5f9e8}{#1}"),te("\\mintB","\\textcolor{##edf2df}{#1}"),te("\\mintC","\\textcolor{##e0e5cc}{#1}"),te("\\grayA","\\textcolor{##f6f7f7}{#1}"),te("\\grayB","\\textcolor{##f0f1f2}{#1}"),te("\\grayC","\\textcolor{##e3e5e6}{#1}"),te("\\grayD","\\textcolor{##d6d8da}{#1}"),te("\\grayE","\\textcolor{##babec2}{#1}"),te("\\grayF","\\textcolor{##888d93}{#1}"),te("\\grayG","\\textcolor{##626569}{#1}"),te("\\grayH","\\textcolor{##3b3e40}{#1}"),te("\\grayI","\\textcolor{##21242c}{#1}"),te("\\kaBlue","\\textcolor{##314453}{#1}"),te("\\kaGreen","\\textcolor{##71B307}{#1}");const Ws={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ol{constructor(y,C,N){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=C,this.expansionCount=0,this.feed(y),this.macros=new $c(Bp,C.macros),this.mode=N,this.stack=[]}feed(y){this.lexer=new Ic(y,this.settings)}switchMode(y){this.mode=y}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(y){this.stack.push(y)}pushTokens(y){this.stack.push(...y)}scanArgument(y){let C,N,P;if(y){if(this.consumeSpaces(),this.future().text!=="[")return null;C=this.popToken(),{tokens:P,end:N}=this.consumeArg(["]"])}else({tokens:P,start:C,end:N}=this.consumeArg());return this.pushToken(new so("EOF",N.loc)),this.pushTokens(P),C.range(N,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(y){const C=[],N=y&&y.length>0;N||this.consumeSpaces();const P=this.future();let B,H=0,ee=0;do{if(B=this.popToken(),C.push(B),B.text==="{")++H;else if(B.text==="}"){if(--H,H===-1)throw new o("Extra }",B)}else if(B.text==="EOF")throw new o("Unexpected end of input in a macro argument, expected '"+(y&&N?y[ee]:"}")+"'",B);if(y&&N)if((H===0||H===1&&y[ee]==="{")&&B.text===y[ee]){if(++ee,ee===y.length){C.splice(-ee,ee);break}}else ee=0}while(H!==0||N);return P.text==="{"&&C[C.length-1].text==="}"&&(C.pop(),C.shift()),C.reverse(),{tokens:C,start:P,end:B}}consumeArgs(y,C){if(C){if(C.length!==y+1)throw new o("The length of delimiters doesn't match the number of args!");const P=C[0];for(let B=0;B<P.length;B++){const H=this.popToken();if(P[B]!==H.text)throw new o("Use of the macro doesn't match its definition",H)}}const N=[];for(let P=0;P<y;P++)N.push(this.consumeArg(C&&C[P+1]).tokens);return N}countExpansion(y){if(this.expansionCount+=y,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(y){const C=this.popToken(),N=C.text,P=C.noexpand?null:this._getExpansion(N);if(P==null||y&&P.unexpandable){if(y&&P==null&&N[0]==="\\"&&!this.isDefined(N))throw new o("Undefined control sequence: "+N);return this.pushToken(C),!1}this.countExpansion(1);let B=P.tokens;const H=this.consumeArgs(P.numArgs,P.delimiters);if(P.numArgs){B=B.slice();for(let ee=B.length-1;ee>=0;--ee){let ie=B[ee];if(ie.text==="#"){if(ee===0)throw new o("Incomplete placeholder at end of macro body",ie);if(ie=B[--ee],ie.text==="#")B.splice(ee+1,1);else if(/^[1-9]$/.test(ie.text))B.splice(ee,2,...H[+ie.text-1]);else throw new o("Not a valid argument number",ie)}}}return this.pushTokens(B),B.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const y=this.stack.pop();return y.treatAsRelax&&(y.text="\\relax"),y}throw new Error}expandMacro(y){return this.macros.has(y)?this.expandTokens([new so(y)]):void 0}expandTokens(y){const C=[],N=this.stack.length;for(this.pushTokens(y);this.stack.length>N;)if(this.expandOnce(!0)===!1){const P=this.stack.pop();P.treatAsRelax&&(P.noexpand=!1,P.treatAsRelax=!1),C.push(P)}return this.countExpansion(C.length),C}expandMacroAsText(y){const C=this.expandMacro(y);return C&&C.map(N=>N.text).join("")}_getExpansion(y){const C=this.macros.get(y);if(C==null)return C;if(y.length===1){const P=this.lexer.catcodes[y];if(P!=null&&P!==13)return}const N=typeof C=="function"?C(this):C;if(typeof N=="string"){let P=0;if(N.indexOf("#")!==-1){const fe=N.replace(/##/g,"");for(;fe.indexOf("#"+(P+1))!==-1;)++P}const B=new Ic(N,this.settings),H=[];let ee=B.lex();for(;ee.text!=="EOF";)H.push(ee),ee=B.lex();return H.reverse(),{tokens:H,numArgs:P}}return N}isDefined(y){return this.macros.has(y)||ia.hasOwnProperty(y)||Wn.math.hasOwnProperty(y)||Wn.text.hasOwnProperty(y)||Ws.hasOwnProperty(y)}isExpandable(y){const C=this.macros.get(y);return C!=null?typeof C=="string"||typeof C=="function"||!C.unexpandable:ia.hasOwnProperty(y)&&!ia[y].primitive}}const Fl=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,ps=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Nc={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},Vp={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class Bu{constructor(y,C){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ol(y,C,this.mode),this.settings=C,this.leftrightDepth=0}expect(y,C){if(C===void 0&&(C=!0),this.fetch().text!==y)throw new o("Expected '"+y+"', got '"+this.fetch().text+"'",this.fetch());C&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(y){this.mode=y,this.gullet.switchMode(y)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const y=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),y}finally{this.gullet.endGroups()}}subparse(y){const C=this.nextToken;this.consume(),this.gullet.pushToken(new so("}")),this.gullet.pushTokens(y);const N=this.parseExpression(!1);return this.expect("}"),this.nextToken=C,N}parseExpression(y,C){const N=[];for(;;){this.mode==="math"&&this.consumeSpaces();const P=this.fetch();if(Bu.endOfExpression.indexOf(P.text)!==-1||C&&P.text===C||y&&ia[P.text]&&ia[P.text].infix)break;const B=this.parseAtom(C);if(B){if(B.type==="internal")continue}else break;N.push(B)}return this.mode==="text"&&this.formLigatures(N),this.handleInfixNodes(N)}handleInfixNodes(y){let C=-1,N;for(let P=0;P<y.length;P++)if(y[P].type==="infix"){if(C!==-1)throw new o("only one infix operator per group",y[P].token);C=P,N=y[P].replaceWith}if(C!==-1&&N){let P,B;const H=y.slice(0,C),ee=y.slice(C+1);H.length===1&&H[0].type==="ordgroup"?P=H[0]:P={type:"ordgroup",mode:this.mode,body:H},ee.length===1&&ee[0].type==="ordgroup"?B=ee[0]:B={type:"ordgroup",mode:this.mode,body:ee};let ie;return N==="\\\\abovefrac"?ie=this.callFunction(N,[P,y[C],B],[]):ie=this.callFunction(N,[P,B],[]),[ie]}else return y}handleSupSubscript(y){const C=this.fetch(),N=C.text;this.consume(),this.consumeSpaces();const P=this.parseGroup(y);if(!P)throw new o("Expected group after '"+N+"'",C);return P}formatUnsupportedCmd(y){const C=[];for(let B=0;B<y.length;B++)C.push({type:"textord",mode:"text",text:y[B]});const N={type:"text",mode:this.mode,body:C};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[N]}}parseAtom(y){const C=this.parseGroup("atom",y);if(this.mode==="text")return C;let N,P;for(;;){this.consumeSpaces();const B=this.fetch();if(B.text==="\\limits"||B.text==="\\nolimits"){if(C&&C.type==="op"){const H=B.text==="\\limits";C.limits=H,C.alwaysHandleSupSub=!0}else if(C&&C.type==="operatorname")C.alwaysHandleSupSub&&(C.limits=B.text==="\\limits");else throw new o("Limit controls must follow a math operator",B);this.consume()}else if(B.text==="^"){if(N)throw new o("Double superscript",B);N=this.handleSupSubscript("superscript")}else if(B.text==="_"){if(P)throw new o("Double subscript",B);P=this.handleSupSubscript("subscript")}else if(B.text==="'"){if(N)throw new o("Double superscript",B);const H={type:"textord",mode:this.mode,text:"\\prime"},ee=[H];for(this.consume();this.fetch().text==="'";)ee.push(H),this.consume();this.fetch().text==="^"&&ee.push(this.handleSupSubscript("superscript")),N={type:"ordgroup",mode:this.mode,body:ee}}else if(ps[B.text]){const H=Fl.test(B.text),ee=[];for(ee.push(new so(ps[B.text])),this.consume();;){const fe=this.fetch().text;if(!ps[fe]||Fl.test(fe)!==H)break;ee.unshift(new so(ps[fe])),this.consume()}const ie=this.subparse(ee);H?P={type:"ordgroup",mode:"math",body:ie}:N={type:"ordgroup",mode:"math",body:ie}}else break}return N||P?{type:"supsub",mode:this.mode,base:C,sup:N,sub:P}:C}parseFunction(y,C){const N=this.fetch(),P=N.text,B=ia[P];if(!B)return null;if(this.consume(),C&&C!=="atom"&&!B.allowedInArgument)throw new o("Got function '"+P+"' with no arguments"+(C?" as "+C:""),N);if(this.mode==="text"&&!B.allowedInText)throw new o("Can't use function '"+P+"' in text mode",N);if(this.mode==="math"&&B.allowedInMath===!1)throw new o("Can't use function '"+P+"' in math mode",N);const{args:H,optArgs:ee}=this.parseArguments(P,B);return this.callFunction(P,H,ee,N,y)}callFunction(y,C,N,P,B){const H={funcName:y,parser:this,token:P,breakOnTokenText:B},ee=ia[y];if(ee&&ee.handler)return ee.handler(H,C,N);throw new o("No function handler for "+y)}parseArguments(y,C){const N=C.numArgs+C.numOptionalArgs;if(N===0)return{args:[],optArgs:[]};const P=[],B=[];for(let H=0;H<N;H++){let ee=C.argTypes&&C.argTypes[H];const ie=H<C.numOptionalArgs;(C.primitive&&ee==null||C.type==="sqrt"&&H===1&&B[0]==null)&&(ee="primitive");const fe=this.parseGroupOfType("argument to '"+y+"'",ee,ie);if(ie)B.push(fe);else if(fe!=null)P.push(fe);else throw new o("Null argument, please report this as a bug")}return{args:P,optArgs:B}}parseGroupOfType(y,C,N){switch(C){case"color":return this.parseColorGroup(N);case"size":return this.parseSizeGroup(N);case"url":return this.parseUrlGroup(N);case"math":case"text":return this.parseArgumentGroup(N,C);case"hbox":{const P=this.parseArgumentGroup(N,"text");return P!=null?{type:"styling",mode:P.mode,body:[P],style:"text"}:null}case"raw":{const P=this.parseStringGroup("raw",N);return P!=null?{type:"raw",mode:"text",string:P.text}:null}case"primitive":{if(N)throw new o("A primitive argument cannot be optional");const P=this.parseGroup(y);if(P==null)throw new o("Expected group as "+y,this.fetch());return P}case"original":case null:case void 0:return this.parseArgumentGroup(N);default:throw new o("Unknown group type as "+y,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(y,C){const N=this.gullet.scanArgument(C);if(N==null)return null;let P="",B;for(;(B=this.fetch()).text!=="EOF";)P+=B.text,this.consume();return this.consume(),N.text=P,N}parseRegexGroup(y,C){const N=this.fetch();let P=N,B="",H;for(;(H=this.fetch()).text!=="EOF"&&y.test(B+H.text);)P=H,B+=P.text,this.consume();if(B==="")throw new o("Invalid "+C+": '"+N.text+"'",N);return N.range(P,B)}parseColorGroup(y){const C=this.parseStringGroup("color",y);if(C==null)return null;const N=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(C.text);if(!N)throw new o("Invalid color: '"+C.text+"'",C);let P=N[0];return/^[0-9a-f]{6}$/i.test(P)&&(P="#"+P),{type:"color-token",mode:this.mode,color:P}}parseSizeGroup(y){let C,N=!1;if(this.gullet.consumeSpaces(),!y&&this.gullet.future().text!=="{"?C=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):C=this.parseStringGroup("size",y),!C)return null;!y&&C.text.length===0&&(C.text="0pt",N=!0);const P=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(C.text);if(!P)throw new o("Invalid size: '"+C.text+"'",C);const B={number:+(P[1]+P[2]),unit:P[3]};if(!yr(B))throw new o("Invalid unit: '"+B.unit+"'",C);return{type:"size",mode:this.mode,value:B,isBlank:N}}parseUrlGroup(y){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const C=this.parseStringGroup("url",y);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),C==null)return null;const N=C.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:N}}parseArgumentGroup(y,C){const N=this.gullet.scanArgument(y);if(N==null)return null;const P=this.mode;C&&this.switchMode(C),this.gullet.beginGroup();const B=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const H={type:"ordgroup",mode:this.mode,loc:N.loc,body:B};return C&&this.switchMode(P),H}parseGroup(y,C){const N=this.fetch(),P=N.text;let B;if(P==="{"||P==="\\begingroup"){this.consume();const H=P==="{"?"}":"\\endgroup";this.gullet.beginGroup();const ee=this.parseExpression(!1,H),ie=this.fetch();this.expect(H),this.gullet.endGroup(),B={type:"ordgroup",mode:this.mode,loc:hs.range(N,ie),body:ee,semisimple:P==="\\begingroup"||void 0}}else if(B=this.parseFunction(C,y)||this.parseSymbol(),B==null&&P[0]==="\\"&&!Ws.hasOwnProperty(P)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+P,N);B=this.formatUnsupportedCmd(P),this.consume()}return B}formLigatures(y){let C=y.length-1;for(let N=0;N<C;++N){const P=y[N],B=P.text;B==="-"&&y[N+1].text==="-"&&(N+1<C&&y[N+2].text==="-"?(y.splice(N,3,{type:"textord",mode:"text",loc:hs.range(P,y[N+2]),text:"---"}),C-=2):(y.splice(N,2,{type:"textord",mode:"text",loc:hs.range(P,y[N+1]),text:"--"}),C-=1)),(B==="'"||B==="`")&&y[N+1].text===B&&(y.splice(N,2,{type:"textord",mode:"text",loc:hs.range(P,y[N+1]),text:B+B}),C-=1)}}parseSymbol(){const y=this.fetch();let C=y.text;if(/^\\verb[^a-zA-Z]/.test(C)){this.consume();let B=C.slice(5);const H=B.charAt(0)==="*";if(H&&(B=B.slice(1)),B.length<2||B.charAt(0)!==B.slice(-1))throw new o(`\\verb assertion failed --
                    please report what input caused this bug`);return B=B.slice(1,-1),{type:"verb",mode:"text",body:B,star:H}}Vp.hasOwnProperty(C[0])&&!Wn[this.mode][C[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+C[0]+'" used in math mode',y),C=Vp[C[0]]+C.slice(1));const N=fw.exec(C);N&&(C=C.substring(0,N.index),C==="i"?C="ı":C==="j"&&(C="ȷ"));let P;if(Wn[this.mode][C]){this.settings.strict&&this.mode==="math"&&ki.indexOf(C)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+C[0]+'" used in math mode',y);const B=Wn[this.mode][C].group,H=hs.range(y);let ee;if(Mo.hasOwnProperty(B)){const ie=B;ee={type:"atom",mode:this.mode,family:ie,loc:H,text:C}}else ee={type:B,mode:this.mode,loc:H,text:C};P=ee}else if(C.charCodeAt(0)>=128)this.settings.strict&&(de(C.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+C[0]+'" used in math mode',y):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+C[0]+'"'+(" ("+C.charCodeAt(0)+")"),y)),P={type:"textord",mode:"text",loc:hs.range(y),text:C};else return null;if(this.consume(),N)for(let B=0;B<N[0].length;B++){const H=N[0][B];if(!Nc[H])throw new o("Unknown accent ' "+H+"'",y);const ee=Nc[H][this.mode]||Nc[H].text;if(!ee)throw new o("Accent "+H+" unsupported in "+this.mode+" mode",y);P={type:"accent",mode:this.mode,loc:hs.range(y),label:ee,isStretchy:!1,isShifty:!0,base:P}}return P}}Bu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var kh=function(b,y){if(!(typeof b=="string"||b instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const C=new Bu(b,y);delete C.gullet.macros.current["\\df@tag"];let N=C.parse();if(delete C.gullet.macros.current["\\current@color"],delete C.gullet.macros.current["\\color"],C.gullet.macros.get("\\df@tag")){if(!y.displayMode)throw new o("\\tag works only in display equations");N=[{type:"tag",mode:"text",body:N,tag:C.subparse([new so("\\df@tag")])}]}return N};let Ei=function(b,y,C){y.textContent="";const N=Hp(b,C).toNode();y.appendChild(N)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Ei=function(){throw new o("KaTeX doesn't work in quirks mode.")});const Ch=function(b,y){return Hp(b,y).toMarkup()},Wp=function(b,y){const C=new T(y);return kh(b,C)},Up=function(b,y,C){if(C.throwOnError||!(b instanceof o))throw b;const N=Ae.makeSpan(["katex-error"],[new Rr(y)]);return N.setAttribute("title",b.toString()),N.setAttribute("style","color:"+C.errorColor),N},Hp=function(b,y){const C=new T(y);try{const N=kh(b,C);return yp(N,b,C)}catch(N){return Up(N,b,C)}};var Sh={version:"0.16.19",render:Ei,renderToString:Ch,ParseError:o,SETTINGS_SCHEMA:S,__parse:Wp,__renderToDomTree:Hp,__renderToHTMLTree:function(b,y){const C=new T(y);try{const N=kh(b,C);return bp(N,b,C)}catch(N){return Up(N,b,C)}},__setFontMetrics:Qe,__defineSymbol:M,__defineFunction:pt,__defineMacro:te,__domTree:{Span:cs,Anchor:us,SymbolNode:Rr,SvgNode:Is,PathNode:no,LineNode:Yo}},Th=Sh;return r=r.default,r}()})}(hb)),hb.exports}var gae=E0.exports,pN;function yae(){return pN||(pN=1,function(t,e){(function(n,r){r(e,Dx(),xj(),mae())})(gae,function(n,r,s,o){Object.defineProperty(n,"__esModule",{value:!0});function i(w,k){for(var S in k)Object.defineProperty(w,S,{enumerable:!0,get:k[S]})}i(n,{BlockMath:()=>g,InlineMath:()=>x}),r=c(r),s=a(s),o=a(o);function a(w){return w&&w.__esModule?w:{default:w}}function l(w){if(typeof WeakMap!="function")return null;var k=new WeakMap,S=new WeakMap;return(l=function($){return $?S:k})(w)}function c(w,k){if(w&&w.__esModule)return w;if(w===null||typeof w!="object"&&typeof w!="function")return{default:w};var S=l(k);if(S&&S.has(w))return S.get(w);var $={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in w)if(E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)){var F=T?Object.getOwnPropertyDescriptor(w,E):null;F&&(F.get||F.set)?Object.defineProperty($,E,F):$[E]=w[E]}return $.default=w,S&&S.set(w,$),$}const u=(w,{displayMode:k})=>{const S=({children:$,errorColor:T,math:E,renderError:F})=>{const V=E??$,{html:j,error:W}=(0,r.useMemo)(()=>{try{return{html:o.default.renderToString(V,{displayMode:k,errorColor:T,throwOnError:!!F}),error:void 0}}catch(R){if(R instanceof o.default.ParseError||R instanceof TypeError)return{error:R};throw R}},[V,T,F]);return W?F?F(W):r.default.createElement(w,{html:`${W.message}`}):r.default.createElement(w,{html:j})};return S.propTypes={children:s.default.string,errorColor:s.default.string,math:s.default.string,renderError:s.default.func},S},h={html:s.default.string.isRequired},p=({html:w})=>r.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:w}});p.propTypes=h;const m=({html:w})=>r.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:w}});m.propTypes=h;const g=u(p,{displayMode:!0}),x=u(m,{displayMode:!1})})}(E0,E0.exports)),E0.exports}var $f=yae();const bae=({content:t})=>z.jsxs("div",{className:"bg-blue-50 px-6 py-4 rounded-lg my-8",children:[z.jsxs("h4",{className:"font-semibold mb-2 text-base flex items-center gap-2",children:[z.jsx(WM,{className:"text-blueBgColor"}),"Wskazówka"]}),z.jsx("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-line",children:t.split(/(\$.*?\$)/).map((e,n)=>e.startsWith("$")&&e.endsWith("$")?z.jsx("span",{className:"katex-wrapper",children:z.jsx($f.InlineMath,{math:e.slice(1,-1)})},n):e)})]}),xae=({theory:t,tip:e})=>z.jsxs("div",{className:"space-y-6",children:[t.map((n,r)=>z.jsxs("section",{children:[z.jsx("h2",{className:"text-lg font-semibold mb-4",children:n.title}),z.jsx("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-line",children:n.content.split(/(\$.*?\$)/).map((s,o)=>s.startsWith("$")&&s.endsWith("$")?z.jsx("span",{className:"katex-wrapper",children:z.jsx($f.InlineMath,{math:s.slice(1,-1)})},o):s)})]},r)),e&&z.jsx(bae,{content:e})]}),vae=({examples:t})=>z.jsx("div",{className:"space-y-6",children:t.map((e,n)=>z.jsxs("div",{className:"border p-4 rounded-lg bg-gray-50",children:[z.jsxs("p",{className:"font-medium mb-2",children:["Przykład ",n+1,":"]}),z.jsx("div",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-line",children:e.content.split(/(\$.*?\$)/).map((r,s)=>r.startsWith("$")&&r.endsWith("$")?z.jsx("span",{className:"katex-wrapper",children:z.jsx($f.InlineMath,{math:r.slice(1,-1)})},s):r)}),e.solution&&z.jsxs("div",{className:"text-gray-600 mt-4 flex gap-1 items-baseline",children:[z.jsx("span",{children:"Rozwiązanie:"}),z.jsx("span",{className:"mr-1",children:e.solution.text}),z.jsx("span",{children:z.jsx($f.InlineMath,{math:e.solution.math})})]})]},n))}),wae=({exercises:t})=>z.jsx("div",{className:"space-y-6",children:t.map((e,n)=>z.jsxs("div",{className:"border p-4 rounded-lg text-sm bg-gray-50",children:[z.jsxs("p",{className:"font-medium mb-2",children:["Ćwiczenie ",n+1,":"]}),z.jsxs("div",{className:"space-y-2",children:[z.jsx("p",{className:"text-gray-600",children:e.text.split(/(\$.*?\$)/).map((r,s)=>r.startsWith("$")&&r.endsWith("$")?z.jsx("span",{className:"katex-wrapper",children:z.jsx($f.InlineMath,{math:r.slice(1,-1)})},s):r)}),z.jsx("p",{className:"font-medium mt-2",children:z.jsx($f.InlineMath,{math:e.math})})]})]},n))}),UM=({lesson:t})=>{const[e,n]=D.useState("theory"),r=e2();if(!t)return console.log("Nie znaleziono lekcji");const s={initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5}},o=({icon:c,name:u,title:h})=>z.jsxs("button",{onClick:()=>n(u),className:`flex items-center gap-3 py-3 px-5 rounded-lg transition-all ${e===u?"bg-blueBgColor text-white":"hover:bg-gray-100"}`,children:[z.jsx(c,{size:20}),z.jsx("span",{className:"font-medium",children:h})]}),i=t.examples&&t.examples.length>0,a=t.exercises&&t.exercises.length>0,l=c=>{r(`/topics/lesson/${c}`)};return z.jsx(jo.div,{...s,className:"flex-1 p-8 mt-12",children:z.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[z.jsxs("div",{className:"border-b pb-6 mb-8",children:[z.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[z.jsx("h1",{className:"text-3xl font-bold text-blueTextColor",children:t.title}),z.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:t.category})]}),z.jsx("p",{className:"text-gray-600",children:t.description})]}),z.jsxs("div",{className:"grid auto-cols-fr grid-flow-col gap-4 mb-8",children:[z.jsx(o,{icon:uae,name:"theory",title:"Teoria"}),i&&z.jsx(o,{icon:WM,name:"examples",title:"Przykłady"}),a&&z.jsx(o,{icon:hae,name:"exercises",title:"Ćwiczenia"})]}),z.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e==="theory"&&z.jsx(xae,{theory:t.theory,tip:t.tip}),e==="examples"&&i&&z.jsx(vae,{examples:t.examples}),e==="exercises"&&a&&z.jsx(wae,{exercises:t.exercises})]}),z.jsx(fae,{prevLesson:t.prevLesson,nextLesson:t.nextLesson,onNavigate:l})]})})},kae=()=>{const t={hidden:{y:50,opacity:0},visible:{y:0,opacity:1}};return z.jsxs(jo.div,{className:"text-center mb-16",children:[z.jsx(jo.h1,{variants:t,initial:"hidden",animate:"visible",className:"text-4xl font-bold text-blueTextColor mb-4",children:"Centrum Pomocy"}),z.jsx("p",{className:"text-gray-600",children:"Znajdź odpowiedzi na najczęściej zadawane pytania"})]})};function Cae(t){return dc({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(t)}const Sae=({searchQuery:t,onSearchChange:e})=>{const n={hidden:{y:50,opacity:0},visible:{y:0,opacity:1}};return z.jsxs(jo.div,{variants:n,initial:"hidden",animate:"visible",className:"mb-8 relative",children:[z.jsx("input",{type:"text",placeholder:"Wyszukaj pytanie...",className:"w-full p-4 pl-12 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:r=>e(r.target.value),value:t}),z.jsx(Cae,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"})]})},Tae=({item:t,index:e})=>{const[n,r]=D.useState(!1),s={hidden:{y:50,opacity:0},visible:{y:0,opacity:1}};return z.jsxs(jo.div,{variants:s,initial:"hidden",animate:"visible",transition:{delay:e*.1},className:"border rounded-lg hover:shadow-md transition-all duration-300",children:[z.jsxs("button",{className:"w-full p-6 text-left flex justify-between items-center bg-white hover:transition-colors duration-300",onClick:()=>r(!n),children:[z.jsxs("div",{children:[z.jsx("span",{className:"text-lg font-semibold block",children:t.question}),z.jsx("span",{className:"text-sm text-gray-500",children:t.category})]}),z.jsx(dae,{className:`transform transition-transform duration-300 text-blueTextColor
          ${n?"rotate-180":""}`})]}),z.jsx(jo.div,{initial:{height:0,opacity:0},animate:{height:n?"auto":0,opacity:n?1:0},transition:{duration:.3},className:"overflow-hidden",children:z.jsx("div",{className:"px-6 pb-6 text-gray-600",children:t.answer})})]})},Iae=({items:t})=>z.jsx("div",{className:"space-y-4",children:t.map((e,n)=>z.jsx(Tae,{item:e,index:n},n))}),$ae={podstawy:{title:"Podstawy platformy",items:[{question:"Jak rozpocząć naukę na platformie?",answer:"Wybierz interesujący Cię dział z menu 'Tematy' i rozpocznij naukę od podstaw."},{question:"Jak działa nawigacja między lekcjami?",answer:"W każdej lekcji znajdziesz przyciski 'Poprzednia' i 'Następna' lekcja, które pozwalają na sekwencyjne przechodzenie przez materiał. Możesz też wybrać dowolną lekcję z menu bocznego."}]},materialy:{title:"Materiały edukacyjne",items:[{question:"Jak korzystać z interaktywnych wzorów matematycznych?",answer:"Wzory matematyczne są wyświetlane w sposób interaktywny. Każda lekcja zawiera teorię, przykłady i ćwiczenia z wykorzystaniem wzorów."},{question:"Jak zorganizowana jest struktura lekcji?",answer:"Każda lekcja składa się z trzech głównych sekcji: teorii z wyjaśnieniami, przykładów z rozwiązaniami oraz interaktywnych ćwiczeń do samodzielnego rozwiązania."}]},wsparcie:{title:"Wsparcie i pomoc",items:[{question:"Jak znaleźć konkretną lekcję lub temat?",answer:"Możesz użyć wyszukiwarki w górnym pasku nawigacyjnym lub przejrzeć tematy w menu bocznym, gdzie materiały są pogrupowane w działy tematyczne."}]}},Nae=t=>({filteredFaqItems:Object.values($ae).flatMap(e=>e.items.map(n=>({...n,category:e.title}))).filter(e=>e.question.toLowerCase().includes(t.toLowerCase())||e.answer.toLowerCase().includes(t.toLowerCase()))}),Eae=()=>{const[t,e]=D.useState(""),{filteredFaqItems:n}=Nae(t);return z.jsxs("div",{className:"max-w-4xl mx-auto py-10",children:[z.jsx(kae,{}),z.jsx(Sae,{searchQuery:t,onSearchChange:e}),z.jsx(Iae,{items:n})]})},Rae={introduction:{title:"Witaj w MathPath!",category:"Wprowadzenie",description:"Poznaj platformę MathPath i rozpocznij swoją przygodę z matematyką",theory:[{title:"Czym jest MathPath?",content:`MathPath to przyjazna platforma do nauki matematyki. Znajdziesz tu:
• Przystępnie wytłumaczoną teorię
• Praktyczne przykłady
• Zadania do samodzielnego rozwiązania z odpowiedziami`},{title:"Jak się uczyć?",content:`1. Zacznij od przeczytania teorii
2. Przeanalizuj dokładnie przykłady
3. Spróbuj rozwiązać zadania
4. Sprawdź swoje odpowiedzi
5. W razie trudności wróć do teorii i przykładów`}],examples:[],exercises:[],tip:"Nie spiesz się! Matematyka wymaga systematyczności i zrozumienia każdego kroku.",prevLesson:null,nextLesson:{id:"seq-intro",title:"Ciągi liczbowe"}},"seq-intro":{title:"Poznajemy ciągi liczbowe",category:"Lekcja 1",description:"Dowiedz się czym są ciągi liczbowe na prostych przykładach",theory:[{title:"Co to jest ciąg liczbowy?",content:`Ciąg liczbowy to po prostu lista liczb ułożonych według jakiejś reguły.

Przykłady:
• Liczby naturalne: 1, 2, 3, 4, ...
• Liczby parzyste: 2, 4, 6, 8, ...
• Potęgi dwójki: 1, 2, 4, 8, 16, ...

Każdą liczbę w ciągu nazywamy wyrazem ciągu i oznaczamy: $a_1$ (pierwszy wyraz), $a_2$ (drugi wyraz), itd.`},{title:"Jak opisać ciąg?",content:`Ciąg możemy zapisać na 3 sposoby:

1. Wypisując kolejne wyrazy:
$(1, 2, 3, 4, ...)$

2. Podając wzór:
$a_n = n$ (każdy wyraz jest równy swojej pozycji)

3. Opisując słownie:
'każdy kolejny wyraz jest o 1 większy od poprzedniego'`}],examples:[],exercises:[],tip:"Przy analizie ciągu zawsze wypisz kilka pierwszych wyrazów - pomoże Ci to dostrzec regułę!",prevLesson:{id:"introduction",title:"Wprowadzenie"},nextLesson:{id:"arithmetic",title:"Ciąg arytmetyczny"}},arithmetic:{title:"Ciąg arytmetyczny",category:"Lekcja 2",description:"Poznaj ciąg arytmetyczny i jego własności",theory:[{title:"Co to jest ciąg arytmetyczny?",content:`Ciąg arytmetyczny to taki ciąg, w którym różnica między każdymi dwoma kolejnymi wyrazami jest stała.

Tę stałą różnicę oznaczamy literą r i nazywamy różnicą ciągu arytmetycznego.

Aby obliczyć różnicę r, odejmujemy od siebie dowolne dwa sąsiednie wyrazy:
$r = a_2 - a_1$ lub $r = a_3 - a_2$ itd.

Przykład:
Dla ciągu $(1, 3, 5, 7, ...)$:
$r = a_2 - a_1 = 3 - 1 = 2$

Dla ciągu $(2, 5, 8, 11, ...)$:
$r = a_2 - a_1 = 5 - 2 = 3$`},{title:"Wzór na n-ty wyraz",content:`Znając pierwszy wyraz ciągu $a_1$ i różnicę $r$, możemy obliczyć każdy wyraz ciągu ze wzoru:

$a_n = a_1 + (n-1)r$

Gdzie:
• $a_1$ - pierwszy wyraz
• $n$ - numer wyrazu
• $r$ - różnica ciągu

Przykład:
Dla ciągu $(1, 3, 5, 7, ...)$:
• $a_1 = 1$ (pierwszy wyraz)
• $r = 2$ (różnica)
Wzór: $a_n = 1 + (n-1)\\cdot2$`}],examples:[{content:`Przykład 1: Liczby naturalne nieparzyste
$(1, 3, 5, 7, ...)$

Krok 1: Znajdźmy różnicę r
$r = a_2 - a_1 = 3 - 1 = 2$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 1$
• Różnica: $r = 2$

Krok 3: Podstawmy do wzoru $a_n = a_1 + (n-1)r$:
$a_n = 1 + (n-1)\\cdot2$
$a_n = 1 + 2n - 2$
$a_n = 2n - 1$`,solution:{text:"wzór",math:"a_n = 2n - 1"}},{content:`Przykład 2: Ciąg malejący
$(10, 7, 4, 1, ...)$

Krok 1: Znajdźmy różnicę r
$r = a_2 - a_1 = 7 - 10 = -3$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 10$
• Różnica: $r = -3$

Krok 3: Podstawmy do wzoru $a_n = a_1 + (n-1)r$:
$a_n = 10 + (n-1)\\cdot(-3)$
$a_n = 10 - 3n + 3$
$a_n = 13 - 3n$`,solution:{text:"wzór",math:"a_n = 13 - 3n"}},{content:`Przykład 3: Liczby naturalne
$(1, 2, 3, 4, ...)$

Krok 1: Znajdźmy różnicę r
$r = a_2 - a_1 = 2 - 1 = 1$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 1$
• Różnica: $r = 1$

Krok 3: Podstawmy do wzoru $a_n = a_1 + (n-1)r$:
$a_n = 1 + (n-1)\\cdot1$
$a_n = 1 + n - 1$
$a_n = n$`,solution:{text:"wzór",math:"a_n = n"}},{content:`Przykład 4: Liczby parzyste
$(2, 4, 6, 8, ...)$

Krok 1: Znajdźmy różnicę r
$r = a_2 - a_1 = 4 - 2 = 2$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 2$
• Różnica: $r = 2$

Krok 3: Podstawmy do wzoru $a_n = a_1 + (n-1)r$:
$a_n = 2 + (n-1)\\cdot2$
$a_n = 2 + 2n - 2$
$a_n = 2n$`,solution:{text:"wzór",math:"a_n = 2n"}},{content:`Przykład 5: Liczby ujemne
$(-1, -3, -5, -7, ...)$

Krok 1: Znajdźmy różnicę r
$r = a_2 - a_1 = -3 - (-1) = -2$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = -1$
• Różnica: $r = -2$

Krok 3: Podstawmy do wzoru $a_n = a_1 + (n-1)r$:
$a_n = -1 + (n-1)\\cdot(-2)$
$a_n = -1 - 2n + 2$
$a_n = 1 - 2n$`,solution:{text:"wzór",math:"a_n = 1 - 2n"}}],exercises:[{text:"Podaj różnicę ciągu arytmetycznego:",math:"3, 8, 13, 18, ...",solution:"$r = a_2 - a_1 = 8 - 3 = 5$ (każdy kolejny wyraz jest o 5 większy)"},{text:"Oblicz piąty wyraz ciągu arytmetycznego:",math:"a_1 = 4, r = 3",solution:"$a_5 = a_1 + (n-1)r = 4 + (5-1)\\cdot3 = 4 + 12 = 16$"},{text:"Podaj różnicę ciągu arytmetycznego:",math:"7, 10, 13, 16, ...",solution:"$r = a_2 - a_1 = 10 - 7 = 3$ (każdy kolejny wyraz jest o 3 większy)"},{text:"Oblicz dziesiąty wyraz ciągu arytmetycznego:",math:"a_1 = 2, r = 5",solution:"$a_{10} = a_1 + (10-1)r = 2 + 9\\cdot5 = 2 + 45 = 47$"},{text:"Podaj różnicę ciągu arytmetycznego:",math:"15, 12, 9, 6, ...",solution:"$r = a_2 - a_1 = 12 - 15 = -3$ (każdy kolejny wyraz jest o 3 mniejszy)"},{text:"Oblicz siódmy wyraz ciągu arytmetycznego:",math:"a_1 = 5, r = -2",solution:"$a_7 = a_1 + (7-1)r = 5 + 6\\cdot(-2) = 5 - 12 = -7$"},{text:"Podaj różnicę ciągu arytmetycznego:",math:"20, 15, 10, 5, ...",solution:"$r = a_2 - a_1 = 15 - 20 = -5$ (każdy kolejny wyraz jest o 5 mniejszy)"},{text:"Oblicz trzeci wyraz ciągu arytmetycznego:",math:"a_1 = 7, r = 4",solution:"$a_3 = a_1 + (3-1)r = 7 + 2\\cdot4 = 7 + 8 = 15$"},{text:"Podaj różnicę ciągu arytmetycznego:",math:"5, 9, 13, 17, ...",solution:"$r = a_2 - a_1 = 9 - 5 = 4$ (każdy kolejny wyraz jest o 4 większy)"},{text:"Oblicz ósmy wyraz ciągu arytmetycznego:",math:"a_1 = 3, r = 2",solution:"$a_8 = a_1 + (8-1)r = 3 + 7\\cdot2 = 3 + 14 = 17$"}],tip:`Pamiętaj! Aby znaleźć wzór na n-ty wyraz:
1. Oblicz różnicę $r = a_2 - a_1$
2. Podstaw $a_1$ i $r$ do wzoru $a_n = a_1 + (n-1)r$`,prevLesson:{id:"seq-intro",title:"Wprowadzenie do ciągów"},nextLesson:{id:"geometric",title:"Ciąg geometryczny"}},geometric:{title:"Ciąg geometryczny",category:"Lekcja 3",description:"Poznaj ciąg geometryczny i jego własności",theory:[{title:"Co to jest ciąg geometryczny?",content:`Ciąg geometryczny to taki ciąg, w którym iloraz każdych dwóch kolejnych wyrazów jest stały.

Ten stały iloraz oznaczamy literą q i nazywamy ilorazem ciągu geometrycznego.

Aby obliczyć iloraz q, dzielimy dowolne dwa sąsiednie wyrazy:
$q = \\frac{a_2}{a_1}$ lub $q = \\frac{a_3}{a_2}$ itd.

Przykład:
Dla ciągu $(2, 6, 18, 54, ...)$:
$q = \\frac{a_2}{a_1} = \\frac{6}{2} = 3$

Dla ciągu $(81, 27, 9, 3, ...)$:
$q = \\frac{a_2}{a_1} = \\frac{27}{81} = \\frac{1}{3}$`},{title:"Wzór na n-ty wyraz",content:`Znając pierwszy wyraz ciągu $a_1$ i iloraz $q$, możemy obliczyć każdy wyraz ciągu ze wzoru:

$a_n = a_1 \\cdot q^{n-1}$

Gdzie:
• $a_1$ - pierwszy wyraz
• $n$ - numer wyrazu
• $q$ - iloraz ciągu

Przykład:
Dla ciągu $(2, 6, 18, 54, ...)$:
• $a_1 = 2$ (pierwszy wyraz)
• $q = 3$ (iloraz)
Wzór: $a_n = 2 \\cdot 3^{n-1}$`}],examples:[{content:`Przykład 1: Potęgi dwójki
$(1, 2, 4, 8, ...)$

Krok 1: Znajdźmy iloraz q
$q = \\frac{a_2}{a_1} = \\frac{2}{1} = 2$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 1$
• Iloraz: $q = 2$

Krok 3: Podstawmy do wzoru $a_n = a_1 \\cdot q^{n-1}$:
$a_n = 1 \\cdot 2^{n-1}$`,solution:{text:"wzór",math:"a_n = 2^{n-1}"}},{content:`Przykład 2: Ciąg malejący
$(81, 27, 9, 3, ...)$

Krok 1: Znajdźmy iloraz q
$q = \\frac{a_2}{a_1} = \\frac{27}{81} = \\frac{1}{3}$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 81$
• Iloraz: $q = \\frac{1}{3}$

Krok 3: Podstawmy do wzoru $a_n = a_1 \\cdot q^{n-1}$:
$a_n = 81 \\cdot (\\frac{1}{3})^{n-1}$
$a_n = 81 \\cdot 3^{1-n}$`,solution:{text:"wzór",math:"a_n = 81 \\cdot 3^{1-n}"}},{content:`Przykład 3: Ciąg rosnący
$(3, 9, 27, 81, ...)$

Krok 1: Znajdźmy iloraz q
$q = \\frac{a_2}{a_1} = \\frac{9}{3} = 3$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 3$
• Iloraz: $q = 3$

Krok 3: Podstawmy do wzoru $a_n = a_1 \\cdot q^{n-1}$:
$a_n = 3 \\cdot 3^{n-1}$
$a_n = 3^n$`,solution:{text:"wzór",math:"a_n = 3^n"}},{content:`Przykład 4: Ciąg malejący
$(16, 8, 4, 2, ...)$

Krok 1: Znajdźmy iloraz q
$q = \\frac{a_2}{a_1} = \\frac{8}{16} = \\frac{1}{2}$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 16$
• Iloraz: $q = \\frac{1}{2}$

Krok 3: Podstawmy do wzoru $a_n = a_1 \\cdot q^{n-1}$:
$a_n = 16 \\cdot (\\frac{1}{2})^{n-1}$
$a_n = 16 \\cdot 2^{1-n}$`,solution:{text:"wzór",math:"a_n = 16 \\cdot 2^{1-n}"}},{content:`Przykład 5: Ciąg rosnący
$(5, 10, 20, 40, ...)$

Krok 1: Znajdźmy iloraz q
$q = \\frac{a_2}{a_1} = \\frac{10}{5} = 2$

Krok 2: Mamy dane:
• Pierwszy wyraz: $a_1 = 5$
• Iloraz: $q = 2$

Krok 3: Podstawmy do wzoru $a_n = a_1 \\cdot q^{n-1}$:
$a_n = 5 \\cdot 2^{n-1}$`,solution:{text:"wzór",math:"a_n = 5 \\cdot 2^{n-1}"}}],exercises:[{text:"Podaj iloraz ciągu geometrycznego:",math:"2, 6, 18, 54, ...",solution:"$q = 3$ (każdy kolejny wyraz jest 3 razy większy)"},{text:"Oblicz czwarty wyraz ciągu geometrycznego:",math:"a_1 = 1, q = 2",solution:"$a_4 = 1 \\cdot 2^{4-1} = 8$"},{text:"Podaj iloraz ciągu geometrycznego:",math:"5, 25, 125, 625, ...",solution:"$q = 5$ (każdy kolejny wyraz jest 5 razy większy)"},{text:"Oblicz szósty wyraz ciągu geometrycznego:",math:"a_1 = 3, q = 3",solution:"$a_6 = 3 \\cdot 3^{6-1} = 3 \\cdot 243 = 729$"},{text:"Podaj iloraz ciągu geometrycznego:",math:"10, 5, 2.5, 1.25, ...",solution:"$q = \\frac{1}{2}$ (każdy kolejny wyraz jest połową poprzedniego)"},{text:"Oblicz piąty wyraz ciągu geometrycznego:",math:"a_1 = 4, q = 2",solution:"$a_5 = 4 \\cdot 2^{5-1} = 4 \\cdot 16 = 64$"},{text:"Podaj iloraz ciągu geometrycznego:",math:"100, 10, 1, 0.1, ...",solution:"$q = \\frac{1}{10}$ (każdy kolejny wyraz jest jedną dziesiątą poprzedniego)"},{text:"Oblicz trzeci wyraz ciągu geometrycznego:",math:"a_1 = 7, q = 3",solution:"$a_3 = 7 \\cdot 3^{3-1} = 7 \\cdot 9 = 63$"},{text:"Podaj iloraz ciągu geometrycznego:",math:"8, 4, 2, 1, ...",solution:"$q = \\frac{1}{2}$ (każdy kolejny wyraz jest połową poprzedniego)"},{text:"Oblicz ósmy wyraz ciągu geometrycznego:",math:"a_1 = 2, q = 3",solution:"$a_8 = 2 \\cdot 3^{8-1} = 2 \\cdot 2187 = 4374$"}],tip:"Aby sprawdzić, czy ciąg jest geometryczny, oblicz ilorazy kolejnych wyrazów - wszystkie powinny być równe!",prevLesson:{id:"arithmetic",title:"Ciąg arytmetyczny"},nextLesson:{id:"limits",title:"Granica ciągu"}},limits:{title:"Granica ciągu",category:"Lekcja 4",description:"Poznaj pojęcie granicy ciągu i jej własności",theory:[{title:"Co to jest granica ciągu?",content:`Granica ciągu to liczba, do której zbliżają się wyrazy ciągu, gdy numer wyrazu rośnie nieograniczenie.

Jeśli ciąg ma granicę, mówimy że jest zbieżny.
Jeśli ciąg nie ma granicy, mówimy że jest rozbieżny.

Aby znaleźć granicę ciągu:
• Oblicz kolejne wyrazy dla coraz większych n
• Sprawdź, czy wartości zbliżają się do jakiejś liczby

Granicę ciągu oznaczamy:
$\\lim_{n \\to \\infty} a_n = g$

gdzie g to granica ciągu.`},{title:"Podstawowe granice ciągów",content:`1. Ciąg stały: $(c, c, c, ...)$
   Granica: $\\lim_{n \\to \\infty} c = c$

2. Ciąg $\\frac{1}{n}$: $(1, \\frac{1}{2}, \\frac{1}{3}, ...)$
   Granica: $\\lim_{n \\to \\infty} \\frac{1}{n} = 0$

3. Ciąg geometryczny:
   • Gdy $|q| < 1$: granica = 0
   • Gdy $|q| > 1$: ciąg jest rozbieżny
   • Gdy $|q| = 1$: granica = $a_1$ (pierwszy wyraz)`}],examples:[{content:`Przykład 1: Ciąg $\\frac{1}{n}$

Krok 1: Zapiszmy kilka wyrazów:
• $a_1 = 1$
• $a_2 = \\frac{1}{2} = 0.5$
• $a_3 = \\frac{1}{3} ≈ 0.33$
• $a_4 = \\frac{1}{4} = 0.25$
• $a_{10} = \\frac{1}{10} = 0.1$
• $a_{100} = \\frac{1}{100} = 0.01$

Krok 2: Zauważamy, że:
• Wyrazy są coraz mniejsze
• Zbliżają się do zera
• Nigdy nie osiągną wartości ujemnej

Krok 3: Wniosek:
$\\lim_{n \\to \\infty} \\frac{1}{n} = 0$`,solution:{text:"wzór",math:"\\lim_{n \\to \\infty} \\frac{1}{n} = 0"}},{content:`Przykład 2: Ciąg geometryczny $(2, 4, 8, 16, ...)$

Krok 1: Znajdźmy wzór ogólny
• $q = \\frac{a_2}{a_1} = \\frac{4}{2} = 2$
• $a_1 = 2$
• Wzór: $a_n = 2 \\cdot 2^{n-1} = 2^n$

Krok 2: Sprawdźmy kilka wyrazów:
• $a_1 = 2$
• $a_2 = 4$
• $a_3 = 8$
• $a_4 = 16$
• $a_5 = 32$

Krok 3: Zauważamy, że wyrazy rosną nieograniczenie

Wniosek: Ciąg jest rozbieżny do $+\\infty$`,solution:{text:"wzór",math:"\\lim_{n \\to \\infty} 2^n = +\\infty"}},{content:`Przykład 3: Ciąg $(\\frac{1}{2}, \\frac{1}{4}, \\frac{1}{8}, ...)$

Krok 1: Znajdźmy wzór ogólny
• $q = \\frac{a_2}{a_1} = \\frac{1/4}{1/2} = \\frac{1}{2}$
• $a_1 = \\frac{1}{2}$
• Wzór: $a_n = \\frac{1}{2^n}$

Krok 2: Sprawdźmy kilka wyrazów:
• $a_1 = 0.5$
• $a_2 = 0.25$
• $a_3 = 0.125$
• $a_4 = 0.0625$

Krok 3: Zauważamy, że:
• $|q| = |\\frac{1}{2}| < 1$
• Wyrazy zbliżają się do 0

Wniosek: $\\lim_{n \\to \\infty} \\frac{1}{2^n} = 0$`,solution:{text:"wzór",math:"\\lim_{n \\to \\infty} \\frac{1}{2^n} = 0"}},{content:`Przykład 4: Ciąg $\\frac{n}{n+1}$

Krok 1: Zapiszmy kilka wyrazów:
• $a_1 = \\frac{1}{2}$
• $a_2 = \\frac{2}{3}$
• $a_3 = \\frac{3}{4}$
• $a_4 = \\frac{4}{5}$
• $a_{10} = \\frac{10}{11}$

Krok 2: Zauważamy, że:
• Wyrazy zbliżają się do 1

Krok 3: Wniosek:
$\\lim_{n \\to \\infty} \\frac{n}{n+1} = 1$`,solution:{text:"wzór",math:"\\lim_{n \\to \\infty} \\frac{n}{n+1} = 1"}},{content:`Przykład 5: Ciąg $\\frac{2n+1}{n}$

Krok 1: Zapiszmy kilka wyrazów:
• $a_1 = 3$
• $a_2 = 2.5$
• $a_3 = 2.33$
• $a_4 = 2.25$
• $a_{10} = 2.1$

Krok 2: Zauważamy, że:
• Wyrazy zbliżają się do 2

Krok 3: Wniosek:
$\\lim_{n \\to \\infty} \\frac{2n+1}{n} = 2$`,solution:{text:"wzór",math:"\\lim_{n \\to \\infty} \\frac{2n+1}{n} = 2"}}],exercises:[{text:"Oblicz granicę ciągu:",math:"a_n = \\frac{2n+1}{n}",solution:"$\\lim_{n \\to \\infty} \\frac{2n+1}{n} = 2$ (podziel licznik i mianownik przez $n$)"},{text:"Czy ciąg jest zbieżny?",math:"a_n = (-1)^n",solution:"Ciąg jest rozbieżny (oscyluje między -1 a 1)"},{text:"Znajdź granicę ciągu:",math:"a_n = \\frac{n^2+1}{n^2}",solution:"$\\lim_{n \\to \\infty} \\frac{n^2+1}{n^2} = 1$ (podziel licznik i mianownik przez $n^2$)"},{text:"Oblicz granicę ciągu:",math:"a_n = \\frac{3n}{n+2}",solution:"$\\lim_{n \\to \\infty} \\frac{3n}{n+2} = 3$ (podziel licznik i mianownik przez $n$)"},{text:"Czy ciąg jest zbieżny?",math:"a_n = \\frac{(-1)^n}{n}",solution:"Ciąg jest zbieżny do 0 (wyrazy zbliżają się do 0)"},{text:"Znajdź granicę ciągu:",math:"a_n = \\frac{n+1}{n}",solution:"$\\lim_{n \\to \\infty} \\frac{n+1}{n} = 1$ (podziel licznik i mianownik przez $n$)"},{text:"Oblicz granicę ciągu:",math:"a_n = \\frac{5n^2+2}{n^2}",solution:"$\\lim_{n \\to \\infty} \\frac{5n^2+2}{n^2} = 5$ (podziel licznik i mianownik przez $n^2$)"},{text:"Czy ciąg jest zbieżny?",math:"a_n = \\frac{n}{n+1}",solution:"Ciąg jest zbieżny do 1 (wyrazy zbliżają się do 1)"},{text:"Znajdź granicę ciągu:",math:"a_n = \\frac{n^2+3n+2}{n^2}",solution:"$\\lim_{n \\to \\infty} \\frac{n^2+3n+2}{n^2} = 1$ (podziel licznik i mianownik przez $n^2$)"},{text:"Oblicz granicę ciągu:",math:"a_n = \\frac{4n+1}{2n}",solution:"$\\lim_{n \\to \\infty} \\frac{4n+1}{2n} = 2$ (podziel licznik i mianownik przez $n$)"}],tip:`Aby znaleźć granicę ciągu:
1. Zapisz kilka pierwszych wyrazów
2. Sprawdź, czy wartości maleją/rosną
3. Zobacz, do jakiej liczby się zbliżają`,prevLesson:{id:"geometric",title:"Ciąg geometryczny"},nextLesson:null}},HM=t=>Rae[t],Aae=()=>z.jsx(jo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed inset-0 bg-white z-50 flex items-center justify-center p-4 lg:hidden",children:z.jsxs("div",{className:"text-center max-w-md mx-auto space-y-4",children:[z.jsx("h2",{className:"text-2xl font-bold text-blueTextColor",children:"Przepraszamy!"}),z.jsx("p",{className:"text-gray-600",children:"MathPath jest obecnie dostępny tylko w wersji desktopowej. Aby w pełni korzystać z platformy, odwiedź nas na komputerze."}),z.jsx("div",{className:"text-sm text-gray-500",children:"Pracujemy nad wersją mobilną!"})]})});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dae=1e-7,Pae=1e-4;class GM{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class FC{refCount(e){return _o("refCount")}incRef(e){return _o("incRef")}timerAvailable(){return!0}time(e){return _o("time")}read(e){return _o("read")}readSync(e){return _o("readSync")}readToGPU(e,n){return _o("readToGPU")}numDataIds(){return _o("numDataIds")}disposeData(e,n){return _o("disposeData")}write(e,n,r){return _o("write")}move(e,n,r,s,o){return _o("move")}createTensorFromGPUData(e,n,r){return _o("createTensorFromGPUData")}memory(){return _o("memory")}floatPrecision(){return _o("floatPrecision")}epsilon(){return this.floatPrecision()===32?Dae:Pae}dispose(){return _o("dispose")}}function _o(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mae(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Hh(t,e,n)}function Sd(t,e,n){return Math.max(t,Math.min(e,n))}function zC(t){return t%2===0?t:t+1}function Hh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Oae(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function oe(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function LC(t,e,n=""){oe(Mn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function qM(t){oe(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ve(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Mn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Nf(t){return t%1===0}function ck(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function af(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function mN(t,e=s=>0,n,r){return new Promise((s,o)=>{let i=0;const a=()=>{if(t()){s();return}i++;const l=e(i);if(n!=null&&i>=n){o();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function KM(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function an(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),oe(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),oe(t.every(r=>Nf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function mu(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||s?null:an(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[i]==null||o[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),o[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Ys(t,e){return zr(t,e)}function zr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Fae(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function zae(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function XM(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function sx(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Lae(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function qm(t){return typeof t=="string"||t instanceof String}function _ae(t){return typeof t=="boolean"}function uk(t){return typeof t=="number"}function Xf(t){return Array.isArray(t)?Xf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":uk(t)?"float32":qm(t)?"string":_ae(t)?"bool":"float32"}function dk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function hk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Pt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function YM(t,e,n,r=!1){const s=new Array;if(e.length===1){const o=e[0]*(r?2:1);for(let i=0;i<o;i++)s[i]=n[t+i]}else{const o=e[0],i=e.slice(1),a=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<o;l++)s[l]=YM(t+l*a,i,n,r)}return s}function Ca(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,o)=>s*o)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return YM(0,t,e,n)}function Bae(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function _C(t,e){const n=Zs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Zs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function ZM(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Ca(t,new Float32Array(n));if(e==="int32")return Ca(t,new Int32Array(n));if(e==="bool")return Ca(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function hc(t){t.forEach(e=>{oe(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function rl(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Yf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function BC(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gN="tfjsflags";class Vae{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=jae,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(BC(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);gN in e&&e[gN].split(",").forEach(r=>{const[s,o]=r.split(":");this.urlFlags[s]=Uae(s,o)})}}function jae(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Wae(e,r[0],r[1]),r.join("="))),e}function Wae(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Uae(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Oe(){return QM}let QM=null;function Hae(t){QM=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z4;function JM(){if(Z4==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Z4=t}return Z4}function Gae(){const t=JM();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function VC(t,e){const n=Gae();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const g2="Abs",Km="Acos",Xm="Acosh",Zf="Add",jC="AddN",WC="All",UC="Any",y2="ArgMax",b2="ArgMin",Ym="Asin",Zm="Asinh",Qm="Atan",Jm="Atanh",eg="Atan2",x2="AvgPool",HC="AvgPoolGrad",v2="AvgPool3D",GC="AvgPool3DGrad",w2="BatchMatMul",k2="BatchToSpaceND",qC="Bincount",KC="BitwiseAnd",qae="BroadcastTo",eO="BroadcastArgs",tg="Cast",ng="Ceil",rg="ClipByValue",XC="Complex",C2="ComplexAbs",S2="Concat",T2="Conv2D",YC="Conv2DBackpropFilter",I2="Conv2DBackpropInput",$2="Conv3D",ZC="Conv3DBackpropFilterV2",QC="Conv3DBackpropInputV2",sg="Cos",og="Cosh",JC="Cumprod",N2="Cumsum",eS="CropAndResize",tS="DenseBincount",nS="DepthToSpace",E2="DepthwiseConv2dNative",rS="DepthwiseConv2dNativeBackpropFilter",sS="DepthwiseConv2dNativeBackpropInput",tO="Diag",R2="Dilation2D",fk="Dilation2DBackpropInput",pk="Dilation2DBackpropFilter",Kae="Draw",ig="RealDiv",oS="Einsum",ag="Elu",iS="EluGrad",lg="Erf",A2="Equal",cg="Exp",D2="ExpandDims",ug="Expm1",aS="FFT",lS="Fill",cS="FlipLeftRight",dg="Floor",hg="FloorDiv",P2="FusedBatchNorm",M2="GatherV2",nO="GatherNd",O2="Greater",fg="GreaterEqual",pg="Identity",uS="IFFT",dS="Imag",mg="IsFinite",gg="IsInf",yg="IsNan",F2="LeakyRelu",z2="Less",L2="LessEqual",rO="LinSpace",bg="Log",xg="Log1p",_2="LogicalAnd",B2="LogicalNot",V2="LogicalOr",Xae="LogSoftmax",j2="LRN",hS="LRNGrad",W2="Max",vg="Maximum",U2="MaxPool",fS="MaxPoolGrad",H2="MaxPool3D",pS="MaxPool3DGrad",sO="MaxPoolWithArgmax",G2="Mean",q2="Min",wg="Minimum",K2="MirrorPad",kg="Mod",oO="Multinomial",Cg="Multiply",X2="Neg",Y2="NotEqual",mS="NonMaxSuppressionV3",gS="NonMaxSuppressionV4",yS="NonMaxSuppressionV5",Z2="OnesLike",Q2="OneHot",J2="Pack",ev="PadV2",Sg="Pow",tv="Prelu",nv="Prod",iO="RaggedGather",aO="RaggedRange",lO="RaggedTensorToTensor",bS="Range",xS="Real",Tg="Reciprocal",Ig="Relu",rv="Reshape",sv="ResizeNearestNeighbor",vS="ResizeNearestNeighborGrad",ov="ResizeBilinear",wS="ResizeBilinearGrad",$g="Relu6",iv="Reverse",Ng="Round",Eg="Rsqrt",cO="ScatterNd",uO="TensorScatterUpdate",dO="SearchSorted",av="Select",Rg="Selu",lv="Slice",Ag="Sin",Dg="Sinh",Pg="Sign",Mg="Sigmoid",Og="Softplus",Fg="Sqrt",cv="Sum",uv="SpaceToBatchND",dv="SplitV",hv="Softmax",hO="SparseFillEmptyRows",fO="SparseReshape",pO="SparseSegmentMean",mO="SparseSegmentSum",gO="SparseToDense",zg="SquaredDifference",kS="Square",CS="StaticRegexReplace",SS="StridedSlice",yO="StringNGrams",bO="StringSplit",xO="StringToHashBucketFast",Lg="Sub",_g="Tan",Bg="Tanh",Vg="Tile",TS="TopK",IS="Transform",lf="Transpose",$S="Unique",fv="Unpack",pv="UnsortedSegmentSum",mv="ZerosLike",jg="Step",Yae="FromPixels",NS="RotateWithOffset",ox="_FusedMatMul",ix="FusedConv2D",vO="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ui(...t){Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(...t)}function Zae(...t){Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ax=VC("kernelRegistry",()=>new Map),mk=VC("gradRegistry",()=>new Map);function yN(t,e){const n=kO(t,e);return ax.get(n)}function bN(t){return mk.get(t)}function xN(t){const e=ax.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[o,i]=s,[a]=o.split("_");a===t&&n.push(i)}return n}function wO(t){const{kernelName:e,backendName:n}=t,r=kO(e,n);ax.has(r)&&ui(`The kernel '${e}' for backend '${n}' is already registered`),ax.set(r,t)}function Qae(t){const{kernelName:e}=t;mk.has(e)&&Oe().getBool("DEBUG")&&ui(`Overriding the gradient for '${e}'`),mk.set(e,t)}function kO(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CO(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Q4,vN;function Jae(){if(vN)return Q4;vN=1,Q4=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(R,O,U){this.low=R|0,this.high=O|0,this.unsigned=!!U}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}e.isLong=n;var r={},s={};function o(R,O){var U,K,G;return O?(R>>>=0,(G=0<=R&&R<256)&&(K=s[R],K)?K:(U=a(R,(R|0)<0?-1:0,!0),G&&(s[R]=U),U)):(R|=0,(G=-128<=R&&R<128)&&(K=r[R],K)?K:(U=a(R,R<0?-1:0,!1),G&&(r[R]=U),U))}e.fromInt=o;function i(R,O){if(isNaN(R))return O?S:k;if(O){if(R<0)return S;if(R>=g)return V}else{if(R<=-x)return j;if(R+1>=x)return F}return R<0?i(-R,O).neg():a(R%m|0,R/m|0,O)}e.fromNumber=i;function a(R,O,U){return new e(R,O,U)}e.fromBits=a;var l=Math.pow;function c(R,O,U){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return k;if(typeof O=="number"?(U=O,O=!1):O=!!O,U=U||10,U<2||36<U)throw RangeError("radix");var K;if((K=R.indexOf("-"))>0)throw Error("interior hyphen");if(K===0)return c(R.substring(1),O,U).neg();for(var G=i(l(U,8)),Y=k,Z=0;Z<R.length;Z+=8){var ne=Math.min(8,R.length-Z),J=parseInt(R.substring(Z,Z+ne),U);if(ne<8){var re=i(l(U,ne));Y=Y.mul(re).add(i(J))}else Y=Y.mul(G),Y=Y.add(i(J))}return Y.unsigned=O,Y}e.fromString=c;function u(R,O){return typeof R=="number"?i(R,O):typeof R=="string"?c(R,O):a(R.low,R.high,typeof O=="boolean"?O:R.unsigned)}e.fromValue=u;var h=65536,p=1<<24,m=h*h,g=m*m,x=g/2,w=o(p),k=o(0);e.ZERO=k;var S=o(0,!0);e.UZERO=S;var $=o(1);e.ONE=$;var T=o(1,!0);e.UONE=T;var E=o(-1);e.NEG_ONE=E;var F=a(-1,2147483647,!1);e.MAX_VALUE=F;var V=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=V;var j=a(0,-2147483648,!1);e.MIN_VALUE=j;var W=e.prototype;return W.toInt=function(){return this.unsigned?this.low>>>0:this.low},W.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},W.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(j)){var U=i(O),K=this.div(U),G=K.mul(U).sub(this);return K.toString(O)+G.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var Y=i(l(O,6),this.unsigned),Z=this,ne="";;){var J=Z.div(Y),re=Z.sub(J.mul(Y)).toInt()>>>0,se=re.toString(O);if(Z=J,Z.isZero())return se+ne;for(;se.length<6;)se="0"+se;ne=""+se+ne}},W.getHighBits=function(){return this.high},W.getHighBitsUnsigned=function(){return this.high>>>0},W.getLowBits=function(){return this.low},W.getLowBitsUnsigned=function(){return this.low>>>0},W.getNumBitsAbs=function(){if(this.isNegative())return this.eq(j)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,U=31;U>0&&!(O&1<<U);U--);return this.high!=0?U+33:U+1},W.isZero=function(){return this.high===0&&this.low===0},W.eqz=W.isZero,W.isNegative=function(){return!this.unsigned&&this.high<0},W.isPositive=function(){return this.unsigned||this.high>=0},W.isOdd=function(){return(this.low&1)===1},W.isEven=function(){return(this.low&1)===0},W.equals=function(O){return n(O)||(O=u(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},W.eq=W.equals,W.notEquals=function(O){return!this.eq(O)},W.neq=W.notEquals,W.ne=W.notEquals,W.lessThan=function(O){return this.comp(O)<0},W.lt=W.lessThan,W.lessThanOrEqual=function(O){return this.comp(O)<=0},W.lte=W.lessThanOrEqual,W.le=W.lessThanOrEqual,W.greaterThan=function(O){return this.comp(O)>0},W.gt=W.greaterThan,W.greaterThanOrEqual=function(O){return this.comp(O)>=0},W.gte=W.greaterThanOrEqual,W.ge=W.greaterThanOrEqual,W.compare=function(O){if(n(O)||(O=u(O)),this.eq(O))return 0;var U=this.isNegative(),K=O.isNegative();return U&&!K?-1:!U&&K?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},W.comp=W.compare,W.negate=function(){return!this.unsigned&&this.eq(j)?j:this.not().add($)},W.neg=W.negate,W.add=function(O){n(O)||(O=u(O));var U=this.high>>>16,K=this.high&65535,G=this.low>>>16,Y=this.low&65535,Z=O.high>>>16,ne=O.high&65535,J=O.low>>>16,re=O.low&65535,se=0,q=0,le=0,be=0;return be+=Y+re,le+=be>>>16,be&=65535,le+=G+J,q+=le>>>16,le&=65535,q+=K+ne,se+=q>>>16,q&=65535,se+=U+Z,se&=65535,a(le<<16|be,se<<16|q,this.unsigned)},W.subtract=function(O){return n(O)||(O=u(O)),this.add(O.neg())},W.sub=W.subtract,W.multiply=function(O){if(this.isZero())return k;if(n(O)||(O=u(O)),t){var U=t.mul(this.low,this.high,O.low,O.high);return a(U,t.get_high(),this.unsigned)}if(O.isZero())return k;if(this.eq(j))return O.isOdd()?j:k;if(O.eq(j))return this.isOdd()?j:k;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(w)&&O.lt(w))return i(this.toNumber()*O.toNumber(),this.unsigned);var K=this.high>>>16,G=this.high&65535,Y=this.low>>>16,Z=this.low&65535,ne=O.high>>>16,J=O.high&65535,re=O.low>>>16,se=O.low&65535,q=0,le=0,be=0,pe=0;return pe+=Z*se,be+=pe>>>16,pe&=65535,be+=Y*se,le+=be>>>16,be&=65535,be+=Z*re,le+=be>>>16,be&=65535,le+=G*se,q+=le>>>16,le&=65535,le+=Y*re,q+=le>>>16,le&=65535,le+=Z*J,q+=le>>>16,le&=65535,q+=K*se+G*re+Y*J+Z*ne,q&=65535,a(be<<16|pe,q<<16|le,this.unsigned)},W.mul=W.multiply,W.divide=function(O){if(n(O)||(O=u(O)),O.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var U=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,O.low,O.high);return a(U,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:k;var K,G,Y;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return S;if(O.gt(this.shru(1)))return T;Y=S}else{if(this.eq(j)){if(O.eq($)||O.eq(E))return j;if(O.eq(j))return $;var Z=this.shr(1);return K=Z.div(O).shl(1),K.eq(k)?O.isNegative()?$:E:(G=this.sub(O.mul(K)),Y=K.add(G.div(O)),Y)}else if(O.eq(j))return this.unsigned?S:k;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();Y=k}for(G=this;G.gte(O);){K=Math.max(1,Math.floor(G.toNumber()/O.toNumber()));for(var ne=Math.ceil(Math.log(K)/Math.LN2),J=ne<=48?1:l(2,ne-48),re=i(K),se=re.mul(O);se.isNegative()||se.gt(G);)K-=J,re=i(K,this.unsigned),se=re.mul(O);re.isZero()&&(re=$),Y=Y.add(re),G=G.sub(se)}return Y},W.div=W.divide,W.modulo=function(O){if(n(O)||(O=u(O)),t){var U=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,O.low,O.high);return a(U,t.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},W.mod=W.modulo,W.rem=W.modulo,W.not=function(){return a(~this.low,~this.high,this.unsigned)},W.and=function(O){return n(O)||(O=u(O)),a(this.low&O.low,this.high&O.high,this.unsigned)},W.or=function(O){return n(O)||(O=u(O)),a(this.low|O.low,this.high|O.high,this.unsigned)},W.xor=function(O){return n(O)||(O=u(O)),a(this.low^O.low,this.high^O.high,this.unsigned)},W.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?a(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):a(0,this.low<<O-32,this.unsigned)},W.shl=W.shiftLeft,W.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?a(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):a(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},W.shr=W.shiftRight,W.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var U=this.high;if(O<32){var K=this.low;return a(K>>>O|U<<32-O,U>>>O,this.unsigned)}else return O===32?a(U,0,this.unsigned):a(U>>>O-32,0,this.unsigned)},W.shru=W.shiftRightUnsigned,W.shr_u=W.shiftRightUnsigned,W.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},W.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},W.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},W.toBytesLE=function(){var O=this.high,U=this.low;return[U&255,U>>>8&255,U>>>16&255,U>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},W.toBytesBE=function(){var O=this.high,U=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,U>>>24,U>>>16&255,U>>>8&255,U&255]},e.fromBytes=function(O,U,K){return K?e.fromBytesLE(O,U):e.fromBytesBE(O,U)},e.fromBytesLE=function(O,U){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,U)},e.fromBytesBE=function(O,U){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],U)},Q4}var SO=Jae();const TO=Im(SO),ele=nR({__proto__:null,default:TO},[SO]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ad=TO||ele;function gv(t){return ad.fromString(t,!0,16)}const IO=gv("c3a5c85c97cb3127"),id=gv("b492b66fbe98f273"),po=gv("9ae16a3b2f90404f");function gk(t){return t.xor(t.shru(47))}function $O(t,e,n){const r=t.slice(e,e+n);return ad.fromBytes(Array.from(r),!0,!0)}function tr(t,e){return $O(t,e,8)}function wN(t,e){return $O(t,e,4)}function vs(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Yc(t,e,n=gv("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function tle(t,e,n,r,s,o){s=s.add(t),o=vs(o.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(n),o=o.add(vs(s,44)),[s.add(r),o.add(i)]}function By(t,e,n,r){return tle(tr(t,e),tr(t,e+8),tr(t,e+16),tr(t,e+24),n,r)}function nle(t,e=t.length){if(e>=8){const n=po.add(e*2),r=tr(t,0).add(po),s=tr(t,e-8),o=vs(s,37).mul(n).add(r),i=vs(r,25).add(s).mul(n);return Yc(o,i,n)}if(e>=4){const n=po.add(e*2),r=wN(t,0);return Yc(r.shl(3).add(e),wN(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],o=n+(r<<8),i=e+(s<<2);return gk(po.mul(o).xor(IO.mul(i))).mul(po)}return po}function rle(t,e=t.length){const n=po.add(e*2),r=tr(t,0).mul(id),s=tr(t,8),o=tr(t,e-8).mul(n),i=tr(t,e-16).mul(po);return Yc(vs(r.add(s),43).add(vs(o,30)).add(i),r.add(vs(s.add(po),18)).add(o),n)}function sle(t,e=t.length){const n=po.add(e*2),r=tr(t,0).mul(po),s=tr(t,8),o=tr(t,e-8).mul(n),i=tr(t,e-16).mul(po),a=vs(r.add(s),43).add(vs(o,30)).add(i),l=Yc(a,r.add(vs(s.add(po),18)).add(o),n),c=tr(t,16).mul(n),u=tr(t,24),h=a.add(tr(t,e-32)).mul(n),p=l.add(tr(t,e-24)).mul(n);return Yc(vs(c.add(u),43).add(vs(h,30)).add(p),c.add(vs(u.add(r),18)).add(h),n)}function ole(t,e=t.length){const n=ad.fromNumber(81,!0);if(e<=32)return e<=16?nle(t,e):rle(t,e);if(e<=64)return sle(t,e);let r=n,s=n.mul(id).add(113),o=gk(s.mul(po).add(113)).mul(po),i=[ad.UZERO,ad.UZERO],a=[ad.UZERO,ad.UZERO];r=r.mul(po).add(tr(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=vs(r.add(s).add(i[0]).add(tr(t,l+8)),37).mul(id),s=vs(s.add(i[1]).add(tr(t,l+48)),42).mul(id),r=r.xor(a[1]),s=s.add(i[0]).add(tr(t,l+40)),o=vs(o.add(a[0]),33).mul(id),i=By(t,l,i[1].mul(id),r.add(a[0])),a=By(t,l+32,o.add(a[1]),s.add(tr(t,l+16))),[o,r]=[r,o],l+=64;while(l!==c);const h=id.add(o.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=vs(r.add(s).add(i[0]).add(tr(t,l+8)),37).mul(h),s=vs(s.add(i[1]).add(tr(t,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),s=s.add(i[0].mul(9).add(tr(t,l+40))),o=vs(o.add(a[0]),33).mul(h),i=By(t,l,i[1].mul(h),r.add(a[0])),a=By(t,l+32,o.add(a[1]),s.add(tr(t,l+16))),[o,r]=[r,o],Yc(Yc(i[0],a[0],h).add(gk(s).mul(IO)).add(o),Yc(i[1],a[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gu(t,e){return e==="string"?Zc(t):Vd([t],e)}function ile(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Vd(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Td(t)),Oe().getBool("DEBUG")&&Fae(t,e),ile(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Io(){return Oe().platform.now()}function Zc(t,e="utf-8"){return e=e||"utf-8",Oe().platform.encode(t,e)}function iu(t,e="utf-8"){return e=e||"utf-8",Oe().platform.decode(t,e)}function Xi(t){return Oe().platform.isTypedArray!=null?Oe().platform.isTypedArray(t):CO(t)}function Td(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||BC(t)||t==null||Xi(t)&&n)e.push(t);else if(Array.isArray(t)||Xi(t))for(let r=0;r<t.length;++r)Td(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Td(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ale{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new cle)}profileKernel(e,n,r){let s;const o=()=>{s=r()};let i;const a=Io();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(const c of s)c.dataSync();i=Promise.resolve({kernelMs:Io()-a})}if(Oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(h=>{lle(h,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:o,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),s,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],o,l[2])})})}}function lle(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class cle{logKernelProfile(e,n,r,s,o,i){const a=typeof s=="number"?af(`${s}ms`,9):s.error,l=af(e,25),c=n.rank,u=n.size,h=af(n.shape.toString(),14);let p="";for(const m in o){const g=o[m];if(g!=null){const x=g.shape||n.shape,w=x.length;p+=`${m}: ${w}D ${w>0?x:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${h}	%c${u}	%c${p}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ule(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const h in u){const p=u[h];let m=!1;for(let g=0;g<e.length;g++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,s[c.id]=!0;break}if(m)break}}const o={};o[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let h=0;h<c.outputs.length;h++)if(o[c.outputs[h].id]){for(const p in u)o[u[p].id]=!0,i[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&i[c.id]){const u={};for(const p in c.inputs){const m=c.inputs[p];r[m.id]&&(u[p]=m)}const h=Object.assign({},c);h.inputs=u,h.outputs=c.outputs,a.push(h)}}return a}function dle(t,e,n,r){for(let s=e.length-1;s>=0;s--){const o=e[s],i=[];if(o.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const a=o.gradient(i);for(const l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=o.inputs[l];if(!Mn(c.shape,u.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const h=t[u.id];t[u.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kN=20,x0=3,J4=7;function hle(t,e,n,r){const s=Pt(e),o=fle(t,e,n,s),i=e.length,a=fb(t,e,n,s,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function fle(t,e,n,r){const s=Ve(e),o=r[r.length-1],i=new Array(o).fill(0),a=e.length,l=n==="complex64"?A0(t):t;if(a>1)for(let c=0;c<s/o;c++){const u=c*o;for(let h=0;h<o;h++)i[h]=Math.max(i[h],R0(l[u+h],0,n).length)}return i}function R0(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(J4))} + ${parseFloat(t[1].toFixed(J4))}j`:qm(t)?r=`'${t}'`:n==="bool"?r=NO(t):r=parseFloat(t.toFixed(J4)).toString(),af(r,e)}function NO(t){return t===0?"false":"true"}function fb(t,e,n,r,s,o=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const x=A0(t);return[R0(x[0],0,n)]}return n==="bool"?[NO(t[0])]:[t[0].toString()]}if(l===1){if(a>kN){const w=x0*i;let k=Array.from(t.slice(0,w)),S=Array.from(t.slice((a-x0)*i,a*i));return n==="complex64"&&(k=A0(k),S=A0(S)),["["+k.map(($,T)=>R0($,s[T],n)).join(", ")+", ..., "+S.map(($,T)=>R0($,s[a-x0+T],n)).join(", ")+"]"]}return["["+(n==="complex64"?A0(t):Array.from(t)).map((w,k)=>R0(w,s[k],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),h=r[0]*i,p=[];if(a>kN){for(let x=0;x<x0;x++){const w=x*h,k=w+h;p.push(...fb(t.slice(w,k),c,n,u,s,!1))}p.push("...");for(let x=a-x0;x<a;x++){const w=x*h,k=w+h;p.push(...fb(t.slice(w,k),c,n,u,s,x===a-1))}}else for(let x=0;x<a;x++){const w=x*h,k=w+h;p.push(...fb(t.slice(w,k),c,n,u,s,x===a-1))}const m=l===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+m;let g=`,
`;for(let x=2;x<l;x++)g+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":g),p}function A0(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ms{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Ve(e),r!=null){const s=r.length;oe(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||zr(n,this.size),this.strides=Pt(e)}set(e,...n){n.length===0&&(n=[0]),oe(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return xa().makeTensor(this.values,this.shape,this.dtype)}}let xa=null,Gh=null;function ple(t){xa=t}function mle(t){Gh=t}class ts{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ve(e),this.strides=Pt(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Gh.buffer(this.shape,this.dtype,e)}bufferSync(){return Gh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ca(this.shape,e,this.dtype==="complex64")}arraySync(){return Ca(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=xa().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>iu(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),xa().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=xa().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>iu(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await xa().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),xa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Gh.print(this,e)}clone(){return this.throwIfDisposed(),Gh.clone(this)}toString(e=!1){const n=this.dataSync();return hle(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Gh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),xa().makeVariable(this,e,n,r)}}Object.defineProperty(ts,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Be(){return VC("Tensor",()=>ts)}Be();class lx extends ts{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Mn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);xa().disposeTensor(this),this.dataId=e.dataId,xa().incRef(this,null)}dispose(){xa().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(lx,Symbol.hasInstance,{value:t=>t instanceof ts&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var CN;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(CN||(CN={}));var yk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(yk||(yk={}));var bk;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(bk||(bk={}));var xk;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(xk||(xk={}));var vk;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(vk||(vk={}));const gle={float32:xk,int32:yk,bool:bk,complex64:vk};function qo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return gle[t][e]}function ES(t){return qo(t,"int32")}function EO(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function RO(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _r(t,e){if(t.dtype===e.dtype)return[t,e];const n=qo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function AO(t){const e=[];return DO(t,e,new Set),e}function DO(t,e,n){if(t==null)return;if(t instanceof ts){e.push(t);return}if(!yle(t))return;const r=t;for(const s in r){const o=r[s];n.has(o)||(n.add(o),DO(o,e,n))}}function yle(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3(t){return t.kernelName!=null}class SN{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Ef{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new SN}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ui(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ale(this.backendInstance),!0}setupRegisteredKernels(){xN(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){xN(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof FC)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,o=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ui(`Initialization of backend ${e} failed`),ui(i.stack||i.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ui(`Initialization of backend ${e} failed`),ui(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:o}=this.initializeBackend(r);if(o||s)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,o=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,o,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Ef.nextTensorId++}nextVariableId(){return Ef.nextVariableId++}clone(e){const n=Se.runKernel(pg,{x:e}),r={x:e},s=i=>({x:()=>{const a="float32",l={x:i},c={dtype:a};return Se.runKernel(tg,l,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,o,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(yN(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let o=0;r.forEach(l=>{o+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-o-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=e3(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(e3(e)){const{kernelName:g,inputs:x,attrs:w}=e;this.backendName==null&&this.backend;const k=yN(g,this.backendName);oe(k!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),a=()=>{const S=this.backend.numDataIds();l=k.kernelFunc({inputs:x,attrs:w,backend:this.backend});const $=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,S,$);const T=$.map(E=>E.rank!=null?E:this.makeTensorFromTensorInfo(E));if(s){const E=this.getTensorsForGradient(g,x,T);r=this.saveTensorsForBackwardMode(E)}return T}}else{const{forwardFunc:g}=e,x=w=>{s&&(r=w.map(k=>this.keep(this.clone(k))))};a=()=>{const w=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,x));const k=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,w,k),k}}const{inputs:u,attrs:h}=e,p=e3(e)?null:e.backwardsFunc;let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(m=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),n=m.outputs)}),s&&this.addTapeNode(c,u,n,p,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(g=>u[g]!=null?u[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=bN(e);if(s!=null){const o=s.inputsToSave||[],i=s.outputsToSave||[];let a;s.saveAllInputs?(oe(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=o.map(c=>n[c]);const l=r.filter((c,u)=>i[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let o=e;r==="string"&&qm(e[0])&&(o=e.map(l=>Zc(l)));const i=s.write(o,n,r),a=new ts(n,r,i,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(i),c=Lae(o);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const o={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:o}=e,i=new ts(s,o,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const o=new lx(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*sx(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof lx||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*sx(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,o,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},l=bN(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,h)=>{if(u==null){const p=r[h],m=Zs(p.size,p.dtype);return this.makeTensor(m,p.shape,p.dtype)}return u}),s(c.length>1?c:c[0],o,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=AO(e),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const i=this.state.activeScope.track[o];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(e,n,r,s=!1){if(oe(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));oe(o instanceof ts,()=>"The result y returned by f() must be a tensor.");const i=ule(this.state.activeTape,n,o);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[o.id]=r??ble(o.shape),dle(a,i,c=>this.tidy(c),xle);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(e){return oe(dk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{oe(n.every(a=>a instanceof ts),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const o=(a,l)=>(r=e(...n,l),oe(r.value instanceof ts,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),oe(dk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];oe(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),oe(u.every(p=>p instanceof ts),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return u.forEach((p,m)=>{h[m]=()=>p}),h};return this.runKernelFunc({forwardFunc:o,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Io(),r=await this.backend.time(e);return r.wallMs=Io()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new SN;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ef.nextTensorId=0;Ef.nextVariableId=0;function ble(t){const e=_C(Ve(t),"float32");return Se.makeTensor(e,t,"float32")}function PO(){const t=JM();if(t._tfengine==null){const e=new Vae(t);t._tfengine=new Ef(e)}return Hae(t._tfengine.ENV),ple(()=>t._tfengine),t._tfengine}const Se=PO();function xle(t,e){const n={a:t,b:e};return Se.runKernel(Zf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(){return typeof navigator<"u"&&navigator!=null}function MO(t){if(t||vle()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function OO(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ao=Oe();Ao.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ao.registerFlag("IS_BROWSER",()=>OO());Ao.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ao.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ao.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ao.registerFlag("PROD",()=>!1);Ao.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ao.getBool("DEBUG"));Ao.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ao.registerFlag("IS_TEST",()=>!1);Ao.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ao.getBool("DEBUG"));Ao.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ao.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ao.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yv(t,e){let n=t;if(Xi(t))return e==="string"?[]:[t.length];if(EO(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(RO(t))return[t.buffer.size/(e==null?4:sx(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Xi(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&FO(t,r,[]),r}function FO(t,e,n){if(n=n||[],!Array.isArray(t)&&!Xi(t)){oe(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}oe(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),oe(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)FO(t[s],r,n.concat(s))}function TN(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function he(t,e,n,r="numeric"){if(t instanceof Be())return TN(r,t.dtype,e,n),t;let s=Xf(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),TN(r,s,e,n),t==null||!Xi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const o=yv(t,s);!Xi(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Vd(t,s):Td(t,[],!0);return Se.makeTensor(a,o,s)}function zO(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,i)=>he(o,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wle="__op";function $e(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+wle;const s=(...o)=>{Se.startScope(n);try{const i=r(...o);return BC(i)&&console.error("Cannot return a Promise inside of tidy."),Se.endScope(i),i}catch(i){throw Se.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kle(t,e){const n=he(t,"real","complex"),r=he(e,"imag","complex");LC(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return Se.runKernel(XC,s)}const Rf=$e({complex_:kle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bv(t,e,n,r){if(r==null)r=Xf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(RO(t)||EO(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Se.backend.createTensorFromGPUData(t,e||n,r)}if(!Xi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){hc(e);const s=Ve(e),o=Ve(n);oe(s===o,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${o}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==Ve(e.slice(i)):!0;oe(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Xi(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Vd(t,r):Td(t,[],!0),Se.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t,e,n){const r=yv(t,n);return bv(t,e,r,n)}class Qf{static join(e){return new Qf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Xi(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+s.byteLength;this.shards.push({buffer:s,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,o=new ArrayBuffer(s),i=new Uint8Array(o);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+a-c.start,p=a,g=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,h,g-h);if(i.set(x,p),a+=x.length,n<c.end)break}return o}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Cle(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Cle(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,o=e(t[s]);if(o===0)return s;o<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(){return Se}function IN(){return Se.memory()}function De(t,e){return Se.tidy(t,e)}function hn(t){AO(t).forEach(n=>n.dispose())}function sl(t){return Se.keep(t)}function _O(t,e,n=1){return Se.registerBackend(t,e,n)}function Sle(){return Se.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $N=4;async function NN(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const a=s[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async h=>{const p=await l.bytes(),m=p.reduce((w,k)=>w+k.length,0)+$N*p.length,g=new Uint8Array(m);let x=0;for(let w=0;w<p.length;w++){const k=p[w],S=new Uint8Array(new Uint32Array([k.length]).buffer);g.set(S,x),x+=$N,g.set(k,x),x+=k.length}h(g)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const o=await Promise.all(r);return{data:Tle(o),specs:n}}function Tle(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(o=>{if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),s),s+=o.byteLength}),r.buffer}const RS=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function EN(t){return RS?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Ile(t){if(RS)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function $le(t){if(RS){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Nle(t){return Qf.join(t)}function BO(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:EN(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:EN(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Qf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ho{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return ho.instance==null&&(ho.instance=new ho),ho.instance}static registerSaveRouter(e){ho.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ho.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ho.getHandlers(e,"save")}static getLoadHandlers(e,n){return ho.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?ho.getInstance().loadRouters:ho.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&s.push(a)}),s}}const Ele=t=>ho.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wk="tensorflowjs",kk=1,fd="models_store",Gc="model_info_store";function VO(){if(!Oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Ck(t){const e=t.result;e.createObjectStore(fd,{keyPath:"modelPath"}),e.createObjectStore(Gc,{keyPath:"modelPath"})}class Id{constructor(e){if(this.indexedDB=VO(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const o=this.indexedDB.open(wk,kk);o.onupgradeneeded=()=>Ck(o),o.onsuccess=()=>{const i=o.result;if(n==null){const a=i.transaction(fd,"readonly"),c=a.objectStore(fd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(i.close(),s(c.error)),a.oncomplete=()=>i.close()}else{n.weightData=Qf.join(n.weightData);const a=BO(n),l=i.transaction(Gc,"readwrite");let c=l.objectStore(Gc),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(p){return s(p)}let h;u.onsuccess=()=>{h=i.transaction(fd,"readwrite");const p=h.objectStore(fd);let m;try{m=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(g){return s(g)}m.onsuccess=()=>r({modelArtifactsInfo:a}),m.onerror=g=>{c=l.objectStore(Gc);const x=c.delete(this.modelPath);x.onsuccess=()=>(i.close(),s(m.error)),x.onerror=w=>(i.close(),s(m.error))}},u.onerror=p=>(i.close(),s(u.error)),l.oncomplete=()=>{h==null?i.close():h.oncomplete=()=>i.close()}}},o.onerror=i=>s(o.error)})}}Id.URL_SCHEME="indexeddb://";const jO=t=>Oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Id.URL_SCHEME)?Rle(t.slice(Id.URL_SCHEME.length)):null;ho.registerSaveRouter(jO);ho.registerLoadRouter(jO);function Rle(t){return new Id(t)}function Ale(t){return t.startsWith(Id.URL_SCHEME)?t.slice(Id.URL_SCHEME.length):t}class Dle{constructor(){this.indexedDB=VO()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(wk,kk);r.onupgradeneeded=()=>Ck(r),r.onsuccess=()=>{const s=r.result,o=s.transaction(Gc,"readonly"),a=o.objectStore(Gc).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),o.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Ale(e),new Promise((n,r)=>{const s=this.indexedDB.open(wk,kk);s.onupgradeneeded=()=>Ck(s),s.onsuccess=()=>{const o=s.result,i=o.transaction(Gc,"readwrite"),a=i.objectStore(Gc),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return o.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),h=()=>{c=o.transaction(fd,"readwrite");const m=c.objectStore(fd).delete(e);m.onsuccess=()=>n(l.result.modelArtifactsInfo),m.onerror=g=>r(l.error)};u.onsuccess=h,u.onerror=p=>(h(),o.close(),r(l.error))}},l.onerror=u=>(o.close(),r(l.error)),i.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},s.onerror=o=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ql="/",qh="tensorflowjs_models",WO="info",Ple="model_topology",Mle="weight_specs",Ole="weight_data",Fle="model_metadata";function UO(t){return{info:[qh,t,WO].join(ql),topology:[qh,t,Ple].join(ql),weightSpecs:[qh,t,Mle].join(ql),weightData:[qh,t,Ole].join(ql),modelMetadata:[qh,t,Fle].join(ql)}}function HO(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function zle(t){const e=t.split(ql);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ql)}function Lle(t){return t.startsWith($d.URL_SCHEME)?t.slice($d.URL_SCHEME.length):t}class $d{constructor(e){if(!Oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=UO(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=BO(e),o=Qf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Ile(o));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw HO(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const a=JSON.parse(o);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=$le(i),n}}$d.URL_SCHEME="localstorage://";const GO=t=>Oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($d.URL_SCHEME)?_le(t.slice($d.URL_SCHEME.length)):null;ho.registerSaveRouter(GO);ho.registerLoadRouter(GO);function _le(t){return new $d(t)}class Ble{constructor(){oe(Oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),oe(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=qh+ql,r=ql+WO;for(let s=0;s<this.LS.length;++s){const o=this.LS.key(s);if(o.startsWith(n)&&o.endsWith(r)){const i=zle(o);e[i]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=Lle(e);const n=UO(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return HO(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RN="://";class ja{constructor(){this.managers={}}static getInstance(){return ja.instance==null&&(ja.instance=new ja),ja.instance}static registerManager(e,n){oe(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(RN)&&(e=e.slice(0,e.indexOf(RN))),oe(e.length>0,()=>"scheme must not be an empty string.");const r=ja.getInstance();oe(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ja.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ja.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vle{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return CO(e)}}if(Oe().get("IS_BROWSER")){Oe().setPlatform("browser",new Vle);try{ja.registerManager($d.URL_SCHEME,new Ble)}catch{}try{ja.registerManager(Id.URL_SCHEME,new Dle)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jle={importFetch:()=>require("node-fetch")};let t3;class Wle{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Oe().global.fetch!=null?Oe().global.fetch(e,n):(t3==null&&(t3=jle.importFetch()),t3(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Oe().get("IS_NODE")&&!Oe().get("IS_BROWSER")&&Oe().setPlatform("node",new Wle);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function on(t,e="float32",n){return e=e||"float32",hc(t),new Ms(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ule(t,e){const n=he(t,"x","cast");if(!zae(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return Se.runKernel(tg,r,s)}const yt=$e({cast_:Ule});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hle(t){const n={x:he(t,"x","clone","string_or_numeric")};return Se.runKernel(pg,n)}const xd=$e({clone_:Hle});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gle(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PO();const qle={buffer:on,cast:yt,clone:xd,print:Gle};mle(qle);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kle(t,e){let n=he(t,"a","add"),r=he(e,"b","add");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(Zf,s)}const st=$e({add_:Kle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xle(t,e){let n=he(t,"a","floorDiv"),r=he(e,"b","floorDiv");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(hg,s)}const qO=$e({floorDiv_:Xle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yle(t,e){let n=he(t,"a","div"),r=he(e,"b","div");if([n,r]=_r(n,r),n.dtype==="int32"&&r.dtype==="int32")return qO(n,r);const s={a:n,b:r},o={};return Se.runKernel(ig,s,o)}const zt=$e({div_:Yle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zle(t,e){let n=he(t,"a","mul"),r=he(e,"b","mul");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(Cg,s)}const xe=$e({mul_:Zle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qle(t){const e=he(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Se.runKernel(C2,n)}else{const n={x:e};return Se.runKernel(g2,n)}}const fo=$e({abs_:Qle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jle(t){const n={x:he(t,"x","acos")};return Se.runKernel(Km,n)}const ece=$e({acos_:Jle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tce(t){const n={x:he(t,"x","acosh")};return Se.runKernel(Xm,n)}const nce=$e({acosh_:tce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rce(t,e=null,n=!1){const s={x:he(t,"x","all","bool")},o={axis:e,keepDims:n};return Se.runKernel(WC,s,o)}const KO=$e({all_:rce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sce(t,e=null,n=!1){const s={x:he(t,"x","any","bool")},o={axis:e,keepDims:n};return Se.runKernel(UC,s,o)}const Sk=$e({any_:sce});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oce(t,e=0){const r={x:he(t,"x","argMax")},s={axis:e};return Se.runKernel(y2,r,s)}const pm=$e({argMax_:oce});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ice(t,e=0){const r={x:he(t,"x","argMin")},s={axis:e};return Se.runKernel(b2,r,s)}const ace=$e({argMin_:ice});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lce(t){const n={x:he(t,"x","asin")};return Se.runKernel(Ym,n)}const cce=$e({asin_:lce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uce(t){const n={x:he(t,"x","asinh")};return Se.runKernel(Zm,n)}const dce=$e({asinh_:uce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hce(t){const n={x:he(t,"x","atan")};return Se.runKernel(Qm,n)}const fce=$e({atan_:hce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pce(t,e){let n=he(t,"a","atan2"),r=he(e,"b","atan2");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(eg,s)}const mce=$e({atan2_:pce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gce(t){const n={x:he(t,"x","atanh")};return Se.runKernel(Jm,n)}const yce=$e({atanh_:gce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wg(t,e,n,r,s="NHWC",o){const i=t[3],a=[...e,i],l=pc(s);return Os(t,a,n,o,r,null,null,l)}function Qi(t,e,n,r,s,o,i="channelsLast"){const[a,l]=mm(e);let c;if(i==="channelsLast")c=[a,l,t[3],t[3]];else if(i==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Os(t,c,n,r,s,o,!1,i)}function fc(t,e,n,r,s,o,i="NDHWC"){const[a,l,c]=Tk(e);let u,h;if(i==="NDHWC")h="channelsLast",u=[a,l,c,t[4],t[4]];else if(i==="NCDHW")h="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return yu(t,u,n,r,s,!1,h,o)}function Os(t,e,n,r,s,o,i=!1,a="channelsLast"){let[l,c,u,h]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,h]=t;else if(a==="channelsFirst")[l,h,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[p,m,,g]=e,[x,w]=mm(n),[k,S]=mm(r),$=cf(p,k),T=cf(m,S),{padInfo:E,outHeight:F,outWidth:V}=vce(s,c,u,x,w,$,T,o,a),j=i?g*h:g;let W;return a==="channelsFirst"?W=[l,j,F,V]:a==="channelsLast"&&(W=[l,F,V,j]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:h,outHeight:F,outWidth:V,outChannels:j,padInfo:E,strideHeight:x,strideWidth:w,filterHeight:p,filterWidth:m,effectiveFilterHeight:$,effectiveFilterWidth:T,dilationHeight:k,dilationWidth:S,inShape:t,outShape:W,filterShape:e}}function yu(t,e,n,r,s,o=!1,i="channelsLast",a){let[l,c,u,h,p]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,u,h,p]=t;else if(i==="channelsFirst")[l,p,c,u,h]=t;else throw new Error(`Unknown dataFormat ${i}`);const[m,g,x,,w]=e,[k,S,$]=Tk(n),[T,E,F]=Tk(r),V=cf(m,T),j=cf(g,E),W=cf(x,F),{padInfo:R,outDepth:O,outHeight:U,outWidth:K}=wce(s,c,u,h,k,S,$,V,j,W,a),G=o?w*p:w;let Y;return i==="channelsFirst"?Y=[l,G,O,U,K]:i==="channelsLast"&&(Y=[l,O,U,K,G]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:h,inChannels:p,outDepth:O,outHeight:U,outWidth:K,outChannels:G,padInfo:R,strideDepth:k,strideHeight:S,strideWidth:$,filterDepth:m,filterHeight:g,filterWidth:x,effectiveFilterDepth:V,effectiveFilterHeight:j,effectiveFilterWidth:W,dilationDepth:T,dilationHeight:E,dilationWidth:F,inShape:t,outShape:Y,filterShape:e}}function bce(t,e,n,r,s){r==null&&(r=AS(t,e,n));const o=t[0],i=t[1],a=gm((o-e+2*r)/n+1,s),l=gm((i-e+2*r)/n+1,s);return[a,l]}function xce(t,e,n,r,s,o){s==null&&(s=AS(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(i[a]=gm((t[a]-e[a]+2*s)/r[a]+1,o));return i}function AS(t,e,n,r=1){const s=cf(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function mm(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Tk(t){return typeof t=="number"?[t,t,t]:t}function cf(t,e){return e<=1?t:t+(t-1)*(e-1)}function vce(t,e,n,r,s,o,i,a,l){let c,u,h;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const m=bce([e,n],o,r,t,a);u=m[0],h=m[1]}else if(t==="same"){u=Math.ceil(e/r),h=Math.ceil(n/s);const p=Math.max(0,(u-1)*r+o-e),m=Math.max(0,(h-1)*s+i-n),g=Math.floor(p/2),x=p-g,w=Math.floor(m/2),k=m-w;c={top:g,bottom:x,left:w,right:k,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-o+1)/r),h=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],m=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:g,right:x,type:p===0&&m===0&&g===0&&x===0?"VALID":"EXPLICIT"},u=gm((e-o+p+m)/r+1,a),h=gm((n-i+g+x)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:h}}function wce(t,e,n,r,s,o,i,a,l,c,u){let h,p,m,g;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const w=xce([e,n,r,1],[a,l,c],1,[s,o,i],t,u);p=w[0],m=w[1],g=w[2]}else if(t==="same"){p=Math.ceil(e/s),m=Math.ceil(n/o),g=Math.ceil(r/i);const x=(p-1)*s+a-e,w=(m-1)*o+l-n,k=(g-1)*i+c-r,S=Math.floor(x/2),$=x-S,T=Math.floor(w/2),E=w-T,F=Math.floor(k/2),V=k-F;h={top:T,bottom:E,left:F,right:V,front:S,back:$,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:p,outHeight:m,outWidth:g}}function gm(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Nd(t){const[e,n,r]=mm(t);return e===1&&n===1&&r===1}function Js(t,e){return Nd(t)||Nd(e)}function Ed(t){return mm(t).every(e=>e>0)}function pc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Po(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")oe(Nf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{oe(Nf(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kce(t,e){const r={x:he(t,"x","reshape","string_or_numeric")},s={shape:e};return Se.runKernel(rv,r,s)}const Ie=$e({reshape_:kce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(t,e,n,r,s){const o=he(t,"x","avgPool","float32"),i=1;oe(Js(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),oe(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Po("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let h=Se.runKernel(x2,c,u);return h=yt(h,o.dtype),l?Ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const DS=$e({avgPool_:Cce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sce(t,e,n,r,s,o="NDHWC"){const i=he(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),oe(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),oe(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Po("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o};let h=Se.runKernel(v2,c,u);return h=yt(h,a.dtype),l?Ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Tce=$e({avgPool3d_:Sce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ice(t,e=0){oe(t.length>=1,()=>"Pass at least one tensor to concat");const n=zO(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return xd(n[0]);const r=n,s={axis:e};return Se.runKernel(S2,r,s)}const Ro=$e({concat_:Ice});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ce(t,e,n=!1,r=!1){let s=he(t,"a","matMul"),o=he(e,"b","matMul");[s,o]=_r(s,o);const i={a:s,b:o},a={transposeA:n,transposeB:r};return Se.runKernel(w2,i,a)}const Dn=$e({matMul_:$ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nce(t){const n={x:he(t,"x","sigmoid","float32")};return Se.runKernel(Mg,n)}const Jf=$e({sigmoid_:Nce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ece(t,e,n){const r=he(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},o={begin:e,size:n};return Se.runKernel(lv,s,o)}const nr=$e({slice_:Ece});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rce(t){const n={x:he(t,"x","tanh","float32")};return Se.runKernel(Bg,n)}const xv=$e({tanh_:Rce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ace(t,e,n){const r=he(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);oe(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),oe(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),oe(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const o={x:r},i={blockShape:e,crops:n};return Se.runKernel(k2,o,i)}const PS=$e({batchToSpaceND_:Ace});function Dce(t){let e;return t.rank===0||t.rank===1?e=Ie(t,[1,1,1,t.size]):t.rank===2?e=Ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pce(t,e,n,r,s,o){o==null&&(o=.001);const i=he(t,"x","batchNorm"),a=he(e,"mean","batchNorm"),l=he(n,"variance","batchNorm");let c;s!=null&&(c=he(s,"scale","batchNorm"));let u;r!=null&&(u=he(r,"offset","batchNorm")),oe(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:Dce(i),scale:c,offset:u,mean:a,variance:l},m={varianceEpsilon:o},g=Se.runKernel(P2,p,m);return Ie(g,i.shape)}const vv=$e({batchNorm_:Pce});function Mce(t,e,n,r,s,o){const i=he(t,"x","batchNorm"),a=he(e,"mean","batchNorm"),l=he(n,"variance","batchNorm");let c;s!=null&&(c=he(s,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),oe(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),oe(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),oe(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&oe(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&oe(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),vv(i,a,l,u,c,o)}const Oce=$e({batchNorm2d_:Mce});function Fce(t,e,n,r,s,o){const i=he(t,"x","batchNorm"),a=he(e,"mean","batchNorm"),l=he(n,"variance","batchNorm");let c;s!=null&&(c=he(s,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),oe(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),oe(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),oe(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&oe(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&oe(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),vv(i,a,l,u,c,o)}const zce=$e({batchNorm3d_:Fce});function Lce(t,e,n,r,s,o){const i=he(t,"x","batchNorm"),a=he(e,"mean","batchNorm"),l=he(n,"variance","batchNorm");let c;s!=null&&(c=he(s,"scale","batchNorm"));let u;return r!=null&&(u=he(r,"offset","batchNorm")),oe(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),oe(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),oe(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&oe(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&oe(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),vv(i,a,l,u,c,o)}const _ce=$e({batchNorm4d_:Lce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bce(t,e,n){const r=he(t,"x","bincount"),s=he(e,"weights","bincount");oe(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),oe(n>=0,()=>`size must be non-negative, but got ${n}.`),oe(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const o={x:r,weights:s},i={size:n};return Se.runKernel(qC,o,i)}const Vce=$e({bincount_:Bce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jce(t,e){let n=he(t,"broadcastTo","x");const r=n.shape;if(hc(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=Ie(n,c)}const s=n.shape,o=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])o[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(o.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return xd(n);const a={x:n},l={reps:o};return Se.runKernel(Vg,a,l)}const X0=$e({broadcastTo_:jce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wce(t){const n={x:he(t,"x","ceil","float32")};return Se.runKernel(ng,n)}const Uce=$e({ceil_:Wce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wv(t,e,n){hc(t),n=n||Xf(e);const r={shape:t,value:e,dtype:n};return Se.runKernel(lS,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hce(t,e,n){const r=he(t,"x","clipByValue");if(oe(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return wv(r.shape,e,r.dtype);const s={x:r},o={clipValueMin:e,clipValueMax:n};return Se.runKernel(rg,s,o)}const bi=$e({clipByValue_:Hce});function Gce(t){return Ro(t,0)}const qce=$e({concat1d_:Gce});function Kce(t,e){return Ro(t,e)}const Xce=$e({concat2d_:Kce});function Yce(t,e){return Ro(t,e)}const Zce=$e({concat3d_:Yce});function Qce(t,e){return Ro(t,e)}const Jce=$e({concat4d_:Qce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eue(t,e,n,r,s="NHWC",o=[1,1],i){const a=he(t,"x","conv2d","float32"),l=he(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),oe(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Po("conv2d",r,i);const h=s==="NHWC"?c.shape[3]:c.shape[1];oe(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),oe(Js(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),oe(Ed(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),oe(Ed(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},m={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},g=Se.runKernel(T2,p,m);return u?Ie(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Rd=$e({conv2d_:eue});function tue(t,e,n,r,s="NWC",o=1,i){const a=he(t,"x","conv1d"),l=he(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=Ie(a,[1,a.shape[0],a.shape[1]])),oe(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),oe(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Po("conv1d",r,i),oe(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),oe(Js(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),oe(Ed(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),oe(Ed(n),()=>"Error in conv1D: Stride should be larger than 0."),oe(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=Ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Ie(c,[c.shape[0],1,c.shape[1],c.shape[2]]),w=Rd(p,h,[1,n],r,"NHWC",[1,o],i);return u?Ie(w,[w.shape[2],w.shape[3]]):Ie(w,[w.shape[0],w.shape[2],w.shape[3]])}const XO=$e({conv1d_:tue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nue(t,e,n,r,s,o="NHWC",i){oe(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),oe(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),oe(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),oe(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=o==="NHWC"?a[3]:a[1],h=o==="NHWC"?l.shape[3]:l.shape[1];oe(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),oe(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),Po("conv2dDerInput",s,i);const p={dy:l,filter:n},m={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,inputShape:a},g=Se.runKernel(I2,p,m);return c?Ie(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const MS=$e({conv2DBackpropInput_:nue});function rue(t,e,n,r,s,o){const i=he(t,"x","conv2dTranspose"),a=he(e,"filter","conv2dTranspose");return MS(n,i,a,r,s,"NHWC",o)}const YO=$e({conv2dTranspose_:rue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sue(t,e,n,r,s="NDHWC",o=[1,1,1]){const i=he(t,"x","conv3d"),a=he(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),oe(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),oe(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),oe(Js(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),oe(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),oe(Ed(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),oe(Ed(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},h={strides:n,pad:r,dataFormat:s,dilations:o},p=Se.runKernel($2,u,h);return c?Ie(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const oue=$e({conv3d_:sue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iue(t,e,n,r,s){oe(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,i=e,a=!1;e.rank===4&&(a=!0,i=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const l=o[4],c=i.shape[4];oe(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),oe(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),oe(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),oe(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),oe(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:i,filter:n},h={pad:s,strides:r,inputShape:o},p=Se.runKernel(QC,u,h);return a?Ie(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const ZO=$e({conv3DBackpropInput_:iue});function aue(t,e,n,r,s){const o=he(t,"x","conv3dTranspose"),i=he(e,"filter","conv3dTranspose");return ZO(n,o,i,r,s)}const lue=$e({conv3dTranspose_:aue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cue(t){const n={x:he(t,"x","cos","float32")};return Se.runKernel(sg,n)}const OS=$e({cos_:cue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uue(t){const n={x:he(t,"x","cosh","float32")};return Se.runKernel(og,n)}const QO=$e({cosh_:uue});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function due(t,e=0,n=!1,r=!1){const o={x:he(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return Se.runKernel(JC,o,i)}const Ik=$e({cumprod_:due});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hue(t,e=0,n=!1,r=!1){const o={x:he(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return Se.runKernel(N2,o,i)}const JO=$e({cumsum_:hue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fue(t,e,n,r=!1){const s=he(t,"x","denseBincount"),o=he(e,"weights","denseBincount");oe(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),oe(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),oe(n>=0,()=>`size must be non-negative, but got ${n}.`),oe(o.size===s.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${o.shape}.`);const i={x:s,weights:o},a={size:n,binaryOutput:r};return Se.runKernel(tS,i,a)}const AN=$e({denseBincount_:fue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pue(t,e,n="NHWC"){const r=he(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];oe(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),oe(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),oe(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e} for depthToSpace with input shape
        ${r.shape}`),oe(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return Se.runKernel(nS,a,l)}const mue=$e({depthToSpace_:pue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gue(t,e,n,r,s="NHWC",o=[1,1],i){const a=he(t,"x","depthwiseConv2d","float32"),l=he(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),oe(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];oe(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Po("depthwiseConv2d",r,i);const p={x:c,filter:l},m={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},g=Se.runKernel(E2,p,m);return u?Ie(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const FS=$e({depthwiseConv2d_:gue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yue(t,e,n,r,s=[1,1],o="NHWC"){const i=he(t,"x","dilation2d"),a=he(e,"filter","dilation2d");oe(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),oe(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),oe(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=i,c=!1;i.rank===3&&(l=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),oe(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},h={strides:n,pad:r,dilations:s},p=Se.runKernel(R2,u,h);return c?Ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const bue=$e({dilation2d_:yue});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const o=n-1-s,i=t[o]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(o)}return r}function is(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],o=e.length-r-1,i=e[o];(s==null||s===1&&i>1)&&n.unshift(o)}return n}function Yt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let o=t[t.length-s-1];o==null&&(o=1);let i=e[e.length-s-1];if(i==null&&(i=1),o===1)r[n-s-1]=i;else if(i===1)r[n-s-1]=o;else if(o!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xue(t,e){let n=he(t,"a","equal","string_or_numeric"),r=he(e,"b","equal","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(A2,s)}const ul=$e({equal_:xue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vue(t,e,n){const r=he(e,"a","where"),s=he(n,"b","where"),o=he(t,"condition","where","bool"),i=Yt(Yt(o.shape,r.shape),s.shape),a=X0(o,i),l=X0(r,i),c=X0(s,i),u={condition:a,t:l,e:c};return Se.runKernel(av,u)}const bo=$e({where_:vue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wue(t){const n={x:he(t,"x","zerosLike")};return Se.runKernel(mv,n)}const wn=$e({zerosLike_:wue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kue(t,e){let n=he(t,"a","div"),r=he(e,"b","div");[n,r]=_r(n,r);const s=zt(n,r),o=wn(s),i=ul(r,o);return bo(i,o,s)}const Cue=$e({divNoNan_:kue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sue(t,e){const n=he(t,"t1","dot"),r=he(e,"t2","dot");oe((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(oe(s===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${o}.`),n.rank===1&&r.rank===1){const i=Ie(n,[1,-1]),a=Ie(r,[-1,1]),l=Dn(i,a);return Ie(l,[])}else if(n.rank===1&&r.rank===2){const i=Ie(n,[1,-1]),a=Ie(r,[r.shape[0],r.shape[1]]),l=Dn(i,a);return Ie(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=Ie(r,[-1,1]),a=Dn(n,i);return Ie(a,[a.size])}else{const i=Ie(r,[r.shape[0],r.shape[1]]);return Dn(n,i)}}const Tue=$e({dot_:Sue});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iue(t,...e){const n=e.map((s,o)=>he(s,`tensors${o}`,"einsum")),r={equation:t};return Se.runKernel(oS,n,r)}const v0=$e({einsum_:Iue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ue(t){const n={x:he(t,"x","elu","float32")};return Se.runKernel(ag,n)}const kv=$e({elu_:$ue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nue(t){let e=he(t,"x","erf");oe(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=yt(e,"float32"));const n={x:e};return Se.runKernel(lg,n)}const eF=$e({erf_:Nue});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zS(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function tF(t,e,n){const r=t.length+e.length,s=[];let o=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[o++]):s.push(e[i++]);return s}function Ts(t,e){const n=[],r=t.length;for(let o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);const s=e.map(o=>t[o]);return[n,s]}function Yr(t,e){const n=e.map(r=>1);return tF(t,n,e)}function Fs(t,e,n){oe(zS(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Cr(t,e){if(zS(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function bu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Br(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eue(t,e=null,n=!1){const s={x:he(t,"x","max")},o={reductionIndices:e,keepDims:n};return Se.runKernel(W2,s,o)}const Sa=$e({max_:Eue});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rue(t,e=null,n=!1){const s={x:he(t,"x","min")},o={axis:e,keepDims:n};return Se.runKernel(q2,s,o)}const cx=$e({min_:Rue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aue(t,e){let n=he(t,"base","pow"),r=he(e,"exp","pow");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(Sg,s)}const Ad=$e({pow_:Aue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(t,e){if((Xi(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Xi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bv(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Due(t){const n={x:he(t,"x","sqrt","float32")};return Se.runKernel(Fg,n)}const Qs=$e({sqrt_:Due});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pue(t){const e=he(t,"x","square"),n={};return Se.runKernel("Square",{x:e},n)}const cr=$e({square_:Pue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mue(t,e=null,n=!1){let r=he(t,"x","sum");r.dtype==="bool"&&(r=yt(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return Se.runKernel(cv,s,o)}const Ft=$e({sum_:Mue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oue(t,e="euclidean",n=null,r=!1){t=he(t,"x","norm");const s=nF(t,e,n);let o=s.shape;if(r){const i=an(n,t.shape);o=Yr(s.shape,i)}return Ie(s,o)}function nF(t,e,n=null){if(t.rank===0)return fo(t);if(t.rank!==1&&n===null)return nF(Ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ft(fo(t),n);if(e===1/0)return Sa(fo(t),n);if(e===-1/0)return cx(fo(t),n);if(e==="euclidean"||e===2)return Qs(Ft(Ad(fo(t),Pn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Sa(Ft(fo(t),n[0]),n[1]-1);if(e===1/0)return Sa(Ft(fo(t),n[1]),n[0]);if(e===-1/0)return cx(Ft(fo(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Qs(Ft(cr(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Cv=$e({norm_:Oue});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fue(t,e=null,n=!1){return Cv(t,"euclidean",e,n)}const zue=$e({euclideanNorm_:Fue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lue(t){const n={x:he(t,"x","exp")};return Se.runKernel(cg,n)}const dl=$e({exp_:Lue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ue(t,e=0){const n=he(t,"x","expandDims","string_or_numeric");oe(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return Se.runKernel(D2,r,s)}const $o=$e({expandDims_:_ue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bue(t){const n={x:he(t,"x","expm1")};return Se.runKernel(ug,n)}const Vue=$e({expm1_:Bue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jue(t,e){const n=he(t,"x","tile","string_or_numeric");oe(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return Se.runKernel(Vg,r,s)}const ka=$e({tile_:jue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wue(t,e,n,r="float32"){e==null&&(e=t);const s=on([t,e],r),o=t<=e?t:e;for(let a=0;a<o;++a)s.set(1,a,a);const i=Ie(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return ka($o(i,0),[n[0],1,1]);if(n.length===2)return ka($o($o(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return ka($o($o($o(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const rF=$e({eye_:Wue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uue(t){const n={x:he(t,"x","floor","float32")};return Se.runKernel(dg,n)}const Sv=$e({floor_:Uue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hue(t,e,n=0,r=0){const s=he(t,"x","gather"),o=he(e,"indices","gather","int32"),i={x:s,indices:o},a={axis:n,batchDims:r};return Se.runKernel(M2,i,a)}const LS=$e({gather_:Hue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gue(t,e){let n=he(t,"a","greater","string_or_numeric"),r=he(e,"b","greater","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(O2,s)}const xi=$e({greater_:Gue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function que(t,e){let n=he(t,"a","greaterEqual","string_or_numeric"),r=he(e,"b","greaterEqual","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(fg,s)}const jd=$e({greaterEqual_:que});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kue(t){const n={input:he(t,"input","imag")};return Se.runKernel(dS,n)}const _S=$e({imag_:Kue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xue(t){const n={x:he(t,"x","isFinite")};return Se.runKernel(mg,n)}const Yue=$e({isFinite_:Xue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zue(t){const n={x:he(t,"x","isInf")};return Se.runKernel(gg,n)}const Que=$e({isInf_:Zue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jue(t){const n={x:he(t,"x","isNaN")};return Se.runKernel(yg,n)}const ede=$e({isNaN_:Jue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tde(t,e=.2){const r={x:he(t,"x","leakyRelu")},s={alpha:e};return Se.runKernel(F2,r,s)}const BS=$e({leakyRelu_:tde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nde(t,e){let n=he(t,"a","less","string_or_numeric"),r=he(e,"b","less","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(z2,s)}const ux=$e({less_:nde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rde(t,e){let n=he(t,"a","lessEqual","string_or_numeric"),r=he(e,"b","lessEqual","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(L2,s)}const ep=$e({lessEqual_:rde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sde(t,e=5,n=1,r=1,s=.5){const o=he(t,"x","localResponseNormalization");oe(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),oe(Nf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=o,a=!1;o.rank===3&&(a=!0,i=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:r,beta:s},u=Se.runKernel(j2,l,c);return a?Ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const ode=$e({localResponseNormalization_:sde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ide(t){const n={x:he(t,"x","log","float32")};return Se.runKernel(bg,n)}const hl=$e({log_:ide});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ade(t){const n={x:he(t,"x","log1p")};return Se.runKernel(xg,n)}const sF=$e({log1p_:ade});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(t,e){oe(dk(t),()=>"The f passed in variableGrads(f) must be a function"),oe(e==null||Array.isArray(e)&&e.every(c=>c instanceof lx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in Se.registeredVariables)e.push(Se.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),oe(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const o=!0,{value:i,grads:a}=Se.gradients(t,e,null,o);oe(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),oe(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:i,grads:l}}function Df(t){return Se.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cde(t){const n={x:he(t,"x","neg")};return Se.runKernel(X2,n)}const Lr=$e({neg_:cde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ude(t){const n={x:he(t,"x","softplus")};return Se.runKernel(Og,n)}const Ug=$e({softplus_:ude});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t){const e=he(t,"x","logSigmoid");return Df(r=>({value:Lr(Ug(Lr(r))),gradFunc:i=>xe(i,Jf(Lr(r)))}))(e)}const hde=$e({logSigmoid_:dde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fde(t,e){let n=he(t,"a","sub"),r=he(e,"b","sub");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(Lg,s)}const Bt=$e({sub_:fde});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pde(t,e=-1){const n=he(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Df((s,o)=>{const a=Sa(s,e,!0),l=Bt(s,a),c=Bt(yt(l,"float32"),hl(Ft(dl(l),e,!0)));return o([c]),{value:c,gradFunc:(h,p)=>{const[m]=p,g=!0,x=dl(m);return Bt(h,xe(Ft(h,e,g),x))}}})(n)}const oF=$e({logSoftmax_:pde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mde(t,e=null,n=!1){const r=he(t,"x","logSumExp"),s=an(e,r.shape),o=Sa(r,s,!0),i=Bt(r,o),a=dl(i),l=Ft(a,s),c=hl(l),u=st(Ie(o,c.shape),c);if(n){const h=Yr(u.shape,s);return Ie(u,h)}return u}const iF=$e({logSumExp_:mde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gde(t,e){const n=he(t,"a","logicalAnd","bool"),r=he(e,"b","logicalAnd","bool");Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(_2,s)}const ac=$e({logicalAnd_:gde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yde(t){const n={x:he(t,"x","logicalNot","bool")};return Se.runKernel(B2,n)}const VS=$e({logicalNot_:yde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e){const n=he(t,"a","logicalOr","bool"),r=he(e,"b","logicalOr","bool");Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(V2,s)}const aF=$e({logicalOr_:bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xde(t,e){const n=he(t,"a","logicalXor","bool"),r=he(e,"b","logicalXor","bool");return Yt(n.shape,r.shape),ac(aF(t,e),VS(ac(t,e)))}const vde=$e({logicalXor_:xde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wde(t,e,n,r,s){const o=he(t,"x","maxPool"),i=1;let a=o,l=!1;o.rank===3&&(l=!0,a=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),oe(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),oe(Js(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Po("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},h=Se.runKernel(U2,c,u);return l?Ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const jS=$e({maxPool_:wde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kde(t,e=[1,1,1],n,r,s,o="NDHWC"){const i=he(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),oe(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),oe(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Po("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o},h=Se.runKernel(H2,c,u);return l?Ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Cde=$e({maxPool3d_:kde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sde(t,e){let n=he(t,"a","maximum"),r=he(e,"b","maximum");[n,r]=_r(n,r),n.dtype==="bool"&&(n=yt(n,"int32"),r=yt(r,"int32")),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(vg,s)}const xu=$e({maximum_:Sde});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tde(t,e=null,n=!1){const s={x:he(t,"x","mean")},o={axis:e,keepDims:n};return Se.runKernel(G2,s,o)}const Xr=$e({mean_:Tde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(t,e="float32"){if(hc(t),e==="complex64"){const r=ws(t,"float32"),s=ws(t,"float32");return Rf(r,s)}const n=Zs(Ve(t),e);return Se.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vu(t,e="float32"){if(hc(t),e==="complex64"){const r=vu(t,"float32"),s=ws(t,"float32");return Rf(r,s)}const n=_C(Ve(t),e);return Se.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ide(t,e){let n=he(t,"a","minimum"),r=he(e,"b","minimum");[n,r]=_r(n,r),n.dtype==="bool"&&(n=yt(n,"int32"),r=yt(r,"int32")),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(wg,s)}const ym=$e({minimum_:Ide});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t,e,n){oe(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=he(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");oe(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)oe(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),oe(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const o={paddings:e,mode:n},i={x:r};return Se.runKernel(K2,i,o)}const Nde=$e({mirrorPad_:$de});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ede(t,e){let n=he(t,"a","mod"),r=he(e,"b","mod");[n,r]=_r(n,r);const s={a:n,b:r};return Se.runKernel(kg,s)}const Rde=$e({mod_:Ede});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ade(t,e=null,n=!1){t=he(t,"x","moments");const r=an(e,t.shape),s=Xr(t,r,n);let o=s.shape;n||(o=Yr(s.shape,r));const i=cr(Bt(yt(t,"float32"),Ie(s,o))),a=Xr(i,r,n);return{mean:s,variance:a}}const WS=$e({moments_:Ade});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dde(t,e){let n=he(t,"a","notEqual","string_or_numeric"),r=he(e,"b","notEqual","string_or_numeric");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r};return Se.runKernel(Y2,s)}const dx=$e({notEqual_:Dde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pde(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:he(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return Se.runKernel(Q2,i,a)}const lF=$e({oneHot_:Pde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mde(t){const n={x:he(t,"x","onesLike")};return Se.runKernel(Z2,n)}const Yi=$e({onesLike_:Mde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ode(t,e,n=0){const r=he(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},o={x:r};return Se.runKernel(ev,o,s)}const US=$e({pad_:Ode});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fde(t,e,n){const r=he(t,"x","spaceToBatchND");oe(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),oe(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),oe(r.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},o={blockShape:e,paddings:n};return Se.runKernel(uv,s,o)}const HS=$e({spaceToBatchND_:Fde});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zde(t,e,n,r,s,o,i){s==null&&(s=[1,1]),o==null&&(o=1),r===0&&(r="valid");const a=he(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),oe(Js(o,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const u=Qi(l.shape,e,o,s,r),h=[u.dilationHeight,u.dilationWidth];let p;r==="same"?p=_de([u.filterHeight,u.filterWidth],h):p=[[0,0],[0,0]];const m=h[0]===1&&h[1]===1,[g,x]=Lde([u.inHeight,u.inWidth],h,p),w=m?r:"valid",k=m?l:HS(l,h,g),$=(n==="avg"?()=>DS(k,e,o,w,i):()=>jS(k,e,o,w,i))(),T=m?$:PS($,h,x);return c?Ie(T,[T.shape[1],T.shape[2],T.shape[3]]):T}function Lde(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),o=t.concat(r,s),i=e.map((u,h)=>(u-o[h]%u)%u),a=s.map((u,h)=>u+i[h]),l=e.map((u,h)=>[r[h],a[h]]),c=e.map((u,h)=>[0,i[h]]);return[l,c]}function _de(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),o=r.map((i,a)=>i-s[a]);return r.map((i,a)=>[s[a],o[a]])}const Bde=$e({pool_:zde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vde(t,e){const n=he(t,"x","prelu"),r=he(e,"alpha","prelu"),s={x:n,alpha:r};return Se.runKernel(tv,s)}const GS=$e({prelu_:Vde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t,e=null,n=!1){let r=he(t,"x","prod");r.dtype==="bool"&&(r=yt(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return Se.runKernel(nv,s,o)}const Wde=$e({prod_:jde});var pb={exports:{}},Ude=pb.exports,DN;function Hde(){return DN||(DN=1,function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var u=new s(l),h=c&&c.state,p=u.next;return p.int32=function(){return u.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&o(h,u),p.state=function(){return o(u,{})}),p}function a(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n.exports?n.exports=i:this.alea=i})(Ude,t)}(pb)),pb.exports}var mb={exports:{}},Gde=mb.exports,PN;function qde(){return PN||(PN=1,function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(p+m)/(1<<21);while(g===0);return g},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&o(u,c),h.state=function(){return o(c,{})}),h}n.exports?n.exports=i:this.xor128=i})(Gde,t)}(mb)),mb.exports}var gb={exports:{}},Kde=gb.exports,MN;function Xde(){return MN||(MN=1,function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(p+m)/(1<<21);while(g===0);return g},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&o(u,c),h.state=function(){return o(c,{})}),h}n.exports?n.exports=i:this.xorwow=i})(Kde,t)}(gb)),gb.exports}var yb={exports:{}},Yde=yb.exports,ON;function Zde(){return ON||(ON=1,function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,h=l.i,p,m;return p=u[h],p^=p>>>7,m=p^p<<24,p=u[h+1&7],m^=p^p>>>10,p=u[h+3&7],m^=p^p>>>3,p=u[h+4&7],m^=p^p<<7,p=u[h+7&7],p=p^p<<13,m^=p^p<<9,u[h]=m,l.i=h+1&7,m};function c(u,h){var p,m=[];if(h===(h|0))m[0]=h;else for(h=""+h,p=0;p<h.length;++p)m[p&7]=m[p&7]<<15^h.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&m[p]===0;++p);for(p==8?m[7]=-1:m[p],u.x=m,u.i=0,p=256;p>0;--p)u.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(p+m)/(1<<21);while(g===0);return g},h.int32=c.next,h.quick=h,u&&(u.x&&o(u,c),h.state=function(){return o(c,{})}),h}n.exports?n.exports=i:this.xorshift7=i})(Yde,t)}(yb)),yb.exports}var bb={exports:{}},Qde=bb.exports,FN;function Jde(){return FN||(FN=1,function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,h=l.X,p=l.i,m,g;return l.w=u=u+1640531527|0,g=h[p+34&127],m=h[p=p+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=h[p]=g^m,l.i=p,g+(u^u>>>16)|0};function c(u,h){var p,m,g,x,w,k=[],S=128;for(h===(h|0)?(m=h,h=null):(h=h+"\0",m=0,S=Math.max(S,h.length)),g=0,x=-32;x<S;++x)h&&(m^=h.charCodeAt((x+32)%h.length)),x===0&&(w=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,x>=0&&(w=w+1640531527|0,p=k[x&127]^=m+w,g=p==0?g+1:0);for(g>=128&&(k[(h&&h.length||0)&127]=-1),g=127,x=4*128;x>0;--x)m=k[g+34&127],p=k[g=g+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,k[g]=m^p;u.w=w,u.X=k,u.i=g}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(p+m)/(1<<21);while(g===0);return g},h.int32=c.next,h.quick=h,u&&(u.X&&o(u,c),h.state=function(){return o(c,{})}),h}n.exports?n.exports=i:this.xor4096=i})(Qde,t)}(bb)),bb.exports}var xb={exports:{}},ehe=xb.exports,zN;function the(){return zN||(zN=1,function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var h=l.b,p=l.c,m=l.d,g=l.a;return h=h<<25^h>>>7^p,p=p-m|0,m=m<<24^m>>>8^g,g=g-h|0,l.b=h=h<<20^h>>>12^p,l.c=p=p-m|0,l.d=m<<16^p>>>16^g,l.a=g-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(p+m)/(1<<21);while(g===0);return g},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&o(u,c),h.state=function(){return o(c,{})}),h}n.exports?n.exports=i:this.tychei=i})(ehe,t)}(xb)),xb.exports}var vb={exports:{}};const nhe={},rhe=Object.freeze(Object.defineProperty({__proto__:null,default:nhe},Symbol.toStringTag,{value:"Module"})),she=aj(rhe);var ohe=vb.exports,LN;function ihe(){return LN||(LN=1,function(t){(function(e,n,r){var s=256,o=6,i=52,a="random",l=r.pow(s,o),c=r.pow(2,i),u=c*2,h=s-1,p;function m(T,E,F){var V=[];E=E==!0?{entropy:!0}:E||{};var j=k(w(E.entropy?[T,$(n)]:T??S(),3),V),W=new g(V),R=function(){for(var O=W.g(o),U=l,K=0;O<c;)O=(O+K)*s,U*=s,K=W.g(1);for(;O>=u;)O/=2,U/=2,K>>>=1;return(O+K)/U};return R.int32=function(){return W.g(4)|0},R.quick=function(){return W.g(4)/4294967296},R.double=R,k($(W.S),n),(E.pass||F||function(O,U,K,G){return G&&(G.S&&x(G,W),O.state=function(){return x(W,{})}),K?(r[a]=O,U):O})(R,j,"global"in E?E.global:this==r,E.state)}function g(T){var E,F=T.length,V=this,j=0,W=V.i=V.j=0,R=V.S=[];for(F||(T=[F++]);j<s;)R[j]=j++;for(j=0;j<s;j++)R[j]=R[W=h&W+T[j%F]+(E=R[j])],R[W]=E;(V.g=function(O){for(var U,K=0,G=V.i,Y=V.j,Z=V.S;O--;)U=Z[G=h&G+1],K=K*s+Z[h&(Z[G]=Z[Y=h&Y+U])+(Z[Y]=U)];return V.i=G,V.j=Y,K})(s)}function x(T,E){return E.i=T.i,E.j=T.j,E.S=T.S.slice(),E}function w(T,E){var F=[],V=typeof T,j;if(E&&V=="object")for(j in T)try{F.push(w(T[j],E-1))}catch{}return F.length?F:V=="string"?T:T+"\0"}function k(T,E){for(var F=T+"",V,j=0;j<F.length;)E[h&j]=h&(V^=E[h&j]*19)+F.charCodeAt(j++);return $(E)}function S(){try{var T;return p&&(T=p.randomBytes)?T=T(s):(T=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(T)),$(T)}catch{var E=e.navigator,F=E&&E.plugins;return[+new Date,e,F,e.screen,$(n)]}}function $(T){return String.fromCharCode.apply(0,T)}if(k(r.random(),n),t.exports){t.exports=m;try{p=she}catch{}}else r["seed"+a]=m})(typeof self<"u"?self:ohe,[],Math)}(vb)),vb.exports}var n3,_N;function ahe(){if(_N)return n3;_N=1;var t=Hde(),e=qde(),n=Xde(),r=Zde(),s=Jde(),o=the(),i=ihe();return i.alea=t,i.xor128=e,i.xorwow=n,i.xorshift7=r,i.xor4096=s,i.tychei=o,n3=i,n3}var qS=ahe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cF{constructor(e,n,r,s,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=o||Math.random();this.random=qS.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,o,i;do s=2*this.random()-1,o=2*this.random()-1,i=s*s+o*o;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class lhe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=qS.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t,e=0,n=1,r,s){if(hc(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new cF(e,n,r,!1,s),i=on(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const uhe=$e({randomNormal_:che});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dhe(t,e=0,n=1,r="float32",s){hc(t);const o=on(t,r),i=new lhe(e,n,null,s);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Hg=$e({randomUniform_:dhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bm(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return Se.runKernel(bS,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hhe(t){const n={input:he(t,"input","real")};return Se.runKernel(xS,n)}const hx=$e({real_:hhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fhe(t){const n={x:he(t,"x","reciprocal")};return Se.runKernel(Tg,n)}const phe=$e({reciprocal_:fhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t){const n={x:he(t,"x","relu")};return Se.runKernel(Ig,n)}const Wd=$e({relu_:mhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ghe(t){const n={x:he(t,"x","relu6")};return Se.runKernel($g,n)}const uF=$e({relu6_:ghe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yhe(t,e){const r={x:he(t,"x","reverse")},s={dims:e};return Se.runKernel(iv,r,s)}const Dd=$e({reverse_:yhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t){const n={x:he(t,"x","round")};return Se.runKernel(Ng,n)}const dF=$e({round_:bhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xhe(t){const n={x:he(t,"x","rsqrt","float32")};return Se.runKernel(Eg,n)}const hF=$e({rsqrt_:xhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(t){const n={x:he(t,"x","selu")};return Se.runKernel(Rg,n)}const fF=$e({selu_:vhe});function whe(t,e,n,r,s,o=[1,1],i="NHWC"){const a=he(t,"x","separableConv2d"),l=he(e,"depthwiseFilter","separableConv2d"),c=he(n,"pointwiseFilter","separableConv2d");let u=a,h=!1;if(a.rank===3&&(h=!0,u=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");oe(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),oe(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),oe(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),oe(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),oe(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],m=l.shape[3];oe(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);const g=FS(u,l,r,s,i,o),w=Rd(g,c,1,"valid",i);return h?Ie(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const pF=$e({separableConv2d_:whe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t){const n={x:he(t,"x","sign")};return Se.runKernel(Pg,n)}const Che=$e({sign_:khe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function She(t){const n={x:he(t,"x","sin","float32")};return Se.runKernel(Ag,n)}const mF=$e({sin_:She});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function The(t){const n={x:he(t,"x","sinh")};return Se.runKernel(Dg,n)}const gF=$e({sinh_:The});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ihe(t,e,n){const r=he(t,"x","slice1d");return oe(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),nr(r,[e],[n])}const KS=$e({slice1d_:Ihe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(t,e,n){const r=he(t,"x","slice2d");return oe(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),nr(r,e,n)}const yF=$e({slice2d_:$he});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t,e,n){const r=he(t,"x","slice3d");return oe(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),nr(r,e,n)}const XS=$e({slice3d_:Nhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ehe(t,e,n){const r=he(t,"x","slice4d");return oe(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),nr(r,e,n)}const fx=$e({slice4d_:Ehe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rhe(t,e=-1){const n=he(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return Se.runKernel(hv,r,s)}const YS=$e({softmax_:Rhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(t){oe(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Se.runKernel(aS,e)}const bF=$e({fft_:Ahe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(t){oe(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Se.runKernel(uS,e)}const $k=$e({ifft_:Dhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Phe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Ie(t,[n,e]);r=$k(s)}else{const s=[n,2*(e-1)],o=Ie(hx(t),[n,e]),i=Ie(_S(t),[n,e]),a=Dd(nr(o,[0,1],[n,e-2]),1),l=xe(Dd(nr(i,[0,1],[n,e-2]),1),Pn(-1)),c=Ro([o,a],1),u=Ro([i,l],1),h=Ie(Rf(c,u),[s[0],s[1]]);r=$k(h)}if(r=hx(r),t.rank===3&&t.shape[0]!==0){const s=r,o=t.shape[0];r=Ie(r,[o,r.shape[0]/o,r.shape[1]]),s.dispose()}return r}const Mhe=$e({irfft_:Phe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ohe(t,e,n=0){const s={x:he(t,"x","split")},o={numOrSizeSplits:e,axis:n};return Se.runKernel(dv,s,o)}const pi=$e({split_:Ohe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fhe(t,e){oe(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const g=t.shape.map(w=>0),x=t.shape.map(w=>w);x[t.shape.length-1]=e,s=nr(t,g,x),n=e}else if(e!=null&&e>n){const g=t.shape.map(x=>x);g[t.shape.length-1]=e-n,s=Ro([t,ws(g)],t.shape.length-1),n=e}else s=t;const o=wn(s),i=Ie(Rf(s,o),[r,n]),a=bF(i),l=Math.floor(n/2)+1,c=hx(a),u=_S(a),h=pi(c,[l,n-l],c.shape.length-1),p=pi(u,[l,n-l],u.shape.length-1),m=s.shape.slice();return m[s.shape.length-1]=l,Ie(Rf(h[0],p[0]),m)}const zhe=$e({rfft_:Fhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lhe(t,e){let n=he(t,"a","squaredDifference"),r=he(e,"b","squaredDifference");[n,r]=_r(n,r),Yt(n.shape,r.shape);const s={a:n,b:r},o={};return Se.runKernel(zg,s,o)}const _he=$e({squaredDifference_:Lhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(t,e){const n=he(t,"x","squeeze","string_or_numeric");return Ie(n,mu(n.shape,e).newShape)}const Gg=$e({squeeze_:Bhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vhe(t,e=0){const n=zO(t,"tensors","stack","string_or_numeric");oe(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&oe(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return Se.runKernel(J2,r,s)}const lc=$e({stack_:Vhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jhe(t,e=0){const r={x:he(t,"x","step")},s={alpha:e};return Se.runKernel(jg,r,s)}const qg=$e({step_:jhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(t,e,n,r,s=0,o=0,i=0,a=0,l=0){const u={x:he(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return Se.runKernel(SS,u,h)}const Uhe=$e({stridedSlice_:Whe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(t){const n={x:he(t,"x","tan","float32")};return Se.runKernel(_g,n)}const Ghe=$e({tan_:Hhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(t,e){qM(t);const n=yv(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bv(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wb(t,e,n){if(qM(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=yv(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bv(t,e,r,n)}function xF(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(o+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(o+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(o+` update.rank != ${s+t.length-r}`);for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(o+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+r])throw new Error(o+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${t[i+s]})`)}function qhe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}xF(n,e,t)}function Ud(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,o=n.length;let i=1;for(let h=s;h<o;++h)i*=n[h];const a=s<1?1:s,l=Ve(e.shape)/a,c=[...Pt(n.slice(0,s)),1],u=Ve(n);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Khe(t,e=1,n=!0){const r=he(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const o={x:r},i={k:e,sorted:n},[a,l]=Se.runKernel(TS,o,i);return{values:a,indices:l}}const Xhe=$e({topk_:Khe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(t,e=0,n=1,r,s){if(hc(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new cF(e,n,r,!0,s),i=on(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const vF=$e({truncatedNormal_:Yhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zhe(t,e=0){const n=he(t,"x","unique","string_or_numeric");oe(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[o,i]=Se.runKernel($S,r,s);return{values:o,indices:i}}const Qhe=$e({unique_:Zhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t,e,n){const r=he(t,"x","unsortedSegmentSum"),s=he(e,"segmentIds","unsortedSegmentSum","int32");oe(Nf(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:s},i={numSegments:n};return Se.runKernel(pv,o,i)}const wF=$e({unsortedSegmentSum_:Jhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function efe(t,e=0){const n=he(t,"x","unstack","string_or_numeric");oe(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return Se.runKernel(fv,r,s)}const Pd=$e({unstack_:efe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tfe(t,e=!0,n,r){return Se.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kF(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=on(t,"int32"),s=on([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const i=r.indexToLoc(n[o]),a=o*t.length;s.values.set(i,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nfe(t,e,n){const r=he(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),oe(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{oe(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:e};return r.dtype==="complex64"?De(()=>{let i=hx(r),a=_S(r);return i=Se.runKernel(lf,{x:i},o),a=Se.runKernel(lf,{x:a},o),n&&(a=Lr(a)),Rf(i,a)}):Se.runKernel(lf,s,o)}const vn=$e({transpose_:nfe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfe(t,e){if(e==null)return t.shape.slice();if(Mn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(t,e,n,r){const s=he(t,"x","dropout");if(oe(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),oe(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof ts?s.clone():s;const o=rfe(s,n),i=1-e,a=zt(Sv(st(Hg(o,0,1,"float32",r),i)),i);return xe(s,a)}const ofe=$e({dropout_:sfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(t,e,n,r,s,o="NHWC",i){let a=t;t.rank===3&&(a=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),oe(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),oe(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),oe(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=o==="NHWC"?a.shape[3]:a.shape[1],u=o==="NHWC"?l.shape[3]:l.shape[1];oe(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),oe(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Po("conv2dDerFilter",s,i);const h={x:a,dy:l},p={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,filterShape:n};return Se.runKernel(YC,h,p)}const ZS=$e({conv2DBackpropFilter_:ife});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QS(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return xe(t,qg(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function JS(t,e){let n=e;const r=is(t.shape,e.shape);return r.length>0&&(n=Ft(n,r)),Ie(n,t.shape)}function e6(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Wd(t);if(e==="elu")return kv(t);if(e==="relu6")return uF(t);if(e==="prelu")return GS(t,n);if(e==="leakyrelu")return BS(t,r);if(e==="sigmoid")return Jf(t);throw new Error(`Unknown fused activation ${e}.`)}const t6=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",t6(Se.state.gradientDepth,l)===!1){oe(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let F=Rd(t,e,n,r,s,o,i);return a!=null&&(F=st(F,a)),e6(F,l,c,u)}const h=he(t,"x","conv2d","float32"),p=he(e,"filter","conv2d","float32");let m=h,g=!1;h.rank===3&&(g=!0,m=Ie(h,[1,h.shape[0],h.shape[1],h.shape[2]])),oe(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),oe(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Po("fused conv2d",r,i);const x=s==="NHWC"?m.shape[3]:m.shape[1];oe(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),oe(Js(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const w=Os(m.shape,p.shape,n,o,r,i);let k;a!=null&&(k=he(a,"bias","fused conv2d"),[k]=_r(k,h),s==="NHWC"?Yt(w.outShape,k.shape):(oe(k.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${k.shape.length}.`),oe(k.shape.length===0||k.shape[0]===w.outChannels||k.shape[0]===1,()=>`Error in fused conv2d: bias shape (${k.shape}) is not compatible with the number of output channels (${w.outChannels})`)));let S;if(c!=null){const F=c.shape;if(oe(F.length<=1||F.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${F.length}.`),F.length===1)oe(F[0]===1||F[0]===w.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the number of output channels (${w.outChannels}).`);else if(F.length===3)try{Yt(F,w.outShape)}catch{const j=`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the output shape of the conv2d (${w.outShape}).`;throw Error(j)}S=he(c,"prelu weights","fused conv2d")}const $=(F,V)=>{oe(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[j,W,R,O]=V,U=QS(F,R,l);oe(Nd(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const K=MS(W.shape,U,j,n,r),G=ZS(W,U,j.shape,n,r),Y=[K,G];if(O!=null){const Z=JS(O,U);Y.push(Z)}return Y},T={x:m,filter:p,bias:k,preluActivationWeights:S},E={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?Df((V,j,W)=>{let R=Se.runKernel(ix,T,E);return W([j,V,R]),g&&(R=Ie(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:$}})(m,p):Df((V,j,W,R)=>{let O=Se.runKernel(ix,T,E);return R([j,V,O,W]),g&&(O=Ie(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:$}})(m,p,k)}const lfe=$e({fusedConv2d_:afe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfe(t,e,n,r,s,o=[1,1],i){let a=t;t.rank===3&&(a=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:i,dilations:o,filterShape:n};return Se.runKernel(rS,c,u)}const ufe=$e({depthwiseConv2dNativeBackpropFilter_:cfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dfe(t,e,n,r,s,o=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:i,dilations:o,inputShape:t},h=Se.runKernel(sS,c,u);return l?Ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const hfe=$e({depthwiseConv2dNativeBackpropInput_:dfe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ffe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:o="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(t6(Se.state.gradientDepth,o)===!1){let O=Dn(t,e,n,r);return s!=null&&(O=st(O,s)),e6(O,o,i,a)}let l=he(t,"a","fused matMul"),c=he(e,"b","fused matMul");[l,c]=_r(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],g=l.shape.slice(0,-2),x=c.shape.slice(0,-2),w=Ve(g),k=Ve(x);oe(u===h,()=>`Error in fused matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const $=Yt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),T=n?Ie(l,[w,u,p]):Ie(l,[w,p,u]),E=r?Ie(c,[k,m,h]):Ie(c,[k,h,m]);let F;s!=null&&(F=he(s,"bias","fused matMul"),[F]=_r(F,l),Yt($,F.shape));let V;i!=null&&(V=he(i,"prelu weights","fused matMul"));const j=(O,U)=>{const[K,G,Y,Z]=U,ne=QS(Ie(O,Y.shape),Y,o);let J,re;if(!n&&!r?(J=Dn(ne,G,!1,!0),re=Dn(K,ne,!0,!1)):!n&&r?(J=Dn(ne,G,!1,!1),re=Dn(ne,K,!0,!1)):n&&!r?(J=Dn(G,ne,!1,!0),re=Dn(K,ne,!1,!1)):(J=Dn(G,ne,!0,!0),re=Dn(ne,K,!0,!0)),s!=null){const se=JS(Z,ne);return[J,re,se]}else return[J,re]},W={a:T,b:E,bias:F,preluActivationWeights:V},R={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:a};return s==null?Df((U,K,G)=>{const Y=Se.runKernel(ox,W,R);return G([U,K,Y]),{value:Ie(Y,$),gradFunc:j}})(T,E):Df((U,K,G,Y)=>{const Z=Se.runKernel(ox,W,R);return Y([U,K,Z,G]),{value:Ie(Z,$),gradFunc:j}})(T,E,F)}const BN=$e({fusedMatMul_:ffe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t,e,n,r,s="bilinear",o=0){const i=he(t,"image","cropAndResize"),a=he(e,"boxes","cropAndResize","float32"),l=he(n,"boxInd","cropAndResize","int32"),c=a.shape[0];oe(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),oe(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),oe(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),oe(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),oe(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),oe(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:i,boxes:a,boxInd:l},h={method:s,extrapolationValue:o,cropSize:r};return Se.runKernel(eS,u,h)}const mfe=$e({cropAndResize_:pfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gfe(t){const e=he(t,"image","flipLeftRight","float32");oe(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Se.runKernel(cS,n,{})}const yfe=$e({flipLeftRight_:gfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bfe(t){const e=he(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];oe(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),oe(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,ka(e,s)}const xfe=$e({grayscaleToRGB_:bfe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vfe(t){const e=he(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];oe(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),oe(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,o=yt(e,"float32"),i=Eo([.2989,.587,.114]);let a;switch(e.rank){case 2:a=v0("ij,j->i",o,i);break;case 3:a=v0("ijk,k->ij",o,i);break;case 4:a=v0("ijkl,l->ijk",o,i);break;case 5:a=v0("ijklm,m->ijkl",o,i);break;case 6:a=v0("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return a=$o(a,-1),yt(a,s)}const wfe=$e({rgbToGrayscale_:vfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kfe(t,e,n=0,r=.5){const s=he(t,"image","rotateWithOffset","float32");oe(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const o={image:s},i={radians:e,fillValue:n,center:r};return Se.runKernel(NS,o,i)}const Cfe=$e({rotateWithOffset_:kfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tp(t,e,n,r,s,o){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),o==null&&(o=0);const i=t.shape[0];return n=Math.min(n,i),oe(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),oe(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),oe(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),oe(e.rank===1,()=>"scores must be a 1D tensor"),oe(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),oe(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sfe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=he(t,"boxes","nonMaxSuppression","float32"),i=he(e,"scores","nonMaxSuppression","float32"),a=tp(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return Se.runKernel(mS,{boxes:o,scores:i},l)}const Tfe=$e({nonMaxSuppression_:Sfe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(t,e,n){const r=$fe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function $fe(t,e,n){return Nfe(t,e,n)}function Nfe(t,e,n){let r=0,s=t.length,o=0,i=!1;for(;r<s;){o=r+(s-r>>>1);const a=n(e,t[o]);a>0?r=o+1:(s=o,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6(t,e,n,r,s){return o6(t,e,n,r,s,0)}function r6(t,e,n,r,s,o){return o6(t,e,n,r,s,0,!1,o,!0)}function s6(t,e,n,r,s,o){return o6(t,e,n,r,s,o,!0)}function o6(t,e,n,r,s,o,i=!1,a=!1,l=!1){const c=[];for(let w=0;w<e.length;w++)e[w]>s&&c.push({score:e[w],boxIndex:w,suppressBeginIndex:0});c.sort(VN);const u=o>0?-.5/o:0,h=[],p=[];for(;h.length<n&&c.length>0;){const w=c.pop(),{score:k,boxIndex:S,suppressBeginIndex:$}=w;if(k<s)break;let T=!1;for(let E=h.length-1;E>=$;--E){const F=Efe(t,S,h[E]);if(F>=r){T=!0;break}if(w.score=w.score*Rfe(r,u,F),w.score<=s)break}w.suppressBeginIndex=h.length,T||(w.score===k?(h.push(S),p.push(w.score)):w.score>s&&Ife(c,w,VN))}const m=h.length,g=n-m;a&&g>0&&(h.push(...new Array(g).fill(0)),p.push(...new Array(g).fill(0)));const x={selectedIndices:h};return i&&(x.selectedScores=p),l&&(x.validOutputs=m),x}function Efe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),p=Math.max(s[1],s[3]),m=(a-o)*(l-i),g=(h-c)*(p-u);if(m<=0||g<=0)return 0;const x=Math.max(o,c),w=Math.max(i,u),k=Math.min(a,h),S=Math.min(l,p),$=Math.max(k-x,0)*Math.max(S-w,0);return $/(m+g-$)}function Rfe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function VN(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Afe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=he(t,"boxes","nonMaxSuppressionAsync"),i=he(e,"scores","nonMaxSuppressionAsync"),a=tp(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([o.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:h}=n6(c,u,n,r,s);return o!==t&&o.dispose(),i!==e&&i.dispose(),Eo(h,"int32")}const Dfe=Afe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pfe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=he(t,"boxes","nonMaxSuppression"),a=he(e,"scores","nonMaxSuppression"),l=tp(i,a,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c={boxes:i,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o},h=Se.runKernel(yS,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}const Mfe=$e({nonMaxSuppressionWithScore_:Pfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ofe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=he(t,"boxes","nonMaxSuppressionAsync"),a=he(e,"scores","nonMaxSuppressionAsync"),l=tp(i,a,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c=await Promise.all([i.data(),a.data()]),u=c[0],h=c[1],{selectedIndices:p,selectedScores:m}=s6(u,h,n,r,s,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Eo(p,"int32"),selectedScores:Eo(m)}}const Ffe=Ofe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zfe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=he(t,"boxes","nonMaxSuppression"),a=he(e,"scores","nonMaxSuppression"),l=tp(i,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,p={boxes:i,scores:a},m={maxOutputSize:c,iouThreshold:u,scoreThreshold:h,padToMaxOutputSize:o},g=Se.runKernel(gS,p,m);return{selectedIndices:g[0],validOutputs:g[1]}}const Lfe=$e({nonMaxSuppressionPadded_:zfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _fe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=he(t,"boxes","nonMaxSuppressionAsync"),a=he(e,"scores","nonMaxSuppressionAsync"),l=tp(i,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[p,m]=await Promise.all([i.data(),a.data()]),{selectedIndices:g,validOutputs:x}=r6(p,m,c,u,h,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Eo(g,"int32"),validOutputs:Pn(x,"int32")}}const Bfe=_fe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfe(t,e,n=!1,r=!1){const s=he(t,"images","resizeBilinear");oe(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),oe(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),oe(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=Ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=Se.runKernel(ov,a,l);return i?Ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const CF=$e({resizeBilinear_:Vfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(t,e,n=!1,r=!1){const s=he(t,"images","resizeNearestNeighbor");oe(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),oe(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),oe(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),oe(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=Ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=Se.runKernel(sv,a,l);return i?Ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const SF=$e({resizeNearestNeighbor_:jfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wfe(t,e="binary",n=!1,r=.5){const s=he(t,"image","threshold"),o=.2989,i=.587,a=.114,l=s.shape[0]*s.shape[1];let c=xe(Eo([r]),255),u,h,p,m;if(oe(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),oe(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),oe(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),oe(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,h,p]=pi(s,[1,1,1],-1);const w=xe(u,o),k=xe(h,i),S=xe(p,a);m=st(st(w,k),S)}else m=t;if(e==="otsu"){const w=Vce(yt(dF(m),"int32"),LO([]),256);c=Ufe(w,l)}const g=n?ep(m,c):xi(m,c);return yt(xe(g,255),"int32")}function Ufe(t,e){let n=Eo([-1]),r=Eo([0]),s=Eo([0]),o,i,a,l,c,u;for(let h=0;h<t.size-1;h++){o=nr(t,0,h+1),i=nr(t,h+1),c=zt(Ft(o),e),u=zt(Ft(i),e);const p=Ft(xe(o,bm(0,o.size)));a=zt(p,Ft(o));const m=wv(i.shape,o.size),g=st(bm(0,i.size),m),x=xe(i,g);l=zt(Ft(x),Ft(i));const w=Bt(a,l),k=Bt(a,l),S=xe(c,u);s=xe(xe(S,w),k);const $=xi(s,r);r=bo($,s,r),n=bo($,Eo([h]),n)}return n}const Hfe=$e({threshold_:Wfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfe(t,e,n="nearest",r="constant",s=0,o){const i=he(t,"image","transform","float32"),a=he(e,"transforms","transform","float32");oe(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),oe(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),oe(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const l={image:i,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:o};return Se.runKernel(IS,l,c)}const qfe=$e({transform_:Gfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kfe(t,e,n){const r=he(t,"a","bandPart");oe(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[o,i]=r.shape.slice(-2);let a,l;typeof e=="number"?(oe(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),oe(e<=o,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`),a=he(e<0?o:e,"numLower","bandPart")):(oe(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=bo(ux(e,0),o,ym(e,o))),typeof n=="number"?(oe(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),oe(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=he(n<0?i:n,"numUpper","bandPart")):(oe(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=bo(ux(n,0),i,ym(n,i)));const c=Ie(bm(0,o,1,"int32"),[-1,1]),u=bm(0,i,1,"int32"),h=Bt(c,u),p=ac(ep(h,a),jd(h,Lr(l))),m=ws([o,i],r.dtype);return Ie(lc(Pd(Ie(r,[-1,o,i])).map(g=>bo(p,g,m))),s)}const Xfe=$e({bandPart_:Kfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yfe(t){let e;if(Array.isArray(t)){e=!1,oe(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let o=1;o<t.length;++o)oe(t[o].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${s})`)}else e=!0,t=pi(t,t.shape[0],0).map(s=>Gg(s,[0]));oe(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(Se.tidy(()=>{let o=r[s];if(s>0)for(let i=0;i<s;++i){const a=xe(Ft(xe(n[i],o)),n[i]);o=Bt(o,a)}return zt(o,Cv(o,"euclidean"))}));return e?lc(n,0):n}const Zfe=$e({gramSchmidt_:Yfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qfe(t,e=!1){if(oe(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return jN(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Pd(Ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],o=[];r.forEach(l=>{const[c,u]=jN(l,e);s.push(c),o.push(u)});const i=Ie(lc(s,0),t.shape),a=Ie(lc(o,0),t.shape);return[i,a]}}function jN(t,e=!1){return Se.tidy(()=>{oe(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=rF(n),o=xd(t);const i=wb([[1]],[1,1]);let a=xd(i);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=o,h=a,p=s;[a,o,s]=Se.tidy(()=>{const m=nr(o,[c,c],[n-c,1]),g=Cv(m),x=nr(o,[c,c],[1,1]),w=bo(xi(x,0),wb([[-1]]),wb([[1]])),k=Bt(x,xe(w,g)),S=zt(m,k);S.shape[0]===1?a=xd(i):a=Ro([i,nr(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const $=Lr(zt(Dn(w,k),g)),T=nr(o,[c,0],[n-c,r]),E=xe($,a),F=vn(a);if(c===0)o=Bt(T,Dn(E,Dn(F,T)));else{const W=Bt(T,Dn(E,Dn(F,T)));o=Ro([nr(o,[0,0],[c,r]),W],0)}const V=vn(E),j=nr(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=Bt(j,Dn(Dn(j,a),V));else{const W=Bt(j,Dn(Dn(j,a),V));s=Ro([nr(s,[0,0],[n,c]),W],1)}return[a,o,s]}),hn([u,h,p])}return!e&&n>r&&(s=nr(s,[0,0],[n,r]),o=nr(o,[0,0],[r,r])),[s,o]})}const Jfe=$e({qr_:Qfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kl={flipLeftRight:yfe,grayscaleToRGB:xfe,resizeNearestNeighbor:SF,resizeBilinear:CF,rgbToGrayscale:wfe,rotateWithOffset:Cfe,cropAndResize:mfe,nonMaxSuppression:Tfe,nonMaxSuppressionAsync:Dfe,nonMaxSuppressionWithScore:Mfe,nonMaxSuppressionWithScoreAsync:Ffe,nonMaxSuppressionPadded:Lfe,nonMaxSuppressionPaddedAsync:Bfe,threshold:Hfe,transform:qfe},epe={bandPart:Xfe,gramSchmidt:Zfe,qr:Jfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tpe=new Map,npe=new Map;class np{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ji{constructor(){this.classNameMap={}}static getMap(){return ji.instance==null&&(ji.instance=new ji),ji.instance}static register(e){ji.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Je(t,e,n){oe(t.className!=null,()=>"Class being registered does not have the static className property defined."),oe(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),oe(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return ji.register(t),tpe.set(s,t),npe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wu extends np{minimize(e,n=!1,r){const{value:s,grads:o}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(i)}else this.applyGradients(o);return hn(o),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return lde(e,n)}dispose(){this.iterations_!=null&&hn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Pn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(wu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TF extends wu{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Se.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:De(()=>wn(o).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:De(()=>wn(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;De(()=>{const u=st(xe(l,this.rho),xe(cr(a),1-this.rho)),h=xe(zt(Qs(st(c,this.epsilon)),Qs(st(l,this.epsilon))),a),p=st(xe(c,this.rho),xe(cr(h),1-this.rho));l.assign(u),c.assign(p);const m=st(xe(h,-this.learningRate),o);o.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(hn(this.accumulatedGrads.map(e=>e.variable)),hn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IF extends wu{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Se.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:De(()=>wv(o.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[s].variable;De(()=>{const l=st(a,cr(i));a.assign(l);const c=st(xe(zt(i,Qs(st(l,Se.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&hn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $F extends wu{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],De(()=>{this.accBeta1=Pn(n).variable(),this.accBeta2=Pn(r).variable()}),s==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=Bt(1,this.accBeta1),s=Bt(1,this.accBeta2);n.forEach((o,i)=>{const a=Se.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:De(()=>wn(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${o}/v`,variable:De(()=>wn(a).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[o];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,h=this.accumulatedSecondMoment[i].variable,p=st(xe(u,this.beta1),xe(c,1-this.beta1)),m=st(xe(h,this.beta2),xe(cr(c),1-this.beta2)),g=zt(p,r),x=zt(m,s);u.assign(p),h.assign(m);const w=st(xe(zt(g,st(Qs(x),this.epsilon)),-this.learningRate),a);a.assign(w)}),this.accBeta1.assign(xe(this.accBeta1,this.beta1)),this.accBeta2.assign(xe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&hn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&hn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),De(()=>{this.accBeta1.assign(Ad(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ad(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NF extends wu{static get className(){return"Adamax"}constructor(e,n,r,s=null,o=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],De(()=>{this.iteration=Pn(0).variable(),this.accBeta1=Pn(n).variable()}),s==null&&(this.epsilon=Se.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);De(()=>{const r=Bt(1,this.accBeta1),s=zt(-this.learningRate,st(xe(this.iteration,this.decay),1));n.forEach((o,i)=>{const a=Se.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:wn(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${o}/v`,variable:wn(a).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[o];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,h=this.accumulatedWeightedInfNorm[i].variable,p=st(xe(u,this.beta1),xe(c,1-this.beta1)),m=xe(h,this.beta2),g=fo(c),x=xu(m,g);u.assign(p),h.assign(x);const w=st(xe(zt(s,r),zt(p,st(x,this.epsilon))),a);a.assign(w)}),this.iteration.assign(st(this.iteration,1)),this.accBeta1.assign(xe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&hn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&hn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i6 extends wu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const i=Se.registeredVariables[r];De(()=>{const a=st(xe(this.c,o),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=sl(Pn(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EF extends i6{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Pn(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Se.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:De(()=>wn(o).variable(!1))});const i=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&De(()=>{let l;const c=st(xe(this.m,i),a);this.useNesterov?l=st(xe(this.c,st(a,xe(c,this.m))),o):l=st(xe(this.c,c),o),i.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&hn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RF extends wu{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,o=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,s==null&&(this.epsilon=Se.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Se.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:De(()=>wn(o).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:De(()=>wn(o).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:De(()=>wn(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;De(()=>{const u=st(xe(l,this.decay),xe(cr(a),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,p=st(xe(h,this.decay),xe(a,1-this.decay)),m=zt(xe(a,this.learningRate),Qs(Bt(u,st(cr(p),this.epsilon)))),g=st(xe(c,this.momentum),m);l.assign(u),h.assign(p),c.assign(g);const x=Bt(o,g);o.assign(x)}else{const h=st(xe(l,this.decay),xe(cr(a),1-this.decay)),p=st(xe(c,this.momentum),zt(xe(a,this.learningRate),Qs(st(h,this.epsilon))));l.assign(h),c.assign(p);const m=Bt(o,p);o.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&hn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&hn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&hn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rpe=[TF,IF,$F,NF,EF,RF,i6];function spe(){for(const t of rpe)Je(t)}function a6(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Ve(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,o=s[s.length-1];let i=1;for(let h=0;h<s.length-1;++h)i*=s[h];const a=t.shape,l=s.slice();l.pop();let c=1;for(let h=o;h<n;++h)c*=a[h],l.push(a[h]);const u=[...Pt(t.shape).map(h=>h/c),1].slice(0,o);return[l,i,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nk=-2,ope=-1;function l6(t,e,n){const r=t.shape.length;oe(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),oe(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)oe(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function ipe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function c6(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function AF(t,e,n,r){const s=[...t];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)o===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function DF(t,e,n){return n<=t?n:n-(e-1)}function PF(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ape(t,e,n,r,s,o,i,a,l){const c=t.length;let u=new Array(c),h=new Array(c),p=new Array(c);if(e.length&&n>0){const m=e[0],g=n+1;u=MF(i,m,g,r,t),h=OF(a,m,g,s,t),p=AF(o,m,g,t)}else for(let m=0;m<c;m++)u[m]=zF(i,r,o,t,m,l),h[m]=LF(a,s,o,t,m,l),p[m]=FF(o,m,l);return{begin:u,end:h,strides:p}}function MF(t,e,n,r,s){const o=[...s],i=PF(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=0;else{const l=DF(e,n,a);let c=r[l];t&1<<l&&(c=0),o[a]=c}return o}function OF(t,e,n,r,s){const o=[...s],i=PF(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const l=DF(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[a]=c}for(let a=0;a<o.length;a++){const l=s[a];o[a]<0&&(o[a]+=l),o[a]=Sd(0,o[a],s[a])}return o}function FF(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function zF(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=Sd(0,i,l-1),i}function LF(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),a>0?i=Sd(0,i,l):i=Sd(-1,i,l-1),i}function u6(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function d6(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Tv(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{oe(i!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(s).fill(-1):typeof n=="number"?o=[n,...new Array(s-1).fill(-1)]:n.length<s?o=n.concat(new Array(s-n.length).fill(-1)):o=n,o=o.map((i,a)=>i>=0?i:(oe(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,o]}function h6(t,e,n,r,s,o,i,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let $=0;$<h.dims;$++)u&&1<<$&a&&h.numAddAxisAfterEllipsis++,1<<$&i&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};lpe(h,p);let m=!0,g=!0,x=!0;const w=[],k=[];for(let $=0;$<t.length;++$){if(p.strides[$]===0)throw Error(`strides[${$}] must be non-zero`);const T=!!(p.shrinkAxisMask&1<<$),E=t[$];if(E===-1){w.push(T?1:-1);continue}const F=[p.beginMask&1<<$,p.endMask&1<<$],V=[p.strides[$]>0?0:-1,p.strides[$]>0?E:E-1];if(T&&p.strides[$]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[$]===1;const j=!!(p.beginMask&1<<$&&p.endMask&1<<$);if(p.beginValid&&p.endValid){if(T){const U=p.begin[$]<0?E+p.begin[$]:p.begin[$];if(p.begin[$]=U,p.end[$]=p.begin[$]+1,U<0||U>=E)throw Error(`slice index ${p.begin[$]} of dimension ${$} out of bounds.`)}else p.begin[$]=WN(p.begin[$],0,p.strides[$],E,F,V),p.end[$]=WN(p.end[$],1,p.strides[$],E,F,V);const O=p.strides[$]===1&&p.begin[$]===0&&p.end[$]===E;m=m&&O,g=g&&($===0&&p.strides[$]===1||O)}else m=m&&p.strides[$]===1&&j,g=g&&($===0&&p.strides[$]===1||j);let W,R=!1;if(p.beginValid&&p.endValid?(W=p.end[$]-p.begin[$],R=!0):T?(W=1,R=!0):j&&E>=0&&(p.strides[$]<0?W=-E:W=E,R=!0),R){let O;W===0||W<0!=p.strides[$]<0?O=0:O=Math.trunc(W/p.strides[$])+(W%p.strides[$]!==0?1:0),w.push(O)}else w.push(-1)}for(let $=0;$<p.finalShapeGatherIndices.length;++$){const T=p.finalShapeGatherIndices[$];T>=0?k.push(w[T]):T===Nk&&k.push(1)}return{finalShapeSparse:k.filter(($,T)=>p.finalShapeGatherIndices[T]!==Nk),finalShape:k,isIdentity:m,sliceDim0:g,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function lpe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Nk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(ope),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function WN(t,e,n,r,s,o){if(s[e])return n>0?o[e]:o[e+1&1];{const i=t<0?r+t:t;return i<o[0]?o[0]:i>o[1]?o[1]:i}}const cpe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:l6,computeFlatOffset:d6,computeOutShape:c6,getNormalizedAxes:ape,isSliceContinous:u6,maskToAxes:ipe,parseSliceParams:Tv,sliceInfo:h6,startForAxis:zF,startIndicesWithElidedDims:MF,stopForAxis:LF,stopIndicesWithElidedDims:OF,stridesForAxis:FF,stridesWithElidedDims:AF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class upe{static sgd(e){return new i6(e)}static momentum(e,n,r=!1){return new EF(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,o=!1){return new RF(e,n,r,s,o)}static adam(e=.001,n=.9,r=.999,s=null){return new $F(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new TF(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,o=0){return new NF(e,n,r,s,o)}static adagrad(e,n=.1){return new IF(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vh=upe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dpe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function _F(){return new Promise(t=>dpe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6(t,e){const n=t[0].length;t.forEach((s,o)=>{oe(s.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),oe(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,o)=>{for(let i=0;i<n;i++)oe(i===e||s[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${o}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function ol(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var va;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(va||(va={}));function BF(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const o=n[s],i=r[r.length-n.length+s],a=r[i];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${o} but shape[${s+t}] = ${a}`)}else r[i]=o}return r}function VF(t){const e={FIRST_DIM_SIZE:va.FIRST_DIM_SIZE,VALUE_ROWIDS:va.VALUE_ROWIDS,ROW_LENGTHS:va.ROW_LENGTHS,ROW_SPLITS:va.ROW_SPLITS,ROW_LIMITS:va.ROW_LIMITS,ROW_STARTS:va.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function jF(t){return t.length===0?0:t[0]===va.FIRST_DIM_SIZE?t.length-1:t.length}function WF(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const o=t[s],i=e[s+1];if(o>=0&&i>=0&&o!==1&&o!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${o} but ragged tensor input.flatValues.shape[${s-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6=30;function Iv(t){return t<=p6?t:hk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kg(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const o=e.length;for(let i=0;i<o;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(o+1))}return s}function Xg(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],o=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?o.push(i):s.push(i);r.push(...s),r.push(0),r.push(...o)}return r}function Yg(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?s.push(e[o-1]*t[o]):s.push(t[o]/e[o-1]):s.push(t[o]);return s}function g6(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function y6(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $v=1.7580993408473768,Nv=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6=.3275911,x6=.254829592,v6=-.284496736,w6=1.421413741,k6=-1.453152027,C6=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function UF(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function HF(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function GF(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function S6(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function qF(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function KF(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const o=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(o),r[s]=Math.sin(o)}return{real:n,imag:r}}function XF(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),o=Math.sin(r);return{real:s,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3="->",hpe=/->/g,UN=",",HN="...";function T6(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(hpe,"").length)/r3.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${r3}").`);const[r,s]=t.split(r3);oe(r.indexOf(HN)===-1,()=>`The ellipsis notation ("${HN}") is not supported yet.`);const o=r.split(UN),i=o.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let p=0;p<s.length;++p){const m=s[p];if(!o.some(g=>g.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){const m=r[p];a.indexOf(m)===-1&&m!==UN&&a.push(m)}const l=new Array(o.length);for(let p=0;p<i;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let m=0;m<o[p].length;++m)l[p].push(a.indexOf(o[p][m]))}const c=a.length,u=s.length,h=[];for(let p=u;p<c;++p)h.push(p);return{allDims:a,summedDims:h,idDims:l}}function I6(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function $6(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const o=n[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=o[i]:oe(r[e[s][i]]===o[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(o)}, but got dimension ${o[i]}`)}}function N6(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)r.push([]);const o=[];for(let i=0;i<n.length;++i){const a=n[i],l=fpe(e,a);for(const c of l)o.indexOf(c)===-1&&(r[i].push(c),o.push(c))}return{path:n,steps:r}}function E6(t){return t.every((e,n)=>e===n)}function fpe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function R6(t,e,n=0){let r=[];if(typeof e=="number")oe(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);oe(s<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(o!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[o]=t.shape[n]-i}oe(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YF(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function ZF(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function QF(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function ez(t,e){return`size ${t} must be non-negative, not ${e}`}function tz(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function nz(t,e){const n=Ve(t),r=Ve(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function rz(t,e){const n=Ve(t),r=Ve(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ek(){return"segment ids must be >= 0"}function sz(){return"segment ids are not increasing"}function oz(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function iz(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(t,e){let n=!1,r;for(t<=p6?(r=t,n=!0):r=hk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=hk(t,r+1);return r}function lz(t,e,n){const r=[],s=t.length;for(let o=0;o<s;o++)o!==e?r.push(t[o]):r.push(n);return r}function A6(t,e,n,r){const s=e.shape.length,o=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const i=t.shape[n],a=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)a.push(t.shape[h]),c*=t.shape[h];for(let h=r;h<s;h++)a.push(e.shape[h]);for(let h=n+1;h<o;h++)a.push(t.shape[h]),u*=t.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:a}}const ppe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:A6,computeOutShape:lz,segOpComputeOptimalWindowSize:az},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uc(t){try{return t.map(e=>iu(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function cz(t){return t.map(e=>Zc(e))}const mpe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:x6,ERF_A2:v6,ERF_A3:w6,ERF_A4:k6,ERF_A5:C6,ERF_P:b6,PARALLELIZE_THRESHOLD:p6,get RowPartitionType(){return va},SELU_SCALE:Nv,SELU_SCALEALPHA:$v,applyActivation:e6,assertAndGetBroadcastShape:Yt,assertAxesAreInnerMostDims:Fs,assertParamsConsistent:f6,assignToTypedArray:qF,axesAreInnerMostDims:zS,calculateShapes:Ud,checkEinsumDimSizes:$6,checkPadOnDimRoundingMode:Po,combineLocations:tF,combineRaggedTensorToTensorShapes:BF,complexWithEvenIndex:HF,complexWithOddIndex:GF,computeConv2DInfo:Os,computeConv3DInfo:yu,computeDefaultPad:AS,computeDilation2DInfo:Wg,computeOptimalWindowSize:Iv,computeOutAndReduceShapes:Ts,computeOutShape:ol,computePool2DInfo:Qi,computePool3DInfo:fc,convertConv2DDataFormat:pc,decodeEinsumEquation:T6,eitherStridesOrDilationsAreOne:Js,expandShapeToKeepDim:Yr,exponent:XF,exponents:KF,fromStringArrayToUint8:cz,fromUint8ToStringArray:uc,getAxesPermutation:Cr,getBroadcastDims:Af,getComplexWithIndex:S6,getEinsumComputePath:N6,getEinsumPermutation:I6,getFusedBiasGradient:JS,getFusedDyActivation:QS,getImageCenter:m6,getInnerMostAxes:Br,getPermuted:Xg,getRaggedRank:jF,getReductionAxes:is,getReshaped:Kg,getReshapedPermuted:Yg,getRowPartitionTypesHelper:VF,getSliceBeginCoords:g6,getSliceSize:y6,getSparseFillEmptyRowsIndicesDenseShapeMismatch:YF,getSparseFillEmptyRowsNegativeIndexErrorMessage:ZF,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:QF,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:tz,getSparseReshapeInputOutputMismatchErrorMessage:rz,getSparseReshapeInputOutputMultipleErrorMessage:nz,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:JF,getSparseReshapeNegativeOutputDimErrorMessage:ez,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:iz,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Ek,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:sz,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:oz,getUndoAxesPermutation:bu,isIdentityPermutation:E6,log:Zae,mergeRealAndImagArrays:cc,prepareAndValidate:a6,prepareSplitSize:R6,segment_util:ppe,shouldFuse:t6,slice_util:cpe,splitRealAndImagArrays:UF,stridesOrDilationsArePositive:Ed,tupleValuesAreOne:Nd,upcastType:qo,validateDefaultValueShape:WF,validateInput:qhe,validateUpdateShape:xF,warn:ui},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */spe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uz={kernelName:g2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,qg(yt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gpe={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=cr(yt(n,"float32")),s=Qs(Bt(Pn(1),r));return Lr(zt(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ype={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Qs(Bt(cr(yt(n,"float32")),1));return zt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bpe={kernelName:Zf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{let a=t;const l=is(n.shape,s);return l.length>0&&(a=Ft(a,l)),Ie(a,n.shape)},b:()=>{let a=t;const l=is(r.shape,s);return l.length>0&&(a=Ft(a,l)),Ie(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xpe={kernelName:jC,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vpe={kernelName:y2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>wn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpe={kernelName:b2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>wn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe={kernelName:Ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,Qs(Bt(Pn(1),cr(yt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cpe={kernelName:Zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Qs(st(Pn(1),cr(yt(n,"float32"))));return zt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe={kernelName:eg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{const a=st(cr(n),cr(r));let l=xe(t,zt(r,a));const c=is(n.shape,s);return c.length>0&&(l=Ft(l,c)),Ie(l,n.shape)},b:()=>{const a=st(cr(n),cr(r));let l=Lr(xe(t,zt(n,a)));const c=is(r.shape,s);return c.length>0&&(l=Ft(l,c)),Ie(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe={kernelName:Qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,st(cr(yt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipe={kernelName:Jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,Bt(Pn(1),cr(yt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pe(t,e,n,r,s,o){const i=he(t,"dy","avgPool3dGrad"),a=he(e,"input","avgPool3dGrad");let l=i,c=a,u=!1;a.rank===4&&(u=!0,l=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),oe(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),oe(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Po("avgPool3dGrad",s,o);const h={dy:l,input:c},p={filterSize:n,strides:r,pad:s,dimRoundingMode:o},m=Se.runKernel(GC,h,p);return u?Ie(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const Npe=$e({avgPool3dGrad_:$pe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Epe={kernelName:v2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:a}=n;return{x:()=>Npe(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rpe(t,e,n,r,s){const o=he(t,"dy","avgPoolGrad"),i=he(e,"input","avgPoolGrad");oe(i.rank===o.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${o.rank})`);let a=i,l=o,c=!1;i.rank===3&&(c=!0,a=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),oe(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),oe(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},h={filterSize:n,strides:r,pad:s},p=Se.runKernel(HC,u,h);return c?Ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ape=$e({avgPoolGrad_:Rpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe={kernelName:x2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i}=n;return{x:()=>Ape(t,r,s,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe={kernelName:w2,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:o,transposeB:i}=n;return!o&&!i?{a:()=>Dn(t,s,!1,!0),b:()=>Dn(r,t,!0,!1)}:!o&&i?{a:()=>Dn(t,s,!1,!1),b:()=>Dn(t,r,!0,!1)}:o&&!i?{a:()=>Dn(s,t,!1,!0),b:()=>Dn(r,t,!1,!1)}:{a:()=>Dn(s,t,!0,!0),b:()=>Dn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mpe={kernelName:k2,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>HS(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ope={kernelName:qae,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,o=r.shape,i=Array.from(o);for(let l=s.length-1;l>=0;l--)if(s[l]===o[l])i[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${o}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ft(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fpe={kernelName:tg,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zpe={kernelName:ng,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lpe={kernelName:rg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:o}=n;return{x:()=>bo(ac(jd(r,s),ep(r,o)),t,wn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pe={kernelName:C2,inputsToSave:["x"],gradFunc:uz.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bpe={kernelName:S2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,o=an(s,e[0].shape)[0],i=r.map(l=>l[o]);return pi(t,i,o).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe={kernelName:T2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:o,strides:i,pad:a,dataFormat:l}=n;return oe(Nd(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>MS(r.shape,t,s,i,a,l),filter:()=>ZS(r,t,s.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe={kernelName:I2,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:o,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Rd(t,s,o,i,a,1,l),filter:()=>ZS(t,r,s.shape,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(t,e,n,r,s){let o=t;t.rank===4&&(o=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),oe(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),oe(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),oe(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),oe(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),oe(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:o,dy:i},l={strides:r,pad:s,filterShape:n};return Se.runKernel(ZC,a,l)}const Upe=$e({conv3DBackpropFilter_:Wpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe={kernelName:$2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o}=n;oe(Nd(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>ZO(i.shape,t,a,s,o),filter:()=>Upe(i,t,a.shape,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe={kernelName:sg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(Lr(mF(yt(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe={kernelName:og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(gF(yt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpe={kernelName:N2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:o,reverse:i}=n;return{x:()=>{const a=Cr([s],r.rank);let l=JO(t,s,o,!i);return a!=null&&(l=vn(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpe={kernelName:E2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o,dimRoundingMode:i}=n,a=r??[1,1];oe(Nd(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return oe(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),oe(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),oe(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),oe(Js(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Po("depthwiseConv2d",o,i),{x:()=>hfe(l.shape,t,c,s,o,a,i),filter:()=>ufe(l,t,c.shape,s,o,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype={kernelName:R2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,o={x:r,filter:s,dy:t},i={x:r,filter:s,dy:t};return{x:()=>Se.runKernel(fk,o,n),filter:()=>Se.runKernel(pk,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpe={kernelName:ag,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Se.runKernel(iS,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qpe={kernelName:lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=xe(dl(Lr(cr(n))),2/Math.sqrt(Math.PI));return{x:()=>xe(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpe={kernelName:cg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0e={kernelName:D2,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0e={kernelName:ug,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,dl(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0e={kernelName:dg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0e={kernelName:hg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{const a=zt(t,yt(r,"float32")),l=is(n.shape,s);return l.length>0?Ie(Ft(a,l),n.shape):a},b:()=>{let a=xe(t,yt(n,"float32"));const l=is(r.shape,s);l.length>0&&(a=Ie(Ft(a,l),r.shape));const c=cr(r);return Lr(zt(a,yt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0e={kernelName:P2,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,o,i,a]=e,l=a??Pn(1),c=is(o.shape,s.shape),u=[];if(o.rank===1){for(let T=0;T<s.shape.length-1;++T)u.push(s.shape[T]);u.push(1)}const h=Bt(s,o),p=xe(t,l),m=hF(st(i,Pn(r))),g=xe(xe(xe(m,m),m),Pn(-.5));return{x:()=>o.rank===1?Ie(xe(xe(t,ka(Ie(m,[1,1,1,o.shape[0]]),u)),l),s.shape):Ie(xe(xe(t,m),l),s.shape),mean:()=>{let T=xe(xe(m,Pn(-1)),p);return o.rank===1&&(T=Ft(T,c)),Ie(T,o.shape)},variance:()=>{let T=xe(xe(g,h),p);return o.rank===1&&(T=Ft(T,c)),Ie(T,o.shape)},scale:()=>{const T=xe(h,m);let E=xe(t,T);return o.rank===1&&(E=Ft(E,c)),Ie(E,o.shape)},offset:()=>{let T=t;return o.rank===1&&(T=Ft(T,c)),Ie(T,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0e={kernelName:M2,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:o,batchDims:i}=n,a=an(o,r.shape)[0],l=(c,u,h)=>()=>{const p=c.shape,m=u.size,g=p.slice(0,a),x=g.length,w=p.slice(o,p.length).slice(1),k=w.length,S=GN(0,x),$=GN(x+1,x+1+k),T=qN([g,[m],w]),E=Ie(h,T),F=Ie(u,[m]),V=qN([[x],S,$]),j=vn(E,V);let W=wF(j,F,c.shape[a]);const R=bu(V);return W=vn(W,R),W};if(i===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>lc(u.map((m,g)=>l(m,s.slice(g,1),t.slice(g,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function GN(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function qN(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0e={kernelName:fg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>wn(n),b:()=>wn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0e={kernelName:pg,gradFunc:t=>({x:()=>yt(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0e={kernelName:mg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c0e={kernelName:gg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0e={kernelName:yg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0e={kernelName:F2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,o=xi(r,0);return{x:()=>bo(o,t,xe(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0e={kernelName:xg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,st(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0e={kernelName:bg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,yt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0e={kernelName:Xae,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const i=dl(r);return Bt(t,xe(Ft(t,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t,e,n,r=5,s=1,o=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:o,beta:i};return Se.runKernel(hS,a,l)}const g0e=$e({localResponseNormalizationBackprop_:m0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0e={kernelName:j2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:o,bias:i,alpha:a,beta:l}=n;return{x:()=>g0e(r,s,t,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dz(t,e,n,r){return e.rank<n.rank&&(e=Ie(e,Yr(e.shape,r))),t.rank<n.rank&&(t=Ie(t,Yr(t.shape,r))),{x:()=>xe(t,yt(ul(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KN={kernelName:W2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,o=e[0],i=e[1],a=an(s,o.shape),l=dz(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0e={kernelName:vg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>xe(t,yt(jd(n,r),"float32")),b:()=>xe(t,yt(ux(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e,n,r,s,o,i){const a=he(t,"dy","maxPool3dGrad"),l=he(e,"input","maxPool3dGrad"),c=he(n,"output","maxPool3dGrad");let u=a,h=l,p=c,m=!1;l.rank===4&&(m=!0,u=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=Ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=Ie(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),oe(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),oe(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),oe(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Po("maxPool3dGrad",o,i);const g={dy:u,input:h,output:p},x={filterSize:r,strides:s,pad:o,dimRoundingMode:i},w=Se.runKernel(pS,g,x);return m?Ie(w,[w.shape[1],w.shape[2],w.shape[3],w.shape[4]]):w}const v0e=$e({maxPool3dGrad_:x0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0e={kernelName:H2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>v0e(t,r,s,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(t,e,n,r,s,o,i){const a=he(t,"dy","maxPoolGrad"),l=he(e,"input","maxPoolGrad"),c=he(n,"output","maxPoolGrad");oe(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),oe(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),oe(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Po("maxPoolGrad",o,i);const u={dy:a,input:l,output:c},h={filterSize:r,strides:s,pad:o,dimRoundingMode:i};return Se.runKernel(fS,u,h)}const C0e=$e({maxPoolGrad_:k0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0e={kernelName:U2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a}=n;return{x:()=>C0e(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0e={kernelName:G2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,o=an(s,r.shape),a=Ts(r.shape,o)[1],l=Ve(a);return{x:()=>{const u=r.shape.slice();o.forEach(m=>{u[m]=1});const h=Ie(t,u);return zt(xe(h,vu(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0e={kernelName:q2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[o,i]=e,a=an(s,o.shape),l=dz(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0e={kernelName:wg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>xe(t,yt(ep(n,r),"float32")),b:()=>xe(t,yt(xi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0e={kernelName:K2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>nr(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0e={kernelName:kg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{const a=is(n.shape,s);return a.length>0?Ie(Ft(t,a),n.shape):t},b:()=>{const a=xe(t,Lr(Sv(zt(n,r)))),l=is(r.shape,s);return l.length>0?Ie(Ft(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0e={kernelName:Cg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{const a=xe(t,yt(r,"float32")),l=is(n.shape,s);return l.length>0?Ie(Ft(a,l),n.shape):a},b:()=>{const a=xe(t,yt(n,"float32")),l=is(r.shape,s);return l.length>0?Ie(Ft(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0e={kernelName:X2,gradFunc:t=>({x:()=>Lr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0e={kernelName:Q2,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>ws(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0e={kernelName:Z2,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M0e={kernelName:J2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Pd(t,r).map(o=>()=>o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XN={kernelName:ev,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>nr(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O0e={kernelName:Sg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,o=n,i=r,a=Yt(o.shape,i.shape);return{a:()=>{const u=yt(i,"float32");let h=xe(t,xe(u,Ad(o,Bt(u,Pn(1)))));const p=is(o.shape,a);return p.length>0&&(h=Ft(h,p)),Ie(h,o.shape)},b:()=>{const u=xi(o,0),h=bo(u,hl(o),wn(o));let p=xe(t,xe(s,h));const m=is(i.shape,a);return m.length>0&&(p=Ft(p,m)),Ie(p,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0e={kernelName:tv,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=xi(n,0);return{x:()=>bo(s,t,xe(t,r)),alpha:()=>{let o=bo(s,wn(t),xe(t,n));const i=is(r.shape,t.shape);return i.length>0&&(o=Ft(o,i)),Ie(o,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0e(t,e,n){const r=t.shape.slice();r[n]=1;const s=Ie(e,r),o=Ik(t,n,!0,!1),i=Ik(t,n,!0,!0),a=xe(o,i);return xe(s,a)}function L0e(t,e,n){const r=t.shape.length,s=r-n.length,o=Cr(n,r);let i=t;o!=null&&(i=vn(t,o));const a=i.shape.slice(),c=a.splice(r-n.length,n.length).reduce((p,m)=>p*m,1);a.push(c);const u=i.reshape(a);let h=z0e(u,e,s);if(h=h.reshape(i.shape),o!=null){const p=bu(o);h=vn(h,p)}return h}const _0e={kernelName:nv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let o=[];return s==null?o=r.shape.map((i,a)=>a):typeof s=="number"?o=[s]:o=s,{x:()=>L0e(r,t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B0e={kernelName:ig,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{const a=zt(t,yt(r,"float32")),l=is(n.shape,s);return l.length>0?Ie(Ft(a,l),n.shape):a},b:()=>{let a=xe(t,yt(n,"float32"));const l=is(r.shape,s);l.length>0&&(a=Ie(Ft(a,l),r.shape));const c=cr(r);return Lr(zt(a,yt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,Lr(cr(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0e={kernelName:$g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=xe(ep(n,6),qg(n));return{x:()=>xe(t,yt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W0e={kernelName:Ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,yt(qg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U0e={kernelName:rv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0e={kernelName:ov,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Se.runKernel(wS,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G0e={kernelName:sv,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Se.runKernel(vS,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q0e={kernelName:iv,gradFunc:(t,e,n)=>{const{dims:r}=n,s=an(r,t.shape);return{x:()=>Dd(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0e={kernelName:Ng,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0e={kernelName:Eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Lr(zt(t,xe(Ad(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y0e={kernelName:av,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>yt(wn(n),"float32"),t:()=>xe(t,yt(n,t.dtype)),e:()=>xe(t,yt(VS(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z0e={kernelName:Rg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=xi(n,Pn(0)),s=Pn($v),o=Pn(Nv),i=xe(t,o),a=xe(xe(t,s),dl(yt(n,"float32")));return bo(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q0e={kernelName:Mg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,xe(n,Bt(Pn(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J0e={kernelName:Pg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eme={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(OS(yt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme={kernelName:Dg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(QO(yt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nme={kernelName:lv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:o}=n,i=r.shape,[a,l]=Tv(r,s,o),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],i[u]-a[u]-l[u]]);return{x:()=>US(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme={kernelName:hv,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,o=!0,i=xe(t,r);return{logits:()=>Bt(i,xe(Ft(i,[s],o),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme={kernelName:Og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,Jf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YN={kernelName:uv,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>PS(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZN={kernelName:dv,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ro(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome={kernelName:Fg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,xe(Qs(yt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime={kernelName:kS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(t,xe(yt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame={kernelName:zg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Pn(2);return{a:()=>xe(t,xe(s,Bt(n,r))),b:()=>xe(t,xe(s,Bt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lme={kernelName:jg,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme={kernelName:Lg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Yt(n.shape,r.shape);return{a:()=>{let a=t;const l=is(n.shape,s);return l.length>0&&(a=Ft(a,l)),Ie(a,n.shape)},b:()=>{let a=t;const l=is(r.shape,s);return l.length>0&&(a=Ft(a,l)),Ie(Lr(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume={kernelName:cv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:o}=n;an(o,r.shape).forEach(c=>{s[c]=1});const a=Ie(t,s),l=xe(a,vu(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dme={kernelName:_g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zt(t,cr(OS(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hme={kernelName:Bg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xe(Bt(Pn(1),cr(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme={kernelName:Vg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let i=wn(r);if(r.rank===1)for(let a=0;a<s[0];++a)i=st(i,nr(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)i=st(i,nr(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)i=st(i,nr(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)i=st(i,nr(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pme={kernelName:lf,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,o=bu(s);return{x:()=>vn(t,o)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mme={kernelName:fv,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>lc(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme={kernelName:pv,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yme(t,n)}}};function yme(t,e){const n=xu(e,wn(e)),r=LS(t,n);let s=jd(e,Pn(0,"int32"));const o=r.rank-s.rank;for(let a=0;a<o;++a)s=$o(s,a+1);s=ac(s,vu(r.shape,"bool"));const i=wn(r);return bo(s,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bme={kernelName:mv,gradFunc:t=>({x:()=>wn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xme=[uz,gpe,ype,bpe,xpe,vpe,wpe,kpe,Cpe,Spe,Tpe,Ipe,Epe,Dpe,Ppe,Mpe,Ope,Fpe,zpe,Lpe,_pe,Bpe,jpe,Vpe,Hpe,Gpe,qpe,Kpe,Xpe,Ype,B0e,Zpe,Qpe,Jpe,e0e,t0e,r0e,n0e,s0e,o0e,i0e,a0e,l0e,c0e,u0e,d0e,h0e,f0e,p0e,y0e,KN,KN,b0e,w0e,S0e,T0e,I0e,$0e,N0e,E0e,R0e,A0e,D0e,P0e,M0e,XN,XN,O0e,F0e,_0e,V0e,j0e,W0e,U0e,H0e,G0e,q0e,K0e,X0e,Y0e,Z0e,Q0e,J0e,eme,tme,nme,rme,sme,YN,YN,ZN,ZN,ome,ame,ime,lme,cme,ume,dme,hme,fme,pme,mme,gme,bme];for(const t of xme)Qae(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.abs=function(){return this.throwIfDisposed(),fo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acos=function(){return this.throwIfDisposed(),ece(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acosh=function(){return this.throwIfDisposed(),nce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.add=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.all=function(t,e){return this.throwIfDisposed(),KO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.any=function(t,e){return this.throwIfDisposed(),Sk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMax=function(t){return this.throwIfDisposed(),pm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMin=function(t){return this.throwIfDisposed(),ace(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asScalar=function(){return this.throwIfDisposed(),oe(this.size===1,()=>"The array must have only 1 element."),Ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asType=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as1D=function(){return this.throwIfDisposed(),Ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as2D=function(t,e){return this.throwIfDisposed(),Ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Ie(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asin=function(){return this.throwIfDisposed(),cce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asinh=function(){return this.throwIfDisposed(),dce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan=function(){return this.throwIfDisposed(),fce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan2=function(t){return this.throwIfDisposed(),mce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atanh=function(){return this.throwIfDisposed(),yce(this)};Be().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),DS(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),PS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),vv(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.broadcastTo=function(t){return this.throwIfDisposed(),X0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cast=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ceil=function(){return this.throwIfDisposed(),Uce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),bi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof ts&&(t=[t]),Ro([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv1d=function(t,e,n,r,s,o){return this.throwIfDisposed(),XO(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),YO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),Rd(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cos=function(){return this.throwIfDisposed(),OS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cosh=function(){return this.throwIfDisposed(),QO(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Ik(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),JO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),mue(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthwiseConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),FS(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),bue(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.divNoNan=function(t){return this.throwIfDisposed(),Cue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.div=function(t){return this.throwIfDisposed(),zt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dot=function(t){return this.throwIfDisposed(),Tue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.elu=function(){return this.throwIfDisposed(),kv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.equal=function(t){return this.throwIfDisposed(),ul(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.erf=function(){return this.throwIfDisposed(),eF(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),zue(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.exp=function(){return this.throwIfDisposed(),dl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expandDims=function(t){return this.throwIfDisposed(),$o(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expm1=function(){return this.throwIfDisposed(),Vue(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.fft=function(){return this.throwIfDisposed(),bF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.flatten=function(){return this.throwIfDisposed(),Ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floor=function(){return this.throwIfDisposed(),Sv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floorDiv=function(t){return this.throwIfDisposed(),qO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.gather=function(t,e,n){return this.throwIfDisposed(),LS(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greaterEqual=function(t){return this.throwIfDisposed(),jd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greater=function(t){return this.throwIfDisposed(),xi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ifft=function(){return this.throwIfDisposed(),$k(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.irfft=function(){return this.throwIfDisposed(),Mhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isFinite=function(){return this.throwIfDisposed(),Yue(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isInf=function(){return this.throwIfDisposed(),Que(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isNaN=function(){return this.throwIfDisposed(),ede(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.leakyRelu=function(t){return this.throwIfDisposed(),BS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.lessEqual=function(t){return this.throwIfDisposed(),ep(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.less=function(t){return this.throwIfDisposed(),ux(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),ode(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSigmoid=function(){return this.throwIfDisposed(),hde(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSoftmax=function(t){return this.throwIfDisposed(),oF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),iF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log=function(){return this.throwIfDisposed(),hl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log1p=function(){return this.throwIfDisposed(),sF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ac(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalNot=function(){return this.throwIfDisposed(),VS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalOr=function(t){return this.throwIfDisposed(),aF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalXor=function(t){return this.throwIfDisposed(),vde(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Dn(this,t,e,n)};Be().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),jS(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.max=function(t,e){return this.throwIfDisposed(),Sa(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.maximum=function(t){return this.throwIfDisposed(),xu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mean=function(t,e){return this.throwIfDisposed(),Xr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.min=function(t,e){return this.throwIfDisposed(),cx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.minimum=function(t){return this.throwIfDisposed(),ym(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Nde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mod=function(t){return this.throwIfDisposed(),Rde(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mul=function(t){return this.throwIfDisposed(),xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.neg=function(){return this.throwIfDisposed(),Lr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Cv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.notEqual=function(t){return this.throwIfDisposed(),dx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),lF(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.onesLike=function(){return this.throwIfDisposed(),Yi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pad=function(t,e){return this.throwIfDisposed(),US(this,t,e)};Be().prototype.pool=function(t,e,n,r,s,o){return this.throwIfDisposed(),Bde(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pow=function(t){return this.throwIfDisposed(),Ad(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prelu=function(t){return this.throwIfDisposed(),GS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prod=function(t,e){return this.throwIfDisposed(),Wde(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reciprocal=function(){return this.throwIfDisposed(),phe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu=function(){return this.throwIfDisposed(),Wd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu6=function(){return this.throwIfDisposed(),uF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshape=function(t){return this.throwIfDisposed(),Ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),CF(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),SF(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reverse=function(t){return this.throwIfDisposed(),Dd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rfft=function(){return this.throwIfDisposed(),zhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.round=function(){return this.throwIfDisposed(),dF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rsqrt=function(){return this.throwIfDisposed(),hF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.selu=function(){return this.throwIfDisposed(),fF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.separableConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),pF(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sigmoid=function(){return this.throwIfDisposed(),Jf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sign=function(){return this.throwIfDisposed(),Che(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sin=function(){return this.throwIfDisposed(),mF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sinh=function(){return this.throwIfDisposed(),gF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.slice=function(t,e){return this.throwIfDisposed(),nr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softmax=function(t){return this.throwIfDisposed(),YS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softplus=function(){return this.throwIfDisposed(),Ug(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),HS(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.split=function(t,e){return this.throwIfDisposed(),pi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sqrt=function(){return this.throwIfDisposed(),Qs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.square=function(){return this.throwIfDisposed(),cr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squaredDifference=function(t){return this.throwIfDisposed(),_he(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squeeze=function(t){return this.throwIfDisposed(),Gg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof ts?[this,t]:[this,...t];return lc(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.step=function(t){return this.throwIfDisposed(),qg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stridedSlice=function(t,e,n,r,s,o,i,a){return this.throwIfDisposed(),Uhe(this,t,e,n,r,s,o,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sub=function(t){return this.throwIfDisposed(),Bt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sum=function(t,e){return this.throwIfDisposed(),Ft(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tan=function(){return this.throwIfDisposed(),Ghe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tanh=function(){return this.throwIfDisposed(),xv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tile=function(t){return this.throwIfDisposed(),ka(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toBool=function(){return this.throwIfDisposed(),yt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toFloat=function(){return this.throwIfDisposed(),yt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toInt=function(){return this.throwIfDisposed(),yt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.topk=function(t,e){return this.throwIfDisposed(),Xhe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.transpose=function(t){return this.throwIfDisposed(),vn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unique=function(t){return this.throwIfDisposed(),Qhe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),wF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unstack=function(t){return this.throwIfDisposed(),Pd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.where=function(t,e){return this.throwIfDisposed(),bo(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.zerosLike=function(){return this.throwIfDisposed(),wn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ha extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ha.prototype)}}class Wi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Wi.prototype)}}class ge extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ge.prototype)}}class Jt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Jt.prototype)}}class D6 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,D6.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hz{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Md(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Ga(t,e){if(!t)throw new D6(e)}function QN(t,e){let n=0;for(const r of t)r===e&&n++;return n}function No(t){return t.length===1?t[0]:t}function Vn(t){return Array.isArray(t)?t:[t]}function Hl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function ld(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Oi={};function P6(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Rk(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Rk(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:Rk(r))}}}function Zg(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const o=t;let i;if(o in n)i=n[o];else if(o in Oi)i=Oi[o];else if(i=e[o],i==null)throw new ge(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const o=t;if(o.className==null||o.config==null)throw new ge(`${r}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);const i=o.className;let a,l;if(i in n?[a,l]=n[i]:i in Oi?[a,l]=Oi.className:i in e&&([a,l]=e[i]),a==null)throw new ge(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const m of Object.keys(Oi))c[m]=Oi[m];for(const m of Object.keys(n))c[m]=n[m];const u=o.config;u.customObjects=c;const h=Object.assign({},Oi);for(const m of Object.keys(n))Oi[m]=n[m];Rk(o.config);const p=l(a,o.config,n,s);return Oi=Object.assign({},h),p}else{const c=Object.assign({},Oi);for(const h of Object.keys(n))Oi[h]=n[h];const u=new a(o.config);return Oi=Object.assign({},c),u}}}function vme(t,e){return t<e?-1:t>e?1:0}function Vy(t,e){return-1*vme(t,e)}function Qc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function wme(t){if(t==null)throw new ge(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Hd(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ge(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function M6(t,e,n=0,r=1/0){return Ga(n>=0),Ga(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function ks(t,e){Array.isArray(t)?(oe(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>ks(n,`element ${r+1} of ${e}`))):oe(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${fz(t)}.`)}function fz(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>fz(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function kme(t,e,n){let r=n!=null?n():Io(),s;return(...i)=>{const a=n!=null?n():Io();return a-r<e||(r=a,s=t(...i)),s}}function pz(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Cme=0;function mz(){return Cme++}const jy={};function Ev(t=""){return t in jy||(jy[t]=0),jy[t]+=1,t+jy[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Sme=["channelsFirst","channelsLast"],Tme=["nearest","bilinear"],Ime=["valid","same","causal"],$me=["max","avg"],Nme=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jh=new Map;function Vr(t){Hd(Sme,"DataFormat",t)}function Eme(t){Hd(Tme,"InterpolationFormat",t)}function vi(t){Hd(Ime,"PaddingMode",t)}function gz(t){Hd($me,"PoolMode",t)}const Y0=[],JN="/";function vd(t,e){Y0.push(t);try{const n=e();return Y0.pop(),n}catch(n){throw Y0.pop(),n}}function Rme(){return Y0.length===0?"":Y0.join(JN)+JN}function yz(t){if(!xz(t))throw new Error("Not a valid tensor name: '"+t+"'");return Rme()+t}function bz(t){if(!xz(t))throw new Error("Not a valid tensor name: '"+t+"'");jh.has(t)||jh.set(t,0);const e=jh.get(t);if(jh.set(t,jh.get(t)+1),e>0){const n=`${t}_${e}`;return jh.set(n,1),n}else return t}const Ame=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function xz(t){return!!t.match(Ame)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dme(t){return t===parseInt(t.toString(),10)}function Jc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Pf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function au(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ia(t,e){if(e<t)throw new ge(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let s3;function ns(){return s3==null&&(s3=Sle().epsilon()),s3}function $a(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function il(t,e){return yt(t,e)}function Qg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Ie(t,n)}function Pme(t,e){return De(()=>{if(t.shape.length!==2)throw new ge(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Qg(t,1);return Ak(n,[1,e,1])})}function Mme(t){const e=[Jc(t.shape)];return Ie(t,e)}function Ome(t){if(t.rank<=1)throw new ge(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Jc(t.shape,1)];return Ie(t,e)}function wd(t,e,n){return De(()=>{switch(t.rank){case 1:return KS(t,e,n);case 2:return yF(t,[e,0],[n,t.shape[1]]);case 3:return XS(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return fx(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return nr(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return nr(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ge(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function o3(t,e,n){return De(()=>{switch(t.rank){case 1:return KS(t,e,n);case 2:return yF(t,[0,e],[t.shape[0],n]);case 3:return XS(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return fx(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ge(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Wy(t,e,n,r){return De(()=>{switch(t.rank){case 1:return KS(t,e,n);case 2:switch(r){case 1:return wd(t,e,n);case 2:return o3(t,e,n);default:throw new ge(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return wd(t,e,n);case 2:return XS(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return o3(t,e,n);default:throw new ge(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return wd(t,e,n);case 2:return fx(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return fx(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return o3(t,e,n);default:throw new ge(`The axis is not within the rank of the tensor ${r}`)}default:throw new ge(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function O6(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Ro(t,e)}function eE(t,e){switch(t.rank){case 1:return qce([t,e]);case 2:return Xce([t,e],0);case 3:return Zce([t,e],0);case 4:return Jce([t,e],0);default:throw new ge(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function Ak(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ge(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ka(t,e)}function Rv(t,e=0,n=1,r,s){return uhe(t,e,n,r,s)}function al(t,e,n,r){if(t.rank<2||e.rank<2)throw new Jt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(s!==o)throw new Jt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return BN({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Dk(t.rank,r,$a()):null,activation:n});{const s=t.shape.slice(),o=s.pop();t=Ie(t,[-1,o]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],u=Array.from({length:e.rank},(g,x)=>x===0?e.rank-2:x<=e.rank-2?x-1:x);e=Ie(vn(e,u),[l,-1]);const h=[...s,...c];return Ie(BN({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Dk(t.rank,r,$a()):null,activation:n}),h)}}function vz(t,e,n){return De(()=>(Array.isArray(e)?e=Eo(e,"int32"):e=yt(e,"int32"),LS(t,e,n)))}function Jg(t){return xe(t,t)}function Dk(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ge(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1,1,1]):Ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,1,1,r[0]]):Ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1,1]):Ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,1,r[0]]):Ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1]):Ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,r[0]]):Ie(e,[1].concat(r))}else if(t<3)return e;throw new ge(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ea(t,e,n){return De(()=>(n==null&&(n=$a()),Vr(n),st(t,Dk(t.rank,e,n))))}function Fme(t,e=1){if(e!==1)throw new Jt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return kv(t)}function zme(t){return De(()=>zt(t,st(fo(t),1)))}function wz(t,e,n,r){return De(()=>ofe(t,e,n,r))}function Lme(t){return De(()=>{const e=st(.5,xe(.2,t));return bi(e,0,1)})}function e1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _me=["fanIn","fanOut","fanAvg"],Bme=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vme(t){Hd(_me,"FanMode",t)}function jme(t){Hd(Bme,"Distribution",t)}class Ji extends np{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class kz extends Ji{apply(e,n){return ws(e,n)}}kz.className="Zeros";Je(kz);class F6 extends Ji{apply(e,n){return vu(e,n)}}F6.className="Ones";Je(F6);class Cz extends Ji{constructor(e){if(super(),typeof e!="object")throw new ge(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ge(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return De(()=>xe(Pn(this.value),vu(e,n)))}getConfig(){return{value:this.value}}}Cz.className="Constant";Je(Cz);class Sz extends Ji{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Hg(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Sz.className="RandomUniform";Je(Sz);class Tz extends Ji{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`randomNormal does not support dType ${n}.`);return Rv(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Tz.className="RandomNormal";Je(Tz);class Iz extends Ji{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`truncatedNormal does not support dType ${n}.`);return vF(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Iz.className="TruncatedNormal";Je(Iz);class $z extends Ji{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return De(()=>{if(e.length!==2||e[0]!==e[1])throw new ge("Identity matrix initializer can only be used for 2D square matrices.");return xe(this.gain,rF(e[0]))})}getConfig(){return{gain:this.gain}}}$z.className="Identity";Je($z);function Wme(t,e="channelsLast"){let n,r;if(Vr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Jc(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Jc(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Jc(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Ko extends Ji{constructor(e){if(super(),e.scale<0)throw new ge(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Vme(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,jme(this.distribution),this.seed=e.seed}apply(e,n){const r=Wme(e),s=r[0],o=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,o):i/=Math.max(1,(s+o)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Jt(`${this.getClassName()} does not support dType ${n}.`);return vF(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Hg(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ko.className="VarianceScaling";Je(Ko);class z6 extends Ko{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}z6.className="GlorotUniform";Je(z6);class L6 extends Ko{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}L6.className="GlorotNormal";Je(L6);class _6 extends Ko{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}_6.className="HeNormal";Je(_6);class B6 extends Ko{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}B6.className="HeUniform";Je(B6);class V6 extends Ko{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}V6.className="LeCunNormal";Je(V6);class j6 extends Ko{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ko.className}}j6.className="LeCunUniform";Je(j6);class Nz extends Ji{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return De(()=>{if(e.length<2)throw new Jt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Ve(e.slice(0,-1)),s=e[e.length-1],o=r*s;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],a=Rv(i,0,1,n,this.seed),l=epe.qr(a,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=xe(c,h.sign()),r<s&&(c=c.transpose()),xe(Pn(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Nz.className="Orthogonal";Je(Nz);const tE={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function nE(t,e={}){return Zg(t,ji.getMap().classNameMap,e,"initializer")}function kr(t){return P6(t)}function pr(t){if(typeof t=="string"){const e=t in tE?tE[t]:t;if(e==="GlorotNormal")return new L6;if(e==="GlorotUniform")return new z6;if(e==="HeNormal")return new _6;if(e==="HeUniform")return new B6;if(e==="LeCunNormal")return new V6;if(e==="LeCunUniform")return new j6;{const n={};return n.className=e,n.config={},nE(n)}}else return t instanceof Ji?t:nE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pk(t){return Array.isArray(t)&&Array.isArray(t[0])}function px(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function jt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ge(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Tn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ge(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mx(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rE="Variable";class Ume{constructor(e,n="float32",r=rE,s=!0,o=null){this.dtype=n??"float32",this.shape=e.shape,this.id=mz(),r=r??rE,this.originalName=yz(r),this.name=bz(this.originalName),this.trainable_=s,this.constraint=o,this.val=tfe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Hme(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Hme(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Mk(t){return t.map(e=>e.read())}function W6(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rs{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class fl{constructor(e,n,r,s,o,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=o,this.outputTensorIndex=a,this.id=mz(),i!=null&&(this.originalName=yz(i),this.name=bz(this.originalName)),this.rank=n.length}}let Gme=0,Av=class{constructor(e,n){this.callArgs=n,this.id=Gme++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},qme=0;class ln extends np{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=qme++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Hl(r)+"_"+Ev(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),r=[o].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Wi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ge(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return No(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return No(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ha(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ha(`Layer ${this.name} is not connected, no input to return.`);return No(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ha(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ha(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return No(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Vn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Vn(this.inputSpec);if(n.length!==r.length)throw new ge(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const o=n[s],i=r[s];if(i==null)continue;const a=o.rank;if(i.ndim!=null&&a!==i.ndim)throw new ge(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new ge(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new ge(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&o.dtype!==i.dtype)throw new ge(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${o.dtype}.`);if(i.axes){const l=o.shape;for(const c in i.axes){const u=Number(c),h=i.axes[c],p=u>=0?l[u]:l[l.length+u];if(h!=null&&[h,null].indexOf(p)===-1)throw new ge(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${h} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],u=o.shape[l];if(c!=null&&u!=null&&c!==u)throw new ge(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${o.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Vn(e),s=Yme(e),o=Zme(e);if(s===o)throw new ge("Arguments to apply() must be all SymbolicTensors or all Tensors");return vd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of Vn(e))i.push(a.shape);this.build(No(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=Vn(i),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=No(l),this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Kme(e),a=this.computeOutputShape(i);let l;const c=Xme(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,h)=>new fl(c,u,this,Vn(e),n,this.name,h)):l=new fl(c,a,this,Vn(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Jt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ha(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ha(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Wi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return mx(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Mk(e?this.trainableWeights:this.weights)}setWeights(e){De(()=>{const n=this.weights;if(n.length!==e.length)throw new ge(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=Mk(n);for(let o=0;o<s.length;++o){const i=s[o],a=n[o],l=e[o];if(!Mn(i.shape,l.shape))throw new ge(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}W6(r)})}addWeight(e,n,r,s,o,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ge(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():pr("zeros"));const c=s.apply(n,r),u=new Ume(c,r,e,i,a);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Vn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),o=Vn(n),i=Vn(s);if(o.length!==i.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=i[a]}addInboundNode(e,n,r,s,o,i,a=null){const l=Vn(e);n=Vn(n),r=Vn(r),s=Vn(s),o=px(o),i=px(i);const c=[],u=[],h=[];for(const p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),h.push(p.tensorIndex);new Av({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:o,outputShapes:i},a);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Kme(t){t=Vn(t);const e=[];for(const n of t)e.push(n.shape);return No(e)}function Xme(t){return"float32"}function Ez(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let o=0;o<r.inboundLayers.length;o++){const i=r.inputTensors[o],a=r.inboundLayers[o],l=r.nodeIndices[o],c=Ez(i,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function Yme(t){let e=!0;for(const n of Vn(t))if(!(n instanceof fl)){e=!1;break}return e}function Zme(t){let e=!0;for(const n of Vn(t))if(n instanceof fl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class t1 extends ln{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Ev("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ge("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ge("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ge("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new fl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Av({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ge(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}t1.className="InputLayer";Je(t1);function Qme(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ge("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new t1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jme(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return yt(e,t.dtype)}catch{throw new ge(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class qc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof qc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Jme(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ge(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof fl){if(this.id2Value[e.id]==null)throw new ge(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ge(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof fl){if(this.id2Value[e.id]==null)throw new ge(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ge(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&hn(this.id2Mask)}}const gx=new hz,yx=new hz;function ege(t){gx!=null&&gx.setMaxEntries(t),yx!=null&&yx.setMaxEntries(t)}function D0(t,e,n,r){const s=n==null?!1:n.training,o=Array.isArray(t),i=o?t:[t],a=i.map(g=>g.name),l=[],c=e.names();for(const g of a)c.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let h=gx.get(u),p;if(h==null){const g=tge(i,e);h=g.sorted,p=g.recipientCounts,gx.put(u,h),yx.put(u,p)}p={},s||Object.assign(p,yx.get(u));const m=new qc(e);for(let g=0;g<h.length;++g){const x=h[g],w=x.sourceLayer;if(w instanceof t1)continue;const k=[],S=[],$=[];let T=!1;for(const W of x.inputs){const R=m.getValue(W),O=m.getMask(W);k.push(R),S.push(O),O!=null&&(T=!0),s||(p[W.name]--,p[W.name]===0&&!e.hasKey(W)&&a.indexOf(W.name)===-1&&!R.isDisposed&&W.sourceLayer.stateful!==!0&&$.push(R))}T&&(n=n||{},n.mask=S[0]);const E=Vn(w.apply(k,n));let F=null;w.supportsMasking&&(F=w.computeMask(k,S));const V=rge(x),j=Array.isArray(V)?V:[V];for(let W=0;W<j.length;++W){m.hasKey(j[W])||m.add(j[W],E[W],Array.isArray(F)?F[0]:F);const R=a.indexOf(j[W].name);R!==-1&&(l[R]=E[W])}s||hn($)}return m.disposeMasks(),o?l:l[0]}function tge(t,e){oe(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=sE(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const o of t){const{sorted:i,recipientMap:a}=sE(o,e);for(const l of i)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:nge(r)}}function nge(t){const e={};for(const n in t)e[n]=t[n].size;return e}function sE(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const o=[],i=[];for(o.push(t);o.length>0;){const a=o[o.length-1];if(n.has(a.name)){o.pop();continue}const l=i[i.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),r.push(a),n.add(a.name),l&&i.pop();else{i.push(o.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&o.push(c)}}return{sorted:r,recipientMap:s}}function rge(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sge=Oe();sge.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,ege);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U6(t,e){return De(()=>Qs(Ft(xe(t,t),e,!0)))}class n1 extends np{getConfig(){return{}}}class Rz extends n1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const n=U6(e,this.axis),r=bi(n,0,this.maxValue);return xe(e,zt(r,st(ns(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Rz.className="MaxNorm";Je(Rz);class Az extends n1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>zt(e,st(ns(),U6(e,this.axis))))}getConfig(){return{axis:this.axis}}}Az.className="UnitNorm";Je(Az);class Dz extends n1{apply(e){return Wd(e)}}Dz.className="NonNeg";Je(Dz);class Pz extends n1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return De(()=>{const n=U6(e,this.axis),r=st(xe(this.rate,bi(n,this.minValue,this.maxValue)),xe(1-this.rate,n));return xe(e,zt(r,st(ns(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Pz.className="MinMaxNorm";Je(Pz);const oE={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ss(t){return P6(t)}function iE(t,e={}){return Zg(t,ji.getMap().classNameMap,e,"constraint")}function os(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in oE?oE[t]:t,config:{}};return iE(n)}else return t instanceof n1?t:iE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Qu(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const o=t[s];if(typeof o!="number"){const i=o;e.push(i.data()),n.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let o=0;o<s.length;++o)t[n[o]]=s[o][0];hn(r)}}function Mz(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var aE;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(aE||(aE={}));const oge=125;class xm{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class ige{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class age extends xm{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const o=n[s];if(typeof o=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+o*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const a=De(()=>st(this.totals[s],xe(o,r)));this.totals[s]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:De(()=>{const s=xe(zt(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),sl(n[r])}))}}class lge extends xm{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const o in this.history){const i=this.history[o];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(o),r.push(a)}}const s=await Promise.all(e);for(let o=0;o<s.length;++o)this.history[n[o]][r[o]].dispose(),this.history[n[o]][r[o]]=s[o][0]}}class cge extends xm{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||_F,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=oge),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");uk(this.yieldEvery)&&(this.maybeWait=kme(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Qu(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Qu(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Qu(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Qu(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Qu(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):uk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Qu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Qu(e),await this.trainEnd(e))}}function Oz(t,e){return t==null&&(t={}),t instanceof xm?[t]:Array.isArray(t)&&t[0]instanceof xm?t:Vn(t).map(r=>new cge(r,e))}class _i{constructor(){}static registerCallbackConstructor(e,n){oe(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),_i.checkForDuplicate(n),_i.constructors[e]==null&&(_i.constructors[e]=[]),_i.constructors[e].push(n)}static checkForDuplicate(e){for(const n in _i.constructors)_i.constructors[+n].forEach(s=>{if(s===e)throw new ge("Duplicate callback constructor.")})}static clear(){_i.constructors={}}static createCallbacks(e){const n=[];for(const r in _i.constructors){const s=+r;e>=s&&n.push(..._i.constructors[s])}return n.map(r=>new r)}}_i.constructors={};function Fz(t,e,n,r,s,o,i,a,l){const c=new lge,u=[new age,..._i.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const h=new ige(u);return h.setParams({epochs:n,initialEpoch:r,samples:s,steps:o,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ql(t,e={},n=!1){return Zg(t,ji.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bx(t,e){return De(()=>{t.dtype!=="float32"&&(t=yt(t,"float32"));const n=Ft(Jg(t),e,!0),r=wv(n.shape,ns()),s=Qs(xu(n,r));return zt(t,s)})}function Dv(t,e){return De(()=>Xr(Jg(Bt(e,t)),-1))}function H6(t,e){return De(()=>Xr(fo(Bt(e,t)),-1))}function G6(t,e){return De(()=>{const n=Bt(t,e),r=bi(fo(t),ns(),Number.MAX_VALUE),s=fo(zt(n,r));return xe(100,Xr(s,-1))})}function uge(t,e){return De(()=>{const n=bi(e,ns(),Number.MAX_VALUE),r=hl(st(1,n)),s=bi(t,ns(),Number.MAX_VALUE),o=hl(st(1,s));return Xr(Jg(Bt(r,o)),-1)})}function dge(t,e){return De(()=>{const n=xu(0,Bt(1,xe(t,e)));return Xr(Jg(n),-1)})}function hge(t,e){return De(()=>{const n=xu(0,Bt(1,xe(t,e)));return Xr(n,-1)})}function fge(t,e){return De(()=>{const n=Ft(xe(t,e),-1),r=Sa(xe(Bt(1,t),e),-1);return xu(0,st(1,Bt(r,n)))})}function pge(t,e){return De(()=>{const n=Math.log(2),r=Bt(e,t),s=Bt(st(r,Ug(xe(-2,r))),n);return Xr(s,-1)})}function vm(t,e,n=!1){return De(()=>{if(n)e=YS(e);else{const r=Ft(e,e.shape.length-1,!0);e=zt(e,r)}return e=bi(e,ns(),1-ns()),Lr(Ft(xe(yt(t,"float32"),hl(e)),e.shape.length-1))})}function xx(t,e,n=!1){return De(()=>{const r=yt(Sv(Mme(t)),"int32");e=bi(e,ns(),1-ns());const s=e.shape,o=Ie(lF(r,s[s.length-1]),s);return vm(o,e,n)})}function mge(t,e){if(!Mn(t.shape,e.shape))throw new ge(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return De(()=>{const n=Wd(e),r=Lr(fo(e));return st(Bt(n,xe(e,t)),sF(dl(r)))})}function Pv(t,e){return De(()=>{let n;return n=bi(e,ns(),1-ns()),n=hl(zt(n,Bt(1,n))),Xr(mge(t,n),-1)})}function gge(t,e){return De(()=>{const n=bi(t,ns(),1),r=bi(e,ns(),1);return Ft(xe(t,hl(zt(n,r))),-1)})}function yge(t,e){return De(()=>{const n=hl(st(ns(),e));return Xr(Bt(e,xe(t,n)),-1)})}function zz(t,e){return De(()=>{const n=bx(t,-1),r=bx(e,-1),s=xe(n,r);return Lr(Ft(s,-1))})}const vx={meanSquaredError:Dv,meanAbsoluteError:H6,meanAbsolutePercentageError:G6,meanSquaredLogarithmicError:uge,squaredHinge:dge,hinge:hge,categoricalHinge:fge,logcosh:pge,categoricalCrossentropy:vm,sparseCategoricalCrossentropy:xx,binaryCrossentropy:Pv,kullbackLeiblerDivergence:gge,poisson:yge,cosineProximity:zz};function i3(t){if(typeof t=="string"){if(t in vx)return vx[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ge(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lz(t,e){return De(()=>{const n=xe(.5,Yi(e)),r=il(xi(e,n),t.dtype);return Xr(ul(t,r),-1)})}function _z(t,e){return De(()=>il(ul(pm(t,-1),pm(e,-1)),"float32"))}function bge(t,e){return De(()=>yt(Ft(ac(ul(t,1),ul(e,1))),"float32"))}function xge(t,e){return De(()=>yt(Ft(ac(ul(t,0),ul(e,1))),"float32"))}function vge(t,e){return De(()=>{const n=bge(t,e),r=xge(t,e),s=st(n,r);return yt(bo(xi(s,0),zt(n,s),0),"float32")})}function wge(t,e){return Pv(t,e)}function kge(t,e){return t.rank===e.rank&&(t=Gg(t,[t.rank-1])),e=pm(e,-1),e.dtype!==t.dtype&&(e=yt(e,t.dtype)),yt(ul(t,e),"float32")}const Cge=Dv,Sge=Dv,Tge=H6,Ige=H6,$ge=G6,Nge=G6,Bz=vm,Ege=zz,Vz=xx,wx={binaryAccuracy:Lz,categoricalAccuracy:_z,precision:vge,categoricalCrossentropy:Bz,sparseCategoricalCrossentropy:Vz,mse:Cge,MSE:Sge,mae:Tge,MAE:Ige,mape:$ge,MAPE:Nge,cosine:Ege};function Rge(t){if(typeof t=="string"&&t in wx)return wx[t];if(typeof t!="string"&&t!=null)return t;throw new ge(`Unknown metric ${t}`)}function Uy(t){if(Ga(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(vx))if(vx[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(wx))if(wx[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Age(t){const e={Adagrad:()=>Vh.adagrad(.01),Adadelta:()=>Vh.adadelta(1,.95,ns()),Adam:()=>Vh.adam(.001,.9,.999,ns()),Adamax:()=>Vh.adamax(.002,.9,.999,ns(),0),RMSProp:()=>Vh.rmsprop(.001,.9,0,ns()),SGD:()=>Vh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ge(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lE=1*1024*1024;function cE(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Ok(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>lE&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${lE}.`)}}function Ok(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Ok(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Ok(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dge(t,e,n,r=console.log){const s=Mge(t),o=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let i;if(!s){o.push("Receives inputs"),i=[];for(const u in t.nodesByDepth)i.push(...t.nodesByDepth[u])}r("_".repeat(e)),kx(o,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?Oge(a[u],n,r):Fge(a[u],n,i,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=Pge(t),c=mx(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function Pge(t){let e;return t.collectedTrainableWeights!=null?e=mx(t.collectedTrainableWeights):e=mx(t.trainableWeights),e}function Mge(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let o=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function kx(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Oge(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const o=t.name,i=t.getClassName(),a=[`${o} (${i})`,s,r,t.countParams().toString()];kx(a,e,n)}function Fge(t,e,n,r){let s,o;try{o=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let p=0;p<h.inboundLayers.length;++p){const m=h.inboundLayers[p].name,g=h.nodeIndices[p],x=h.tensorIndices[p];i.push(`${m}[${g}][${x}]`)}const a=t.name,l=t.getClassName(),c=i.length===0?"":i[0],u=[`${a} (${l})`,o,s,t.countParams().toString(),c];kx(u,e,r);for(let h=1;h<i.length;++h)kx(["","","","",i[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jz(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Fk(t,e){if(t===null)return null;if(typeof t=="string")return ld(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];jz(e,s,o)?n.push(o):n.push(Fk(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const o=ld(r);n[o]=Fk(s,o)}}return n}}function zk(t,e){if(t==null)return null;if(typeof t=="string")return Hl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];jz(e,s,o)?n.push(o):n.push(zk(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],o=Hl(r);(r==="name"||r==="className")&&typeof s=="string"?n[o]=s:n[o]=zk(s,r)}return n}}/** @license See the LICENSE file. */const Wz="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zge=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class ya extends ln{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=Ev(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Qc(this.inputs).length!==this.inputs.length)throw new ge(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);Qc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const $=S.sourceLayer,T=S.nodeIndex,E=S.tensorIndex;this.outputLayers.push($),this.outputLayersNodeIndices.push(T),this.outputLayersTensorIndices.push(E)}for(const S of this.inputs){const $=S.sourceLayer,T=S.nodeIndex,E=S.tensorIndex;Ga(T===0,"input layer has >1 nodes"),Ga(E===0,"input layer has >1 tensors"),this.inputLayers.push($),this.inputLayersNodeIndices.push(T),this.inputLayersTensorIndices.push(E)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const $=this.inputLayers[S];if(!($ instanceof t1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${S} (0-based) originates from layer type ${$.getClassName()}.`);this.inputNames.push($.name),this.feedInputShapes.push($.batchInputShape),this.feedInputNames.push($.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},s={},o={},i={},a=[],l=(S,$,T,E,F,V)=>{(E==null||F==null||V==null)&&(E=S.sourceLayer,F=S.nodeIndex,V=S.tensorIndex);const j=E.inboundNodes[F];if(T.indexOf(j)!==-1)throw new Wi(`The tensor ${S.name} at layer "${E.name}" is part of a cycle.`);if($.indexOf(j)!==-1)return;this.containerNodes.add(ya.nodeKey(E,F)),E.id in i||(i[E.id]=Object.keys(i).length),T.indexOf(j)===-1&&T.push(j);const W=j.inboundLayers.length;for(let R=0;R<W;R++){const O=j.inputTensors[R],U=j.inboundLayers[R],K=j.nodeIndices[R],G=j.tensorIndices[R];l(O,$,T,U,K,G)}for($.push(j);T.indexOf(j)>=0;)T.splice(T.indexOf(j),1);a.push(j)},c=[],u=[];for(const S of this.outputs)l(S,c,u);const h=a.slice().reverse();for(const S of h){r[S.id]=S,S.id in n||(n[S.id]=0);let $=n[S.id];const T=s[S.outboundLayer.id]==null?0:s[S.outboundLayer.id];$=Math.max($,T),s[S.outboundLayer.id]=$,o[S.outboundLayer.id]=S.outboundLayer,n[S.id]=$;for(let E=0;E<S.inboundLayers.length;E++){const F=S.inboundLayers[E],V=S.nodeIndices[E],j=F.inboundNodes[V],W=n[j.id]==null?0:n[j.id];n[j.id]=Math.max($+1,W),r[j.id]=j}}const p={};for(const S in n){const $=n[S];$ in p||(p[$]=[]),p[$].push(r[S])}const m={};for(const S in s){const $=s[S];$ in m||(m[$]=[]),m[$].push(o[S])}let g=Object.keys(m).map(S=>parseInt(S,10)).sort(Vy);this.layers=[];for(const S of g){const $=m[S];$.sort((T,E)=>{const F=i[T.id],V=i[E.id];return F<V?-1:F>V?1:0});for(const T of $)T instanceof ya&&this.internalContainerRefs.push(T),this.layers.push(T)}this.layersByDepth=m,g=Object.keys(p).map(S=>parseInt(S,10)).sort(Vy);const x=this.inputs.slice(),w=[];for(const S of g)for(const $ of p[S]){const T=$.outboundLayer;if(T!=null){for(const E of $.inputTensors)if(x.indexOf(E)===-1)throw new Wi(`Graph disconnected: cannot obtain value for tensor ${E} at layer "${T.name}". The following previous layers were accessed without issue: ${w}`);for(const E of $.outputTensors)x.push(E);w.push(T.name)}}this.nodesByDepth=p;const k=this.layers.map(S=>S.name);for(const S of k){const $=k.filter(T=>T===S).length;if($!==1)throw new Wi(`The name "${S}" is used ${$} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(k))}this.outboundNodes=[],this.inboundNodes=[],new Av({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ge("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const o=zge(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ge(`Duplicate weight name: ${u}`);r[u]=c,s++}const i=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[a]]);else if(n)throw new ge(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new ge(`${a.length} of ${s} weights are not set: ${a}`)}W6(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],o=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");o!==n&&(e[o]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${Wz}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=zk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return De(()=>{e=Vn(e);const r=new qc;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return D0(this.outputs,r,n)})}computeMask(e,n){return De(()=>{e=Vn(e);let r;return n==null?r=Md(null,e.length):r=Vn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=px(e);if(n.length!==this.inputLayers.length)throw new ge(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Vy);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(u.id)!==-1)continue;const h=[];for(let x=0;x<c.inboundLayers.length;x++){const w=c.inboundLayers[x],k=c.nodeIndices[x],S=c.tensorIndices[x],$=`${w.name}_${k}_${S}`,T=r[$];h.push(T)}const p=u.computeOutputShape(No(h)),m=px(p),g=u.inboundNodes.indexOf(c);for(let x=0;x<m.length;x++){const w=`${u.name}_${g}_${x}`;r[w]=m[x]}}}const o=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],h=`${l.name}_${c}_${u}`;i.push(h)}for(let a=0;a<i.length;a++){const l=i[a];Ga(l in r),o.push(r[l])}return No(o)}runInternalGraph(e,n){n==null&&(n=Md(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],h=n[l];r[c.id]=[u,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Vy);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const h=u.outboundLayer,p=u.inputTensors,m=u.outputTensors,g=new Array;for(const x of p)x.id in r&&g.push(r[x.id]);if(g.length===p.length){let x={},w,k,S,$;if(u.callArgs!=null&&(x=u.callArgs),g.length===1){const[T,E]=g[0];x.mask==null&&(x.mask=E),S=Vn(h.call(T,x)),$=Vn(h.computeMask(T,E)),w=[T],k=[E]}else w=g.map(T=>T[0]),k=g.map(T=>T[1]),x.mask==null&&(x.mask=k),S=Vn(h.call(w,x)),$=Vn(h.computeMask(w,k));if(h.activityRegularizer)throw new Jt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let T=0;T<m.length;++T){const E=m[T],F=S[T],V=$[T];r[E.id]=[F,V]}}}}const o=[],i=[],a=[];for(const l of this.outputs){Ga(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),o.push(c),i.push(u)}return[o,i,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof ya?1:0;for(let o=0;o<s.inboundNodes.length;o++){const i=ya.nodeKey(s,o);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ge("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ge(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ge(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return De(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=ya.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),c=[];for(let h=0;h<i.inboundNodes.length;h++){const p=i.inboundNodes[h],m=ya.nodeKey(i,h);let g={};if(this.containerNodes.has(m)){if(p.callArgs)try{JSON.stringify(p.callArgs),g=p.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(p.inboundLayers.length>0){const x=[];for(let w=0;w<p.inboundLayers.length;w++){const k=p.inboundLayers[w],S=p.nodeIndices[w],$=p.tensorIndices[w],T=ya.nodeKey(k,S);let E=n[T];E==null&&(E=0),x.push([k.name,E,$,g])}c.push(x)}}}const u={};u.name=i.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=ya.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.inputLayersTensorIndices[i];s.push([a.name,u,h])}e.inputLayers=s;const o=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=ya.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.outputLayersTensorIndices[i];o.push([a.name,u,h])}return e.outputLayers=o,e}static fromConfig(e,n,r={},s=!1){const o={},i={};function a(w,k){w.name in i?i[w.name].push(k):i[w.name]=[k]}function l(w,k){const S=[];let $;for(const T of k){const E=T[0],F=T[1],V=T[2];if($=T[3]==null?{}:T[3],!(E in o)){a(w,k);return}const j=o[E];if(j.inboundNodes.length<=F){a(w,k);return}const W=j.inboundNodes[F];S.push(W.outputTensors[V])}S.length>0&&w.apply(No(S),$)}function c(w){const k=w.name,S=Ql(w,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(s),o[k]=S,w.inboundNodes.forEach(T=>{if(!(T instanceof Array))throw new ge(`Corrupted configuration, expected array for nodeData: ${T}`);a(S,T)})}const u=n.name,h=n.layers;for(const w of h)c(w);for(;!wme(i);)for(const w of h){const k=o[w.name];if(k.name in i){const S=i[k.name];delete i[k.name];for(const $ of S)l(k,$)}}const p=[],m=[],g=n.inputLayers;for(const w of g){const k=w[0],S=w[1],$=w[2];Ga(k in o);const E=o[k].inboundNodes[S].outputTensors;p.push(E[$])}const x=n.outputLayers;for(const w of x){const k=w[0],S=w[1],$=w[2];Ga(k in o);const E=o[k].inboundNodes[S].outputTensors;m.push(E[$])}return new e({inputs:p,outputs:m,name:u})}get stateful(){if(this._stateful)throw new ge("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){De(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lge(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(o=>{o in t?s.push(t[o]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Uz(t,e){return Lge(t,e,"classWeight")}async function Hz(t,e,n,r){if(n!=null){const s=De(()=>{if(t.shape.length===1)return xd(t);if(t.shape.length===2){if(t.shape[1]>1)return pm(t,1);if(t.shape[1]===1)return Ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await s.data());hn(s);const i=[];return o.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Eo(i,"float32")}else return null}function _ge(t,e){return xe(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Bge=32;function Gz(t,e){let n,r;const s=e;n=s.xs,r=s.ys,oe(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const o=uE("input",t.inputNames,n),i=uE("output",t.outputNames,r),a=o[0].shape[0];oe(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),oe(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)oe(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)oe(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:i}}function uE(t,e,n){if(n instanceof ts)return[n];if(Array.isArray(n))return oe(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ge(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function Vge(t){if(t.length===3)throw new Jt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function jge(t,e,n){const r=n.batchesPerEpoch!=null;if(oe(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),oe(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),oe(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),oe(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),oe(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let o,i;if(s)if(dE(n.validationData))oe(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const w=Vge(n.validationData);o=w.xs,i=w.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(w=>"val_"+w)):c=l.slice();const u=Oz(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:p,history:m}=Fz(u,h,n.epochs,null,null,Wge(e,n),null,s,c);p.setModel(t),t.history=m,await p.onTrainBegin(),t.stopTraining_=!1;let g=n.initialEpoch==null?0:n.initialEpoch,x=await e.iterator();for(;g<n.epochs;){const w={};await p.onEpochBegin(g);let k=0,S=0;for(r||(x=await e.iterator());!r||k<n.batchesPerEpoch;){const $=await x.next();if(r&&$.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${k} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if($.value!=null){const{xs:T,ys:E}=Gz(t,$.value),F={};F.batch=S,F.size=T[0].shape[0],await p.onBatchBegin(S,F);const V=[];if(n.classWeight!=null){const R=Uz(n.classWeight,t.outputNames);for(let O=0;O<R.length;++O)V.push(await Hz(E[O],null,R[O]))}const j=T.concat(E).concat(V),W=a(j);hn(j);for(let R=0;R<l.length;++R){const O=l[R],U=W[R];F[O]=U,sl(U)}await p.onBatchEnd(S,F),Mz(F),S++,k++}if(r?k>=n.batchesPerEpoch:$.done){if(s){let T;dE(n.validationData)?T=Vn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):T=Vn(t.evaluate(o,i,{batchSize:n.validationBatchSize==null?Bge:n.validationBatchSize,verbose:0}));for(let E=0;E<t.metricsNames.length;++E)w[`val_${t.metricsNames[E]}`]=T[E]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(g,w),g++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Wge(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function dE(t){return typeof t.iterator=="function"}function Uge(t){return typeof t.next=="function"}async function Hge(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let o=[];if(n.verbose>0)throw new Jt("Verbose mode is not implemented yet.");oe(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Uge(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await i.next();if(o=De(()=>{if(c.value){const{xs:u,ys:h}=Gz(t,c.value),p=u.concat(h),m=De(()=>s(p));if(hn(p),l===0)for(let x=0;x<m.length;++x)o.push(Pn(0));const g=p[0].shape[0];for(let x=0;x<m.length;++x){const w=m[x],k=o[x];o[x]=De(()=>st(o[x],xe(g,w))),l>0&&hn(k)}hn(m),a+=g,++l}return o}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){const u=o[c];o[c]=zt(o[c],a),hn(u)}return No(o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a3(t){oe(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function w0(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>wd(r,e,n-e)):wd(t,e,n-e)}function Lk(t,e){return De(()=>t==null?null:Array.isArray(t)?t.map(n=>Lk(n,e)):vz(t,e.dtype==="int32"?e:yt(e,"int32")))}function l3(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function qz(t){const e=[];t instanceof ts&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Qg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ma(t,e){if(t==null)return;const n=[];if(e instanceof ts)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const o=e[s];n.push(o.id)}const r=[];if(t instanceof ts)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const o=t[s];n.indexOf(o.id)===-1&&r.push(o)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gge(t){return t instanceof ts}function _k(t){return Array.isArray(t)}function hE(t){return!Gge(t)&&!_k(t)}function fE(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(_k(t)&&t.length>0)i=!0;else if(hE(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new ge(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let o;if(hE(t)){t=t,o=[];for(const i of e){if(t[i]==null)throw new ge(`No data provided for "${i}". Need data for each key in: ${e}`);o.push(t[i])}}else if(_k(t)){if(t=t,t.length!==e.length)throw new ge(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,e.length>1)throw new ge(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=qz(o),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new ge(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u>=0&&c!==u)throw new ge(`${s} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function qge(t,e,n){const r=Qc(t.map(o=>o.shape[0]));r.sort();const s=Qc(e.map(o=>o.shape[0]));if(s.sort(),r.length>1)throw new ge(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(s.length>1)throw new ge(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(r.length>0&&s.length>0&&!Mn(r,s))throw new ge(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function Kge(t,e,n){const r=[Dv,Pv,vm];for(let s=0;s<t.length;++s){const o=t[s],i=e[s],a=n[s];if(i!=null){if(i===vm&&o.shape[o.shape.length-1]===1)throw new ge(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=o.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const h=l[u],p=c[u];if(p!=null&&h!==p)throw new ge(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function pE(t,e,n,r=!0,s=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new ge(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new ge(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new ge(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u!==c)throw new ge(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Xge(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let o=n.hasOwnProperty(s)?n[s]:[];Array.isArray(o)||(o=[o]),r.push(o)}return r}}const Yge="layers-model";class uf extends ya{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ge("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Dge(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Age(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof wu))throw new ge("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new ge(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(i3(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ge(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>i3(a))}else{const i=i3(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],vd("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=Xge(e.metrics,this.outputNames),o=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};vd("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=s[i];(c=>{const u="";let h,p,m;for(const g of c){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const w=this.internalOutputShapes[i];w[w.length-1]===1||this.lossFunctions[i]===Pv?["accuracy","acc"].indexOf(g)!==-1?p=Lz:["crossentropy","ce"].indexOf(g)!==-1&&(p=wge):this.lossFunctions[i]===xx?["accuracy","acc"].indexOf(g)!==-1?p=kge:["crossentropy","ce"].indexOf(g)!==-1&&(p=Vz):["accuracy","acc"].indexOf(g)!==-1?p=_z:["crossentropy","ce"].indexOf(g)!==-1&&(p=Bz);let k;["accuracy","acc"].indexOf(g)!==-1?k="acc":["crossentropy","ce"].indexOf(g)!==-1&&(k="ce"),m=p,h=u+k}else m=Rge(g),h=u+Uy(g);let x;vd(h,()=>{x=m}),o(i,h,x)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;a3(s);const i=this.standardizeUserDataXY(e,n,!0,s);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return No(c)}finally{ma(i[0],e),ma(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Hge(this,e,n)}checkNumSamples(e,n,r,s="steps"){let o;if(r!=null){if(o=null,n!=null)throw new ge(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new ge(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return o}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ge("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],o=this.retrieveSymbolicTensors(s),i=new qc;if(e instanceof ts&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ge(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ge(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const a=D0(o,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Md(null,e.length);let r=e.length;for(const s of this.layers){const o=Array.isArray(s.output)?s.output:[s.output],i=o.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=o[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((o,i)=>{o==null&&s.push(e[i])}),new ge(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return De(()=>{const s=this.checkNumSamples(e);if(r)throw new Jt("Verbose predictLoop() is not implemented yet.");const o=l3(s,n),i=this.outputs.map(a=>[]);for(let a=0;a<o.length;++a)De(()=>{const c=o[a][0],u=o[a][1],h=w0(e,c,u),p=[];if(Array.isArray(h))for(let g=0;g<h.length;++g)p.push({key:this.inputs[g],value:h[g]});else p.push({key:this.inputs[0],value:h});const m=new qc(p);return D0(this.outputs,m)}).forEach((c,u)=>i[u].push(c));return No(i.map(a=>Ro(a,0)))})}predict(e,n={}){const r=qz(e);pE(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return a3(s),this.predictLoop(r,s)}finally{ma(r,e)}}predictOnBatch(e){pE(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Wi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===xx?o.push(a.slice(0,a.length-1).concat([1])):o.push(a)}if(e=fE(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=fE(n,this.feedOutputNames,o,!1,"target"),qge(e,n),Kge(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ge(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,o=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,o,i);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=Uz(s,this.outputNames);c=[];for(let h=0;h<u.length;++h)c.push(await Hz(l[h],null,u[h]))}return[a,l,c]}testLoop(e,n,r,s=0,o){return De(()=>{const i=this.checkNumSamples(n,r,o,"steps"),a=[];if(s>0)throw new Jt("Verbose mode is not implemented yet.");if(o!=null)throw new Jt("steps mode in testLoop() is not implemented yet");{const l=l3(i,r),c=Eo(Ia(0,i));for(let u=0;u<l.length;++u){const h=l[u][0],p=l[u][1],m=wd(c,h,p-h),g=Lk(n,m),x=e(g);if(u===0)for(let w=0;w<x.length;++w)a.push(Pn(0));for(let w=0;w<x.length;++w){const k=x[w];a[w]=st(a[w],xe(p-h,k))}}for(let u=0;u<a.length;++u)a[u]=zt(a[u],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let o=s;if(QN(e,s)>1){const i=QN(e.slice(0,r),s);o+=`_${i}`}n.push(o)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const h=[];for(let x=0;x<this.inputs.length;++x)h.push({key:this.inputs[x],value:r[x]});const p=new qc(h),m=D0(this.outputs,p,{training:!0});let g;for(let x=0;x<this.lossFunctions.length;++x){const w=this.lossFunctions[x];let k=w(s[x],m[x]);o[x]!=null&&(k=_ge(k,o[x]));const S=Xr(k);n.push(S),x===0?g=k:g=st(g,k)}for(let x=0;x<this.metricsTensors.length;++x){let w;if(this.outputs.length>1&&x<this.outputs.length)w=n[x];else{const k=this.metricsTensors[x][0],S=this.metricsTensors[x][1];w=Xr(k(s[S],m[S]))}sl(w),i.push(w)}return g=Xr(g),this.calculateLosses().forEach(x=>{g=st(g,x)}),g},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>De(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:s[c]});const a=new qc(i),l=D0(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],h=Xr(u(o[c],l[c]));c===0?r=h:r=st(r,h),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],h=this.metricsTensors[c][1],p=Xr(u(o[h],l[h]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,o,i,a,l,c,u,h,p;try{const m=r.batchSize==null?32:r.batchSize;a3(m);const x=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,m);s=x[0],o=x[1],p=x[2];let w=!1,k;if(r.validationData!=null&&r.validationData.length>0){if(w=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Jt("validationData including sample weights is not supported yet."):new ge(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,m);u=R[0],h=R[1],k=u.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){w=!0;const W=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];u=w0(s,W,R),i=s,s=w0(s,0,W),h=w0(o,W,R),a=o,o=w0(o,0,W),k=u.concat(h)}else r.validationSteps!=null&&(w=!0);const S=s.concat(o).concat(p);this.checkTrainableWeightsConsistency();const $=this.makeTrainFunction(),T=this.getDedupedMetricsNames();let E,F;w?(this.makeTestFunction(),E=this.testFunction,F=T.slice().concat(T.map(W=>"val_"+W))):(E=null,k=[],F=T.slice());const V=Oz(r.callbacks,r.yieldEvery);return await this.fitLoop($,S,T,m,r.epochs,r.verbose,V,E,k,r.shuffle,F,r.initialEpoch,null,null)}finally{this.isTraining=!1,ma(s,e),ma(o,n),ma(i,e),ma(a,n),ma(u,l),ma(h,c),p!=null&&hn(p)}}async fitLoop(e,n,r,s,o,i,a,l,c,u,h,p,m,g){s==null&&(s=32),o==null&&(o=1),u==null&&(u=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),g!=null&&(x=!0,m==null))throw new ge("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const w=this.checkNumSamples(n,s,m,"steps_per_epoch");let k;w!=null&&(k=Ia(0,w)),i==null&&(i=1);const{callbackList:S,history:$}=Fz(a,i,o,p,w,m,s,x,h);S.setModel(this),this.history=$,await S.onTrainBegin(),this.stopTraining_=!1;for(let T=p;T<o;++T){await S.onEpochBegin(T);const E={};if(m!=null)throw new Jt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Jt("batch shuffling is not implemneted yet");u&&Mae(k);const F=Eo(k),V=l3(w,s);for(let j=0;j<V.length;++j){const W={};if(await S.onBatchBegin(j,W),De(()=>{const R=V[j][0],O=V[j][1],U=wd(F,R,O-R);W.batch=j,W.size=O-R;const K=Lk(n,U),G=e(K);for(let Y=0;Y<r.length;++Y){const Z=r[Y],ne=G[Y];W[Z]=ne,sl(ne)}if(j===V.length-1&&x){const Y=this.testLoop(l,c,s);for(let Z=0;Z<r.length;++Z){const ne=r[Z],J=Y[Z];sl(J),E["val_"+ne]=J}}}),await S.onBatchEnd(j,W),Mz(W),this.stopTraining_)break}F.dispose()}if(await S.onEpochEnd(T,E),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return jge(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],o=r[1],a=this.makeTrainFunction()(s.concat(o)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return hn(a),ma(r[0],e),ma(r[1],n),No(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,o=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||n.push({name:s[i].originalName,tensor:o[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=IN().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-IN().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Hl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Hl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Hl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Hl(Uy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Hl(Uy(e)));{const e={};for(const n in this.metrics)e[n]=Hl(Uy(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Fk(e.optimizer_config),r=Ql(n);let s;if(typeof e.loss=="string")s=ld(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>ld(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=ld(e.loss[i])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(i=>ld(i));else if(e.metrics!=null){o={};for(const i in e.metrics)o[i]=ld(e.metrics[i])}this.compile({loss:s,metrics:o,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=Ele(e);if(c.length===0)throw new ge(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ge(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ge("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await NN(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Yge,generatedBy:`TensorFlow.js tfjs-layers v${Wz}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:h}=await NN(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=Nle([r.data,u])}return this.userDefinedMetadata!=null&&(cE(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){cE(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}uf.className="Model";Je(uf);class Kz extends uf{}Kz.className="Functional";Je(Kz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mf extends uf{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Ev("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ge(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Mf||e instanceof uf;let r;if(n){if(r=e,r.outputs.length!==1)throw new ge("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ge("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ge("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=Qme({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ge(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ge("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Ez(this.outputs[0])}this.inboundNodes=[],new Av({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Md(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Tn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new uf({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Wi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Wi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Wi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Wi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let o,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ge("Legacy serialization format not supported yet.");o=n}else oe(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof Mf))throw new Jt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of o){const u=Ql(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new ge("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ge("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Mf.className="Sequential";Je(Mf);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zge(t){return new Mf(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let eo=class extends np{getConfig(){return{}}};class Xz extends eo{apply(e,n=1){return Fme(e,n)}}Xz.className="elu";Je(Xz);class Yz extends eo{apply(e){return fF(e)}}Yz.className="selu";Je(Yz);class Zz extends eo{apply(e){return Wd(e)}}Zz.className="relu";Je(Zz);class Qz extends eo{apply(e){return De(()=>ym(6,Wd(e)))}}Qz.className="relu6";Je(Qz);class Jz extends eo{apply(e){return e}}Jz.className="linear";Je(Jz);class eL extends eo{apply(e){return Jf(e)}}eL.className="sigmoid";Je(eL);class tL extends eo{apply(e){return Lme(e)}}tL.className="hardSigmoid";Je(tL);class nL extends eo{apply(e){return Ug(e)}}nL.className="softplus";Je(nL);class rL extends eo{apply(e){return zme(e)}}rL.className="softsign";Je(rL);class sL extends eo{apply(e){return xv(e)}}sL.className="tanh";Je(sL);let q6=class extends eo{apply(e,n=-1){return YS(e,n)}};q6.className="softmax";Je(q6);class oL extends eo{apply(e,n=-1){return oF(e,n)}}oL.className="logSoftmax";Je(oL);class iL extends eo{apply(e){return De(()=>De(()=>{const n=Math.sqrt(2),r=xe(.5,st(1,eF(zt(e,n))));return xe(e,r)}))}}iL.className="gelu";Je(iL);class aL extends eo{apply(e){return De(()=>xe(.5,xe(e,st(1,xv(xe(Qs(zt(2,Math.PI)),st(e,xe(.044715,Ad(e,3)))))))))}}aL.className="gelu_new";Je(aL);class lL extends eo{apply(e){return De(()=>xe(e,xv(Ug(e))))}}lL.className="mish";Je(lL);class cL extends eo{apply(e,n=1){return De(()=>xe(Jf(xe(e,n)),e))}}cL.className="swish";Je(cL);function lu(t){return t.getClassName()}function c3(t,e={}){return Zg(t,ji.getMap().classNameMap,e,"activation")}function cu(t){if(t==null){const e={};return e.className="linear",e.config={},c3(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},c3(e)}else return t instanceof eo?t:c3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qge(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class uL extends np{}class dL extends uL{constructor(e){super(),Qge(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return De(()=>{let n=ws([1]);return this.hasL1&&(n=st(n,Ft(xe(this.l1,fo(e))))),this.hasL2&&(n=st(n,Ft(xe(this.l2,Jg(e))))),Ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}dL.className="L1L2";Je(dL);const mE={l1l2:"L1L2"};function Xn(t){return P6(t)}function gE(t,e={}){return Zg(t,ji.getMap().classNameMap,e,"regularizer")}function gr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in mE?mE[t]:t,config:{}};return gE(n)}else return t instanceof uL?t:gE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hL extends ln{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=jt(e);let r=Wd(e);return this.maxValue!=null&&(r=bi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}hL.className="ReLU";Je(hL);class fL extends ln{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=jt(e);return BS(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}fL.className="LeakyReLU";Je(fL);class pL extends ln{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=pr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=gr(e.alphaRegularizer),this.alphaConstraint=os(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ge(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Tn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new rs({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=jt(e),GS(e,this.alpha.read())}getConfig(){const e={alphaInitializer:kr(this.alphaInitializer),alphaRegularizer:Xn(this.alphaRegularizer),alphaConstraint:ss(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}pL.className="PReLU";Je(pL);let mL=class extends ln{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Jt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=jt(e);return kv(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};mL.className="ELU";Je(mL);class gL extends ln{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=jt(e);return xe(r,yt(xi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}gL.className="ThresholdedReLU";Je(gL);class yL extends ln{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new q6().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return De(()=>{let r=jt(e);const s=n.mask;if(s!=null){const o=xe(Bt(vu(r.shape),yt(s,r.dtype)),Pn(-1e9));r=st(r,o)}return this.axis instanceof Array?this.axis.length>1?dl(Bt(r,iF(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}yL.className="Softmax";Je(yL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function df(t,e,n){if(typeof t=="number")return Md(t,e);if(t.length!==e)throw new ge(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!Dme(s))throw new ge(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Ta(t,e,n,r,s=1){if(t==null)return t;const o=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-o+1,Math.floor((i+r-1)/r)}function qa(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+au([n-e,0]);else if(r==="same")t=t*e;else throw new ge(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K6(t,e){return De(()=>(Vr(e),e==="channelsFirst"?vn(t,[0,2,3,1]):t))}function bL(t,e){return De(()=>(Vr(e),e==="channelsFirst"?vn(t,[0,2,3,4,1]):t))}function Jge(t,e,n,r=1,s="valid",o,i=1){return De(()=>{if(o==null&&(o=$a()),Vr(o),t.shape.length!==3)throw new ge(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ge(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ge(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(o==="channelsFirst"&&(t=vn(t,[0,2,1])),s==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=XO(t,e,r,s==="same"?"same":"valid","NWC",i);return n!=null&&(a=Ea(a,n)),a})}function yE(t,e,n,r=[1,1],s="valid",o,i,a=null){return De(()=>{if(o==null&&(o=$a()),Vr(o),t.rank!==3&&t.rank!==4)throw new ge(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ge(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=K6(t,o);if(s==="causal")throw new Jt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=lfe({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),o==="channelsFirst"&&(l=vn(l,[0,3,1,2])),l})}function e1e(t,e,n,r=[1,1,1],s="valid",o,i){return De(()=>{if(o==null&&(o=$a()),Vr(o),t.rank!==4&&t.rank!==5)throw new ge(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ge(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=bL(t,o);if(s==="causal")throw new Jt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=oue(a,e,r,s==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Ea(a,n)),o==="channelsFirst"&&(a=vn(a,[0,4,1,2,3])),a})}class Mv extends ln{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Mv.verifyArgs(n),this.rank=e,ks(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Jt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=df(n.kernelSize,e,"kernelSize"),this.strides=df(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,vi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vr(this.dataFormat),this.activation=cu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=pr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=os(n.biasConstraint),this.biasRegularizer=gr(n.biasRegularizer),this.activityRegularizer=gr(n.activityRegularizer),this.dilationRate=df(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ge(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ge(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ge(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ga("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!M6(e.kernelSize,"number",1,3))throw new ge(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:lu(this.activation),useBias:this.useBias,biasInitializer:kr(this.biasInitializer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),biasConstraint:ss(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class rp extends Mv{constructor(e,n){super(e,n),this.kernel=null,rp.verifyArgs(n),this.filters=n.filters,ks(this.filters,"filters"),this.kernelInitializer=pr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=os(n.kernelConstraint),this.kernelRegularizer=gr(n.kernelRegularizer)}build(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ge(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return De(()=>{e=jt(e);let r;const s=this.bias==null?null:this.bias.read(),o=pz(this.activation.getClassName());if(o!=null&&this.rank===2)r=yE(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)r=Jge(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=yE(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=e1e(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Jt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Tn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<r.length;++o){const i=Ta(r[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:kr(this.kernelInitializer),kernelRegularizer:Xn(this.kernelRegularizer),kernelConstraint:ss(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ge(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class r1 extends rp{constructor(e){super(2,e),r1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!M6(e.kernelSize,"number",1,2))throw new ge(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}r1.className="Conv2D";Je(r1);class s1 extends rp{constructor(e){super(3,e),s1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ge(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}s1.className="Conv3D";Je(s1);class xL extends r1{constructor(e){if(super(e),this.inputSpec=[new rs({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ge(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==4)throw new ge("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ge("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new rs({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{let r=jt(e);if(r.shape.length!==4)throw new ge(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=s[i],c=s[a],u=this.kernelSize[0],h=this.kernelSize[1],p=this.strides[0],m=this.strides[1],g=qa(l,p,u,this.padding),x=qa(c,m,h,this.padding),w=[o,g,x,this.filters];this.dataFormat!=="channelsLast"&&(r=vn(r,[0,2,3,1]));let k=YO(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(k=vn(k,[0,3,1,2])),this.bias!=null&&(k=Ea(k,this.bias.read(),this.dataFormat)),this.activation!=null&&(k=this.activation.apply(k)),k})}computeOutputShape(e){e=Tn(e);const n=e.slice();let r,s,o;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3):(r=3,s=1,o=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=qa(n[s],l,i,this.padding),n[o]=qa(n[o],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}xL.className="Conv2DTranspose";Je(xL);class vL extends s1{constructor(e){if(super(e),this.inputSpec=[new rs({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ge(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==5)throw new ge("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ge("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new rs({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{let r=jt(e);if(r.shape.length!==5)throw new ge(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const c=s[l],u=s[i],h=s[a],p=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],x=this.strides[0],w=this.strides[1],k=this.strides[2],S=qa(c,x,p,this.padding),$=qa(u,w,m,this.padding),T=qa(h,k,g,this.padding),E=[o,S,$,T,this.filters];this.dataFormat!=="channelsLast"&&(r=vn(r,[0,2,3,4,1]));let F=lue(r,this.kernel.read(),E,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(F=vn(F,[0,4,1,2,3])),this.bias!==null&&(F=Ea(F,this.bias.read(),this.dataFormat)),this.activation!==null&&(F=this.activation.apply(F)),F})}computeOutputShape(e){e=Tn(e);const n=e.slice();let r,s,o,i;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3,i=4):(r=4,s=1,o=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],h=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[s]=qa(n[s],u,a,this.padding),n[o]=qa(n[o],h,l,this.padding),n[i]=qa(n[i],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}vL.className="Conv3DTranspose";Je(vL);class wL extends rp{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ge("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ge("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ge(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=pr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=gr(n.depthwiseRegularizer),this.depthwiseConstraint=os(n.depthwiseConstraint),this.pointwiseInitializer=pr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=gr(n.pointwiseRegularizer),this.pointwiseConstraint=os(n.pointwiseConstraint)}build(e){if(e=Tn(e),e.length<this.rank+2)throw new ge(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ge(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new rs({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return De(()=>{e=jt(e);let r;if(this.rank===1)throw new Jt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=vn(e,[0,2,3,1])),r=pF(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ea(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=vn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=kr(this.depthwiseInitializer),e.pointwiseInitializer=kr(this.pointwiseInitializer),e.depthwiseRegularizer=Xn(this.depthwiseRegularizer),e.pointwiseRegularizer=Xn(this.pointwiseRegularizer),e.depthwiseConstraint=ss(this.depthwiseConstraint),e.pointwiseConstraint=ss(this.pointwiseConstraint),e}}wL.className="SeparableConv";class kL extends wL{constructor(e){super(2,e)}}kL.className="SeparableConv2D";Je(kL);class Ov extends rp{constructor(e){super(1,e),Ov.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!M6(e.kernelSize,"number",1,1))throw new ge(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Ov.className="Conv1D";Je(Ov);class CL extends ln{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return De(()=>{if(e=jt(e),this.dataFormat==="channelsLast"){const r=Wy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wy(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Wy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wy(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}CL.className="Cropping2D";Je(CL);class SL extends ln{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Eme(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return De(()=>{let r=jt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=vn(r,[0,2,3,1]);const o=this.size[0]*s[2],i=this.size[1]*s[3],a=this.interpolation==="nearest"?Kl.resizeNearestNeighbor(r,[o,i]):Kl.resizeBilinear(r,[o,i]);return vn(a,[0,3,1,2])}else{const o=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?Kl.resizeNearestNeighbor(r,[o,i]):Kl.resizeBilinear(r,[o,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}SL.className="UpSampling2D";Je(SL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t1e(t,e,n=[1,1],r="valid",s,o){return De(()=>{s==null&&(s=$a()),Vr(s);let i=K6(t,s);if(t.rank!==4)throw new ge(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ge(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=FS(i,e,n,r==="same"?"same":"valid","NHWC",o),s==="channelsFirst"&&(i=vn(i,[0,3,1,2])),i})}class TL extends Mv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=pr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=os(e.depthwiseConstraint),this.depthwiseRegularizer=gr(e.depthwiseRegularizer)}build(e){if(e=Tn(e),e.length<4)throw new ge(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ge(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{e=jt(e);let r=t1e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ea(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=Ta(n,this.kernelSize[0],this.padding,this.strides[0]),i=Ta(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,o,i]:[e[0],o,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=kr(this.depthwiseInitializer),e.depthwiseRegularizer=Xn(this.depthwiseRegularizer),e.depthwiseConstraint=ss(this.depthwiseRegularizer),e}}TL.className="DepthwiseConv2D";Je(TL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IL(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ge("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(o){return o==null||Array.isArray(o)?o:[o]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function $L(t,e,n,r=!1,s,o,i=!1,a=!1){return De(()=>{const l=e.shape.length;if(l<3)throw new ge(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Ia(2,l));e=vn(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=yt(yt(s,"bool"),"float32"),s.rank===l-1&&(s=$o(s,-1)),s=vn(s,c)),r&&(e=Dd(e,0),s!=null&&(s=Dd(s,0)));const u=[];let h,p=n;const m=e.shape[0],g=Pd(e);let x;s!=null&&(x=Pd(s));for(let k=0;k<m;++k){const S=g[k],$=De(()=>t(S,p));if(s==null)h=$[0],p=$[1];else{const T=De(()=>{const E=x[k],F=Bt(Yi(E),E),V=st(xe($[0],E),xe(p[0],F)),j=p.map((W,R)=>st(xe($[1][R],E),xe(W,F)));return{output:V,newStates:j}});h=T.output,p=T.newStates}a&&u.push(h)}let w;return a&&(w=lc(u,1)),[h,w,p]})}class ku extends ln{constructor(e){super(e);let n;if(e.cell==null)throw new ge("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new Z6({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ge("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new rs({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ia(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Pk(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const o=[];for(const i of n)o.push([e[0],i]);return[s].concat(o)}else return s}computeMask(e,n){return De(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(o=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Jt("Constants support is not implemented in RNN yet.");Pk(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new rs({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!Mn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),o))throw new ge(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(i=>new rs({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){De(()=>{if(!this.stateful)throw new Ha("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ge("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ws([r,s])):this.states_=[ws([r,this.cell.stateSize])];else if(e==null)hn(this.states_),this.keptStates!=null&&(hn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ws([r,s])):this.states_[0]=ws([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ge(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):hn(this.states_);for(let s=0;s<this.states_.length;++s){const o=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,i];if(!Mn(o.shape,a))throw new ge(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${o.shape}`);this.states_[s]=o}}this.states_=this.states_.map(s=>sl(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=IL(e,r,s,this.numConstants);e=o.inputs,r=o.initialState,s=o.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new rs({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof fl){const c=[e].concat(i),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return De(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let o=n==null?null:n.initialState;e=jt(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==i)throw new ge(`RNN Layer has ${i} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=$L((g,x)=>{const w=this.cell.call([g].concat(x),a);return[w[0],w.slice(1)]},e,o,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],h=c[1],p=c[2];this.stateful&&this.resetStates(p,s);const m=this.returnSequences?h:u;return this.returnState?[m].concat(p):m})}getInitialState(e){return De(()=>{let n=ws(e.shape);return n=Ft(n,[1,2]),n=Qg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?Ak(n,[1,r]):n):this.cell.stateSize>1?[Ak(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===ku.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,o=Ql(s,r);return new e(Object.assign(n,{cell:o}))}}ku.className="RNN";Je(ku);class Fv extends ln{}class X6 extends Fv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ks(this.units,"units"),this.activation=cu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=pr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=pr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=pr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=gr(e.kernelRegularizer),this.recurrentRegularizer=gr(e.recurrentRegularizer),this.biasRegularizer=gr(e.biasRegularizer),this.kernelConstraint=os(e.kernelConstraint),this.recurrentConstraint=os(e.recurrentConstraint),this.biasConstraint=os(e.biasConstraint),this.dropout=Pf([1,au([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pf([1,au([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{if(e=e,e.length!==2)throw new ge(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uu({ones:()=>Yi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uu({ones:()=>Yi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let o;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?o=al(xe(e,i),this.kernel.read()):o=al(e,this.kernel.read()),this.bias!=null&&(o=Ea(o,this.bias.read())),a!=null&&(r=xe(r,a));let l=st(o,al(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lu(this.activation),useBias:this.useBias,kernelInitializer:kr(this.kernelInitializer),recurrentInitializer:kr(this.recurrentInitializer),biasInitializer:kr(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:ss(this.kernelConstraint),recurrentConstraint:ss(this.recurrentConstraint),biasConstraint:ss(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}X6.className="SimpleRNNCell";Je(X6);class NL extends ku{constructor(e){e.cell=new X6(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return new e(n)}}NL.className="SimpleRNN";Je(NL);class Y6 extends Fv{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ge("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ks(this.units,"units"),this.activation=cu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=pr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=pr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=pr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=gr(e.kernelRegularizer),this.recurrentRegularizer=gr(e.recurrentRegularizer),this.biasRegularizer=gr(e.biasRegularizer),this.kernelConstraint=os(e.kernelConstraint),this.recurrentConstraint=os(e.recurrentConstraint),this.biasConstraint=os(e.biasConstraint),this.dropout=Pf([1,au([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pf([1,au([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return De(()=>{if(e=e,e.length!==2)throw new ge(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uu({ones:()=>Yi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uu({ones:()=>Yi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=xe(e,o[0]));let u=al(e,this.kernel.read());this.useBias&&(u=Ea(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=xe(s,i[0]));const h=this.recurrentKernel.read(),[p,m]=pi(h,[2*this.units,this.units],h.rank-1),g=al(s,p),[x,w,k]=pi(u,3,u.rank-1),[S,$]=pi(g,2,g.rank-1);a=this.recurrentActivation.apply(st(x,S)),l=this.recurrentActivation.apply(st(w,$));const T=al(xe(l,s),m);c=this.activation.apply(st(k,T));const E=st(xe(a,s),xe(st(1,Lr(a)),c));return[E,E]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lu(this.activation),recurrentActivation:lu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kr(this.kernelInitializer),recurrentInitializer:kr(this.recurrentInitializer),biasInitializer:kr(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:ss(this.kernelConstraint),recurrentConstraint:ss(this.recurrentConstraint),biasConstraint:ss(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}Y6.className="GRUCell";Je(Y6);class EL extends ku{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Y6(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}EL.className="GRU";Je(EL);class zv extends Fv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ks(this.units,"units"),this.activation=cu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=pr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=pr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=pr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=gr(e.kernelRegularizer),this.recurrentRegularizer=gr(e.recurrentRegularizer),this.biasRegularizer=gr(e.biasRegularizer),this.kernelConstraint=os(e.kernelConstraint),this.recurrentConstraint=os(e.recurrentConstraint),this.biasConstraint=os(e.biasConstraint),this.dropout=Pf([1,au([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pf([1,au([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Tn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,i=this.units;s=new(n=class extends Ji{apply(l,c){const u=o.apply([i]),h=new F6().apply([i]),p=o.apply([i*2]);return eE(eE(u,h),p)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return De(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ge(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uu({ones:()=>Yi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uu({ones:()=>Yi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,h;0<this.dropout&&this.dropout<1&&(e=xe(e,i[0]));let p=al(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=xe(s,a[0])),p=st(p,al(s,this.recurrentKernel.read())),this.useBias&&(p=Ea(p,this.bias.read()));const[m,g,x,w]=pi(p,4,p.rank-1);l=this.recurrentActivation.apply(m),c=this.recurrentActivation.apply(g),u=st(xe(c,o),xe(l,this.activation.apply(x))),h=this.recurrentActivation.apply(w);const k=xe(h,this.activation.apply(u));return[k,k,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lu(this.activation),recurrentActivation:lu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kr(this.kernelInitializer),recurrentInitializer:kr(this.recurrentInitializer),biasInitializer:kr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Xn(this.kernelRegularizer),recurrentRegularizer:Xn(this.recurrentRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:ss(this.kernelConstraint),recurrentConstraint:ss(this.recurrentConstraint),biasConstraint:ss(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}zv.className="LSTMCell";Je(zv);class RL extends ku{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new zv(e),super(e)}call(e,n){return De(()=>{this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}RL.className="LSTM";Je(RL);class Z6 extends Fv{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return De(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const o=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),o.push(i.slice(1))}r=[];for(const a of o.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){Pk(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{vd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=o=>({className:o.getClassName(),config:o.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const o of n.cells)s.push(Ql(o,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Mk(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,o=e.splice(s);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],o[i]])}W6(n)}}Z6.className="StackedRNNCells";Je(Z6);function uu(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:o}=t,i=()=>o!=null?o(e(),n):wz(e(),n),a=()=>e1(i,e,r);return!s||s<=1?sl(a().clone()):Array(s).fill(void 0).map(a).map(c=>sl(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var n1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class AL extends ku{constructor(e){if(e.unroll)throw new Jt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Jt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new rs({ndim:5})]}call(e,n){return De(()=>{if(this.cell.dropoutMask!=null&&(hn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(hn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ge("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return De(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)],i=ws(o);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){De(()=>{if(!this.stateful)throw new Ha("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)];if(r[0]==null)throw new ge("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ws(o)):this.states_=[ws(o)];else if(e==null)hn(this.states_),this.keptStates!=null&&(hn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ws(o)):this.states_[0]=ws(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ge(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):hn(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=o;if(!Mn(l.shape,c))throw new ge(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>sl(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:o,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],h=Ta(c,s[0],o,i[0],a[0]),p=Ta(u,s[1],o,i[1],a[1]);return[...e.slice(0,2),...l?[r,h,p]:[h,p,r]]}}AL.className="ConvRNN2D";class Q6 extends zv{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:o,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,ks(this.filters,"filters"),this.kernelSize=df(r,2,"kernelSize"),this.kernelSize.forEach(l=>ks(l,"kernelSize")),this.strides=df(s||1,2,"strides"),this.strides.forEach(l=>ks(l,"strides")),this.padding=o||"valid",vi(this.padding),this.dataFormat=i||"channelsLast",Vr(this.dataFormat),this.dilationRate=df(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>ks(l,"dilationRate"))}build(e){var n;e=Tn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ge(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],o=4,i=this.kernelSize.concat([s,this.filters*o]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Ji{apply(p,m){const g=c.apply([u]),x=vu([u]),w=c.apply([u*2]);return O6([g,x,w])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return De(()=>{if(e.length!==3)throw new ge(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],o=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=uu({ones:()=>Yi(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(se,q,le)=>!q||!q[le]?se:xe(q[le],se);let u=c(s,l,0),h=c(s,l,1),p=c(s,l,2),m=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=uu({ones:()=>Yi(o),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let x=c(o,g,0),w=c(o,g,1),k=c(o,g,2),S=c(o,g,3);const $=3,[T,E,F,V]=pi(this.kernel.read(),a,$),[j,W,R,O]=this.useBias?pi(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,T,j,this.padding),h=this.inputConv(h,E,W,this.padding),p=this.inputConv(p,F,R,this.padding),m=this.inputConv(m,V,O,this.padding);const[U,K,G,Y]=pi(this.recurrentKernel.read(),a,$);x=this.recurrentConv(x,U),w=this.recurrentConv(w,K),k=this.recurrentConv(k,G),S=this.recurrentConv(S,Y);const Z=this.recurrentActivation.apply(st(u,x)),ne=this.recurrentActivation.apply(st(h,w)),J=st(xe(ne,i),xe(Z,this.activation.apply(st(p,k)))),re=xe(this.recurrentActivation.apply(st(m,S)),this.activation.apply(J));return[re,re,J]})}getConfig(){const e=super.getConfig(),n=n1e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const o=Rd(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ea(o,r,this.dataFormat):o}recurrentConv(e,n){return Rd(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}Q6.className="ConvLSTM2DCell";Je(Q6);class DL extends AL{constructor(e){const n=new Q6(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}DL.className="ConvLSTM2D";Je(DL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class J6 extends ln{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,o=this.getNoiseShape(r);return e1(()=>wz(r,this.rate,o,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}J6.className="Dropout";Je(J6);class PL extends J6{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}PL.className="SpatialDropout1D";Je(PL);class e7 extends ln{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,ks(this.units,"units"),this.activation=cu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=pr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=pr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=os(e.kernelConstraint),this.biasConstraint=os(e.biasConstraint),this.kernelRegularizer=gr(e.kernelRegularizer),this.biasRegularizer=gr(e.biasRegularizer),this.activityRegularizer=gr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Tn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Tn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e),s=pz(this.activation.getClassName());let o;return s!=null?o=al(r,this.kernel.read(),s,this.bias?this.bias.read():null):(o=al(r,this.kernel.read()),this.bias!=null&&(o=Ea(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:lu(this.activation),useBias:this.useBias,kernelInitializer:kr(this.kernelInitializer),biasInitializer:kr(this.biasInitializer),kernelRegularizer:Xn(this.kernelRegularizer),biasRegularizer:Xn(this.biasRegularizer),activityRegularizer:Xn(this.activityRegularizer),kernelConstraint:ss(this.kernelConstraint),biasConstraint:ss(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}e7.className="Dense";Je(e7);class ML extends ln{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Tn(e);for(const n of e.slice(1))if(n==null)throw new ge(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Jc(e,1)]}call(e,n){return De(()=>{this.invokeCallHook(e,n);let r=jt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let o=2;o<r.rank;++o)s.push(o);s.push(1),r=vn(r,s)}return Ome(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}ML.className="Flatten";Je(ML);class OL extends ln{constructor(e){super(e),this.supportsMasking=!0,this.activation=cu(e.activation)}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e);return this.activation.apply(r)})}getConfig(){const e={activation:lu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}OL.className="Activation";Je(OL);class FL extends ln{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return De(()=>(e=jt(e),Pme(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}FL.className="RepeatVector";Je(FL);class zL extends ln{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let o=1,i=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(i===null)i=l;else throw new ge("Can only specifiy one unknown dimension.");else o*=c}const a=Jc(e);if(i!==null){if(o===0||a%o!==0)throw new ge(r);s[i]=a/o}else if(a!==o)throw new ge(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e),s=r.shape,o=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Ie(r,o)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}zL.className="Reshape";Je(zL);class LL extends ln{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ia(1,e.dims.length+1);if(!Mn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new rs({ndim:this.dims.length+1})]}computeOutputShape(e){e=Tn(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return vn(jt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}LL.className="Permute";Je(LL);class _L extends ln{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=jt(e);return Sk(dx(r,this.maskValue),-1)}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e),i=Sk(dx(r,this.maskValue),-1,!0);return xe(r,yt(i,r.dtype))})}}_L.className="Masking";Je(_L);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class BL extends ln{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Vn(e.inputLength))}this.inputDim=e.inputDim,ks(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ks(this.outputDim,"outputDim"),this.embeddingsInitializer=pr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=gr(e.embeddingsRegularizer),this.activityRegularizer=gr(e.activityRegularizer),this.embeddingsConstraint=os(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return De(()=>this.maskZero?(e=jt(e),dx(e,wn(e))):null)}computeOutputShape(e){if(e=Tn(e),this.inputLength==null)return[...e,this.outputDim];const n=Vn(this.inputLength);if(n.length!==e.length-1)throw new ge(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const o=n[s],i=e[s+1];if(o!=null&&i!=null&&o!==i)throw new ge(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return De(()=>{this.invokeCallHook(e,n);let r=jt(e);r.dtype!=="int32"&&(r=il(r,"int32"));const s=vz(this.embeddings.read(),Ie(r,[r.size]));return Ie(s,Tn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:kr(this.embeddingsInitializer),embeddingsRegularizer:Xn(this.embeddingsRegularizer),activityRegularizer:Xn(this.activityRegularizer),embeddingsConstraint:ss(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}BL.className="Embedding";Je(BL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gd extends ln{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Jt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const o=e[e.length-n.length+s],i=n[s];if(o==null||i==null||o<0||i<0)r.push(null);else if(o===1)r.push(i);else if(i===1)r.push(o);else{if(o!==i)throw new ge("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(o)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Tn(e)]),e=e,e.length<2)throw new ge(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const o of e)o!=null&&o[0]!==null&&n.push(o[0]);if(n=Qc(n),n.length>1)throw new ge(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){const i=e[o]==null?null:e[o].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(o=>o.length);e.indexOf(null)===-1&&Qc(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return De(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(o=>o.rank);if(s.indexOf(null)===-1){const o=au(s);for(let i of e){const a=i.rank;for(let l=0;l<o-a;++l)i=Qg(i,1);r.push(i)}return this.mergeFunction(r)}else{let o=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,h=u[0],p=u.slice(1).concat([h]);let m=Ie(l,[h].concat(Jc(u.slice(1))));m=vn(m,[1,0]),m=Ie(m,p),r.push(m),o=!0}else if(c>1){const u=Ia(1,c).concat([0]);r.push(vn(l,u)),o=!0}else r.push(l)}let i=this.mergeFunction(r);const a=i.rank;if(o){if(a==null){const l=i.shape,c=l.length,u=l[c-1],h=[u].concat(l.slice(0,l.length-1));i=Ie(vn(Ie(i,[-1,u]),[1,0]),h)}else if(a>1){const l=[a-1].concat(Ia(0,a-1));i=vn(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Qc(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return De(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ge("`mask` should be an Array");if(!Array.isArray(e))throw new ge("`inputs` should be an Array");if(n.length!==e.length)throw new ge(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:$o(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=ac(r,n[s]);return r})}}class VL extends Gd{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=st(n,e[r]);return n})}}VL.className="Add";Je(VL);class jL extends Gd{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=xe(n,e[r]);return n})}}jL.className="Multiply";Je(jL);class WL extends Gd{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=st(n,e[r]);return xe(1/e.length,n)})}}WL.className="Average";Je(WL);class UL extends Gd{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=xu(n,e[r]);return n})}}UL.className="Maximum";Je(UL);class HL extends Gd{constructor(e){super(e)}mergeFunction(e){return De(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=ym(n,e[r]);return n})}}HL.className="Minimum";Je(HL);class GL extends Gd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ge("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const o=e[s].slice();o.splice(this.axis,1);let i=!1;for(const a of r)if(Mn(a,o)){i=!0;break}i||r.push(o)}if(r.length>1)throw new ge("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return De(()=>O6(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ge("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const o of n.slice(1)){if(r[s]==null||o[s]==null){r[s]=null;break}r[s]+=o[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ge("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ge("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ge(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return De(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(yt(Yi(e[i]),"bool")):n[i].rank<e[i].rank?s.push($o(n[i],-1)):s.push(n[i]);const o=Ro(s,this.axis);return KO(o,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}GL.className="Concatenate";Je(GL);function k0(t,e){for(;t<0;)t+=e;return t}function r1e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Jt("batchDot is not implemented for tensors of 4D or higher rank yet");if(oe(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),oe(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Jt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const o=n;return De(()=>{let i;if(r>s){i=r-s;const l=[];for(let c=0;c<i;++c)l.push(1);e=Ie(e,e.shape.concat(l))}else if(s>r){i=s-r;const l=[];for(let c=0;c<i;++c)l.push(1);t=Ie(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)o[0]===o[1]?a=Ft(xe(t,e),o[0]):a=Ft(xe(vn(t,[1,0]),e),o[1]);else{const l=o[0]!==t.shape.length-1,c=o[1]===e.shape.length-1;a=Dn(t,e,l,c)}if(i>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+i;++u)c.push(u);a=Gg(a,c)}return a.shape.length===1&&(a=$o(a,1)),a})}class qL extends Gd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){oe(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ge(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ge(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((o,i)=>k0(o,e[i].shape.length)):s=[k0(this.axes,n.shape.length),k0(this.axes,r.shape.length)],this.normalize&&(n=bx(n,s[0]),r=bx(r,s[1])),r1e(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[k0(this.axes,e.length),k0(this.axes,n.length)],r}computeOutputShape(e){oe(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Jt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const o=n.concat(r);return o.length===1&&o.push(1),o}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}qL.className="Dot";Je(qL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KL extends ln{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e);return e1(()=>st(Rv(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}KL.className="GaussianNoise";Je(KL);class XL extends ln{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return De(()=>{this.invokeCallHook(e,n);const r=jt(e);return this.rate>0&&this.rate<1?e1(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return xe(r,Rv(r.shape,1,o))},()=>r,n.training||!1):r})}}XL.className="GaussianDropout";Je(XL);class YL extends ln{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||jt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return De(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return e1(()=>{const o=jt(e),l=-1.6732632423543772*1.0507009873554805;let c=jd(Hg(r),this.rate);c=il(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,h=-u*l*this.rate,p=st(xe(o,c),xe(st(c,-1),l));return st(xe(p,u),h)},()=>jt(e),n.training||!1)}return e})}}YL.className="AlphaDropout";Je(YL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wm(t,e,n,r,s,o=.001){let i;if(t.rank===2)i=Oce(t,e,n,r,s,o);else if(t.rank===3)i=zce(t,e,n,r,s,o);else if(t.rank===4)i=_ce(t,e,n,r,s,o);else throw new Jt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function s1e(t,e,n,r,s=.001){return De(()=>{const o=WS(t,r),i=o.mean,a=o.variance;return[wm(t,i,a,n,e,s),i,a]})}function o1e(t,e,n,r,s=.001){return De(()=>{const o=WS(t,r),i=o.mean,a=o.variance,l=[];for(const g of Ia(0,t.rank))r.indexOf(g)!==-1?l.push(1):l.push(t.shape[g]);const c=Ie(i,l),u=Ie(a,l),h=e==null?null:Ie(e,l),p=n==null?null:Ie(n,l);return[wm(t,c,u,p,h,s),i,a]})}function i1e(t,e,n,r,s=.001){return Mn(r.slice().sort(),Ia(0,t.rank-1))?s1e(t,e,n,r,s):o1e(t,e,n,r,s)}class ZL extends ln{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=pr(e.betaInitializer||"zeros"),this.gammaInitializer=pr(e.gammaInitializer||"ones"),this.movingMeanInitializer=pr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=pr(e.movingVarianceInitializer||"ones"),this.betaConstraint=os(e.betaConstraint),this.gammaConstraint=os(e.gammaConstraint),this.betaRegularizer=gr(e.betaRegularizer),this.gammaRegularizer=gr(e.gammaRegularizer)}build(e){e=Tn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ge(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new rs({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return De(()=>{const r=n.training==null?!1:n.training,s=jt(e),o=s.shape,i=o.length,a=Ia(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const c=Md(1,i);c[l]=o[l];const u=a.slice();u.sort();const h=!Mn(u,Ia(0,i).slice(0,i-1)),p=()=>{if(h){const S=Ie(this.movingMean.read(),c),$=Ie(this.movingVariance.read(),c),T=this.center?Ie(this.beta.read(),c):null,E=this.scale?Ie(this.gamma.read(),c):null;return wm(s,S,$,T,E,this.epsilon)}else return wm(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[m,g,x]=i1e(s,this.gamma.read(),this.beta.read(),a,this.epsilon),w=(S,$,T)=>{De(()=>{const E=1-T,F=S.read(),V=xe(Bt(F,$),E);S.write(Bt(F,V))})};return(()=>{w(this.movingMean,g,this.momentum),w(this.movingVariance,x,this.momentum)})(),m})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kr(this.betaInitializer),gammaInitializer:kr(this.gammaInitializer),movingMeanInitializer:kr(this.movingMeanInitializer),movingVarianceInitializer:kr(this.movingVarianceInitializer),betaRegularizer:Xn(this.betaRegularizer),gammaRegularizer:Xn(this.gammaRegularizer),betaConstraint:ss(this.betaConstraint),gammaConstraint:ss(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}ZL.className="BatchNormalization";Je(ZL);class QL extends ln{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=pr(e.betaInitializer||"zeros"),this.gammaInitializer=pr(e.gammaInitializer||"ones"),this.betaRegularizer=gr(e.betaRegularizer),this.gammaRegularizer=gr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Tn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=n);for(const o of this.axis)if(o<0||o>=n)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==Qc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(o=>e[o]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=jt(e),s=r.shape,o=s.length;return De(()=>{let{mean:a,variance:l}=WS(r,this.axis,!0);const c=Md(1,o);for(const x of this.axis)c[x]=s[x];const u=x=>x!=null&&x.shape.length!==o?Ie(x,c):x;let h=this.scale?u(this.gamma.read()):null,p=this.center?u(this.beta.read()):null;const m=[],g=[];for(let x=0;x<o;++x)this.axis.indexOf(x)!==-1?(m.push(s[x]),g.push(1)):(m.push(1),g.push(s[x]));return a=ka(a,m),l=ka(l,m),h!=null&&(h=ka(h,g)),p!=null&&(p=ka(p,g)),wm(r,a,l,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kr(this.betaInitializer),gammaInitializer:kr(this.gammaInitializer),betaRegularizer:Xn(this.betaRegularizer),gammaRegularizer:Xn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}QL.className="LayerNormalization";Je(QL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a1e(t,e,n){return De(()=>{if(t.rank!==4)throw new ge(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ge("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=$a()),n!=="channelsLast"&&n!=="channelsFirst")throw new ge(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],US(t,r)})}class JL extends ln{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?$a():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ge(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ge(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ge(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new rs({ndim:4})]}computeOutputShape(e){e=Tn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return De(()=>a1e(jt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}JL.className="ZeroPadding2D";Je(JL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lv(t,e,n,r,s,o){return De(()=>{Vr(s),gz(o),vi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=$a()),o==null&&(o="max"),t=K6(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=jS(t,e,n,a):i=DS(t,e,n,a),s==="channelsFirst"&&(i=vn(i,[0,3,1,2])),i})}function e_(t,e,n,r,s,o){return De(()=>{Vr(s),gz(o),vi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=$a()),o==null&&(o="max"),t=bL(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=Cde(t,e,n,a):i=Tce(t,e,n,a),s==="channelsFirst"&&(i=vn(i,[0,4,1,2,3])),i})}class t_ extends ln{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ge(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(ks(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ge(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);ks(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,vi(this.padding),this.inputSpec=[new rs({ndim:3})]}computeOutputShape(e){e=Tn(e);const n=Ta(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return De(()=>{this.invokeCallHook(e,n),e=Qg(jt(e),2);const r=this.poolingFunction(jt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Gg(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class n_ extends t_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),Lv(e,n,r,s,o,"max")}}n_.className="MaxPooling1D";Je(n_);class r_ extends t_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),Lv(e,n,r,s,o,"avg")}}r_.className="AveragePooling1D";Je(r_);class s_ extends ln{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ge(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ks(this.poolSize,"poolSize"),ks(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vr(this.dataFormat),vi(this.padding),this.inputSpec=[new rs({ndim:4})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ta(n,this.poolSize[0],this.padding,this.strides[0]),r=Ta(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return De(()=>(this.invokeCallHook(e,n),this.poolingFunction(jt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class o_ extends s_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),Lv(e,n,r,s,o,"max")}}o_.className="MaxPooling2D";Je(o_);class i_ extends s_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),Lv(e,n,r,s,o,"avg")}}i_.className="AveragePooling2D";Je(i_);class a_ extends ln{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ge(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ks(this.poolSize,"poolSize"),ks(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vr(this.dataFormat),vi(this.padding),this.inputSpec=[new rs({ndim:5})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ta(n,this.poolSize[0],this.padding,this.strides[0]),r=Ta(r,this.poolSize[1],this.padding,this.strides[1]),s=Ta(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return De(()=>(this.invokeCallHook(e,n),this.poolingFunction(jt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class l_ extends a_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),e_(e,n,r,s,o,"max")}}l_.className="MaxPooling3D";Je(l_);class c_ extends a_{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Vr(o),vi(s),e_(e,n,r,s,o,"avg")}}c_.className="AveragePooling3D";Je(c_);class u_ extends ln{constructor(e){super(e),this.inputSpec=[new rs({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Jt}}class d_ extends u_{constructor(e){super(e||{})}call(e,n){return De(()=>{const r=jt(e);return Xr(r,1)})}}d_.className="GlobalAveragePooling1D";Je(d_);class h_ extends u_{constructor(e){super(e||{})}call(e,n){return De(()=>{const r=jt(e);return Sa(r,1)})}}h_.className="GlobalMaxPooling1D";Je(h_);class f_ extends ln{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vr(this.dataFormat),this.inputSpec=[new rs({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Jt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class p_ extends f_{call(e,n){return De(()=>{const r=jt(e);return this.dataFormat==="channelsLast"?Xr(r,[1,2]):Xr(r,[2,3])})}}p_.className="GlobalAveragePooling2D";Je(p_);class m_ extends f_{call(e,n){return De(()=>{const r=jt(e);return this.dataFormat==="channelsLast"?Sa(r,[1,2]):Sa(r,[2,3])})}}m_.className="GlobalMaxPooling2D";Je(m_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class g_ extends ln{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,o=Ql(s,r);delete n.layer;const i={layer:o};return Object.assign(i,n),new e(i)}}class y_ extends g_{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Tn(e),e.length<3)throw new ge(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Tn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return De(()=>(e=jt(e),$L((i,a)=>[jt(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}y_.className="TimeDistributed";Je(y_);function l1e(t){Hd(Nme,"BidirectionalMergeMode",t)}const c1e="concat";class b_ extends g_{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Ql(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Ql(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?c1e:e.mergeMode,l1e(this.mergeMode),e.weights)throw new Jt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,o;return this.returnState&&(o=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):No(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=IL(e,r,s,this.numConstants);if(e=o.inputs,r=o.initialState,s=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new ge("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const u=r.map(h=>new rs({shape:h.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new Jt("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof fl;for(const c of i)if(c instanceof fl!==l)throw new ge("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const p=super.apply(c,n);return this.inputSpec=h,p}else return super.apply(e,n)}call(e,n){return De(()=>{const r=n.initialState;let s,o;if(r==null)s=this.forwardLayer.call(e,n),o=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),o=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(o.slice(1))),s=s[0],o=o[0]),this.returnSequences&&(o=Dd(o,1));let a;return this.mergeMode==="concat"?a=O6([s,o]):this.mergeMode==="sum"?a=st(s,o):this.mergeMode==="ave"?a=xe(.5,st(s,o)):this.mergeMode==="mul"?a=xe(s,o):this.mergeMode==null&&(a=[s,o]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){vd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),vd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const o=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(o).concat(o):[r].concat(o).concat(o)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Ql(n.layer);if(delete n.layer,n.numConstants!=null)throw new Jt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}b_.className="Bidirectional";Je(b_);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class x_ extends ln{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return De(()=>(e=jt(e),e.dtype!=="float32"&&(e=il(e,"float32")),st(xe(e,this.scale),this.offset)))}}x_.className="Rescaling";Je(x_);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:u1e,cropAndResize:d1e}=Kl;class v_ extends ln{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,o,i,a,l){return De(()=>{let c,u=!1;const h=n/i,p=r/a,m=(s+n)/i,g=(o+r)/a,x=[h,p,m,g],w=[];e.rank===3?(u=!0,c=lc([e])):c=e;for(let E=0;E<c.shape[0];E++)w.push(x);const k=LO(w,[w.length,4]),S=bm(0,w.length,1,"int32"),T=d1e(c,k,S,[s,o],"nearest");return il(u?jt(Pd(T)):T,l)})}upsize(e,n,r,s){return De(()=>{const o=u1e(e,[n,r]);return il(o,s)})}call(e,n){return De(()=>{const r=jt(e),s=r.dtype,o=r.shape,i=o[o.length-3],a=o[o.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,i,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}v_.className="CenterCrop";Je(v_);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h1e(t,e,n,r){let s=jt(t);if(s.dtype!=="int32"&&(s=il(s,"int32")),e==="int")return s;const o=s.shape;if(s.rank===0&&(s=$o(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=$o(s,-1)),s.rank>2)throw new ge(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${o} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=AN(a,r,n,i):l=AN(a,[],n,i),e!=="tfIdf")return l;if(r)return xe(l,r);throw new ge("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class w_ extends ln{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Tn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return De(()=>{e=jt(e),e.dtype!=="int32"&&(e=il(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ge(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=jt(n.countWeights)}const s=Sa(e),o=cx(e),i=xi(this.numTokens,s).bufferSync().get(0),a=jd(o,0).bufferSync().get(0);if(!(i&&a))throw new ge(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return h1e(e,this.outputMode,this.numTokens,r)})}}w_.className="CategoryEncoding";Je(w_);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const f1e=["bilinear","nearest"],bE=new Set(f1e);class k_ extends ln{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(bE.has(e.interpolation))this.interpolation=e.interpolation;else throw new ge(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return De(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Kl.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Kl.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...bE]} are supported`)})}}k_.className="Resizing";Je(k_);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class C_{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}C_.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S_ extends ln{constructor(e){super(e),this.randomGenerator=new C_(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}S_.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const p1e=["bilinear","nearest"],xE=new Set(p1e);class T_ extends S_{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ge(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ge(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ge(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(xE.has(r))this.interpolation=r;else throw new ge(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return De(()=>{const r=jt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Hg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*s;o=Math.round(o);const i=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return Kl.resizeBilinear(e,i);case"nearest":return Kl.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...xE]} are supported`)}})}}T_.className="RandomWidth";Je(T_);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u3(t){return new e7(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e=Oe();m1e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var vE;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(vE||(vE={}));var wE;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(wE||(wE={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var kE;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(kE||(kE={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&oe(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1e=kF;class _v extends FC{nextDataId(){return _v.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new GM(this,Va())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Oe().get("IS_NODE")&&ui(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&qm(r[0])){const o=r.map(i=>Zc(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,o){this.data.set(e,{values:n,dtype:s,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return cc(s,o)}return Bae(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>iu(s));return on(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return on(e.shape,e.dtype,n)}makeOutput(e,n,r){return Va().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Io();return e(),{kernelMs:Io()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){wt([e],"where");const n=this.readSync(e.dataId);return g1e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}_v.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const y1e=t=>{const{x:e}=t.inputs,n=t.backend;wt(e,"abs");let r=new Float32Array(Ve(e.shape));const s=n.data.get(e.dataId).values;return r=I_(s),n.makeOutput(r,e.shape,e.dtype)},b1e={kernelName:g2,backendName:"cpu",kernelFunc:y1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(t){return(e,n,r,s,o)=>{const i=Yt(e,n),a=i.length,l=Pt(i),c=Ve(i),u=Ys(o,c),h=e.length,p=n.length,m=Pt(e),g=Pt(n),x=Af(e,i),w=Af(n,i);if(x.length+w.length===0)for(let k=0;k<u.length;++k)u[k]=t(r[k%r.length],s[k%s.length]);else for(let k=0;k<u.length;++k){const S=Yf(k,a,l),$=S.slice(-h);x.forEach(V=>$[V]=0);const T=rl($,h,m),E=S.slice(-p);w.forEach(V=>E[V]=0);const F=rl(E,p,g);u[k]=t(r[T],s[F])}return[u,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vo(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(s.shape,"float32",i)},a}const x1e={kernelName:XC,backendName:"cpu",kernelFunc:Vo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cx(t,e,n="float32"){if(n==="complex64"){const s=Cx(t,e,"float32"),o=Cx(t,e,"float32");return Vo({inputs:{real:s,imag:o},backend:t})}const r=Zs(Ve(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const v1e={kernelName:pg,backendName:"cpu",kernelFunc:pl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Od(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const w1e={kernelName:xS,backendName:"cpu",kernelFunc:Od};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Vd([0],n),[o,i]=jr((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[i,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function du(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return pl({inputs:{x:s},backend:n});const u=Cx(n,s.shape,s.dtype),h=du({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),p=Vo({inputs:{real:h,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),p}if(s.dtype==="complex64"){const u=Od({inputs:{input:s},backend:n}),h=du({inputs:{x:u},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(u),h}if(!XM(s.dtype,o)){const u=pl({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:o}}const i=n.data.get(s.dataId).values,[a,l,c]=$_(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,l,c)}const k1e={kernelName:tg,backendName:"cpu",kernelFunc:du};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function as(t,e,n,r){return n==null?({inputs:s,backend:o})=>{const{a:i,b:a}=s,l=o;wt([i,a],t);const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,h=i.dtype==="string"?uc(c):c,p=i.dtype==="string"?uc(u):u,m=r||i.dtype,[g,x]=e(i.shape,a.shape,h,p,m);return l.makeTensorInfo(x,m,g)}:({inputs:s,backend:o})=>{const{a:i,b:a}=s,l=o;if(i.dtype==="complex64"||a.dtype==="complex64"){const c=du({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,m=l.data.get(h.dataId).values,g=l.data.get(p.dataId).values,x=du({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),w=l.data.get(x.dataId),k=w.complexTensorInfos.real,S=w.complexTensorInfos.imag,$=l.data.get(k.dataId).values,T=l.data.get(S.dataId).values,[E,F,V]=n(i.shape,a.shape,m,g,$,T),j=l.makeTensorInfo(V,"float32",E),W=l.makeTensorInfo(V,"float32",F),R=Vo({inputs:{real:j,imag:W},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(j),l.disposeIntermediateTensorInfo(W),R}else{const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,h=r||i.dtype,[p,m]=e(i.shape,a.shape,c,u,h);return l.makeTensorInfo(m,h,p)}}}function t7(t){return(e,n,r,s,o,i)=>{const a=Yt(e,n),l=Ve(a),c=a.length,u=Pt(a),h=Ys("float32",l),p=Ys("float32",l),m=Af(e,a),g=Af(n,a),x=cc(r,s),w=cc(o,i),k=e.length,S=Pt(e),$=n.length,T=Pt(n);if(m.length+g.length===0)for(let E=0;E<h.length;E++){const F=E%x.length,V=E%w.length,j=t(x[F*2],x[F*2+1],w[V*2],w[V*2+1]);h[E]=j.real,p[E]=j.imag}else for(let E=0;E<h.length;E++){const F=Yf(E,c,u),V=F.slice(-k);m.forEach(U=>V[U]=0);const j=rl(V,k,S),W=F.slice(-$);g.forEach(U=>W[U]=0);const R=rl(W,$,T),O=t(x[j*2],x[j*2+1],w[R*2],w[R*2+1]);h[E]=O.real,p[E]=O.imag}return[h,p,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N_=jr((t,e)=>t+e),C1e=t7((t,e,n,r)=>({real:t+n,imag:e+r})),Of=as(Zf,N_,C1e),S1e={kernelName:Zf,backendName:"cpu",kernelFunc:Of};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(t,e,n,r,s){const o=Ve(r),i=Zs(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(o>0?i[l]+=e[a]:i[l]+=1)}return i}function E_(t,e,n,r=!1){const s=t.shape[0],o=t.shape[1],i=on([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<o;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,a,c):e.size>0?i.set(i.get(a,c)+e.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R_=jr((t,e)=>t&e),T1e=as(KC,R_),I1e={kernelName:KC,backendName:"cpu",kernelFunc:T1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vl(t){return(e,n,r)=>{const s=zr(n,e.length);for(let o=0;o<e.length;++o)s[o]=t(e[o],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jn(t,e,n){const r=vl(e);return Cu(t,r,n)}function Cu(t,e,n){return({inputs:r,attrs:s,backend:o})=>{const{x:i}=r;wt(i,t);const a=o,l=a.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=uc(l)}else c=l;const u=n||i.dtype,h=e(c,u,s);return a.makeTensorInfo(i.shape,u,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_=vl(t=>Math.ceil(t)),$1e=Cu(ng,A_),N1e={kernelName:ng,backendName:"cpu",kernelFunc:$1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_(t,e,n,r){const s=zr(n,Ve(e));if(r&&n!=="string"){let o=0;t.forEach(i=>{const a=Ve(i.shape);s.set(i.vals,o),o+=a})}else{let o=0;t.forEach(i=>{const a=n==="string"?uc(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const u=c*e[1]+o;for(let h=0;h<i.shape[1];++h)s[u+h]=a[l++]}o+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_=jr((t,e)=>t===e?1:0),M_=as(A2,P_,null,"bool"),E1e={kernelName:A2,backendName:"cpu",kernelFunc:M_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O_=vl(t=>Math.exp(t)),F_=Cu(cg,O_,"float32"),R1e={kernelName:cg,backendName:"cpu",kernelFunc:F_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_=vl(t=>Math.expm1(t)),A1e=Cu(ug,z_),D1e={kernelName:ug,backendName:"cpu",kernelFunc:A1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_=vl(t=>Math.floor(t)),P1e=Cu(dg,L_),M1e={kernelName:dg,backendName:"cpu",kernelFunc:P1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __=jr((t,e)=>Math.floor(t/e)),O1e=as(hg,__,null,"int32"),F1e={kernelName:hg,backendName:"cpu",kernelFunc:O1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_(t,e,n,r,s,o,i,a,l){const c=on([r,o],n);for(let u=0;u<r;u++){const h=[];let p=0;for(let m=0;m<s;m++){const g=t[u*s+m];p+=g*i[m],h.push(g)}if(p<0||p>=l/o)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let m=0;m<o;m++)c.values[u*o+m]=e.get(...e.indexToLoc(p*o+m))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_(t,e,n){const r=on(n,t.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),a=i[0],l=i[2],c=e.locToIndex([a,l]);i[2]=e.values[c];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_=jr((t,e)=>t>e?1:0),z1e=as(O2,j_,null,"bool"),L1e={kernelName:O2,backendName:"cpu",kernelFunc:z1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_=jr((t,e)=>t>=e?1:0),_1e=as(fg,W_,null,"bool"),B1e={kernelName:fg,backendName:"cpu",kernelFunc:_1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_=jr((t,e)=>t<e?1:0),V1e=as(z2,U_,null,"bool"),j1e={kernelName:z2,backendName:"cpu",kernelFunc:V1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H_=jr((t,e)=>t<=e?1:0),W1e=as(L2,H_,null,"bool"),U1e={kernelName:L2,backendName:"cpu",kernelFunc:W1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_(t,e,n){const r=(e-t)/(n-1),s=Zs(n,"float32");s[0]=t;for(let o=1;o<s.length;o++)s[o]=s[o-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_=vl(t=>Math.log(t)),H1e=Cu(bg,q_),G1e={kernelName:bg,backendName:"cpu",kernelFunc:H1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_(t,e,n,r){const s=Ys(r,Ve(n));for(let o=0;o<s.length;++o){const i=o*e;let a=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>a)&&(a=c)}s[o]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_=jr((t,e)=>Math.max(t,e)),q1e=as(vg,X_),K1e={kernelName:vg,backendName:"cpu",kernelFunc:q1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_=jr((t,e)=>Math.min(t,e)),X1e=as(wg,Y_),Y1e={kernelName:wg,backendName:"cpu",kernelFunc:X1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7=jr((t,e)=>t*e),Z1e=t7((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Bv=as(Cg,r7,Z1e),Q1e={kernelName:Cg,backendName:"cpu",kernelFunc:Bv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_(t,e,n){const r=gu(-1,n);return r7([],e,r,t,n)}function J1e(t){const{inputs:e,backend:n}=t,{x:r}=e;wt(r,"neg");const s=n.data.get(r.dataId).values,[o,i]=Z_(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,o)}const eye={kernelName:X2,backendName:"cpu",kernelFunc:J1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q_=jr((t,e)=>t!==e?1:0),tye=as(Y2,Q_,null,"bool"),nye={kernelName:Y2,backendName:"cpu",kernelFunc:tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(t,e,n,r,s){const o=e.length,i=Ve(e),a=Pt(e),l=Pt(s),c=Ys(n,Ve(s));for(let u=0;u<i;++u){const h=Yf(u,o,a),p=new Array(h.length);for(let g=0;g<p.length;g++)p[g]=h[r[g]];const m=rl(p,o,l);c[m]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Do(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:o}=n;wt(s,"transpose");const i=s.shape.length,a=new Array(i);for(let h=0;h<a.length;h++)a[h]=s.shape[o[h]];const l=r.data.get(s.dataId).values,c=s7(l,s.shape,s.dtype,o,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const rye={kernelName:lf,backendName:"cpu",kernelFunc:Do};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_(t,e,n,r){const[s,o]=Ts(t,r),i=qo(e,"int32"),a=Zs(Ve(s),i),l=Ve(o);for(let c=0;c<a.length;++c){const u=c*l;let h=1;for(let p=0;p<l;++p)h*=n[u+p];a[c]=h}return{outVals:a,outShape:s,outDtype:i}}function sye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"prod");const a=s.shape.length,l=an(o,s.shape),c=Cr(l,a);let u=l,h=s;const p=[];c!=null&&(h=Do({inputs:{x:s},backend:n,attrs:{perm:c}}),p.push(h),u=Br(u.length,a));const m=n.data.get(h.dataId).values,{outVals:g,outShape:x,outDtype:w}=J_(h.shape,h.dtype,m,u);let k=x;return i&&(k=Yr(x,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(k,w,g)}const oye={kernelName:nv,backendName:"cpu",kernelFunc:sye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const o=Yf(s,e.length,Pt(e)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function aye(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function lye(t,e,n,r){const s=[];let o=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);aye(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let h=1;h<l+1;++h)a[c].push(h*u)}for(let c=0;c<t.length;++c){let u=t[c],h=t[c]+1;for(let p=0;p<n.length;++p){const m=n[p],g=p+e.length-1;if(g>=0){const x=a[g],w=x[x.length-1]-m[u];for(let k=u;k<h;++k)a[g].push(m[k+1]+w)}u=m[u],h=m[h]}h!==u&&(s.push([u,h]),o+=h-u)}return{outSplits:a,valueSlices:s,numValues:o}}function cye(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=zr("int32",r);e.push(s),t[n].forEach((o,i)=>s[i]=o)}return e}function CE(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function uye(t,e,n,r,s,o){const i=CE(e,2)[1],a=CE(o,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let h=0;h<r;++h)s[l*a+h]=t[u*i+h];++l}}function dye(t,e,n,r,s){const o=e.slice();o[0]=s;const i=zr(n,Ve(o)),a=t.length,l=a===0?0:a/e[0];return uye(t,e,r,l,i,o),[i,o]}function eB(t,e,n,r,s,o,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(iye(o,i,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:h,numValues:p}=lye(o,i,t,c),m=cye(u),g=dye(n,r,s,h,p);return[m,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SE=2147483647;function tB(t,e,n,r,s,o,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=i.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(i[0]);for(let w=1;w<u.length;++w)if(u[w]!==u[w-1])throw new Error("starts, limits, and deltas must have the same shape");const h=u.length===0?1:u[0],p=zr("int32",h+1);p[0]=0;for(let w=0;w<h;++w){const k=a?t[0]:t[w],S=l?r[0]:r[w],$=c?o[0]:o[w];if($===0)throw new Error("Requires delta != 0");let T;if($>0&&S<k||$<0&&S>k)T=0;else if(T=Math.ceil(Math.abs((S-k)/$)),T>SE)throw new Error(`Requires ((limit - start) / delta) <= ${SE}`);p[w+1]=p[w]+T}const m=p[h],g=zr(n,m);let x=0;for(let w=0;w<h;++w){const k=p[w+1]-p[w];let S=a?t[0]:t[w];const $=c?o[0]:o[w];for(let T=0;T<k;++T)g[x++]=S,S+=$}return[p,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fi=va;class Sx{constructor(e,n,r,s,o,i,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=VF(u),this.raggedRank=jF(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Fi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Fi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Fi.VALUE_ROWIDS:return Sx.getMaxWidthValueRowID(n);case Fi.ROW_SPLITS:return Sx.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Fi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const o=e[s+1]-e[s];o>r&&(r=o)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],o=0;for(let i=1;i<n;++i){const a=e[i];a!==s&&(s=a,o=Math.max(i-r,o),r=i)}return Math.max(n-r,o)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return IE(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;WF(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=BF(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),o=[];let i=0;for(let a=0;a<s;++a,i+=n)o.push(i);for(let a=s;a<e;++a)o.push(-1);return oe(o.length===e,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(e,n,r,s){const o=e.length,i=[];for(let a=0;a<o-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let h=0;h<c;++h)i.push(u),u+=r;for(let h=0;h<l-c;++h)i.push(-1)}if(o>0&&i.length!==e[o-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,s){const o=e.length,i=[];if(o===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];i.push(c);for(let u=1;u<o;++u){const h=e[u];if(h===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,s){const o=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Fi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,s);case Fi.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,s);default:throw new Error(`Unsupported partition type: ${Fi[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Fi.FIRST_DIM_SIZE:return e[0];case Fi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Fi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Fi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const o=IE(r,!1),i=zr(this.valuesDType,Ve(o));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,i,o)}return[o,i]}setOutput(e,n,r,s){if(r.length===0)return;const o=this.values,i=r;let a=s.slice();a=a.slice(e+1);const l=Ve(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const g=this.defaultValueShape;De(()=>{const x=Ie(u,g);u=X0(x,a).dataSync()})}let h=0,p=0,m=0;for(let g=0;g<=c;++g){let x=g<c?n[g]:-1;if(x===m){++m;continue}if(p<m){const w=o.subarray(h*l),k=i.subarray(p*l),S=(m-p)*l;TE(k,w,S)}if(g>=c){const w=r.length;x=Math.floor(w/l)}if(x>m)if(this.defaultValue.length===1)i.subarray(m*l,x*l).fill(this.defaultValue[0]),m=x;else for(;x>m;){const w=i.slice(m*l);TE(w,u,l),++m}x<0?(h=g+1,p=m):(h=g,p=m,m=p+1)}}}function TE(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function IE(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function nB(t,e,n,r,s,o,i,a,l,c){return new Sx(t,e,n,r,s,o,i,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rB(t,e,n,r){const s=t===e,o=t<e&&n<0,i=e<t&&n>1;if(s||o||i)return Zs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Zs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sB=vl(t=>1/Math.sqrt(t)),hye=Cu(Eg,sB),fye={kernelName:Eg,backendName:"cpu",kernelFunc:hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pd(t,e,n,r,s,o,i,a,l,c){const u=[r/s,s],h=t.values,p=e.values;if(r===0)return on(n,e.dtype);const m=l instanceof Ms?l:on(u,e.dtype);typeof l=="string"||typeof l=="number"?m.values.fill(l):typeof l=="boolean"&&m.values.fill(+l);for(let g=0;g<o;g++){const x=[];let w=0;for(let k=0;k<i;k++){const S=h[g*i+k];x.push(S),w+=S*a[k]}if(w<0||w>=r/s)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let k=0;k<s;k++)c?m.values[w*s+k]+=p[g*s+k]:m.values[w*s+k]=e.rank===0?p[0]:p[g*s+k]}return m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pye=vl(t=>1/(1+Math.exp(-t))),oB=jn(Mg,t=>1/(1+Math.exp(-t))),mye={kernelName:Mg,backendName:"cpu",kernelFunc:oB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iB(t,e,n,r,s){const o=u6(r,e,n),i=Ve(n),a=Pt(r);if(o){const h=d6(e,a);return s==="string"?t.slice(h,h+i):t.subarray(h,h+i)}const l=s==="string"?uc(t):t,c=on(r,s,l),u=on(n,s);for(let h=0;h<u.size;++h){const p=u.indexToLoc(h),m=p.map((g,x)=>g+e[x]);u.set(c.get(...m),...p)}return s==="string"?cz(u.values):u.values}function Fd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r;wt(s,"slice");const[a,l]=Tv(s,o,i);l6(s,a,l);const c=n.data.get(s.dataId).values,u=iB(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const gye={kernelName:lv,backendName:"cpu",kernelFunc:Fd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aB(t,e,n,r,s,o,i){const a=e[0],l=o[0],c=new Array(l),u=new Array(a),h=e[1];if(l===0){if(a!==0)throw new Error(YF(a));const w=zr(n,0),k=zr(s,0);return[w,[0,h],k,c,u]}let p=!0,m=0;const g=new Array(l).fill(0);for(let w=0;w<a;++w){const k=t[w*h];if(k<0)throw new Error(ZF(w,k));if(k>=l)throw new Error(QF(w,k,l));++g[k],p=p&&k>=m,m=k}let x=!0;for(let w=0;w<l;++w){const k=g[w]===0;c[w]=k,x=x&&!k,g[w]=Math.max(g[w],1),w>0&&(g[w]+=g[w-1])}if(x&&p){const w=t,k=r;for(let S=0;S<a;++S)u[S]=S;return[w,[a,h],k,c,u]}else{const w=g[l-1],k=zr(n,w*h),S=zr(s,w),$=new Array(l).fill(0);for(let T=0;T<a;++T){const E=t[T*h],F=$[E],V=(E===0?0:g[E-1])+F;$[E]++;for(let j=0;j<h;++j)k[V*h+j]=t[T*h+j];S[V]=r[T],u[T]=V}for(let T=0;T<l;++T)if($[T]===0){const F=T===0?0:g[T-1];k[F*h+0]=T;for(let V=1;V<h;++V)k[F*h+V]=0;S[F]=i}return[k,[w,h],S,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lB(t,e,n,r,s){const o=Ve(r),i=e[0],a=s.length,l=[];let c=1,u=-1;for(let w=0;w<a;++w){const k=s[w];if(k===-1){if(u!==-1)throw new Error(JF(u,w));u=w,l.push(1)}else{if(k<0)throw new Error(ez(w,k));c*=k,l.push(k)}}if(u!==-1){if(c<=0)throw new Error(tz());const w=Math.trunc(o/c);if(c*w!==o)throw new Error(nz(r,l));l[u]=w}if(Ve(l)!==o)throw new Error(rz(r,l));const p=r.length,m=[];if(p>0){m[p-1]=1;for(let w=p-2;w>=0;--w)m[w]=m[w+1]*r[w+1]}const g=[];if(a>0){g[a-1]=1;for(let w=a-2;w>=0;--w)g[w]=g[w+1]*l[w+1]}const x=zr(n,i*a);for(let w=0;w<i;++w){let k=0;for(let S=0;S<p;++S)k+=t[w*p+S]*m[S];for(let S=0;S<a;++S)x[w*a+S]=Math.trunc(k/g[S]),k%=g[S]}return[x,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(t,e,n,r,s,o=!1,i=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],h=a>0?s[a-1]+1:0;if(h<0)throw new Error(Ek());const p=e.slice();p[0]=h;const m=p.reduce(($,T)=>$*T,1),g=zr(n,m);if(a===0)return h>0&&g.fill(i),[g,p];if(h<=0)throw new Error(Ek());let x=0,w=1,k=0,S=s[x];for(;;){let $=0;if(w<a){if($=s[w],S===$){++w;continue}if(S>=$)throw new Error(sz())}if(S<0||S>=h)throw new Error(oz(S,h));S>k&&g.fill(i,k*c,S*c);for(let T=x;T<w;++T){const E=r[T];if(E<0||E>=l[0])throw new Error(iz(T,r[T],l[0]));for(let F=0;F<c;F++)g[S*c+F]+=t[E*c+F]}if(o)for(let T=0;T<c;T++)g[S*c+T]/=w-x;if(x=w,++w,k=S+1,S=$,w>a)break}return k<h&&g.fill(i,k*c,h*c),[g,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yye=vl(t=>Math.sqrt(t)),bye=jn(Fg,t=>Math.sqrt(t)),xye={kernelName:Fg,backendName:"cpu",kernelFunc:bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cB=jr((t,e)=>{const n=t-e;return n*n}),vye=as(zg,cB),wye={kernelName:zg,backendName:"cpu",kernelFunc:vye};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uB=vl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),kye=Cu(CS,uB),Cye={kernelName:CS,backendName:"cpu",kernelFunc:kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dB(t,e,n,r){const s=on(t,e.dtype);for(let o=0;o<s.size;o++){const i=s.indexToLoc(o),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+r[l];s.set(e.get(...a),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sye{constructor(e,n,r,s,o,i){this.separator=Zc(e),this.nGramWidths=n,this.leftPad=Zc(r),this.rightPad=Zc(s),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,o,i){for(let a=0;a<o;++a){const l=this.getPadWidth(i),c=Math.max(0,l-a),u=Math.max(0,l-(o-(a+1))),h=i-(c+u),p=n+(c>0?0:a-l);let m=0;m+=c*this.leftPad.length;for(let S=0;S<h;++S)m+=e[p+S].length;m+=u*this.rightPad.length;const g=c+u+h-1;m+=g*this.separator.length,r[s+a]=new Uint8Array(m);const x=r[s+a];let w=0;const k=S=>S.forEach($=>x[w++]=$);for(let S=0;S<c;++S)k(this.leftPad),k(this.separator);for(let S=0;S<h-1;++S)k(e[p+S]),k(this.separator);if(h>0){k(e[p+h-1]);for(let S=0;S<u;++S)k(this.separator),k(this.rightPad)}else{for(let S=0;S<u-1;++S)k(this.rightPad),k(this.separator);k(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const o=s-1,i=zr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=o;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=o;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(h=>{u+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&u===0&&(u=1),i[l]=i[l-1]+u}const a=new Array(i[o]);for(let l=0;l<o;++l){const c=n[l];let u=i[l];if(this.nGramWidths.forEach(h=>{const p=n[l+1]-n[l],m=this.getNumNGrams(p,h);this.createNGrams(e,c,a,u,m,h),u+=m}),this.preserveShort&&u===i[l]){const h=n[l+1]-n[l];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(e,c,a,u,1,p)}}return[a,i]}}function hB(t,e,n,r,s,o,i,a){return new Sye(n,r,s,o,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e,n,r){if(!t.length)return;if(e.length===0){for(let o=0;o<t.length;++o)r.push(t.subarray(o,o+1));return}if(e.length===1){const o=e[0];let i=t.indexOf(o);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(o)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let o=0;o<t.length+1;o++)if(o===t.length||e.indexOf(t[o])!==-1){const i=t.subarray(s,o);(!n||i.length!==0)&&r.push(i),s=o+1}}function fB(t,e,n){const r=t.length,s=[];let o=0,i=0;const a=new Array(r);for(let p=0;p<r;++p){const m=s.length;Tye(t[p],e,n,s);const g=s.length-m;a[p]=g,o+=g,i=Math.max(i,g)}const l=zr("int32",o*2),c=new Array(o),u=[r,i];let h=0;for(let p=0;p<r;++p)for(let m=0;m<a[p];++m)l[h*2]=p,l[h*2+1]=m,c[h]=s[h],++h;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pB(t,e){const n=zr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=ole(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mB=jr((t,e)=>t-e),Iye=t7((t,e,n,r)=>({real:t-n,imag:e-r})),i7=as(Lg,mB,Iye),$ye={kernelName:Lg,backendName:"cpu",kernelFunc:i7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gB(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=on(n,t.dtype);for(let s=0;s<r.values.length;++s){const o=r.indexToLoc(s),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=o[l]%t.shape[l];const a=t.locToIndex(i);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function yB(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(n,Math.floor(e-l*u/a+h)),m=Math.min(r,Math.floor(e+(a-l)*u/a+h));yB(t,e,p,m)}const s=t[e];let o=n,i=r;for(Hh(t,n,e),P0(t[r],s)>0&&Hh(t,n,r);o<i;){for(Hh(t,o,i),o++,i--;P0(t[o],s)<0;)o=o+1;for(;P0(t[i],s)>0;)i=i-1}P0(t[n],s)===0?Hh(t,n,i):(i=i+1,Hh(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function bB(t,e,n,r,s){const o=e[e.length-1],[i,a]=[t.length/o,o],l=Ys(n,i*r),c=Ys("int32",i*r);for(let h=0;h<i;h++){const p=h*a,m=t.subarray(p,p+a);let g=new Array(m.length);m.forEach((S,$)=>g[$]={value:S,index:$}),r<g.length&&(yB(g,r),g=g.slice(0,r)),s&&g.sort(P0);const x=h*r,w=l.subarray(x,x+r),k=c.subarray(x,x+r);for(let S=0;S<r;S++)w[S]=g[S].value,k[S]=g[S].index}const u=e.slice();return u[u.length-1]=r,[on(u,n,l),on(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xB(t,e,n,r){const s=an(e,n)[0],o=[1,n[0],1];for(let g=0;g<s;g++)o[0]*=n[g];o[1]=n[s];for(let g=s+1;g<n.length;g++)o[2]*=n[g];const i=new Map,a=new Int32Array(n[s]),l=new Ms(o,r,t),c=[],u=o[0]===1&&o[2]===1;for(let g=0;g<n[s];g++){let x;if(u)x=t[g].toString();else{const k=[];for(let S=0;S<o[0];S++)for(let $=0;$<o[2];$++)k.push(l.get(S,g,$));x=k.join(",")}const w=i.get(x);if(w!=null)a[g]=w;else{const k=i.size;i.set(x,k),a[g]=k,c.push(g)}}const h=o.slice();h[1]=i.size;const p=new Ms(h,r);c.forEach((g,x)=>{for(let w=0;w<o[0];w++)for(let k=0;k<o[2];k++)p.set(l.get(w,g,k),w,x,k)});const m=n.slice();return m[s]=h[1],{outputValues:p.values,outputShape:m,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nye=Object.freeze(Object.defineProperty({__proto__:null,addImpl:N_,bincountImpl:n7,bincountReduceImpl:E_,bitwiseAndImpl:R_,castImpl:$_,ceilImpl:A_,concatImpl:D_,equalImpl:P_,expImpl:O_,expm1Impl:z_,floorDivImpl:__,floorImpl:L_,gatherNdImpl:B_,gatherV2Impl:V_,greaterEqualImpl:W_,greaterImpl:j_,lessEqualImpl:H_,lessImpl:U_,linSpaceImpl:G_,logImpl:q_,maxImpl:K_,maximumImpl:X_,minimumImpl:Y_,multiplyImpl:r7,negImpl:Z_,notEqualImpl:Q_,prodImpl:J_,raggedGatherImpl:eB,raggedRangeImpl:tB,raggedTensorToTensorImpl:nB,rangeImpl:rB,rsqrtImpl:sB,scatterImpl:pd,sigmoidImpl:pye,simpleAbsImpl:I_,sliceImpl:iB,sparseFillEmptyRowsImpl:aB,sparseReshapeImpl:lB,sparseSegmentReductionImpl:o7,sqrtImpl:yye,squaredDifferenceImpl:cB,staticRegexReplaceImpl:uB,stridedSliceImpl:dB,stringNGramsImpl:hB,stringSplitImpl:fB,stringToHashBucketFastImpl:pB,subImpl:mB,tileImpl:gB,topKImpl:bB,transposeImpl:s7,uniqueImpl:xB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_O("cpu",()=>new _v,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vB=jn(ag,t=>t>=0?t:Math.exp(t)-1),Eye={kernelName:ag,backendName:"cpu",kernelFunc:vB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wB(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r;wt([s],"leakyRelu");const i=Ve(s.shape),a=n.data.get(s.dataId).values,l=Ys("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const Rye={kernelName:F2,backendName:"cpu",kernelFunc:wB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aye=jr((t,e)=>t<0?e*t:t);function kB(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;wt([r,s],"prelu");const o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[a,l]=Aye(r.shape,s.shape,o,i,"float32");return n.makeTensorInfo(l,"float32",a)}const Dye={kernelName:tv,backendName:"cpu",kernelFunc:kB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB=jn(Ig,t=>Math.max(0,t)),Pye={kernelName:Ig,backendName:"cpu",kernelFunc:CB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SB=jn($g,t=>Math.min(Math.max(0,t),6)),Mye={kernelName:$g,backendName:"cpu",kernelFunc:SB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tx(t,e,n,r,s){if(n==="linear")return pl({inputs:{x:e},backend:t});if(n==="relu")return CB({inputs:{x:e},backend:t});if(n==="elu")return vB({inputs:{x:e},backend:t});if(n==="relu6")return SB({inputs:{x:e},backend:t});if(n==="prelu")return kB({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return wB({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return oB({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=Ve(s.shape),a=KM(o,i),l=Ve(a);oe(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;u.shape=a,h.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const Oye={kernelName:rv,backendName:"cpu",kernelFunc:sr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TB(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;wt([s,o],"matMul");const l=s.shape.length,c=o.shape.length,u=i?s.shape[l-2]:s.shape[l-1],h=a?o.shape[c-1]:o.shape[c-2],p=i?s.shape[l-1]:s.shape[l-2],m=a?o.shape[c-2]:o.shape[c-1],g=s.shape.slice(0,-2),x=o.shape.slice(0,-2),w=Ve(g),k=Ve(x),$=Yt(s.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,m]);oe(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${s.shape} and ${o.shape} and transposeA=${i} and transposeB=${a} must match.`);const T=i?[w,u,p]:[w,p,u],E=a?[k,m,h]:[k,h,m],F=sr({inputs:{x:s},backend:n,attrs:{shape:T}}),V=sr({inputs:{x:o},backend:n,attrs:{shape:E}}),j=i?F.shape[1]:F.shape[2],W=i?F.shape[2]:F.shape[1],R=a?V.shape[1]:V.shape[2],O=Math.max(w,k),U=n.data.get(F.dataId).values,K=n.data.get(V.dataId).values,G=Pt(F.shape),Y=Pt(V.shape),[Z,ne,J]=i?[G[0],1,G[1]]:[G[0],G[1],1],[re,se,q]=a?[1,Y[1],Y[0]]:[Y[1],1,Y[0]],le=W*R,be=on([O,W,R],F.dtype),pe=be.values,de=n.blockSize;for(let we=0;we<O;we++){const Ne=we%w,Te=we%k;for(let Ee=0;Ee<W;Ee+=de){const We=Math.min(Ee+de,W);for(let Xe=0;Xe<R;Xe+=de){const Ge=Math.min(Xe+de,R);for(let mt=0;mt<j;mt+=de){const ft=Math.min(mt+de,j);for(let ct=Ee;ct<We;ct++)for(let Ze=Xe;Ze<Ge;Ze++){let rt=0;for(let Ke=mt;Ke<ft;Ke++){const at=U[Ne*Z+ct*ne+Ke*J],ut=K[Ke*re+Ze*se+Te*q];rt+=at*ut}pe[we*le+(ct*R+Ze)]+=rt}}}}}return n.disposeIntermediateTensorInfo(F),n.disposeIntermediateTensorInfo(V),n.makeTensorInfo($,be.dtype,be.values)}const Fye={kernelName:w2,backendName:"cpu",kernelFunc:TB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let p,m,g;const x=[];p=TB({inputs:{a:s,b:o},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(m=Of({inputs:{a:p,b:i},backend:n}),x.push(p),p=m),u&&(g=Tx(n,p,u,a,h),x.push(p),p=g);for(const k of x)n.disposeIntermediateTensorInfo(k);return p}const Lye={kernelName:ox,backendName:"cpu",kernelFunc:zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ye=jn(Km,t=>Math.acos(t)),Bye={kernelName:Km,backendName:"cpu",kernelFunc:_ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vye=jn(Xm,t=>Math.acosh(t)),jye={kernelName:Xm,backendName:"cpu",kernelFunc:Vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t){const{inputs:e,backend:n}=t,r=e;wt(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),o=on(r[0].shape,r[0].dtype),i=o.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Uye={kernelName:jC,backendName:"cpu",kernelFunc:Wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"all");const a=an(o,s.shape);let l=a;const c=Cr(l,s.shape.length);let u=s;c!=null&&(u=Do({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Br(l.length,s.shape.length)),Fs("all",l,u.shape.length);const[h,p]=Ts(u.shape,l),m=Ve(p),g=Zs(Ve(h),u.dtype),x=n.data.get(u.dataId).values;for(let k=0;k<g.length;++k){const S=k*m;let $=x[S];for(let T=0;T<m;++T){const E=x[S+T];$=$&&E}g[k]=$}c!=null&&n.disposeIntermediateTensorInfo(u);const w=n.makeTensorInfo(h,u.dtype,g);if(i){const k=Yr(h,a),S=sr({inputs:{x:w},backend:n,attrs:{shape:k}});return n.disposeIntermediateTensorInfo(w),S}return w}const Gye={kernelName:WC,backendName:"cpu",kernelFunc:Hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"any");const a=an(o,s.shape);let l=a;const c=Cr(l,s.shape.length);let u=s;c!=null&&(u=Do({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Br(l.length,s.shape.length)),Fs("any",l,u.shape.length);const[h,p]=Ts(u.shape,l),m=Ve(p),g=Zs(Ve(h),u.dtype),x=n.data.get(u.dataId).values;for(let k=0;k<g.length;++k){const S=k*m;let $=x[S];for(let T=0;T<m;++T){const E=x[S+T];$=$||E}g[k]=$}c!=null&&n.disposeIntermediateTensorInfo(u);const w=n.makeTensorInfo(h,u.dtype,g);if(i){const k=Yr(h,a),S=sr({inputs:{x:w},backend:n,attrs:{shape:k}});return n.disposeIntermediateTensorInfo(w),S}return w}const Kye={kernelName:UC,backendName:"cpu",kernelFunc:qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;wt(s,"argMax");let i=an(o,s.shape);const a=Cr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=Do({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Br(i.length,l.shape.length)),i=[i[0]],Fs("argMax",i,l.shape.length);const[u,h]=Ts(l.shape,i),p=Ve(u),m=Zs(p,"int32"),g=Ve(h),x=n.data.get(l.dataId).values;for(let w=0;w<m.length;++w){const k=w*g;let S=x[k],$=0;for(let T=0;T<g;++T){const E=x[k+T];E>S&&(S=E,$=T)}m[w]=$}return c.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u,"int32",m)}const Yye={kernelName:y2,backendName:"cpu",kernelFunc:Xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;wt(s,"argMin");let i=an(o,s.shape);const a=Cr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=Do({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Br(i.length,l.shape.length)),i=[i[0]],Fs("argMin",i,l.shape.length);const[u,h]=Ts(l.shape,i),p=Ve(u),m=Zs(p,"int32"),g=Ve(h),x=n.data.get(l.dataId).values;for(let w=0;w<m.length;++w){const k=w*g;let S=x[k],$=0;for(let T=0;T<g;++T){const E=x[k+T];E<S&&(S=E,$=T)}m[w]=$}return c.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u,"int32",m)}const Qye={kernelName:b2,backendName:"cpu",kernelFunc:Zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jye=jn(Ym,t=>Math.asin(t)),ebe={kernelName:Ym,backendName:"cpu",kernelFunc:Jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbe=jn(Zm,t=>Math.asinh(t)),nbe={kernelName:Zm,backendName:"cpu",kernelFunc:tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rbe=jn(Qm,t=>Math.atan(t)),sbe={kernelName:Qm,backendName:"cpu",kernelFunc:rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const obe=jr((t,e)=>Math.atan2(t,e)),ibe=as(eg,obe),abe={kernelName:eg,backendName:"cpu",kernelFunc:ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lbe=jn(Jm,t=>Math.atanh(t)),cbe={kernelName:Jm,backendName:"cpu",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(t,e,n,r,s,o){const i=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,h=s.effectiveFilterWidth,p=s.padInfo.top,m=s.padInfo.left,g=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=on(s.outShape,n),w=x.values,k=s.outShape[1]*s.outShape[2]*s.outShape[3],S=s.outShape[2]*s.outShape[3],$=s.outShape[3];for(let T=0;T<s.batchSize;++T){const E=T*k,F=T*r[0];for(let V=0;V<s.inChannels;++V)for(let j=0;j<s.outHeight;++j){const W=j*i-p,R=Math.max(0,W),O=Math.min(s.inHeight,u+W),U=E+j*S;for(let K=0;K<s.outWidth;++K){const G=K*a-m,Y=Math.max(0,G),Z=Math.min(s.inWidth,h+G);let ne=g,J=0,re=0;for(let q=R;q<O;q+=l){const le=F+q*r[1];for(let be=Y;be<Z;be+=c){const pe=le+be*r[2],de=t[pe+V];o==="max"&&de>ne?ne=de:o==="avg"&&(J+=de,re++)}if(isNaN(ne))break}const se=U+K*$+V;w[se]=o==="avg"?J/re:ne}}}return x}function IB(t,e,n,r,s=!1,o=!1){const i=on(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.top,g=r.padInfo.left,x=on(e,n,t);for(let w=0;w<r.batchSize;++w)for(let k=0;k<r.inChannels;++k)for(let S=0;S<r.outHeight;++S){const $=S*a-m;let T=$;for(;T<0;)T+=c;const E=Math.min(r.inHeight,h+$);for(let F=0;F<r.outWidth;++F){const V=F*l-g;let j=V;for(;j<0;)j+=u;const W=Math.min(r.inWidth,p+V);let R=Number.NEGATIVE_INFINITY,O=-1;for(let U=T;U<E;U+=c){const K=U-$;for(let G=j;G<W;G+=u){const Y=G-V,Z=x.get(w,U,G,k);Z>R&&(R=Z,s?O=o?((w*r.inHeight+U)*r.inWidth+G)*r.inChannels+k:(U*r.inWidth+G)*r.inChannels+k:O=K*p+Y)}}i.set(O,w,S,F,k)}}return i}function $B(t,e,n,r,s,o){const i=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,h=s.dilationWidth,p=s.effectiveFilterDepth,m=s.effectiveFilterHeight,g=s.effectiveFilterWidth,x=s.padInfo.front,w=s.padInfo.top,k=s.padInfo.left,S=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,$=on(s.outShape,n),T=$.values,E=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],F=s.outShape[2]*s.outShape[3]*s.outShape[4],V=s.outShape[3]*s.outShape[4],j=s.outShape[4];for(let W=0;W<s.batchSize;++W){const R=W*E,O=W*r[0];for(let U=0;U<s.inChannels;++U)for(let K=0;K<s.outDepth;++K){const G=K*i-x;let Y=G;for(;Y<0;)Y+=c;const Z=Math.min(s.inDepth,p+G),ne=R+K*F;for(let J=0;J<s.outHeight;++J){const re=J*a-w;let se=re;for(;se<0;)se+=u;const q=Math.min(s.inHeight,m+re),le=ne+J*V;for(let be=0;be<s.outWidth;++be){const pe=be*l-k;let de=pe;for(;de<0;)de+=h;const we=Math.min(s.inWidth,g+pe),Ne=le+be*j;let Te=S,Ee=0,We=0;for(let Ge=Y;Ge<Z;Ge+=c){const mt=O+Ge*r[1];for(let ft=se;ft<q;ft+=u){const ct=mt+ft*r[2];for(let Ze=de;Ze<we;Ze+=h){const rt=ct+Ze*r[3],Ke=t[rt+U];if(o==="max"&&Ke>Te?Te=Ke:o==="avg"&&(Ee+=Ke,We++),isNaN(Te))break}if(isNaN(Te))break}if(isNaN(Te))break}const Xe=Ne+U;T[Xe]=o==="avg"?Ee/Math.max(We,1):Te}}}}return $}function ube(t,e){const n=on(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;for(let x=0;x<e.batchSize;++x)for(let w=0;w<e.inChannels;++w)for(let k=0;k<e.outDepth;++k){const S=k*r-p;let $=S;for(;$<0;)$+=i;const T=Math.min(e.inDepth,c+S);for(let E=0;E<e.outHeight;++E){const F=E*s-m;let V=F;for(;V<0;)V+=a;const j=Math.min(e.inHeight,u+F);for(let W=0;W<e.outWidth;++W){const R=W*o-g;let O=R;for(;O<0;)O+=l;const U=Math.min(e.inWidth,h+R);let K=Number.NEGATIVE_INFINITY,G=-1;for(let Y=$;Y<T;Y+=i){const Z=Y-S;for(let ne=V;ne<j;ne+=a){const J=ne-F;for(let re=O;re<U;re+=l){const se=re-R,q=t.get(x,Y,ne,re,w);q>=K&&(K=q,G=Z*u*h+J*u+se)}}}n.set(G,x,k,E,W,w)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;wt(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;oe(Js(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Qi(s.shape,o,i,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Mn(u.inShape,u.outShape))h=pl({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,m=Pt(s.shape),g=a7(p,s.shape,s.dtype,m,u,"avg");h=n.makeTensorInfo(u.outShape,s.dtype,g.values)}return h}const hbe={kernelName:x2,backendName:"cpu",kernelFunc:dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;wt(s,"avgPool3d");const u=fc(s.shape,o,i,1,a,l,c),h=n.data.get(s.dataId).values,p=$B(h,s.shape,s.dtype,Pt(s.shape),u,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const pbe={kernelName:v2,backendName:"cpu",kernelFunc:fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;wt([s,o],"avgPool3DGrad");const u=fc(o.shape,i,a,1,l,c),h=u.strideDepth,p=u.strideHeight,m=u.strideWidth,g=u.filterDepth,x=u.filterHeight,w=u.filterWidth,k=u.dilationDepth,S=u.dilationHeight,$=u.dilationWidth,T=u.effectiveFilterDepth,E=u.effectiveFilterHeight,F=u.effectiveFilterWidth,V=T-1-u.padInfo.front,j=F-1-u.padInfo.left,W=E-1-u.padInfo.top,R=on(o.shape,"float32"),O=1/(g*x*w),U=n.bufferSync(s);for(let K=0;K<u.batchSize;++K)for(let G=0;G<u.inChannels;++G)for(let Y=0;Y<u.inDepth;++Y)for(let Z=0;Z<u.inHeight;++Z)for(let ne=0;ne<u.inWidth;++ne){const J=Y-V,re=Z-W,se=ne-j;let q=0;for(let le=0;le<T;le+=k){const be=(J+le)/h;if(!(be<0||be>=u.outDepth||Math.floor(be)!==be))for(let pe=0;pe<E;pe+=S){const de=(re+pe)/p;if(!(de<0||de>=u.outHeight||Math.floor(de)!==de))for(let we=0;we<F;we+=$){const Ne=(se+we)/m;if(Ne<0||Ne>=u.outWidth||Math.floor(Ne)!==Ne)continue;const Te=U.get(K,be,de,Ne,G);q+=Te}}}R.set(q*O,K,Y,Z,ne,G)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const gbe={kernelName:GC,backendName:"cpu",kernelFunc:mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;wt([s,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Qi(i.shape,a,l,1,c),h=u.strideHeight,p=u.strideWidth,m=u.filterHeight,g=u.filterWidth,x=u.dilationHeight,w=u.dilationWidth,k=u.effectiveFilterHeight,S=u.effectiveFilterWidth,$=S-1-u.padInfo.left,T=k-1-u.padInfo.top,E=on(i.shape,"float32"),F=1/(m*g),V=n.data.get(s.dataId).values,j=on(s.shape,"float32",V);for(let W=0;W<u.batchSize;++W)for(let R=0;R<u.inChannels;++R)for(let O=0;O<u.inHeight;++O)for(let U=0;U<u.inWidth;++U){const K=O-T,G=U-$;let Y=0;for(let Z=0;Z<k;Z+=x){const ne=(K+Z)/h;if(!(ne<0||ne>=u.outHeight||Math.floor(ne)!==ne))for(let J=0;J<S;J+=w){const re=(G+J)/p;if(re<0||re>=u.outWidth||Math.floor(re)!==re)continue;const se=j.get(W,ne,re,R);Y+=se}}E.set(Y*F,W,O,U,R)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const bbe={kernelName:HC,backendName:"cpu",kernelFunc:ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:o,offset:i,mean:a,variance:l}=e;oe(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),wt([s,a,l,o,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,p=n.data.get(l.dataId).values,m=o?n.data.get(o.dataId).values:new Float32Array([1]),g=i?n.data.get(i.dataId).values:new Float32Array([0]),x=new Float32Array(u.length),w=g.length,k=m.length,S=p.length,$=h.length;let T=0,E=0,F=0,V=0;for(let j=0;j<u.length;++j)x[j]=g[T++]+(u[j]-h[E++])*m[F++]/Math.sqrt(p[V++]+c),T>=w&&(T=0),E>=$&&(E=0),F>=k&&(F=0),V>=S&&(V=0);return n.makeTensorInfo(s.shape,s.dtype,x)}const vbe={kernelName:P2,backendName:"cpu",kernelFunc:xbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;wt([s],"batchToSpaceND");const a=o.reduce((k,S)=>k*S),l=Kg(s.shape,o,a),c=Xg(l.length,o.length),u=Yg(s.shape,o,a),h=g6(i,o.length),p=y6(u,i,o.length),m=sr({inputs:{x:s},backend:n,attrs:{shape:l}}),g=Do({inputs:{x:m},backend:n,attrs:{perm:c}}),x=sr({inputs:{x:g},backend:n,attrs:{shape:u}}),w=Fd({inputs:{x},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),w}const kbe={kernelName:k2,backendName:"cpu",kernelFunc:wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=n7(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}const Sbe={kernelName:qC,backendName:"cpu",kernelFunc:Cbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=Yt(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Ibe={kernelName:eO,backendName:"cpu",kernelFunc:Tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $be=jn(rg,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Nbe={kernelName:rg,backendName:"cpu",kernelFunc:$be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ebe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Ve(e.shape)),s=n.data.get(e.dataId),o=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],h=l[c];r[c]=Math.hypot(u,h)}return n.makeOutput(r,e.shape,"float32")},Rbe={kernelName:C2,backendName:"cpu",kernelFunc:Ebe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ff(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const Abe={kernelName:dS,backendName:"cpu",kernelFunc:Ff};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=an(s,e[0].shape)[0],i=e.map(x=>x.shape);f6(i,o);let a=ol(e.map(x=>x.shape),o);if(Ve(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(x=>Ve(x.shape)>0);if(l.length===1)return pl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map(T=>Od({inputs:{input:T},backend:n})),w=l.map(T=>Ff({inputs:{input:T},backend:n})),k=zf({inputs:x,backend:n,attrs:{axis:o}}),S=zf({inputs:w,backend:n,attrs:{axis:o}}),$=Vo({inputs:{real:k,imag:S},backend:n});return x.forEach(T=>n.disposeIntermediateTensorInfo(T)),w.forEach(T=>n.disposeIntermediateTensorInfo(T)),n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(S),$}const c=l.map(x=>{const k=[-1,Ve(x.shape.slice(o))];return sr({inputs:{x},backend:n,attrs:{shape:k}})}),u=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));a=ol(c.map(x=>x.shape),1);const h=c[0].shape[0]===1,p=D_(u,a,e[0].dtype,h),m=ol(l.map(x=>x.shape),o),g=n.makeTensorInfo(m,e[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const Dbe={kernelName:S2,backendName:"cpu",kernelFunc:zf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NB(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;wt([s,o],"conv2d");const h=pc(l),p=Os(s.shape,o.shape,i,c,a,u,!1,h),m=p.filterHeight,g=p.filterWidth,x=p.dilationHeight,w=p.dilationWidth,k=p.padInfo.left,S=p.padInfo.top,$=p.dataFormat==="channelsLast",T=new Ms(p.outShape,s.dtype),E=Pt(s.shape),F=Pt(o.shape),V=E[0],j=$?E[1]:E[2],W=$?E[2]:1,R=$?1:E[1],O=T.strides[0],U=$?T.strides[1]:T.strides[2],K=$?T.strides[2]:1,G=$?1:T.strides[1],Y=n.data.get(s.dataId).values,Z=n.data.get(o.dataId).values,ne=T.values;for(let J=0;J<p.batchSize;++J){const re=J*V,se=J*O;for(let q=0;q<p.outHeight;++q){const le=se+q*U,be=q*p.strideHeight-S;for(let pe=0;pe<m;++pe){const de=be+pe*x;if(de<0||de>=p.inHeight)continue;const we=pe*F[0],Ne=re+de*j;for(let Te=0;Te<p.outWidth;++Te){const Ee=le+Te*K,We=Te*p.strideWidth-k;for(let Xe=0;Xe<g;++Xe){const Ge=We+Xe*w;if(Ge<0||Ge>=p.inWidth)continue;const mt=we+Xe*F[1],ft=Ne+Ge*W;let ct=mt;for(let Ze=0;Ze<p.inChannels;++Ze){const rt=Y[ft+Ze*R];for(let Ke=0;Ke<p.outChannels;++Ke)ne[Ee+Ke*G]+=rt*Z[ct+Ke];ct+=p.outChannels}}}}}}return n.makeTensorInfo(T.shape,T.dtype,ne)}const Pbe={kernelName:T2,backendName:"cpu",kernelFunc:NB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;wt([s,o],"conv2dBackpropFilter");const h=pc(l),p=Os(s.shape,u,i,1,a,c,!1,h),{strideHeight:m,strideWidth:g,filterHeight:x,filterWidth:w}=p,k=p.dataFormat==="channelsLast",S=new Ms(p.filterShape,"float32"),$=p.padInfo.left,T=p.padInfo.top,E=n.data.get(s.dataId).values,F=n.data.get(o.dataId).values,V=new Ms(s.shape,s.dtype,E),j=new Ms(o.shape,o.dtype,F);for(let W=0;W<x;++W){const R=Math.max(0,Math.ceil((T-W)/m)),O=Math.min(p.outHeight,(p.inHeight+T-W)/m);for(let U=0;U<w;++U){const K=Math.max(0,Math.ceil(($-U)/g)),G=Math.min(p.outWidth,(p.inWidth+$-U)/g);for(let Y=0;Y<p.inChannels;++Y)for(let Z=0;Z<p.outChannels;++Z){let ne=0;for(let J=0;J<p.batchSize;++J)for(let re=R;re<O;++re){const se=W+re*m-T;for(let q=K;q<G;++q){const le=U+q*g-$;k?ne+=V.get(J,se,le,Y)*j.get(J,re,q,Z):ne+=V.get(J,Y,se,le)*j.get(J,Z,re,q)}}S.set(ne,W,U,Y,Z)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Obe={kernelName:YC,backendName:"cpu",kernelFunc:Mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;wt([s,o],"conv2dBackpropInput");const h=Pt(o.shape),p=Pt(s.shape);let m=pc(c);const g=Os(i,o.shape,a,1,l,u,!1,m),x=new Ms(g.inShape,"float32"),w=x.values,k=n.data.get(s.dataId).values,S=n.data.get(o.dataId).values,[$,T,E]=h,{batchSize:F,filterHeight:V,filterWidth:j,inChannels:W,inHeight:R,inWidth:O,outChannels:U,outHeight:K,outWidth:G,strideHeight:Y,strideWidth:Z}=g;m=g.dataFormat;const ne=V-1-g.padInfo.top,J=j-1-g.padInfo.left,re=m==="channelsLast",se=x.strides[0],q=re?x.strides[1]:x.strides[2],le=re?x.strides[2]:1,be=re?1:x.strides[1],pe=p[0],de=re?p[1]:p[2],we=re?p[2]:1,Ne=re?1:p[1];for(let Te=0;Te<F;++Te)for(let Ee=0;Ee<W;++Ee)for(let We=0;We<R;++We){const Xe=We-ne,Ge=Math.max(0,Math.ceil(Xe/Y)),mt=Math.min(K,(V+Xe)/Y);for(let ft=0;ft<O;++ft){const ct=ft-J,Ze=Math.max(0,Math.ceil(ct/Z)),rt=Math.min(G,(j+ct)/Z);let Ke=0;for(let ut=Ge;ut<mt;++ut){const kt=ut*Y-Xe;for(let Qe=Ze;Qe<rt;++Qe){const qt=Qe*Z-ct,Wt=pe*Te+de*ut+we*Qe,en=$*(V-1-kt)+T*(j-1-qt)+E*Ee;for(let yn=0;yn<U;++yn){const mn=k[Wt+Ne*yn],Kt=S[en+yn];Ke+=mn*Kt}}}const at=se*Te+q*We+le*ft+be*Ee;w[at]=Ke}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const zbe={kernelName:I2,backendName:"cpu",kernelFunc:Fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r;wt([s,o],"conv3d");const c=yu(s.shape,o.shape,i,l,a),{filterDepth:u,filterHeight:h,filterWidth:p,dilationDepth:m,dilationHeight:g,dilationWidth:x,padInfo:w}=c,k=w.front,S=w.left,$=w.top,T=new Ms(c.outShape,s.dtype),E=n.data.get(s.dataId).values,F=n.data.get(o.dataId).values,V=T.values,j=Pt(s.shape),W=Pt(o.shape);for(let R=0;R<c.batchSize;++R){const O=R*j[0],U=R*T.strides[0];for(let K=0;K<c.outDepth;++K){const G=U+K*T.strides[1],Y=K*c.strideDepth-k;for(let Z=0;Z<u;++Z){const ne=Y+Z*m;if(ne<0||ne>=c.inDepth)continue;const J=Z*W[0],re=O+ne*j[1];for(let se=0;se<c.outHeight;++se){const q=G+se*T.strides[2],le=se*c.strideHeight-$;for(let be=0;be<h;++be){const pe=le+be*g;if(pe<0||pe>=c.inHeight)continue;const de=J+be*W[1],we=re+pe*j[2];for(let Ne=0;Ne<c.outWidth;++Ne){const Te=q+Ne*c.outChannels,Ee=Ne*c.strideWidth-S;for(let We=0;We<p;++We){const Xe=Ee+We*x;if(Xe<0||Xe>=c.inWidth)continue;const Ge=de+We*W[2],mt=we+Xe*c.inChannels;let ft=Ge;for(let ct=0;ct<c.inChannels;++ct){const Ze=E[mt+ct];for(let rt=0;rt<c.outChannels;++rt)V[Te+rt]+=Ze*F[ft+rt];ft+=c.outChannels}}}}}}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const _be={kernelName:$2,backendName:"cpu",kernelFunc:Lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:l}=r;wt([s,o],"conv3dBackpropFilterV2");const c=Pt(s.shape),u=Pt(o.shape),h=yu(s.shape,l,i,1,a),p=h.strideDepth,m=h.strideHeight,g=h.strideWidth,x=h.filterDepth,w=h.filterHeight,k=h.filterWidth,S=new Ms(h.filterShape,"float32"),$=S.values,[T,E,F,V]=S.strides,j=n.data.get(o.dataId).values,[W,R,O,U]=u,K=n.data.get(s.dataId).values,[G,Y,Z,ne]=c,J=h.padInfo.front,re=h.padInfo.left,se=h.padInfo.top;for(let q=0;q<x;++q){const le=Math.max(0,Math.ceil((J-q)/p)),be=Math.min(h.outDepth,(h.inDepth+J-q)/p),pe=q*T;for(let de=0;de<w;++de){const we=Math.max(0,Math.ceil((se-de)/m)),Ne=Math.min(h.outHeight,(h.inHeight+se-de)/m),Te=de*E+pe;for(let Ee=0;Ee<k;++Ee){const We=Math.max(0,Math.ceil((re-Ee)/g)),Xe=Math.min(h.outWidth,(h.inWidth+re-Ee)/g),Ge=Ee*F+Te;for(let mt=0;mt<h.inChannels;++mt){const ft=mt*V+Ge;for(let ct=0;ct<h.outChannels;++ct){let Ze=0;for(let rt=0;rt<h.batchSize;++rt){const Ke=rt*G,at=rt*W;for(let ut=le;ut<be;++ut){const Qe=(q+ut*p-J)*Y+Ke,qt=ut*R+at;for(let Wt=we;Wt<Ne;++Wt){const yn=(de+Wt*m-se)*Z+Qe,mn=Wt*O+qt;for(let Kt=We;Kt<Xe;++Kt){const bn=(Ee+Kt*g-re)*ne+yn,Gt=Kt*U+mn;Ze+=K[bn+mt]*j[Gt+ct]}}}}$[ft+ct]=Ze}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Vbe={kernelName:ZC,backendName:"cpu",kernelFunc:Bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:l}=r;wt([s],"conv3dBackpropInputV2");const c=Pt(s.shape),u=Pt(o.shape),h=yu(l,o.shape,a,1,i),p=new Ms(h.inShape,"float32"),m=p.values,[g,x,w,k]=p.strides,S=n.data.get(s.dataId).values,[$,T,E,F]=c,V=n.data.get(o.dataId).values,[j,W,R,O]=u,{batchSize:U,filterDepth:K,filterHeight:G,filterWidth:Y,inChannels:Z,inDepth:ne,inHeight:J,inWidth:re,outChannels:se,outDepth:q,outHeight:le,outWidth:be,strideDepth:pe,strideHeight:de,strideWidth:we}=h,Ne=K-1-h.padInfo.front,Te=G-1-h.padInfo.top,Ee=Y-1-h.padInfo.left;for(let We=0;We<U;++We)for(let Xe=0;Xe<Z;++Xe)for(let Ge=0;Ge<ne;++Ge){const mt=Ge-Ne,ft=Math.max(0,Math.ceil(mt/pe)),ct=Math.min(q,(K+mt)/pe);for(let Ze=0;Ze<J;++Ze){const rt=Ze-Te,Ke=Math.max(0,Math.ceil(rt/de)),at=Math.min(le,(G+rt)/de);for(let ut=0;ut<re;++ut){const kt=ut-Ee,Qe=Math.max(0,Math.ceil(kt/we)),qt=Math.min(be,(Y+kt)/we);let Wt=0;for(let en=ft;en<ct;++en){const yn=en*pe-mt;for(let mn=Ke;mn<at;++mn){const Kt=mn*de-rt;for(let At=Qe;At<qt;++At){const bn=At*we-kt,Gt=$*We+T*en+E*mn+F*At,Er=j*(K-1-yn)+W*(G-1-Kt)+R*(Y-1-bn)+O*Xe;for(let yr=0;yr<se;++yr){const tn=S[Gt+yr],Fe=V[Er+yr];Wt+=tn*Fe}}}}m[g*We+x*Ge+w*Ze+k*ut+Xe]=Wt}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Wbe={kernelName:QC,backendName:"cpu",kernelFunc:jbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ube=jn(sg,t=>Math.cos(t)),Hbe={kernelName:sg,backendName:"cpu",kernelFunc:Ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbe=jn(og,t=>Math.cosh(t)),qbe={kernelName:og,backendName:"cpu",kernelFunc:Gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,h,p,m]=s.shape,g=o.shape[0],[x,w]=a,k=on([g,x,w,m],"float32"),S=n.data.get(o.dataId).values,$=n.data.get(i.dataId).values,T=n.data.get(s.dataId).values,E=Pt(s.shape),F=Pt(k.shape);for(let V=0;V<g;V++){const j=V*4,W=S[j],R=S[j+1],O=S[j+2],U=S[j+3],K=$[V];if(K>=u)continue;const G=x>1?(O-W)*(h-1)/(x-1):0,Y=w>1?(U-R)*(p-1)/(w-1):0;for(let Z=0;Z<x;Z++){const ne=x>1?W*(h-1)+Z*G:.5*(W+O)*(h-1);if(ne<0||ne>h-1){for(let J=0;J<w;J++)for(let re=0;re<m;re++){const se=re+J*F[2]+Z*F[1]+V*F[0];k.values[se]=c}continue}if(l==="bilinear"){const J=Math.floor(ne),re=Math.ceil(ne),se=ne-J;for(let q=0;q<w;q++){const le=w>1?R*(p-1)+q*Y:.5*(R+U)*(p-1);if(le<0||le>p-1){for(let we=0;we<m;we++){const Ne=we+q*F[2]+Z*F[1]+V*F[0];k.values[Ne]=c}continue}const be=Math.floor(le),pe=Math.ceil(le),de=le-be;for(let we=0;we<m;we++){let Ne=we+be*E[2]+J*E[1]+K*E[0];const Te=T[Ne];Ne=we+pe*E[2]+J*E[1]+K*E[0];const Ee=T[Ne];Ne=we+be*E[2]+re*E[1]+K*E[0];const We=T[Ne];Ne=we+pe*E[2]+re*E[1]+K*E[0];const Xe=T[Ne],Ge=Te+(Ee-Te)*de,mt=We+(Xe-We)*de;Ne=we+q*F[2]+Z*F[1]+V*F[0],k.values[Ne]=Ge+(mt-Ge)*se}}}else for(let J=0;J<w;++J){const re=w>1?R*(p-1)+J*Y:.5*(R+U)*(p-1);if(re<0||re>p-1){for(let le=0;le<m;le++){const be=le+J*F[2]+Z*F[1]+V*F[0];k.values[be]=c}continue}const se=Math.round(re),q=Math.round(ne);for(let le=0;le<m;le++){const be=le+se*E[2]+q*E[1]+K*E[0],pe=le+J*F[2]+Z*F[1]+V*F[0];k.values[pe]=T[be]}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Xbe={kernelName:eS,backendName:"cpu",kernelFunc:Kbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;wt(s,"cumprod");const l=Cr([o],s.shape.length);let c=s;l!=null&&(c=Do({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Br(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=qo(c.dtype,"int32"),p=_C(Ve(c.shape),h),m=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],x=a?(k,S)=>k+g-S-1:(k,S)=>k+S;for(let k=0;k<m.length;k+=g)for(let S=0;S<g;S++){const $=x(k,S);if(S===0)p[$]=i?1:m[$];else{const T=x(k,S-1);p[$]=i?m[T]*p[T]:m[$]*p[T]}}const w=n.makeTensorInfo(c.shape,h,p);if(l!=null){const k=bu(l),S=Do({inputs:{x:w},backend:n,attrs:{perm:k}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(c),S}return w}const Zbe={kernelName:JC,backendName:"cpu",kernelFunc:Ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;wt(s,"cumsum");const l=Cr([o],s.shape.length);let c=s;l!=null&&(c=Do({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Br(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=qo(c.dtype,"int32"),p=Zs(Ve(c.shape),h),m=n.data.get(c.dataId).values,g=c.shape[c.shape.length-1],x=a?(k,S)=>k+g-S-1:(k,S)=>k+S;for(let k=0;k<m.length;k+=g)for(let S=0;S<g;S++){const $=x(k,S);if(S===0)p[$]=i?0:m[$];else{const T=x(k,S-1);p[$]=i?m[T]+p[T]:m[$]+p[T]}}const w=n.makeTensorInfo(c.shape,h,p);if(l!=null){const k=bu(l),S=Do({inputs:{x:w},backend:n,attrs:{perm:k}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(c),S}return w}const Jbe={kernelName:N2,backendName:"cpu",kernelFunc:Qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,u=n7(l,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(o),u=E_(l,c,i,a);return n.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const txe={kernelName:tS,backendName:"cpu",kernelFunc:exe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r;oe(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],h=l*o,p=c*o,m=u/(o*o),g=n.data.get(s.dataId).values,x=new Float32Array(a*h*p*m);let w=0;for(let k=0;k<a;++k)for(let S=0;S<h;++S){const $=Math.floor(S/o),T=S%o;for(let E=0;E<p;++E){const F=Math.floor(E/o),V=E%o,j=(T*o+V)*m;for(let W=0;W<m;++W){const O=W+j+u*(F+c*($+l*k));x[w++]=g[O]}}}return n.makeTensorInfo([a,h,p,m],s.dtype,x)}const rxe={kernelName:nS,backendName:"cpu",kernelFunc:nxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EB(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;wt([s,o],"depthwiseConv2DNative");const u=Pt(s.shape),h=Pt(o.shape);let p=l;p==null&&(p=[1,1]),oe(Js(i,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`);const m=Os(s.shape,o.shape,i,p,a,c,!0),{filterHeight:g,filterWidth:x,dilationHeight:w,dilationWidth:k,padInfo:S}=m,$=S.left,T=S.top,E=m.outChannels/m.inChannels,F=new Ms(m.outShape,s.dtype),V=n.data.get(s.dataId).values,j=n.data.get(o.dataId).values,W=F.values;for(let R=0;R<m.batchSize;++R){const O=R*u[0],U=R*F.strides[0];for(let K=0;K<m.outHeight;++K){const G=U+K*F.strides[1],Y=K*m.strideHeight-T;for(let Z=0;Z<g;++Z){const ne=Y+Z*w;if(ne<0||ne>=m.inHeight)continue;const J=Z*h[0],re=O+ne*u[1];for(let se=0;se<m.outWidth;++se){const q=G+se*F.strides[2],le=se*m.strideWidth-$;for(let be=0;be<x;++be){const pe=le+be*k;if(pe<0||pe>=m.inWidth)continue;const de=J+be*h[1],we=re+pe*m.inChannels;let Ne=q,Te=de;for(let Ee=0;Ee<m.inChannels;++Ee){const We=V[we+Ee];for(let Xe=0;Xe<E;++Xe)W[Ne+Xe]+=We*j[Te+Xe];Ne+=E,Te+=E}}}}}}return n.makeTensorInfo(F.shape,F.dtype,F.values)}const sxe={kernelName:E2,backendName:"cpu",kernelFunc:EB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;wt([s,o],"depthwiseConv2dNativeBackpropFilter");const h=Os(s.shape,u,i,a,l,c,!0),{strideHeight:p,strideWidth:m,filterHeight:g,filterWidth:x}=h,w=new Ms(h.filterShape,"float32"),k=h.padInfo.left,S=h.padInfo.top,$=h.outChannels/h.inChannels,T=n.data.get(s.dataId).values,E=new Ms(s.shape,s.dtype,T),F=n.data.get(o.dataId).values,V=new Ms(o.shape,o.dtype,F);for(let j=0;j<g;++j){const W=Math.max(0,Math.ceil((S-j)/p)),R=Math.min(h.outHeight,(h.inHeight+S-j)/p);for(let O=0;O<x;++O){const U=Math.max(0,Math.ceil((k-O)/m)),K=Math.min(h.outWidth,(h.inWidth+k-O)/m);for(let G=0;G<h.outChannels;++G){const Y=Math.trunc(G/$),Z=G%$;let ne=0;for(let J=0;J<h.batchSize;++J)for(let re=W;re<R;++re){const se=j+re*p-S;for(let q=U;q<K;++q){const le=O+q*m-k;ne+=E.get(J,se,le,Y)*V.get(J,re,q,G)}}w.set(ne,j,O,Y,Z)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const ixe={kernelName:rS,backendName:"cpu",kernelFunc:oxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;wt([s,o],"depthwiseConv2DNativeBackpropInput");const h=Pt(s.shape),p=Pt(o.shape),m=Os(u,o.shape,i,a,l,c,!0),g=new Ms(m.inShape,"float32"),x=g.values,[w,k,S]=g.strides,$=n.data.get(s.dataId).values,[T,E,F]=h,V=n.data.get(o.dataId).values,[j,W,R]=p,{batchSize:O,filterHeight:U,filterWidth:K,inChannels:G,inHeight:Y,inWidth:Z,outChannels:ne,outHeight:J,outWidth:re,strideHeight:se,strideWidth:q}=m,le=U-1-m.padInfo.top,be=K-1-m.padInfo.left,pe=ne/G;for(let de=0;de<O;++de)for(let we=0;we<G;++we)for(let Ne=0;Ne<Y;++Ne){const Te=Ne-le,Ee=Math.max(0,Math.ceil(Te/se)),We=Math.min(J,(U+Te)/se);for(let Xe=0;Xe<Z;++Xe){const Ge=Xe-be,mt=Math.max(0,Math.ceil(Ge/q)),ft=Math.min(re,(K+Ge)/q);let ct=0;for(let Ze=Ee;Ze<We;++Ze){const rt=Ze*se-Te;for(let Ke=mt;Ke<ft;++Ke){const at=Ke*q-Ge,ut=T*de+E*Ze+F*Ke,kt=j*(U-1-rt)+W*(K-1-at)+R*we;for(let Qe=0;Qe<pe;++Qe){const qt=we*pe+Qe,Wt=$[ut+qt],en=V[kt+Qe];ct+=Wt*en}}}x[w*de+k*Ne+S*Xe+we]=ct}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const lxe={kernelName:sS,backendName:"cpu",kernelFunc:axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=Ve(r.shape),o=n.data.get(r.dataId).values,i=on([s,s],r.dtype),a=i.values;for(let c=0;c<o.length;c++)a[c*s+c]=o[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const uxe={kernelName:tO,backendName:"cpu",kernelFunc:cxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dxe={kernelName:R2,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:o,pad:i,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,h=l.data.get(s.dataId).values,p=s.shape.length,{batchSize:m,inHeight:g,inWidth:x,inChannels:w,outHeight:k,outWidth:S,padInfo:$,strideHeight:T,strideWidth:E,filterHeight:F,filterWidth:V,dilationHeight:j,dilationWidth:W,outShape:R}=Wg(r.shape,s.shape,o,i,"NHWC",a),O=Ve(R),U=R.length,K=zr(r.dtype,O);for(let Y=0;Y<m;++Y)for(let Z=0;Z<k;++Z){const ne=Z*T-$.top;for(let J=0;J<S;++J){const re=J*E-$.left;for(let se=0;se<w;++se){let q=Number.MIN_SAFE_INTEGER;for(let be=0;be<F;++be){const pe=ne+be*j;if(pe>=0&&pe<g)for(let de=0;de<V;++de){const we=re+de*W;if(we>=0&&we<x){const Ne=rl([Y,pe,we,se],u,Pt(r.shape)),Te=rl([be,de,se],p,Pt(s.shape)),Ee=c[Ne]+h[Te];Ee>q&&(q=Ee)}}}const le=rl([Y,Z,J,se],U,Pt(R));K[le]=q}}}return{dataId:l.write(Vd(K,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hxe={kernelName:pk,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=Ca(r.shape,c.data.get(r.dataId).values),h=Ca(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:m,inWidth:g,inChannels:x,outHeight:w,outWidth:k,padInfo:S,strideHeight:$,strideWidth:T,filterHeight:E,filterWidth:F,dilationHeight:V,dilationWidth:j,outShape:W}=Wg(r.shape,s.shape,i,a,"NHWC",l);oe(o.rank===W.length,()=>`Error in ${pk}, dy must have the same rank as output ${W.length}, but got ${o.rank}`);const R=Ca(W,c.data.get(o.dataId).values),O=ZM(s.shape,s.dtype);for(let K=0;K<p;++K)for(let G=0;G<w;++G){const Y=G*$-S.top;for(let Z=0;Z<k;++Z){const ne=Z*T-S.left;for(let J=0;J<x;++J){let re=Number.MIN_SAFE_INTEGER,se=0,q=0;for(let le=0;le<E;++le){const be=Y+le*V;if(be>=0&&be<m)for(let pe=0;pe<F;++pe){const de=ne+pe*j;if(de>=0&&de<g){const we=u[K][be][de][J]+h[le][pe][J];we>re&&(re=we,se=le,q=pe)}}}O[se][q][J]+=R[K][G][Z][J]}}}return{dataId:c.write(Vd(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fxe={kernelName:fk,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=Ca(r.shape,c.data.get(r.dataId).values),h=Ca(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:m,inWidth:g,inChannels:x,outHeight:w,outWidth:k,padInfo:S,strideHeight:$,strideWidth:T,filterHeight:E,filterWidth:F,dilationHeight:V,dilationWidth:j,outShape:W}=Wg(r.shape,s.shape,i,a,"NHWC",l);oe(o.rank===W.length,()=>`Error in ${fk}, dy must have the same rank as output ${W.length}, but got ${o.rank}`);const R=Ca(W,c.data.get(o.dataId).values),O=ZM(r.shape,r.dtype);for(let K=0;K<p;++K)for(let G=0;G<w;++G){const Y=G*$-S.top;for(let Z=0;Z<k;++Z){const ne=Z*T-S.left;for(let J=0;J<x;++J){let re=Number.MIN_SAFE_INTEGER,se=Y<0?0:Y,q=ne<0?0:ne;for(let le=0;le<E;++le){const be=Y+le*V;if(be>=0&&be<m)for(let pe=0;pe<F;++pe){const de=ne+pe*j;if(de>=0&&de<g){const we=u[K][be][de][J]+h[le][pe][J];we>re&&(re=we,se=be,q=de)}}}O[K][se][q][J]+=R[K][G][Z][J]}}}return{dataId:c.write(Vd(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pxe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:o,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const h=o.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${u} type.`);const[p,m]=s.shape.slice(0,2),g=s.shape.length===2?1:s.shape[2],x=n.data.get(s.dataId).values,w=s.dtype==="float32"?255:1,k=new Uint8ClampedArray(m*p*4);for(let $=0;$<p*m;++$){const T=[0,0,0,255*c];for(let F=0;F<g;F++){const V=x[$*g+F];if(s.dtype==="float32"){if(V<0||V>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${V}.`)}else if(s.dtype==="int32"&&(V<0||V>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${V}.`);g===1?(T[0]=V*w,T[1]=V*w,T[2]=V*w):T[F]=V*w}const E=$*4;k[E+0]=Math.round(T[0]),k[E+1]=Math.round(T[1]),k[E+2]=Math.round(T[2]),k[E+3]=Math.round(T[3])}o.width=m,o.height=p;const S=new ImageData(k,m,p);return h.putImageData(S,0,0),s}const mxe={kernelName:Kae,backendName:"cpu",kernelFunc:pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"sum");let a;s.dtype==="bool"?a=du({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=pl({inputs:{x:s},backend:n});const l=a.shape.length,c=an(o,a.shape),u=Cr(c,l);let h=c,p=a;u!=null&&(p=Do({inputs:{x:a},backend:n,attrs:{perm:u}}),h=Br(h.length,l)),Fs("sum",h,p.shape.length);const[m,g]=Ts(p.shape,h),x=qo(p.dtype,"int32");let w=Cx(n,m,x);const k=Ve(g),S=n.data.get(w.dataId).values,$=n.data.get(p.dataId).values;for(let T=0;T<S.length;++T){const E=T*k;let F=0;for(let V=0;V<k;++V)F+=$[E+V];S[T]=F}if(i){const T=Yr(w.shape,c),E=w;w=sr({inputs:{x:w},backend:n,attrs:{shape:T}}),n.disposeIntermediateTensorInfo(E)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(p),w}const gxe={kernelName:cv,backendName:"cpu",kernelFunc:o1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yxe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:l}=T6(s,o.length);$6(i.length,l,o);const{path:c,steps:u}=N6(a,l),h=u.length;let p=null,m=i.length;const g=[];for(let x=0;x<h;++x){for(const w of u[x]){const{permutationIndices:k,expandDims:S}=I6(m,l[w]);let $;E6(k)?$=o[w]:($=Do({inputs:{x:o[w]},backend:n,attrs:{perm:k}}),g.push($));const T=$.shape.slice();for(let E=0;E<S.length;++E)T.splice(S[E],0,1);Mn($.shape,T)||($=sr({inputs:{x:$},backend:n,attrs:{shape:T}}),g.push($)),p===null?p=$:(p=Bv({inputs:{a:$,b:p},backend:n}),g.push(p))}x<h-1&&(c[x]>=0&&(p=o1({inputs:{x:p},backend:n,attrs:{axis:c[x]-(i.length-m),keepDims:!1}}),g.push(p)),m--)}for(const x of g)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const bxe={kernelName:oS,backendName:"cpu",kernelFunc:yxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;wt([r,s],"eluGrad");const o=new Float32Array(Ve(s.shape)),i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?o[l]=a[l]:o[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",o)}const vxe={kernelName:iS,backendName:"cpu",kernelFunc:xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wxe=b6,kxe=x6,Cxe=v6,Sxe=w6,Txe=k6,Ixe=C6,$xe=jn(lg,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+wxe*n);return e*(1-((((Ixe*r+Txe)*r+Sxe)*r+Cxe)*r+kxe)*r*Math.exp(-n*n))}),Nxe={kernelName:lg,backendName:"cpu",kernelFunc:$xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ix(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:o}=r,i=s.shape.length,a=s.shape.slice();let l=o;return o<0&&(oe(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),sr({inputs:{x:s},backend:n,attrs:{shape:a}})}const Exe={kernelName:D2,backendName:"cpu",kernelFunc:Ix};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rxe=jr((t,e)=>t/e),l7=as(ig,Rxe),Bk={kernelName:ig,backendName:"cpu",kernelFunc:l7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RB(t,e,n){const r=t.shape,s=r[0],o=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,o],u=Ve(c),h=Ys("float32",u),p=Ys("float32",u);for(let w=0;w<s;w++){const k=Fd({inputs:{x:a},backend:n,attrs:{begin:[w,0],size:[1,o]}}),S=Fd({inputs:{x:l},backend:n,attrs:{begin:[w,0],size:[1,o]}}),$=Vo({inputs:{real:k,imag:S},backend:n}),{real:T,imag:E}=Axe($,e,n),F=cc(T,E);for(let V=0;V<o;V++){const j=S6(F,V);h[w*o+V]=j.real,p[w*o+V]=j.imag}n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo($)}const m=n.makeTensorInfo(c,"float32",h),g=n.makeTensorInfo(c,"float32",p),x=Vo({inputs:{real:m,imag:g},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),x}function Axe(t,e,n){const r=Ve(t.shape),s=n.data.get(t.dataId),o=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(Dxe(r)){const a=Vk(o,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),h=n.makeTensorInfo([],"float32",gu(r,"float32")),p=pl({inputs:{x:h},backend:n}),m=Bk.kernelFunc({inputs:{a:c,b:h},backend:n}),g=Bk.kernelFunc({inputs:{a:u,b:p},backend:n}),x=n.data.get(m.dataId).values,w=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),{real:x,imag:w}}return a}else{const a=cc(o,i),l=Pxe(a,r,e);return UF(l)}}function Dxe(t){return(t&t-1)===0}function Vk(t,e,n,r,s){if(n===1)return{real:t,imag:e};const o=cc(t,e),i=n/2,a=HF(o),l=a.real,c=a.imag,u=[l.length],h=s.makeTensorInfo(u,"float32",l),p=s.makeTensorInfo(u,"float32",c),m=Vo({inputs:{real:h,imag:p},backend:s}),g=GF(o),x=g.real,w=g.imag,k=[x.length],S=s.makeTensorInfo(k,"float32",x),$=s.makeTensorInfo(k,"float32",w),T=Vo({inputs:{real:S,imag:$},backend:s}),E=Vk(l,c,i,r,s),F=E.real,V=E.imag,j=[F.length],W=s.makeTensorInfo(j,"float32",F),R=s.makeTensorInfo(j,"float32",V),O=Vo({inputs:{real:W,imag:R},backend:s}),U=Vk(x,w,i,r,s),K=U.real,G=U.imag,Y=[K.length],Z=s.makeTensorInfo(Y,"float32",K),ne=s.makeTensorInfo(Y,"float32",G),J=Vo({inputs:{real:Z,imag:ne},backend:s}),re=KF(n,r),se=[re.real.length],q=s.makeTensorInfo(se,"float32",re.real),le=s.makeTensorInfo(se,"float32",re.imag),be=Vo({inputs:{real:q,imag:le},backend:s}),pe=Bv({inputs:{a:be,b:J},backend:s}),de=Of({inputs:{a:O,b:pe},backend:s}),we=i7({inputs:{a:O,b:pe},backend:s}),Ne=Od({inputs:{input:de},backend:s}),Te=Od({inputs:{input:we},backend:s}),Ee=Ff({inputs:{input:de},backend:s}),We=Ff({inputs:{input:we},backend:s}),Xe=zf({inputs:[Ne,Te],backend:s,attrs:{axis:0}}),Ge=zf({inputs:[Ee,We],backend:s,attrs:{axis:0}}),mt=s.data.get(Xe.dataId).values,ft=s.data.get(Ge.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(be),s.disposeIntermediateTensorInfo(pe),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(we),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(Ee),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(We),s.disposeIntermediateTensorInfo(Xe),s.disposeIntermediateTensorInfo(Ge),{real:mt,imag:ft}}function Pxe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let o=0,i=0;for(let a=0;a<e;a++){const l=XF(s*a,e,n),c=S6(t,a);o+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(o/=e,i/=e),qF(r,o,i,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Ve(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=sr({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),l=RB(a,!1,n),c=sr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Oxe={kernelName:aS,backendName:"cpu",kernelFunc:Mxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:o}=n,i=o||Xf(s),a=zr(i,Ve(r));return zxe(a,s,i),e.makeTensorInfo(r,i,a)}const Fxe={kernelName:lS,backendName:"cpu",kernelFunc:c7};function zxe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lxe={kernelName:cS,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,o=Ys(r.dtype,Ve(r.shape)),[i,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let p=0;p<i;p++){const m=p*l*a*c;for(let g=0;g<a;g++){const x=g*(l*c);for(let w=0;w<l;w++){const k=w*c;for(let S=0;S<c;S++){const $=Math.round(l-w-1),T=m+x+k+S;let E=u[T];if($>=0&&$<l){const F=$*c,V=m+x+F+S;E=u[V]}o[T]=E}}}}return{dataId:s.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:p,activation:m,leakyreluAlpha:g}=r;let x=NB({inputs:{x:s,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:p}});if(i){const w=x;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const k=sr({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});x=Of({inputs:{a:x,b:k},backend:n}),n.disposeIntermediateTensorInfo(k)}else x=Of({inputs:{a:x,b:i},backend:n});n.disposeIntermediateTensorInfo(w)}if(m){const w=x;if(u==="NCHW"&&m==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const k=sr({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});x=Tx(n,x,m,k,g),n.disposeIntermediateTensorInfo(k)}else x=Tx(n,x,m,a,g);n.disposeIntermediateTensorInfo(w)}return x}const Bxe={kernelName:ix,backendName:"cpu",kernelFunc:_xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:p,activation:m,leakyreluAlpha:g}=r;let x=EB({inputs:{x:s,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:p}});if(i){const w=x;x=Of({inputs:{a:x,b:i},backend:n}),n.disposeIntermediateTensorInfo(w)}if(m){const w=x;x=Tx(n,x,m,a,g),n.disposeIntermediateTensorInfo(w)}return x}const jxe={kernelName:vO,backendName:"cpu",kernelFunc:Vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=Ve(r.shape),i=s.shape,a=i[i.length-1],[l,c,u,h]=a6(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(s.dataId).values,m=n.bufferSync(r),g=B_(p,m,r.dtype,c,a,u,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,g.values)}const Uxe={kernelName:nO,backendName:"cpu",kernelFunc:Wxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r;wt([s,o],"gatherV2");const l=an(i,s.shape)[0],c=n.data.get(o.dataId).values,u=s.shape[l];for(let T=0;T<c.length;++T){const E=c[T];oe(E<=u-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${u-1}]`)}let h=a;a==null&&(h=0);const p=Ve(o.shape),m=A6(s,o,l,h),g=sr({inputs:{x:s},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),x=sr({inputs:{x:o},backend:n,attrs:{shape:[m.batchSize,p/m.batchSize]}}),w=[m.batchSize,m.outerSize,p/m.batchSize,m.sliceSize],k=n.bufferSync(x),S=n.bufferSync(g),$=V_(S,k,w);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(m.outputShape,$.dtype,$.values)}const Gxe={kernelName:M2,backendName:"cpu",kernelFunc:Hxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Ve(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=sr({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),l=RB(a,!0,n),c=sr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Kxe={kernelName:uS,backendName:"cpu",kernelFunc:qxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xxe=jn(mg,t=>Number.isFinite(t)?1:0,"bool"),Yxe={kernelName:mg,backendName:"cpu",kernelFunc:Xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zxe=jn(gg,t=>Math.abs(t)===1/0?1:0,"bool"),Qxe={kernelName:gg,backendName:"cpu",kernelFunc:Zxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jxe=jn(yg,t=>Number.isNaN(t)?1:0,"bool"),e2e={kernelName:yg,backendName:"cpu",kernelFunc:Jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=G_(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const n2e={kernelName:rO,backendName:"cpu",kernelFunc:t2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e=jn(xg,t=>Math.log1p(t)),s2e={kernelName:xg,backendName:"cpu",kernelFunc:r2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2e=jr((t,e)=>t&&e),i2e=as(_2,o2e,null,"bool"),a2e={kernelName:_2,backendName:"cpu",kernelFunc:i2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e=jn(B2,t=>t?0:1,"bool"),c2e={kernelName:B2,backendName:"cpu",kernelFunc:l2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u2e=jr((t,e)=>t||e),d2e=as(V2,u2e,null,"bool"),h2e={kernelName:V2,backendName:"cpu",kernelFunc:d2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=r;wt(s,"LRN");const c=s.shape[3],u=c-1,h=n.data.get(s.dataId).values,p=Ve(s.shape),m=new Float32Array(p);function g(x){const w=x%c;let k=x-w+Math.max(0,w-o);const S=x-w+Math.min(w+o,u);let $=0;for(;k<=S;k++){const T=h[k];$+=T*T}return $}for(let x=0;x<p;x++){const w=g(x),k=h[x]*Math.pow(i+a*w,-l);m[x]=k}return n.makeTensorInfo(s.shape,s.dtype,m)}const p2e={kernelName:j2,backendName:"cpu",kernelFunc:f2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;wt(i,"LRNGrad");const h=Ve(i.shape),p=i.shape[3],m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,x=n.data.get(o.dataId).values,w=new Float32Array(h),k=h;for(let S=0;S<k;S++){const $=S%p,T=S-$+Math.max(0,$-a),E=S-$+Math.min(p,$+a+1);let F=0;for(let V=T;V<E;V++)F+=Math.pow(g[V],2);F=c*F+l;for(let V=T;V<E;V++){let j=-2*c*u*g[V]*x[S]/F;S===V&&(j+=Math.pow(F,-u)),j*=m[S],w[V]+=j}}return n.makeTensorInfo(i.shape,s.dtype,w)}const g2e={kernelName:hS,backendName:"cpu",kernelFunc:m2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AB(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=n;let l=s.shape;const c=l.length,u=an(o,l);let h=u;const p=Cr(h,c);let m=a.data.get(s.dataId).values;if(p!=null){const T=new Array(c);for(let E=0;E<T.length;E++)T[E]=l[p[E]];m=s7(m,l,s.dtype,p,T),h=Br(h.length,c),l=T}wt(s,"max"),Fs("max",h,c);const[g,x]=Ts(l,h),w=Ve(x),k=K_(m,w,g,s.dtype),S=a.write(k,g,s.dtype);let $=g;return i&&($=Yr(g,u)),{dataId:S,shape:$,dtype:s.dtype}}const y2e={kernelName:W2,backendName:"cpu",kernelFunc:AB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;wt(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;oe(Js(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Qi(s.shape,o,i,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Mn(u.inShape,u.outShape))h=pl({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,m=Pt(s.shape),g=a7(p,s.shape,s.dtype,m,u,"max");h=n.makeTensorInfo(u.outShape,s.dtype,g.values)}return h}const x2e={kernelName:U2,backendName:"cpu",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;wt(s,"maxPool3d");const u=fc(s.shape,o,i,1,a,l,c),h=n.data.get(s.dataId).values,p=$B(h,s.shape,s.dtype,Pt(s.shape),u,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const w2e={kernelName:H2,backendName:"cpu",kernelFunc:v2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;wt([s,o],"maxPool3DGrad");const u=fc(o.shape,i,a,1,l,c),h=n.bufferSync(o),p=ube(h,u),m=u.strideDepth,g=u.strideHeight,x=u.strideWidth,w=u.dilationDepth,k=u.dilationHeight,S=u.dilationWidth,$=u.effectiveFilterDepth,T=u.effectiveFilterHeight,E=u.effectiveFilterWidth,F=$-1-u.padInfo.front,V=E-1-u.padInfo.left,j=T-1-u.padInfo.top,W=on(o.shape,"float32"),R=n.bufferSync(s);for(let O=0;O<u.batchSize;++O)for(let U=0;U<u.inChannels;++U)for(let K=0;K<u.inDepth;++K)for(let G=0;G<u.inHeight;++G)for(let Y=0;Y<u.inWidth;++Y){const Z=K-F,ne=G-j,J=Y-V;let re=0;for(let se=0;se<$;se+=w){const q=(Z+se)/m;if(!(q<0||q>=u.outDepth||Math.floor(q)!==q))for(let le=0;le<T;le+=k){const be=(ne+le)/g;if(!(be<0||be>=u.outHeight||Math.floor(be)!==be))for(let pe=0;pe<E;pe+=S){const de=(J+pe)/x;if(de<0||de>=u.outWidth||Math.floor(de)!==de)continue;const we=$*T*E-1-p.get(O,q,be,de,U),Ne=se*T*E+le*E+pe,Te=we===Ne?1:0;if(Te===0)continue;const Ee=R.get(O,q,be,de,U);re+=Ee*Te}}}W.set(re,O,K,G,Y,U)}return n.makeTensorInfo(W.shape,W.dtype,W.values)}const C2e={kernelName:pS,backendName:"cpu",kernelFunc:k2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;wt([o,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,p=Qi(a.shape,l,c,1,u,h),m=n.data.get(a.dataId).values,g=on(p.outShape,a.dtype,IB(m,a.shape,a.dtype,p).values),x=p.strideHeight,w=p.strideWidth,k=p.dilationHeight,S=p.dilationWidth,$=p.effectiveFilterHeight,T=p.effectiveFilterWidth,E=T-1-p.padInfo.left,F=$-1-p.padInfo.top,V=on(a.shape,"float32"),j=n.data.get(s.dataId).values,W=on(s.shape,"float32",j);for(let R=0;R<p.batchSize;++R)for(let O=0;O<p.inChannels;++O)for(let U=0;U<p.inHeight;++U)for(let K=0;K<p.inWidth;++K){const G=U-F,Y=K-E;let Z=0;for(let ne=0;ne<$;ne+=k){const J=(G+ne)/x;if(!(J<0||J>=p.outHeight||Math.floor(J)!==J))for(let re=0;re<T;re+=S){const se=(Y+re)/w;if(se<0||se>=p.outWidth||Math.floor(se)!==se)continue;const q=$*T-1-g.get(R,J,se,O),le=ne*T+re,be=q===le?1:0;if(be===0)continue;const pe=W.get(R,J,se,O);Z+=pe*be}}V.set(Z,R,U,K,O)}return n.makeTensorInfo(V.shape,V.dtype,V.values)}const T2e={kernelName:fS,backendName:"cpu",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t,e,n,r,s){const o=Pt(e),i=a7(t,e,n,o,s,"max"),a=IB(t,e,n,s,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $2e={kernelName:sO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;wt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Qi(r.shape,s,o,[1,1],i),[h,p]=I2e(c,r.shape,r.dtype,a,u),m=l.write(h,u.outShape,r.dtype),g=l.write(p,u.outShape,r.dtype);return[{dataId:m,shape:u.outShape,dtype:r.dtype},{dataId:g,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=an(o,s.shape),c=Ts(s.shape,a)[1],u=Ve(c),h=[],p=n.makeTensorInfo([],"float32",new Float32Array([u]));h.push(p);const m=du({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});h.push(m);const g=l7({inputs:{a:m,b:p},backend:n});h.push(g);const x=o1({inputs:{x:g},backend:n,attrs:{axis:o,keepDims:i}});return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const E2e={kernelName:G2,backendName:"cpu",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"min");const a=an(o,s.shape);let l=a;const c=Cr(l,s.shape.length);let u=s;c!=null&&(u=Do({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Br(l.length,s.shape.length)),Fs("min",l,u.shape.length);const[h,p]=Ts(u.shape,l),m=Ve(p),g=Zs(Ve(h),u.dtype),x=n.data.get(u.dataId).values;for(let k=0;k<g.length;++k){const S=k*m;let $=x[S];for(let T=0;T<m;++T){const E=x[S+T];(Number.isNaN(E)||E<$)&&($=E)}g[k]=$}c!=null&&n.disposeIntermediateTensorInfo(u);const w=n.makeTensorInfo(h,u.dtype,g);if(i){const k=Yr(h,a),S=sr({inputs:{x:w},backend:n,attrs:{shape:k}});return n.disposeIntermediateTensorInfo(w),S}return w}const A2e={kernelName:q2,backendName:"cpu",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,mode:i}=r;wt(s,"mirrorPad");const a=o.map(($,T)=>$[0]+s.shape[T]+$[1]),l=o.map($=>$[0]),c=o.map(($,T)=>$[0]+s.shape[T]),u=i==="reflect"?0:1,h=n.data.get(s.dataId).values,p=s.shape.length,m=Pt(s.shape),g=Ve(a),x=a.length,w=Pt(a),k=Ys(s.dtype,g);for(let $=0;$<g;$++){let T=Yf($,x,w);for(let F=0;F<x;F++)T[F]<l[F]?T[F]=l[F]*2-T[F]-u:T[F]>=c[F]&&(T[F]=(c[F]-1)*2-T[F]+u);T=T.map((F,V)=>F-l[V]);const E=rl(T,p,m);k[$]=h[E]}return{dataId:n.write(k,a,s.dtype),shape:a,dtype:s.dtype}}const P2e={kernelName:K2,backendName:"cpu",kernelFunc:D2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e=jr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),O2e=as(kg,M2e),F2e={kernelName:kg,backendName:"cpu",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=s.shape.length;let a=o;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=an([a],s.shape),c=AB({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Yr(c.shape,l),h=sr({inputs:{x:c},backend:n,attrs:{shape:u}}),p=i7({inputs:{a:s,b:h},backend:n}),m=F_({inputs:{x:p},backend:n}),g=o1({inputs:{x:m},backend:n,attrs:{axis:l,keepDims:!1}}),x=sr({inputs:{x:g},backend:n,attrs:{shape:u}}),w=l7({inputs:{a:m,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),w}const z2e={kernelName:hv,backendName:"cpu",kernelFunc:DB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r;wt(s,"multinomial");const l=a?s:DB({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,p=[c,o],m=Zs(Ve(p),"int32");for(let g=0;g<c;++g){const x=g*u,w=new Float32Array(u-1);w[0]=h[x];for(let $=1;$<w.length;++$)w[$]=w[$-1]+h[x+$];const k=qS.alea(i.toString()),S=g*o;for(let $=0;$<o;++$){const T=k();m[S+$]=w.length;for(let E=0;E<w.length;E++)if(T<w[E]){m[S+$]=E;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",m)}const _2e={kernelName:oO,backendName:"cpu",kernelFunc:L2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e=n6;function V2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;wt(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,{selectedIndices:h}=B2e(c,u,i,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const j2e={kernelName:mS,backendName:"cpu",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e=r6;function U2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;wt(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:p,validOutputs:m}=W2e(u,h,i,a,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const H2e={kernelName:gS,backendName:"cpu",kernelFunc:U2e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G2e=s6;function q2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;wt(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,h=n.data.get(o.dataId).values,p=i,m=a,g=l,x=c,{selectedIndices:w,selectedScores:k}=G2e(u,h,p,m,g,x);return[n.makeTensorInfo([w.length],"int32",new Int32Array(w)),n.makeTensorInfo([k.length],"float32",new Float32Array(k))]}const K2e={kernelName:yS,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:l}=r;wt(s,"oneHot");const c=Ve(s.shape),u=new Float32Array(c*i);u.fill(l);const h=n.data.get(s.dataId).values;for(let p=0;p<c;++p)h[p]>=0&&h[p]<i&&(u[p*i+h[p]]=a);return n.makeTensorInfo([...s.shape,i],o,u)}const Y2e={kernelName:Q2,backendName:"cpu",kernelFunc:X2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $x(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Od({inputs:{input:r},backend:n}),o=$x({inputs:{x:s},backend:n}),i=Ff({inputs:{input:r},backend:n}),a=$x({inputs:{x:i},backend:n}),l=Vo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return c7({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Z2e={kernelName:mv,backendName:"cpu",kernelFunc:$x};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PB(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Od({inputs:{input:r},backend:n}),o=PB({inputs:{x:s},backend:n}),i=Ff({inputs:{input:r},backend:n}),a=$x({inputs:{x:i},backend:n}),l=Vo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return c7({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Q2e={kernelName:Z2,backendName:"cpu",kernelFunc:PB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Ix({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(u=>{LC(o,u.shape,"All tensors passed to stack must have matching shapes"),oe(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=Ix({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=zf({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const J2e={kernelName:J2,backendName:"cpu",kernelFunc:MB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;wt(s,"pad");const a=o.map((S,$)=>S[0]+s.shape[$]+S[1]),l=o.map(S=>S[0]),c=n.data.get(s.dataId).values,u=Ve(s.shape),h=s.shape.length,p=Pt(s.shape),m=Ve(a),g=a.length,x=Pt(a),w=Ys(s.dtype,m);i!==0&&w.fill(i);for(let S=0;S<u;S++){const T=Yf(S,h,p).map((F,V)=>F+l[V]),E=rl(T,g,x);w[E]=c[S]}return{dataId:n.write(w,a,s.dtype),shape:a,dtype:s.dtype}}const OB={kernelName:ev,backendName:"cpu",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tve=jr((t,e)=>Math.pow(t,e)),nve=as(Sg,tve),rve={kernelName:Sg,backendName:"cpu",kernelFunc:nve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,a=s.map(w=>n.data.get(w.dataId).values),l=s.map(w=>w.shape),c=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,[h,p,m]=eB(a,l,c,o.shape,o.dtype,u,i.shape),g=h.map(w=>n.makeTensorInfo([w.length],"int32",w)),x=n.makeTensorInfo(m,o.dtype,p);return g.concat([x])}const ove={kernelName:iO,backendName:"cpu",kernelFunc:sve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ive(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,u]=tB(i,r.shape,r.dtype,a,s.shape,l,o.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([u.length],r.dtype,u);return[h,p]}const ave={kernelName:aO,backendName:"cpu",kernelFunc:ive};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,h=n.data.get(i.dataId).values,p=a.map(w=>n.data.get(w.dataId).values),m=a.map(w=>w.shape),[g,x]=nB(c,s.shape,u,o.shape,o.dtype,h,i.shape,p,m,l);return n.makeTensorInfo(g,o.dtype,x)}const cve={kernelName:lO,backendName:"cpu",kernelFunc:lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:o,step:i}=n,a=rB(r,s,i,o);return e.makeTensorInfo([a.length],o,a)}const dve={kernelName:bS,backendName:"cpu",kernelFunc:uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hve=jn(Tg,t=>1/t),fve={kernelName:Tg,backendName:"cpu",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;wt(s,"resizeBilinear");const l=Pt(s.shape),[c,u]=a,[h,p,m,g]=s.shape,x=n.data.get(s.dataId).values,w=new Float32Array(Ve([h,c,u,g])),k=[o&&c>1?p-1:p,o&&u>1?m-1:m],S=[o&&c>1?c-1:c,o&&u>1?u-1:u];let $=0;const T=k[0]/S[0],E=k[1]/S[1];for(let F=0;F<h;F++)for(let V=0;V<c;V++){let j;i?j=T*(V+.5)-.5:j=T*V;const W=Math.max(0,Math.floor(j)),R=j-W,O=Math.min(p-1,Math.ceil(j)),U=F*l[0]+W*l[1],K=F*l[0]+O*l[1];for(let G=0;G<u;G++){let Y;i?Y=E*(G+.5)-.5:Y=E*G;const Z=Math.max(0,Math.floor(Y)),ne=Y-Z,J=Math.min(m-1,Math.ceil(Y)),re=U+Z*l[2],se=K+Z*l[2],q=U+J*l[2],le=K+J*l[2];for(let be=0;be<g;be++){const pe=x[re+be],de=x[se+be],we=x[q+be],Ne=x[le+be],Te=pe+(we-pe)*ne,Ee=de+(Ne-de)*ne,We=Te+(Ee-Te)*R;w[$++]=We}}}return n.makeTensorInfo([h,c,u,g],"float32",w)}const mve={kernelName:ov,backendName:"cpu",kernelFunc:pve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gve(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;wt([o,s],"resizeBilinearGrad");const a=Pt(s.shape),[l,c,u,h]=s.shape,[,p,m]=o.shape,g=new Float32Array(l*c*u*h),x=[i&&p>1?c-1:c,i&&m>1?u-1:u],w=[i&&p>1?p-1:p,i&&m>1?m-1:m],k=x[0]/w[0],S=x[1]/w[1],$=n.data.get(o.dataId).values;let T=0;for(let E=0;E<l;E++){const F=E*a[0];for(let V=0;V<p;V++){const j=V*k,W=Math.floor(j),R=Math.min(Math.ceil(j),c-1),O=F+W*a[1],U=F+R*a[1],K=j-W,G=1-K;for(let Y=0;Y<m;Y++){const Z=Y*S,ne=Math.floor(Z),J=Math.min(Math.ceil(Z),u-1),re=Z-ne,se=1-re,q=O+ne*a[2],le=O+J*a[2],be=U+ne*a[2],pe=U+J*a[2],de=G*se,we=G*re,Ne=K*se,Te=K*re;for(let Ee=0;Ee<h;Ee++){const We=$[T++];g[q+Ee]+=We*de,g[le+Ee]+=We*we,g[be+Ee]+=We*Ne,g[pe+Ee]+=We*Te}}}}return n.makeTensorInfo([l,u,c,h],"float32",g)}const yve={kernelName:wS,backendName:"cpu",kernelFunc:gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;wt(s,"resizeNearestNeighbor");const l=Pt(s.shape),[c,u]=a,[h,p,m,g]=s.shape,x=n.data.get(s.dataId).values,w=new Float32Array(h*c*u*g),k=[o&&c>1?p-1:p,o&&u>1?m-1:m],S=[o&&c>1?c-1:c,o&&u>1?u-1:u],$=k[0]/S[0],T=k[1]/S[1];let E=0;for(let F=0;F<h;F++){const V=F*l[0];for(let j=0;j<c;j++){const W=i?$*(j+.5):$*j;let R=Math.min(p-1,o?Math.round(W):Math.floor(W));i&&(R=Math.max(0,R));const O=V+R*l[1];for(let U=0;U<u;U++){const K=i?T*(U+.5):T*U;let G=Math.min(m-1,o?Math.round(K):Math.floor(K));i&&(G=Math.max(0,G));const Y=O+G*l[2];for(let Z=0;Z<g;Z++){const ne=x[Y+Z];w[E++]=ne}}}}return n.makeTensorInfo([h,c,u,g],s.dtype,w)}const xve={kernelName:sv,backendName:"cpu",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vve(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;wt([o,s],"resizeNearestNeighborGrad");const a=Pt(s.shape),l=Pt(o.shape),[c,u,h,p]=s.shape,[,m,g]=o.shape,x=new Float32Array(c*u*h*p),w=n.data.get(o.dataId).values,k=[i&&m>1?u-1:u,i&&g>1?h-1:h],S=[i&&m>1?m-1:m,i&&g>1?g-1:g],$=k[0]/S[0],T=k[1]/S[1],E=1/$,F=1/T,V=Math.ceil(E)*2+2,j=Math.ceil(F)*2+2;for(let W=0;W<c;W++){const R=W*a[0];for(let O=0;O<u;O++){const U=R+O*a[1],K=Math.floor(O*E),G=Math.floor(K-V/2);for(let Y=0;Y<h;Y++){const Z=U+Y*a[2],ne=Math.floor(Y*F),J=Math.floor(ne-j/2);for(let re=0;re<p;re++){let se=0;for(let q=0;q<V;q++){const le=q+G;if(le<0||le>=m)continue;const be=R+le*l[1],pe=le*$,de=Math.min(u-1,i?Math.round(pe):Math.floor(pe));if(O===de)for(let we=0;we<j;we++){const Ne=we+J;if(Ne<0||Ne>=g)continue;const Te=be+Ne*l[2],Ee=Ne*T,We=Math.min(h-1,i?Math.round(Ee):Math.floor(Ee));Y===We&&(se+=w[Te+re])}}x[Z+re]=se}}}}return n.makeTensorInfo(s.shape,s.dtype,x)}const wve={kernelName:vS,backendName:"cpu",kernelFunc:vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r;wt(s,"reverse");const i=s.shape.length,a=an(o,s.shape);if(i===0)return pl({inputs:{x:s},backend:n});const l=new Ms(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const h=l.indexToLoc(u),p=h.slice();a.forEach(m=>p[m]=s.shape[m]-1-p[m]),l.set(c.get(...p),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Cve={kernelName:iv,backendName:"cpu",kernelFunc:kve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve={kernelName:NS,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,l=Ys(r.dtype,Ve(r.shape)),[c,u,h,p]=r.shape,[m,g]=m6(i,u,h),x=255,w=Math.sin(s),k=Math.cos(s),S=a.data.get(r.dataId).values;for(let T=0;T<c;T++){const E=T*h*u*p;for(let F=0;F<u;F++){const V=F*(h*p);for(let j=0;j<h;j++){const W=j*p;for(let R=0;R<p;R++){const O=[c,F,j,R],U=O[2],K=O[1];let G=(U-m)*k-(K-g)*w,Y=(U-m)*w+(K-g)*k;G=Math.round(G+m),Y=Math.round(Y+g);let Z=o;if(typeof o!="number"&&(R===3?Z=x:Z=o[R]),G>=0&&G<h&&Y>=0&&Y<u){const J=Y*(h*p),re=G*p,se=E+J+re+R;Z=S[se]}const ne=E+V+W+R;l[ne]=Z}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tve=jn(Ng,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Ive={kernelName:Ng,backendName:"cpu",kernelFunc:Tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ud(o,s,i),p=!0,m=n.bufferSync(s),g=n.bufferSync(o),x=pd(m,g,i,h,c,l,a,u,0,p);return n.makeTensorInfo(i,x.dtype,x.values)}const Nve={kernelName:cO,backendName:"cpu",kernelFunc:$ve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function Rve(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function Ave(t,e,n,r,s,o){const i=zr("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)i[c+u]=o==="left"?Eve(l,e[u+c]):Rve(l,e[u+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dve(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=Ave(a,l,s.shape[0],s.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",c)}const Pve={kernelName:dO,backendName:"cpu",kernelFunc:Dve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mve(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e;wt([r,s,o],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,u=qo(s.dtype,o.dtype),h=Zs(Ve(s.shape),u);let p=0;const m=i===0||i>1||s.shape.length===1?1:Ve(s.shape.slice(1));for(let g=0;g<a.length;g++)for(let x=0;x<m;x++)a[g]===1?h[p++]=l[g]:h[p++]=c[g];return n.makeTensorInfo(s.shape,u,h)}const Ove={kernelName:av,backendName:"cpu",kernelFunc:Mve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fve=$v,zve=Nv,Lve=jn(Rg,t=>t>=0?zve*t:Fve*(Math.exp(t)-1)),_ve={kernelName:Rg,backendName:"cpu",kernelFunc:Lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bve=jn(Pg,t=>t<0?-1:t>0?1:0),Vve={kernelName:Pg,backendName:"cpu",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve=jn(Ag,t=>Math.sin(t)),Wve={kernelName:Ag,backendName:"cpu",kernelFunc:jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uve=jn(Dg,t=>Math.sinh(t)),Hve={kernelName:Dg,backendName:"cpu",kernelFunc:Uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gve=11920928955078125e-23,$E=Math.log(Gve)+2,qve=jn(Og,t=>{const e=t>-$E,n=t<$E,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),Kve={kernelName:Og,backendName:"cpu",kernelFunc:qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;wt([s],"spaceToBatchND");const a=Ve(o),l=[[0,0]];l.push(...i);for(let F=1+o.length;F<s.shape.length;++F)l.push([0,0]);const c=OB.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=Kg(c.shape,o,a,!1),h=Xg(u.length,o.length,!1),p=Yg(c.shape,o,a,!1),x=sr({inputs:{x:c},backend:n,attrs:{shape:u}}),S=Do({inputs:{x},backend:n,attrs:{perm:h}}),E=sr({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),E}const Yve={kernelName:uv,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zve(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values[0],[h,p,m,g,x]=aB(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(w=>Number(w)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const Qve={kernelName:hO,backendName:"cpu",kernelFunc:Zve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[c,u,h]=lB(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}const ewe={kernelName:fO,backendName:"cpu",kernelFunc:Jve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,u]=o7(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const nwe={kernelName:pO,backendName:"cpu",kernelFunc:twe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,u]=o7(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const swe={kernelName:mO,backendName:"cpu",kernelFunc:rwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:p}=Ud(o,s,a),m=!1,g=n.bufferSync(s);let x;switch(o.dtype){case"bool":{const w=n.bufferSync(o),k=!!n.data.get(i.dataId).values[0];x=pd(g,w,a,p,u,c,l,h,k,m);break}case"float32":{const w=n.bufferSync(o),k=n.data.get(i.dataId).values[0];x=pd(g,w,a,p,u,c,l,h,k,m);break}case"int32":{const w=n.bufferSync(o),k=n.data.get(i.dataId).values[0];x=pd(g,w,a,p,u,c,l,h,k,m);break}case"string":{const w=n.bufferSync(o),k=iu(n.data.get(i.dataId).values[0]);x=pd(g,w,a,p,u,c,l,h,k,m);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(a,x.dtype,x.values)}const iwe={kernelName:gO,backendName:"cpu",kernelFunc:owe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=an(i,s.shape)[0],l=R6(s,o,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(h=>{const p=[...u];p[a]=h;const m=Fd({inputs:{x:s},backend:n,attrs:{begin:c,size:p}});return c[a]+=h,m})}const lwe={kernelName:dv,backendName:"cpu",kernelFunc:awe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cwe={kernelName:kS,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;wt(n,"square");const s=r.data.get(n.dataId).values,o=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];o[a]=l*l}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe=jn(jg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),dwe={kernelName:jg,backendName:"cpu",kernelFunc:uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:p}=r;wt(s,"stridedSlice");const{finalShapeSparse:m,finalShape:g,isIdentity:x,sliceDim0:w,isSimpleSlice:k,begin:S,end:$,strides:T}=h6(s.shape,o,i,a,l,c,u,h,p);let E;if(x)E=sr({inputs:{x:s},backend:n,attrs:{shape:g}});else if(w||k){oe(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const F=c6(S,$,T),V=Fd({inputs:{x:s},backend:n,attrs:{begin:S,size:F}});E=sr({inputs:{x:V},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(V)}else{const F=n.bufferSync(s),V=dB(m,F,T,S);E=n.makeTensorInfo(g,V.dtype,V.values)}return E}const fwe={kernelName:SS,backendName:"cpu",kernelFunc:hwe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,p=n.data.get(u.dataId).values,m=n.data.get(h.dataId).values,[g,x]=hB(p,m,s,o,i,a,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(h.shape,"int32",x)]}const mwe={kernelName:yO,backendName:"cpu",kernelFunc:pwe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,h]=fB(a,l,s),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const ywe={kernelName:bO,backendName:"cpu",kernelFunc:gwe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(o.dataId).values,a=pB(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const xwe={kernelName:xO,backendName:"cpu",kernelFunc:bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwe=jn(_g,t=>Math.tan(t)),wwe={kernelName:_g,backendName:"cpu",kernelFunc:vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe=jn(Bg,t=>Math.tanh(t)),Cwe={kernelName:Bg,backendName:"cpu",kernelFunc:kwe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:o}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Ud(o,s,r.shape),h=!1,p=n.bufferSync(s),m=n.bufferSync(o),g=n.bufferSync(r),x=pd(p,m,r.shape,u,l,a,i,c,g,h);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const Twe={kernelName:uO,backendName:"cpu",kernelFunc:Swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;wt(s,"tile");const i=gB(n.bufferSync(s),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const $we={kernelName:Vg,backendName:"cpu",kernelFunc:Iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r;wt(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=bB(a,s.shape,s.dtype,o,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const Ewe={kernelName:TS,backendName:"cpu",kernelFunc:Nwe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=n,[u,h,p,m]=s.shape,[g,x]=c??[h,p],w=[u,g,x,m],k=Pt(s.shape),S=k[0],$=k[1],T=k[2],E=Pt(w),F=E[0],V=E[1],j=E[2],W=Ys(s.dtype,Ve(w));W.fill(l);const R=r.data.get(s.dataId).values,O=r.data.get(o.dataId).values;for(let K=0;K<u;++K){const G=o.shape[0]===1?O:O.subarray(K*8,K*8+8);for(let Y=0;Y<g;++Y)for(let Z=0;Z<x;++Z)for(let ne=0;ne<m;++ne){let J;const re=G[6]*Z+G[7]*Y+1;if(re===0)continue;const se=(G[0]*Z+G[1]*Y+G[2])/re,q=(G[3]*Z+G[4]*Y+G[5])/re,le=NE(se,p,a),be=NE(q,h,a);switch(i){case"nearest":J=Fwe(R,h,p,S,$,T,K,be,le,ne,l);break;case"bilinear":J=zwe(R,h,p,S,$,T,K,be,le,ne,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const pe=K*F+Y*V+Z*j+ne;W[pe]=J}return r.makeTensorInfo(w,s.dtype,W)}return{dataId:r.write(W,w,s.dtype),shape:s.shape,dtype:s.dtype}}const Awe={kernelName:IS,backendName:"cpu",kernelFunc:Rwe};function NE(t,e,n){switch(n){case"reflect":return Dwe(t,e);case"wrap":return Pwe(t,e);case"nearest":return Owe(t,e);case"constant":default:return Mwe(t)}}function Dwe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Sd(0,n,e-1)}function Pwe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Sd(0,n,e-1)}function Mwe(t,e){return t}function Owe(t,e){return Sd(0,t,e-1)}function M0(t,e,n,r,s,o,i,a,l,c,u){const h=i*r+a*s+l*o+c;return 0<=a&&a<e&&0<=l&&l<n?t[h]:u}function Fwe(t,e,n,r,s,o,i,a,l,c,u){const h=Math.round(a),p=Math.round(l);return M0(t,e,n,r,s,o,i,h,p,c,u)}function zwe(t,e,n,r,s,o,i,a,l,c,u){const h=Math.floor(a),p=Math.floor(l),m=h+1,g=p+1,x=(g-l)*M0(t,e,n,r,s,o,i,h,p,c,u)+(l-p)*M0(t,e,n,r,s,o,i,h,g,c,u),w=(g-l)*M0(t,e,n,r,s,o,i,m,p,c,u)+(l-p)*M0(t,e,n,r,s,o,i,m,g,c,u);return(m-a)*x+(a-h)*w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;wt(o,"unique");const i=r.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=xB(i,s,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const _we={kernelName:$S,backendName:"cpu",kernelFunc:Lwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s.shape.length,a=s.shape[o],l=new Array(i-1);let c=0;for(let m=0;m<i;m++)m!==o&&(l[c++]=s.shape[m]);const u=new Array(i).fill(0),h=s.shape.slice();h[o]=1;const p=new Array(a);for(let m=0;m<p.length;m++){u[o]=m;const g=Fd({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});p[m]=sr({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return p}const Vwe={kernelName:fv,backendName:"cpu",kernelFunc:Bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r;wt(s,"unsortedSegmentSum");const a=s.shape.length,l=o.shape.length,c=[],u=[],h=a-l;let p=o;for(let g=0;g<h;++g){const x=Ix({inputs:{input:p},backend:n,attrs:{dim:g+1}});p=x,u.push(x)}for(let g=0;g<i;++g){const x=gu(g,"int32"),w=n.makeTensorInfo([],"int32",x),k=M_({inputs:{a:w,b:p},backend:n}),S=du({inputs:{x:k},backend:n,attrs:{dtype:"float32"}}),$=Bv({inputs:{a:S,b:s},backend:n}),T=o1({inputs:{x:$},backend:n,attrs:{axis:0,keepDims:!1}});c.push(T),u.push(w),u.push(k),u.push(S),u.push($),u.push(T)}const m=MB({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Wwe={kernelName:pv,backendName:"cpu",kernelFunc:jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe=[Lye,b1e,Bye,jye,S1e,Uye,Gye,Kye,Yye,Qye,ebe,nbe,sbe,abe,cbe,hbe,pbe,gbe,bbe,Fye,vbe,kbe,Sbe,I1e,Ibe,k1e,N1e,Nbe,x1e,Rbe,Dbe,Pbe,Obe,zbe,_be,Vbe,Wbe,Hbe,qbe,Xbe,Zbe,Jbe,txe,rxe,sxe,ixe,lxe,uxe,dxe,hxe,fxe,mxe,bxe,Eye,vxe,E1e,Nxe,R1e,Exe,D1e,Oxe,Fxe,Lxe,M1e,F1e,Bxe,jxe,Uxe,Gxe,L1e,B1e,v1e,Kxe,Abe,Yxe,Qxe,e2e,Rye,j1e,U1e,n2e,G1e,s2e,a2e,c2e,h2e,p2e,g2e,y2e,K1e,x2e,w2e,C2e,T2e,$2e,E2e,A2e,Y1e,P2e,F2e,_2e,Q1e,eye,j2e,H2e,K2e,nye,Y2e,Q2e,J2e,OB,rve,Dye,oye,ove,ave,cve,dve,w1e,Bk,fve,Pye,Mye,Oye,mve,yve,xve,wve,Cve,Sve,Ive,fye,Nve,Pve,Ove,_ve,mye,Vve,Wve,Hve,gye,z2e,Kve,Yve,Qve,ewe,nwe,swe,iwe,lwe,xye,cwe,wye,Cye,dwe,fwe,mwe,ywe,xwe,$ye,gxe,wwe,Cwe,Twe,$we,Ewe,Awe,rye,_we,Vwe,Wwe,Z2e];for(const t of Uwe)wO(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cd={},Hy={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Hwe(t,e){cd[t]=e}function Na(t,e){if(!(t in cd)||e!=null){const r=qwe(t,e);if(r!==null)cd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=cd[t];return n==null||n.isContextLost()?(delete cd[t],Na(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),cd[t])}function Gwe(t){if(!Oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function qwe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Gwe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete cd[t]},!1),Oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(Hy.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Hy)||n.getContext("experimental-webgl",Hy):n.getContext("webgl2",Hy)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var km;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(km||(km={}));var di;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(di||(di={}));var Ps;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ps||(Ps={}));function i1(t,e){return[e,t]}function Kwe(t,e){return t*e}function Gy(t){const e=Ve(t),n=Math.ceil(e/4);return ck(n)}function sp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Xwe(t,e){const[n,r]=sp(t,e);return n*r*4}function u7(t,e){const n=t;let r,s,o,i,a,l,c,u,h,p;return Oe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,o=n.RGBA16F,i=n.RGBA32F,a=n.RED,c=4,u=1,h=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,o=t.RGBA,i=n.RGBA,a=t.RGBA,c=4,u=4,h=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(t,e){const n=e();return Oe().getBool("DEBUG")&&Ywe(t),n}function Ywe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+e4e(t,e))}const Zwe=596e-10,Qwe=65504;function Jwe(t){return!!(Oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Zwe<Math.abs(t)&&Math.abs(t)<Qwe)}function e4e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function qy(t,e){return mc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function t4e(t,e){const n=mc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(gt(t,()=>t.shaderSource(n,e)),gt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function n4e(t,e){const n=mc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(gt(t,()=>t.shaderSource(n,e)),gt(t,()=>t.compileShader(n)),Oe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw FB(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const r4e=/ERROR: [0-9]+:([0-9]+):/g;function FB(t,e){const n=r4e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),o=s.length.toString().length+2,i=s.map((h,p)=>af((p+1).toString(),o)+h);let a=0;for(let h=0;h<i.length;h++)a=Math.max(i[h].length,a);const l=i.slice(0,r-1),c=i.slice(r-1,r),u=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${af(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function s4e(t){return mc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function o4e(t,e){if(gt(t,()=>t.linkProgram(e)),!Oe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function d3(t,e){if(gt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function i4e(t,e){const n=mc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),gt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function a4e(t,e){const n=mc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),gt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function l4e(t){return mc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function c4e(t,e){const n=Oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function u4e(t){return mc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function EE(t,e,n,r,s,o,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),gt(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,o,i)),gt(t,()=>t.enableVertexAttribArray(a)),!0)}function d4e(t,e,n){g4e(t,n),gt(t,()=>t.activeTexture(t.TEXTURE0+n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function h4e(t,e,n){return mc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function f4e(t,e,n){return t.getUniformLocation(e,n)}function p4e(t,e,n,r){gt(t,()=>d4e(t,e,r)),gt(t,()=>t.uniform1i(n,r))}function h3(t,e,n){gt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),gt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function RE(t,e){gt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),gt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ky(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+m4e(t,e))}function m4e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function mc(t,e,n){const r=gt(t,()=>e());if(r==null)throw new Error(n);return r}function g4e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Lf(t,e=2){return Ve(t.slice(0,t.length-e))}function _f(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Xy(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Lf(t),..._f(t)]),e}function y4e(t,e=!1){let n=Oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?zC(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=mu(t).newShape);let s=Ve(t),o=null;t.length<=1&&s<=n?o=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?o=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const i=o!=null&&Math.max(...o)>r&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(o==null||i)if(e){const a=Lf(t);let l=2,c=2;t.length&&([l,c]=_f(t)),s=a*(l/2)*(c/2),o=ck(s).map(u=>u*2)}else o=ck(s);return o}function Yy(t){return t%2===0}function Nx(t,e){if(t=t.slice(-2),e=e.slice(-2),Mn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Yy(n)&&Yy(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Yy(t[0])&&Yy(e[0])}let f3,p3;function b4e(t){if(f3==null){const e=Na(t);f3=e.getParameter(e.MAX_TEXTURE_SIZE)}return f3}function x4e(t){if(p3==null){const e=Na(t);p3=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,p3)}function v4e(t){if(t===0)return 0;let e;const n=Na(t);return Ui(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ui(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ui(t,e){return t.getExtension(e)!=null}function AE(t){try{if(Na(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function w4e(t){if(t===0)return!1;const e=Na(t);if(t===1){if(!Ui(e,"OES_texture_float"))return!1}else if(!Ui(e,"EXT_color_buffer_float"))return!1;return jk(e)}function k4e(t){if(t===0)return!1;const e=Na(t);if(t===1){if(!Ui(e,"OES_texture_float")||!Ui(e,"WEBGL_color_buffer_float"))return!1}else{if(Ui(e,"EXT_color_buffer_float"))return jk(e);const r="EXT_color_buffer_half_float";if(Ui(e,r)){const s=e.getExtension(r);return C4e(e,s)}return!1}return jk(e)}function jk(t){const e=u7(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),i}function C4e(t,e){const n=u7(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function S4e(t){return t!==2?!1:Na(t).fenceSync!=null}function a1(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&oe(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $t=Oe();$t.registerFlag("HAS_WEBGL",()=>$t.getNumber("WEBGL_VERSION")>0);$t.registerFlag("WEBGL_VERSION",()=>AE(2)?2:AE(1)?1:0);$t.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);$t.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>$t.get("WEBGL_VERSION")===2);$t.registerFlag("WEBGL_CPU_FORWARD",()=>!0);$t.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);$t.registerFlag("WEBGL_PACK",()=>$t.getBool("HAS_WEBGL"));$t.registerFlag("WEBGL_PACK_NORMALIZATION",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_CLIP",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_REDUCE",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_LAZILY_UNPACK",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_CONV_IM2COL",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>$t.getBool("WEBGL_PACK"));$t.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>b4e($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>x4e($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=$t.getNumber("WEBGL_VERSION");return t===0?0:v4e(t)});$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>$t.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!MO());$t.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>w4e($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>$t.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:$t.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));$t.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>k4e($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_FENCE_API_ENABLED",()=>S4e($t.getNumber("WEBGL_VERSION")));$t.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>$t.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);$t.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});$t.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>MO()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});$t.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);$t.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);$t.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);$t.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);$t.registerFlag("WEBGL_EXP_CONV",()=>!1);$t.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>$t.getBool("IS_TEST"));$t.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);$t.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);$t.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);$t.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vo(){let t,e,n,r,s,o,i,a,l,c;return Oe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",o="outputColor",i="out vec4 outputColor;",a=Oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",o="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:o,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qd(t,e,n="index"){const r=Pt(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / ${s}`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s}`:`index -= ${t[o]} * ${s}`;return`${i}; ${a};`}).join("")}function Vv(t,e,n="index"){const r=Pt(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / outShapeStrides[${o}]`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${i}; ${a};`}).join("")}function T4e(t,e){const n=t.length,r=t.map(o=>`${e}[${o}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let o=n-3;o>=0;--o)s[o]=`(${s[o+1]} * ${r[o+1]})`;return s}function I4e(t,e,n="index"){const r=t.map((o,i)=>i),s=T4e(r,e);return s.map((o,i)=>{const a=`int ${t[i]} = ${n} / ${s[i]}`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s[i]}`:`index -= ${t[i]} * ${s[i]}`;return`${a}; ${l};`}).join("")}function d7(t){const e=Pt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function h7(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const zB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:LB}=mpe;function $4e(t,e,n){const r=[];if(t.forEach(m=>{const g=Ve(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?r.push(`uniform float ${m.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${m.name};`),r.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){const{uniformShape:x}=f7(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${m.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${m.name}Shape;`);break}r.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{r.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});const s=r.join(`
`),o=t.map(m=>N4e(m,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=vo(),l=A4e(a);let c,u,h=M4e(a);return e.isPacked?(c=E4e(e.logicalShape,i,n.enableShapeUniforms),u=P4e(a)):(c=R4e(e.logicalShape,i,n.enableShapeUniforms),u=D4e(a)),n.packedInputs&&(h+=L4e),[h,l,u,s,c,o,n.userCode].join(`
`)}function op(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Y4e(t,e);case 1:return Q4e(t,e);case 2:return e3e(t,e);case 3:return n3e(t,e);case 4:return s3e(t,e);case 5:return o3e(t);case 6:return i3e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function _B(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return X4e(t);case 1:return Z4e(t,e);case 2:return J4e(t,e);case 3:return t3e(t,e);default:return r3e(t,e)}}function N4e(t,e,n=!1,r){let s="";n?s+=_B(t,r):s+=op(t,r);const o=t.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(n?s+=a3e(t,e):s+=l3e(t,e)),s}function E4e(t,e,n){switch(t.length){case 0:return BB();case 1:return _4e(t,e,n);case 2:return q4e(t,e,n);case 3:return V4e(t,e,n);default:return W4e(t,e,n)}}function R4e(t,e,n){switch(t.length){case 0:return BB();case 1:return B4e(t,e,n);case 2:return K4e(t,e,n);case 3:return j4e(t,e,n);case 4:return U4e(t,e,n);case 5:return H4e(t,e);case 6:return G4e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function A4e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function D4e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function P4e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function M4e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${O4e}
    ${F4e}
    ${z4e}
  `}const O4e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,F4e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,z4e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L4e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function BB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function _4e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function B4e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function V4e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),o=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function j4e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Vv(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=qd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function W4e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),o=s*Math.ceil(t[t.length-2]/2);let i=o,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],a=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function U4e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Vv(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=qd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function H4e(t,e){const n=qd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function G4e(t,e){const n=qd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function q4e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Mn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function K4e(t,e,n){return Mn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Kd(t){return`offset${t}`}function X4e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=vo();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Y4e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,o]=t.shapeInfo.texShape;if(s===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Kd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function Z4e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,o=vo();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function Q4e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${ip(t)}
      }
    `;const s=t.shapeInfo.texShape,o=s[0],i=s[1];if(i===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Kd(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function J4e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],l=vo();if(o!=null&&Mn(n,o))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function e3e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(o!=null&&Mn(n,o)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=o[0],m=o[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=mu(n),l=i;if(l.length<n.length){const p=ap(t,l),m=["row","col"];return`
      ${op(p,e)}
      float ${s}(int row, int col) {
        return ${s}(${lp(m,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ip(t)}
      }
    `;const c=o[0],u=o[1],h=Kd(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function t3e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const p=n.slice(1),m=[1,2],g=ap(t,p),x=["b","row","col"];return`
        ${_B(g,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${lp(x,m)});
        }
      `}const a=vo();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=i[0],c=i[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function n3e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=mu(n),c=a;if(c.length<n.length){const x=ap(t,c),w=["row","col","depth"];return`
        ${op(x,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${lp(w,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${i}, 1)));
        ${ip(t)}
      }
    `;const u=t.shapeInfo.texShape,h=u[0],p=u[1],m=t.shapeInfo.flatOffset;if(p===o&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===i&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=Kd(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${i} + depth + ${g};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function r3e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=vo();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const o=t.shapeInfo.logicalShape,i=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],h=Math.ceil(o[i-1]/2);let p=h*Math.ceil(o[i-2]/2),m="int b, int row, int col",g=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let x=2;x<i-1;x++)m=`int b${x}, `+m,p*=o[i-x-1],g=`b${x} * ${p} + `+g;return`
    vec4 ${r}(${m}) {
      int index = ${g};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function s3e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,a=n[1]*i,{newShape:l,keptDims:c}=mu(n);if(l.length<n.length){const S=ap(t,l),$=["row","col","depth","depth2"];return`
      ${op(S,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${lp($,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${o}, 1)));
        ${ip(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],m=h[1],g=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,w=`int stride0 = ${r}Shape[1] * stride1;`;if(m===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${g}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===o&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const k=Kd(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${x}
      ${w}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${k});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${p}, ${m}, index + ${k});
      return sampleTexture(${r}, uv);
    }
  `}function o3e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],o=e[3]*s,i=e[2]*o,a=e[1]*i,{newShape:l,keptDims:c}=mu(e);if(l.length<e.length){const x=ap(t,l),w=["row","col","depth","depth2","depth3"];return`
      ${op(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${lp(w,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${o}, ${s})) +
          depth3;
        ${ip(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],m=h[1];if(m===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Kd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${o} +
          depth2 * ${s} + depth3 + ${g};
      vec2 uv = uvFromFlat(${p}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function i3e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:o}=mu(e);if(s.length<e.length){const w=ap(t,s),k=["row","col","depth","depth2","depth3","depth4"];return`
      ${op(w)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${lp(k,o)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${ip(t)}
      }
    `;const h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],g=p[1];if(g===u&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=Kd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${x};
      vec2 uv = uvFromFlat(${m}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ip(t){const e=t.name,n=Ve(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function a3e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=LB(t.shapeInfo.logicalShape,e.logicalShape),l=Hn(i),c=i-o;let u;const h=["x","y","z","w","u","v"];o===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(S=>`coords.${h[S+c]} = 0;`).join(`
`);let p="";i<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((S,$)=>`coords.${h[$+c]}`).join(", ");let m="return outputValue;";const x=Ve(t.shapeInfo.logicalShape)===1,k=Ve(e.logicalShape)===1;if(o===1&&!x&&!k)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!k)i===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(a.length){const S=o-2,$=o-1;a.indexOf(S)>-1&&a.indexOf($)>-1?m="return vec4(outputValue.x);":a.indexOf(S)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf($)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${p});
      ${m}
    }
  `}function l3e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Mn(i,o))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Hn(l),u=LB(t.shapeInfo.logicalShape,e.logicalShape),h=l-a;let p;const m=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(x=>`coords.${m[x+h]} = 0;`).join(`
`);let g="";return l<2&&a>0?g="coords":g=t.shapeInfo.logicalShape.map((x,w)=>`coords.${m[w+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${g});
    }
  `}function Hn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function f7(t,e,n){const{newShape:r,keptDims:s}=mu(e),o=e.length,i=t&&o===3&&e[0]===1,a=i?e.slice(1):r,l=!t&&o>1&&!Mn(e,n)&&r.length<o||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function ap(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function lp(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t,e,n,r){const s=n.map((u,h)=>{const p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:p}}),o=s.map(u=>u.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=$4e(s,i,e),l=n4e(t.gl,a),c=t.createProgram(l);return Oe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:i},VB(t,e,c)))}function VB(t,e,n){const r=[],s=[];let o,i,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Oe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of e.variableNames){const p={name:h,uniform:t.getUniformLocation(n,h,u),offset:t.getUniformLocation(n,`offset${h}`,u)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${h}Shape`,u),p.texShape=t.getUniformLocation(n,`${h}TexShape`,u)),r.push(p)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),i=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const h of e.customUniforms)s.push(t.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:i}}function DE(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,o=e[r],i=o.shape;if(!Mn(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(n.isUniform&&o.isUniform)return;const a=n.texShape,l=o.isUniform?null:o.texData.texShape;if(!Mn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function u3e(t,e,n,r,s){e.program.enableShapeUniforms||(DE(e.inShapeInfos,n),DE([e.outShapeInfo],[r]));const o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):t.setOutputMatrixTexture(o.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Oe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:h,shape:p,texShape:m}=e.variablesLocations[l];if(p){const{uniformShape:g}=f7(e.program.packedInputs,c.shape,c.texData.texShape);switch(g.length){case 1:t.gl.uniform1iv(p,new Int32Array(g));break;case 2:t.gl.uniform2iv(p,new Int32Array(g));break;case 3:t.gl.uniform3iv(p,new Int32Array(g));break;case 4:t.gl.uniform4iv(p,new Int32Array(g));break}}if(m&&t.gl.uniform2i(m,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Ve(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let g=c.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),t.gl.uniform1fv(u,g)}continue}c.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Pt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],h=s[l];if(c.type==="float")t.gl.uniform1fv(u,h);else if(c.type==="vec2")t.gl.uniform2fv(u,h);else if(c.type==="vec3")t.gl.uniform3fv(u,h);else if(c.type==="vec4")t.gl.uniform4fv(u,h);else if(c.type==="int")t.gl.uniform1iv(u,h);else if(c.type==="ivec2")t.gl.uniform2iv(u,h);else if(c.type==="ivec3")t.gl.uniform3iv(u,h);else if(c.type==="ivec4")t.gl.uniform4iv(u,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function d3e(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=f7(t.packedInputs,i.shape,l);let p="",m="",g="";if(u.length===1&&t.packedInputs){const E=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${E[0]>1}_${E[1]>1}`}else if(u.length===2&&!t.packedInputs)m=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const E=Pt(u);g=`${E[0]===l[1]}_${E[E.length-1]===l[1]}`}const x=i.shape.length,w=u.length===2&&Mn(i.shape,l),k=Ve(i.shape)===1,S=Af(i.shape,n.shape),$=!t.packedInputs&&x===n.shape.length&&Mn(l,n.texData.texShape),T=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${$}_${c?h:""}_${u.length}_${k}_${S}_${w}_${p}_${m}_${g}_${T}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});const s=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+s+`${Oe().getNumber("WEBGL_VERSION")}`,o}function to(t){return Oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h3e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=km.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=vo();this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vv(["r","c","d"],e):qd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=km.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=vo();this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vv(["r","c","d"],e):qd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p3e{constructor(e){this.variableNames=["A"],this.outTexUsage=di.DOWNLOAD;const n=vo();this.outputShape=e,this.userCode=`
      ${zB}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=di.DOWNLOAD;const n=vo();this.outputShape=e,this.userCode=`
      ${zB}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e={R:0,G:1,B:2,A:3};class PE{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=vo();this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${g3e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?h7():d7(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y3e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=vo();this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length);let s="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?h7():d7(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t){const e=vo(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return t4e(t,n)}function x3e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return i4e(t,e)}function v3e(t){const e=new Uint16Array([0,1,2,2,1,3]);return a4e(t,e)}function l1(t,e,n,r,s,o){c4e(e,n);const i=l4e(t),a=t.TEXTURE_2D;return gt(t,()=>t.bindTexture(a,i)),gt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),gt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),gt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),gt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Oe().getNumber("WEBGL_VERSION")===1?gt(t,()=>t.texImage2D(a,0,r,e,n,0,s,o,null)):gt(t,()=>t.texStorage2D(a,1,r,e,n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function jB(t){return t.internalFormatFloat}function w3e(t,e,n,r){const[s,o]=i1(e,n);return l1(t,s,o,jB(r),r.textureFormatFloat,t.FLOAT)}function WB(t){return t.internalFormatHalfFloat}function k3e(t,e,n,r){const[s,o]=i1(e,n);return l1(t,s,o,WB(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function UB(t){return t.downloadTextureFormat}function C3e(t,e,n,r){const[s,o]=i1(e,n);return l1(t,s,o,UB(r),t.RGBA,t.UNSIGNED_BYTE)}function HB(t){return t.internalFormatPackedFloat}function S3e(t,e,n,r){const[s,o]=sp(e,n);return l1(t,s,o,HB(r),t.RGBA,t.FLOAT)}function GB(t){return t.internalFormatPackedHalfFloat}function T3e(t,e,n,r){const[s,o]=sp(e,n);return l1(t,s,o,GB(r),t.RGBA,r.textureTypeHalfFloat)}function I3e(t,e,n){return gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),EE(t,e,"clipSpacePos",n,3,20,0)&&EE(t,e,"uv",n,2,20,12)}function $3e(t,e,n,r,s,o){gt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;s instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,l=o.internalFormatPackedFloat),i.set(s),Oe().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,i)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function N3e(t,e,n){gt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Oe().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Oe().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function E3e(t,e,n,r){const s=t.createBuffer();gt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return gt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),gt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),gt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function R3e(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function A3e(t,e,n,r){const[s,o]=i1(e,n),i=4,a=new Uint8Array(Kwe(e*n,i));return gt(t,()=>t.readPixels(0,0,s,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function D3e(t,e,n,r,s,o,i,a){const l=t,c=new Float32Array(Xwe(o,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function P3e(t,e,n){const r=new Float32Array(e*n*4);return gt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m3{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Oe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Hwe(n,e)):this.gl=Na(n),e=this.gl,Oe().getNumber("WEBGL_VERSION")===2){const o=e;this.createVertexArray=()=>gt(o,()=>o.createVertexArray()),this.bindVertexArray=i=>gt(o,()=>o.bindVertexArray(i)),this.deleteVertexArray=i=>gt(o,()=>o.deleteVertexArray(i)),this.getVertexArray=()=>gt(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(e!=null){const o=e.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>gt(e,()=>o.createVertexArrayOES()),this.bindVertexArray=i=>gt(e,()=>o.bindVertexArrayOES(i)),this.deleteVertexArray=i=>gt(e,()=>o.deleteVertexArrayOES(i)),this.getVertexArray=()=>gt(e,()=>e.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Oe().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=qy(this.gl,o),Ui(this.gl,i))this.textureHalfFloatExtension=qy(this.gl,i);else if(Oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ui(this.gl,s))this.colorBufferHalfFloatExtension=qy(this.gl,s);else if(Oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ui(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ui(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=x3e(this.gl),this.indexBuffer=v3e(this.gl),this.framebuffer=u4e(this.gl),this.textureConfig=u7(this.gl,this.textureHalfFloatExtension)}get debug(){return Oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;gt(e,()=>e.finish()),gt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),gt(e,()=>e.deleteFramebuffer(this.framebuffer)),gt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),gt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),gt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),w3e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),k3e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),C3e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),N3e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),$3e(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),T3e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),S3e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(RE(this.gl,this.framebuffer),this.outputTexture=null),gt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>A3e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,o,i){return D3e(this.gl,e,n,r,s,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return R3e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=E3e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Oe().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,o=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(o,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=o}else Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>P3e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=b3e(n));const r=s4e(n);gt(n,()=>n.attachShader(r,this.vertexShader)),gt(n,()=>n.attachShader(r,e)),o4e(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&d3(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;gt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),I3e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(gt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&d3(this.gl,this.program),gt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?h4e(this.gl,e,n):f4e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),gt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),p4e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,o]=sp(n,r);this.setOutputMatrixTextureDriver(e,s,o)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&d3(this.gl,this.program),Ky(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}gt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=qy(this.gl,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,o),o}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await mN(()=>this.disposed||this.isQueryAvailable(e,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=M3e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Oe().platform&&(r=Oe().platform.setTimeoutCustom.bind(Oe().platform)),mN(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),h3(this.gl,e,this.framebuffer),this.debug&&Ky(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(h3(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ky(this.gl)):RE(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;h3(s,e,this.framebuffer),this.debug&&Ky(s),this.outputTexture=e,gt(s,()=>s.viewport(0,0,n,r)),gt(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),gt(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function M3e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:O3e,bincountImpl:qB,bincountReduceImpl:F3e,bitwiseAndImpl:z3e,castImpl:L3e,ceilImpl:_3e,concatImpl:B3e,equalImpl:V3e,expImpl:j3e,expm1Impl:W3e,floorImpl:U3e,gatherNdImpl:H3e,gatherV2Impl:G3e,greaterImpl:q3e,greaterEqualImpl:K3e,lessImpl:X3e,lessEqualImpl:Y3e,linSpaceImpl:Z3e,logImpl:Q3e,maxImpl:J3e,maximumImpl:eke,minimumImpl:tke,multiplyImpl:nke,negImpl:rke,notEqualImpl:ske,prodImpl:oke,raggedGatherImpl:ike,raggedRangeImpl:ake,raggedTensorToTensorImpl:lke,rangeImpl:cke,rsqrtImpl:uke,scatterImpl:dke,sigmoidImpl:hke,simpleAbsImpl:KB,sliceImpl:fke,sparseFillEmptyRowsImpl:pke,sparseReshapeImpl:mke,sparseSegmentReductionImpl:XB,sqrtImpl:gke,staticRegexReplaceImpl:yke,stridedSliceImpl:bke,stringNGramsImpl:xke,stringSplitImpl:vke,stringToHashBucketFastImpl:wke,subImpl:kke,tileImpl:Cke,topKImpl:Ske,transposeImpl:p7,uniqueImpl:Tke}=Nye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function mo(t,e){return e===1?[t]:YB(t,e)}function Ike(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ke{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=to(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=mo("rc",this.rank),r=Hn(this.rank),s=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let o=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)o=`${e[e.length-1-i]},`+o;n.push(o)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZB{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length);let r="";for(let s=0;s<4;s++){let o="thisRC = rc;";s%2===1&&(o+="thisRC.z += 1;"),s>1&&(o+="thisRC.y += 1;"),r+=`
        ${o}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${Nke(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?h7():d7(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Nke(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?I4e(["r","c","d"],"inputShape"):qd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eke{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=OE(n,r),o=FE(e,s,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=ME(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return s===Ps.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Ps.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Ps.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Ps.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Ps.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const o=OE(r,s),i=FE(n,o,s);i in this.freeTextures||(this.freeTextures[i]=[]);const a=ME(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=Oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[i],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Rke(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function ME(t,e,n,r,s){const o=Ake(e,r);let i;if(s){const[l,c]=sp(t[0],t[1]);i=l*c}else{const[l,c]=i1(t[0],t[1]);i=l*c}const a=Rke(n,o);return i*a}function Ake(t,e){switch(t){case Ps.PACKED_2X2_FLOAT32:return HB(e);case Ps.PACKED_2X2_FLOAT16:return GB(e);case Ps.UNPACKED_FLOAT32:return jB(e);case Ps.UNPACKED_FLOAT16:return WB(e);case Ps.PACKED_4X1_UNSIGNED_BYTE:return UB(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Dke(t){return Oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Ps.PACKED_2X2_FLOAT32:Ps.UNPACKED_FLOAT32:t?Ps.PACKED_2X2_FLOAT16:Ps.UNPACKED_FLOAT16}function OE(t,e){if(t===di.UPLOAD)return Ps.PACKED_2X2_FLOAT32;if(t===di.RENDER||t==null)return Dke(e);if(t===di.DOWNLOAD||t===di.PIXELS)return Ps.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function FE(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ya{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ea="if (isnan(x)) return x;",Pke="return x;",zE="return abs(x);",Mke="return (x >= 0.0) ? x : (exp(x) - 1.0);",Oke=ea+`
  return (x < 0.0) ? 0.0 : x;
`,Fke=ea+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Uc="return x;",zke="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke="return x;",_ke=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Bke=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vke=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jke="return 1.0 / (1.0 + exp(-1.0 * x));";class Kc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wke{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length);const n=e.length,r=mo("rc",n),s=Hn(n),o=Ike(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke=kF,Hke=1e-7,Gke=1e-4,Zy={};function qke(t){return t in Zy||(Zy[t]={}),Zy[t]}const Kke=Oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Xke=600;function Yke(){return Oe().global.screen==null?1024:Oe().global.screen.height*Oe().global.screen.width*window.devicePixelRatio*Xke/1024/1024}class jv extends FC{nextDataId(){return jv.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof m3)n=e;else{const r=Na(Oe().getNumber("WEBGL_VERSION"),e);n=new m3(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Na(Oe().getNumber("WEBGL_VERSION"));n=new m3(r),this.binaryCache=qke(Oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Eke(this.gpgpu),this.numMBBeforeWarning=Yke(),this.texData=new GM(this,Va())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,o,i){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,o]},l.texShape=[s,o];const c=Xy(n),u=new PE(c,!1,i),h=this.runWebGLProgram(u,[a],r,[[s,o]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),h.dataId}write(e,n,r){if((Oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Oe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:di.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,o){if(Oe().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:di.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:o,slice:i,shape:a,isPacked:l}=n;if(i!=null){let p;l?p=new Kc(a,Uc):p=new Ya(a,Uc);const m=this.runWebGLProgram(p,[{dataId:e,shape:a,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Io());let h;if(s==="complex64"){const p=this.readSync(o.real.dataId),m=this.readSync(o.imag.dataId);h=cc(p,m)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Io()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(x=>g.push(x))}const n=this.texData.get(e),{values:r,shape:s,slice:o,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(o!=null){let g;l?g=new Kc(s,Uc):g=new Ya(s,Uc);const x=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:i}],i),w=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),w}if(r!=null)return this.convertAndCacheOnCPU(e);if(Oe().getBool("DEBUG")&&!Oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(i!=="complex64"&&Oe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const g=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(g.texture.texture,...Gy(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(i==="complex64"){const g=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),x=g[0],w=g[1];h=cc(x,w)}else if(c==null)h=this.getValuesFromTexture(e);else{const g=Ve(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,g)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const g=this.gpgpu.gl;gt(g,()=>g.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,h),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Va().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:o,slice:i,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let m;l?m=new Kc(o,Uc):m=new Ya(o,Uc);const g=this.runWebGLProgram(m,[{dataId:e,shape:o,dtype:a}],a),x=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),x}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),h=Va().makeTensorFromTensorInfo(u),p=this.texData.get(u.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>iu(s));return on(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return on(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Jwe(r))throw Oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),o=Ve(n);if(Oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),m=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...Gy(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(p),g}const i=Oe().getBool("WEBGL_PACK")&&s===!0,a=i?Xy(n):n,l=i?new m3e(a):new p3e(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const o=Td(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Td(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(o);a.kernelMs=Oae(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:i[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Io(),endMs:null}}endTimer(e){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Io(),e)}async getQueryTime(e){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:o,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,o,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Kke){return Oe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Ve(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ui("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Uke(e.shape,n)}packedUnaryOp(e,n,r){const s=new Kc(e.shape,n),o=this.compileAndRun(s,[e],r);return Va().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=KB(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zE,e.dtype);const n=new Ya(e.shape,zE),r=this.compileAndRun(n,[e]);return Va().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&qm(r[0])){const o=r.map(i=>Zc(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Va().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Wke(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new $ke(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Lf(e.shape),..._f(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},o=[Lf(n),..._f(n)],i=new ZB(o,r),a=!0,l=[r],c=this.runWebGLProgram(i,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:o,dtype:i}=r;if(n!=null){const p=Ve(o),m=n[0]*n[1]*4;oe(p<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Xy(o);let l;s?l=new f3e(a):l=new h3e(a);const c=!0,u=[n??Gy(a)],h=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,u,c,n);return{dtype:i,shape:o,dataId:h.dataId}}runWebGLProgram(e,n,r,s,o=!1,i){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===km.DENSE){const k=i??Gy(e.outputShape);l.texShape=k.map(S=>S*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Ve(a.shape)===0)return l.values=Ys(a.dtype,0),a;const c=[],u=n.map(k=>{if(k.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(k.dataId);if(S.texture==null){if(!e.packedInputs&&Ve(k.shape)<=Oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:k.shape,texData:null,isUniform:!0,uniformValues:S.values};e.packedInputs&&(S.isPacked=!0,S.shape=k.shape)}if(this.uploadToGPU(k.dataId),!!S.isPacked!=!!e.packedInputs)k=S.isPacked?this.unpackTensor(k):this.packTensor(k),c.push(k),S=this.texData.get(k.dataId);else if(S.isPacked&&!Nx(S.shape,k.shape)){const $=k,T=k.shape;k.shape=S.shape,k=this.packedReshape(k,T),c.push(k),S=this.texData.get(k.dataId),$.shape=T}return{shape:k.shape,texData:S,isUniform:!1}});this.uploadToGPU(a.dataId);const h={shape:a.shape,texData:l,isUniform:!1},p=d3e(e,u,h),m=this.getAndSaveBinary(p,()=>c3e(this.gpgpu,e,u,h)),g=this.activeTimers!=null;let x;g&&(x=this.startTimer()),Oe().get("ENGINE_COMPILE_ONLY")||u3e(this.gpgpu,m,u,h,s),c.forEach(k=>this.disposeIntermediateTensorInfo(k)),g&&(x=this.endTimer(x),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(x)}));const w=Oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(w>0){const k=Io();k-this.lastGlFlushTime>w&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=k)}if(!Oe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){const k=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),k}return a}compileAndRun(e,n,r,s,o=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,o)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=De(()=>{if(!Oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Oe().getBool("DEBUG");Oe().set("DEBUG",!1);const n=this.abs(Pn(1e-8)).dataSync()[0];if(Oe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Hke:Gke}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:o,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Io());let h=n.texShape;if(h==null&&(h=y4e(r,l),n.texShape=h),o!=null){const p=Xy(r);let m,g=h[1],x=h[0];const w=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(l||!w)&&([g,x]=sp(h[0],h[1])),l?m=new y3e(p,w):m=new PE(p,w);const k=w?[x,g]:h,S=this.makeTensorInfo(k,s),$=this.texData.get(S.dataId);w?$.usage=di.PIXELS:$.usage=di.UPLOAD,$.texShape=k,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),g,x,o);const T=[[x,g]],F=this.runWebGLProgram(m,[S],s,T,!0),V=this.texData.get(F.dataId);n.texShape=V.texShape,n.isPacked=V.isPacked,n.usage=V.usage,Oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(F.dataId):(n.texture=V.texture,n.values=null,this.texData.delete(F.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Io()-u)}else{const p=this.acquireTexture(h,a,s,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=Zke(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*sx(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(o){throw o}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await _F(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(FB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:o,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=VB(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=o,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:o,width:i,channels:a}=e,l=Va().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,o,i,a);return Va().makeTensorFromDataId(c,n,r,l)}}jv.nextDataId=0;function Zke(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */OO()&&_O("webgl",()=>new jv,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class zd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Yt(n,r),this.enableShapeUniforms=to(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xd=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class cp{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Yt(n,r);const o=this.outputShape.length;this.enableShapeUniforms=to(o);let i="";if(s)if(o===0||Ve(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Hn(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=mo("coords",o);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Qke={kernelName:pg,backendName:"webgl",kernelFunc:Xo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Su(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),a=Xo({inputs:{x:r},backend:n}),l=Xo({inputs:{x:s},backend:n});return i.complexTensorInfos={real:a,imag:l},o}const Jke={kernelName:XC,backendName:"webgl",kernelFunc:Su};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QB="return (a < 0.) ? b * a : a;",JB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function e5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r,i=n.makeTensorInfo([],"float32",gu(o,"float32")),a=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new cp(JB,s.shape,i.shape):new zd(QB,s.shape,i.shape),l=n.runWebGLProgram(a,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const t5e={kernelName:F2,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eV="return (a < 0.) ? b * a : a;",tV=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function n5e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,o=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new cp(tV,r.shape,s.shape):new zd(eV,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],"float32")}const r5e={kernelName:tv,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const up="if (isnan(x)) return x;";function kn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:o})=>{const{x:i}=s,a=o,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const h=a.texData.get(i.dataId),p=n(h.values,l);return a.makeTensorInfo(i.shape,l,p)}const c=Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Kc(i.shape,e):u=new Ya(i.shape,t),a.runWebGLProgram(u,[i],l)}}function zs({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:o}){return({inputs:i,backend:a})=>{const{a:l,b:c}=i,u=a;if(r&&l.dtype==="complex64"){const g=u.texData.get(l.dataId),x=u.texData.get(c.dataId),[w,k]=[[g.complexTensorInfos.real,x.complexTensorInfos.real],[g.complexTensorInfos.imag,x.complexTensorInfos.imag]].map($=>{const[T,E]=$,F={dataId:T.dataId,dtype:T.dtype,shape:l.shape},V={dataId:E.dataId,dtype:E.dtype,shape:c.shape},j=new zd(t,l.shape,c.shape);return u.runWebGLProgram(j,[F,V],qo(T.dtype,E.dtype))}),S=Su({inputs:{real:w,imag:k},backend:u});return u.disposeIntermediateTensorInfo(w),u.disposeIntermediateTensorInfo(k),S}const h=o||qo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const g=u.texData.get(l.dataId).values,x=u.texData.get(c.dataId).values,w=l.dtype==="string"?uc(g):g,k=l.dtype==="string"?uc(x):x,[S,$]=s(l.shape,c.shape,w,k,h),T=u.makeTensorInfo($,h),E=u.texData.get(T.dataId);return E.values=S,T}const p=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let m;return p?m=new cp(e,l.shape,c.shape,n):m=new zd(t,l.shape,c.shape),u.runWebGLProgram(m,[l,c],h)}}function Cm(t,e=!1){if(t==="linear")return e?Lke:Pke;if(t==="relu")return e?Bke:Oke;if(t==="elu")return e?_ke:Mke;if(t==="relu6")return e?Vke:Fke;if(t==="prelu")return e?tV:eV;if(t==="leakyrelu")return e?JB:QB;if(t==="sigmoid")return e?jke:zke;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nV{constructor(e,n,r,s=!1,o=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=to(this.outputShape.length);const u=s?e[1]:e[2],h=Math.ceil(u/2),p=s?"i * 2, rc.y":"rc.y, i * 2",m=o?"rc.z, i * 2":"i * 2, rc.z",g=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let w="",k="";a&&(l?w=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?w=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:w=`vec4 activation(vec4 x) {
          ${a}
        }`,k="result = activation(result);");const S=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let $="rc.x",T="rc.x";e[0]<n[0]?$=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(T=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${w}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${$};
        int batchB = ${T};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${x[0]});
          result += (${g[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${k}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LE={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class _E{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Yt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BE="return a * b;";function g7(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=qo(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new _E(LE.REAL,r.shape,s.shape),u=new _E(LE.IMAG,r.shape,s.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],p=n.runWebGLProgram(c,h,"float32"),m=n.runWebGLProgram(u,h,"float32"),g=Su({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=nke(r.shape,s.shape,a.values,l.values,o),h=n.makeTensorInfo(u,o),p=n.texData.get(h.dataId);return p.values=c,h}let i;return Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new cp(BE,r.shape,s.shape):i=new zd(BE,r.shape,s.shape),n.runWebGLProgram(i,[r,s],o)}const s5e={kernelName:Cg,backendName:"webgl",kernelFunc:g7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t,e,n){const r=[Lf(t.shape),..._f(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},o=[Lf(e),..._f(e)],i=new ZB(o,r),a=!0,l=[r],c=n.runWebGLProgram(i,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ht(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=n,a=Ve(s.shape),l=KM(o,a),c=Ve(l);oe(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=i.texData.get(s.dataId);return u.isPacked&&!Nx(s.shape,l)&&!(u.texture!==null&&Nx(u.shape,l))?o5e(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const i5e={kernelName:rv,backendName:"webgl",kernelFunc:ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VE{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${Nf(h)?h.toPrecision(2):h}, ones);`}let u="";o%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a5e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,h=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Iv(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Yd(t,e,n,r){const s=l5e(t.shape);let o=t;for(let i=0;i<s.length;i++){const{inSize:a,windowSize:l,outSize:c}=s[i];let u,h;n==="mean"?u=i===0?new VE({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new VE({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new a5e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),h=o,o=r.runWebGLProgram(u,[o],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const s=Hn(this.rank),o=u5e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function u5e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d5e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Hn(this.rank),o=YB("rc",this.rank),i=new Array(this.rank);for(let u=0;u<n.length;u++)i[n[u]]=o[u];const a=`vec2(${i.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wv(t,e,n){const r=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new d5e(t.shape,e):new c5e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5e(t,e,n,r){const s=e,o=t.shape.length,i=an(s,t.shape);let a=i;const l=Cr(a,o),c=l!=null;let u=t;c&&(u=Wv(t,l,r),a=Br(a.length,o)),Fs("sum",a,o);const[h,p]=Ts(u.shape,a);let m=h;n&&(m=Yr(h,i));const g=Ve(p),w=Ve(t.shape)/g,k=ht({inputs:{x:u},attrs:{shape:[w,g]},backend:r}),S=ES(t.dtype),$=Yd(k,S,"sum",r),T=ht({inputs:{x:$},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo($),c&&r.disposeIntermediateTensorInfo(u),T}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uv(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;return h5e(s,o,i,n)}const f5e={kernelName:cv,backendName:"webgl",kernelFunc:Uv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xo(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:o}=r,i=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[o[u]];let c;if(i.shouldExecuteOnCPU([s])){const h=i.texData.get(s.dataId).values,p=p7(h,s.shape,s.dtype,o,l);c=i.makeTensorInfo(l,s.dtype);const m=i.texData.get(c.dataId);m.values=p}else c=Wv(s,o,i);return c}const p5e={kernelName:lf,backendName:"webgl",kernelFunc:xo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rV=1e3;function Ex({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,h=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[u-1]:e.shape[u-2],m=n?t.shape[c-1]:t.shape[c-2],g=r?e.shape[u-2]:e.shape[u-1],x=t.shape.slice(0,-2),w=e.shape.slice(0,-2),k=Ve(x),S=Ve(w),T=Yt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([m,g]);oe(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=n?[k,h,m]:[k,m,h],F=r?[S,g,p]:[S,p,g],V=ht({inputs:{x:t},backend:s,attrs:{shape:E}}),j=ht({inputs:{x:e},backend:s,attrs:{shape:F}}),W=[V,j],R=Math.max(k,S),O=n?V.shape[1]:V.shape[2],U=o!=null,K=i!=null,G=l==="leakyrelu",Y=l!=null?Cm(l,!0):null,Z=U||K||G||Y!=null;let ne;if((m===1||g===1)&&O>rV&&Z===!1){let re=V,se=j;n&&(re=xo({inputs:{x:V},backend:s,attrs:{perm:[0,2,1]}}),W.push(re)),r&&(se=xo({inputs:{x:j},backend:s,attrs:{perm:[0,2,1]}}),W.push(se));const q=g!==1,le=g===1;let be=re;q&&(be=ht({inputs:{x:re},backend:s,attrs:{shape:[R,O,1]}}),W.push(be));const pe=g===1?2:1;let de=se;le&&(de=ht({inputs:{x:se},backend:s,attrs:{shape:[R,1,O]}}),W.push(de));const we=g7({inputs:{a:be,b:de},backend:s});ne=Uv({inputs:{x:we},backend:s,attrs:{axis:pe,keepDims:!0}}),W.push(we)}else{const re=qo(t.dtype,e.dtype),se=new nV(E,F,[R,m,g],n,r,U,Y,K,G),q=[V,j];if(o!=null&&q.push(o),K&&q.push(i),G){const le=s.makeTensorInfo([],"float32",gu(a,"float32"));q.push(le),W.push(le)}ne=s.runWebGLProgram(se,q,re)}const J=ht({inputs:{x:ne},backend:s,attrs:{shape:T}});W.push(ne);for(const re of W)s.disposeIntermediateTensorInfo(re);return J}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return Ex({a:s,b:o,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:h,activation:u})}const g5e={kernelName:ox,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jE="return abs(x);";function y5e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const o=n.texData.get(r.dataId),i=KB(o.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let s;return Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Kc(r.shape,jE):s=new Ya(r.shape,jE),n.runWebGLProgram(s,[r],r.dtype)}const b5e={kernelName:g2,backendName:"webgl",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x5e=ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,v5e=kn({opSnippet:x5e}),w5e={kernelName:Km,backendName:"webgl",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e=ea+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,C5e=kn({opSnippet:k5e}),S5e={kernelName:Xm,backendName:"webgl",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WE="return a + b;",T5e=zs({opSnippet:WE,packedOpSnippet:WE,supportsComplex:!0,cpuKernelImpl:O3e}),I5e={kernelName:Zf,backendName:"webgl",kernelFunc:T5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $5e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`float v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N5e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`vec4 v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kb(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Xo({inputs:{x:r[0]},backend:n});if(r.length>Oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=kb({inputs:r.slice(0,l),backend:n}),u=kb({inputs:r.slice(l),backend:n});return kb({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>qo(l,c)),o=r.map(l=>l.shape),a=Oe().getBool("WEBGL_PACK")?new N5e(r[0].shape,o):new $5e(r[0].shape,o);return n.runWebGLProgram(a,r,s)}const E5e={kernelName:jC,backendName:"webgl",kernelFunc:kb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=an(o,s.shape);let c=l;const u=Cr(c,a);let h=s;u!=null&&(h=xo({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Br(c.length,a)),Fs("all",c,a);const[p,m]=Ts(h.shape,c),g=Ve(m),x=ht({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),w=Yd(x,x.dtype,"all",n);let k;if(i){const S=Yr(p,l);k=ht({inputs:{x:w},backend:n,attrs:{shape:S}})}else k=ht({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),u!=null&&n.disposeIntermediateTensorInfo(h),k}const A5e={kernelName:WC,backendName:"webgl",kernelFunc:R5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=an(o,s.shape);let c=l;const u=Cr(c,a);let h=s;u!=null&&(h=xo({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Br(c.length,a)),Fs("any",c,a);const[p,m]=Ts(h.shape,c),g=Ve(m),x=ht({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),w=Yd(x,x.dtype,"any",n);let k;if(i){const S=Yr(p,l);k=ht({inputs:{x:w},backend:n,attrs:{shape:S}})}else k=ht({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),u!=null&&n.disposeIntermediateTensorInfo(h),k}const P5e={kernelName:UC,backendName:"webgl",kernelFunc:D5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M5e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:o,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O5e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,oe(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],i=Math.ceil(o/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Hn(l),u=mo("coords",l);let h,p;if(i===1){p=l+1;const j=Hn(p);h=`
        ${j} sourceLocR = ${j}(${u.join()}, 0);
        ++${u[l-1]};
        ${j} sourceLocG = ${j}(${u.join()}, 0);
        ++${u[l-2]};
        ${j} sourceLocA = ${j}(${u.join()}, 0);
        --${u[l-1]};
        ${j} sourceLocB = ${j}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,h=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const m=["x","y","z","w","u","v"].slice(0,p),g="."+m[p-1],x=m.map(j=>"int "+j),w=mo("sourceLocR",p-1).concat("inIdx.r"),k=mo("sourceLocG",p-1).concat("inIdx.g"),S=mo("sourceLocB",p-1).concat("inIdx.b"),$=mo("sourceLocA",p-1).concat("inIdx.a"),T=r==="max"?"greaterThan":"lessThan",E=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${k.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${$.join()})));`,F=`vec4(
            getAChannel(${w.join()}),
            hasNextCol ? getAChannel(${k.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${$.join()}) : 0.)`,V=s?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${V}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${F};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${E}
          vec4 candidate = ${F};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${T}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sV(t,e,n,r=null){let s=e.shape[0],o=e.shape[1];r!=null&&(s=r.shape[0],o=r.shape[1]);const i=Iv(o),a={windowSize:i,inSize:o,batchSize:s,outSize:Math.ceil(o/i)},l=new M5e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const h=sV(t,e,n,u);return t.disposeIntermediateTensorInfo(u),h}function oV(t,e,n,r=null){const s=r!=null?r.shape:e.shape,o=s[s.length-1],i=Iv(o),a=new O5e(s,i,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=oV(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function iV(t,e,n,r){const s=[n];if(Fs("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!Oe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),o.push(l));const[c,u]=Ts(l.shape,s),h=Ve(u),p=ht({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});o.push(p);const m=sV(t,p,r);o.push(m);const g=ht({inputs:{x:m},backend:t,attrs:{shape:c}});return o.forEach(x=>t.disposeIntermediateTensorInfo(x)),g}return oV(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=an(o,s.shape);const a=Cr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=xo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Br(i.length,l.shape.length)),Fs("argMax",[i[0]],l.shape.length);const u=iV(n,l,i[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const z5e={kernelName:y2,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=an(o,s.shape);const a=Cr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=xo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=Br(i.length,l.shape.length)),Fs("argMin",[i[0]],l.shape.length);const u=iV(n,l,i[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const _5e={kernelName:b2,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,V5e=kn({opSnippet:B5e}),j5e={kernelName:Ym,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5e=ea+"return log(x + sqrt(x * x + 1.0));",U5e=kn({opSnippet:W5e}),H5e={kernelName:Zm,backendName:"webgl",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e=ea+`
  return atan(x);
`,q5e=kn({opSnippet:G5e}),K5e={kernelName:Qm,backendName:"webgl",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e=m7+`
  return atan(a, b);
`,Y5e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xd+`
  return result;
`,Z5e=zs({opSnippet:X5e,packedOpSnippet:Y5e}),Q5e={kernelName:eg,backendName:"webgl",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e=ea+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,eCe=kn({opSnippet:J5e}),tCe={kernelName:Jm,backendName:"webgl",kernelFunc:eCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sm{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg",w=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,k=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const j=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${m}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${j} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?o?w:k:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let T=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(T="avgValue / max(count, 1.0)");const E=Math.floor(i/4)*4,F=i%4,V=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${m}, ${g});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${E}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${V}
          }

          int xC = xCCorner + ${E};
          if (${F===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${V}
          } else if (${F===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${V}
          } else if (${F===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${V}
          }
        }
        setOutput(${T});
      }
    `}}class y7{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,p=e.dilationWidth,m=e.effectiveFilterDepth,g=e.effectiveFilterHeight,x=e.effectiveFilterWidth,w=e.padInfo.front,k=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const $=n==="avg";let T="0.0";if($||(T="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${w}, ${k}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let F=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(F="avgValue / max(count, 1.0)");const V=Math.floor(i/4)*4,j=i%4,W=`
      if (${$}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${w}, ${k}, ${S});
      const float initializationValue = ${T};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${T});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${V}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${W}
            }

            int xC = xCCorner + ${V};
            if (${j===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${W}
            } else if (${j===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${W}
            } else if (${j===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${W}
            }
          }
        }
        setOutput(${F});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;a1(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;oe(Js(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Qi(s.shape,o,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Mn(u.inShape,u.outShape))return Xo({inputs:{x:s},backend:n});const h=new Sm(u,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const rCe={kernelName:x2,backendName:"webgl",kernelFunc:nCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],h=fc(s.shape,o,i,u,a,l,c),p=new y7(h,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}const oCe={kernelName:v2,backendName:"webgl",kernelFunc:sCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class aCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=h-1-e.padInfo.front,x=p-1-e.padInfo.top,w=m-1-e.padInfo.left,k=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${x}, ${w});
      const float avgMultiplier = float(${k});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],p=fc(i.shape,a,l,h,c,u),m=new aCe(p);return n.runWebGLProgram(m,[s],i.dtype)}const cCe={kernelName:GC,backendName:"webgl",kernelFunc:lCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;a1([s,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Qi(i.shape,a,l,1,c),h=new iCe(u);return n.runWebGLProgram(h,[s],i.dtype)}const dCe={kernelName:HC,backendName:"webgl",kernelFunc:uCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;return Ex({a:s,b:o,transposeA:i,transposeB:a,backend:n})}const fCe={kernelName:w2,backendName:"webgl",kernelFunc:hCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pCe{constructor(e,n,r,s,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Yt(e,n),Yt(e,r);let a="0.0";s!=null&&(Yt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(Yt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mCe{constructor(e,n,r,s,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Yt(e,n),Yt(e,r);let a="vec4(0.0)";s!=null&&(Yt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(Yt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:o,offset:i,scale:a}=t;oe(s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),oe(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),oe(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,o];let u=null;i!=null&&(u=i.shape,c.push(i));let h=null;a!=null&&(h=a.shape,c.push(a));const p=Oe().getBool("WEBGL_PACK_NORMALIZATION")?new mCe(r.shape,s.shape,o.shape,u,h,l):new pCe(r.shape,s.shape,o.shape,u,h,l);return e.runWebGLProgram(p,c,c[0].dtype)},yCe={kernelName:P2,backendName:"webgl",kernelFunc:gCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Hn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=xCe(this.rank);let s;const o=e.map((i,a)=>`sourceLoc.${Wk[a]} = start[${a}] + coords.${Wk[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const Wk=["x","y","z","w","u","v"];function xCe(t){if(t===1)return"sourceLoc";if(t<=6)return Wk.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vCe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Hn(this.rank),r=mo("coords",this.rank),s=mo("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${o})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,h)=>`start[${h}]`).join()});`:e.map((u,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(t,e,n,r){const s=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),i=r.texData.get(o.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=d6(e,Pt(t.shape));s.slice&&(a+=s.slice.flatOffset),i.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),o}function dp(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r,[a,l]=Tv(s,o,i);if(l6(s,a,l),Ve(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=n.texData.get(s.dataId),p=fke(h.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,p)}const{isPacked:c}=n.texData.get(s.dataId),u=u6(s.shape,a,l);if(c||!u){const h=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vCe(l):new bCe(l),p=[a];return n.runWebGLProgram(h,[s],s.dtype,p)}return n.uploadToGPU(s.dataId),wCe(s,a,l,n)}const kCe={kernelName:lv,backendName:"webgl",kernelFunc:dp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;oe(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((S,$)=>S*$),l=Kg(s.shape,o,a),c=Xg(l.length,o.length),u=Yg(s.shape,o,a),h=g6(i,o.length),p=y6(u,i,o.length),m=[],g=ht({inputs:{x:s},backend:n,attrs:{shape:l}}),x=xo({inputs:{x:g},backend:n,attrs:{perm:c}}),w=ht({inputs:{x},backend:n,attrs:{shape:u}}),k=dp({inputs:{x:w},backend:n,attrs:{begin:h,size:p}});return m.push(g),m.push(x),m.push(w),m.forEach(S=>n.disposeIntermediateTensorInfo(S)),k},SCe={kernelName:k2,backendName:"webgl",kernelFunc:CCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.readSync(s.dataId),l=n.readSync(o.dataId),c=qB(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}const ICe={kernelName:qC,backendName:"webgl",kernelFunc:TCe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,NCe=`
  return float(int(a.r) & int(b.r));
`;function ECe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||i===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,h]=z3e(r.shape,s.shape,l,c,r.dtype),p=n.makeTensorInfo(h,r.dtype),m=n.texData.get(p.dataId);return m.values=u,p}let a;return o?a=new cp($Ce,r.shape,s.shape,!1):a=new zd(NCe,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const RCe={kernelName:KC,backendName:"webgl",kernelFunc:ECe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.readSync(r.dataId),i=n.readSync(s.dataId),a=Yt(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const DCe={kernelName:eO,backendName:"webgl",kernelFunc:ACe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe="return float(a != b);",aV=zs({opSnippet:PCe,cpuKernelImpl:ske,dtype:"bool"}),MCe={kernelName:Y2,backendName:"webgl",kernelFunc:aV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Xo({inputs:{x:s.complexTensorInfos.real},backend:n})}const OCe={kernelName:xS,backendName:"webgl",kernelFunc:c1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FCe="return float(int(x));";function zCe(t,e){const n=new Ya(t.shape,FCe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uk(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Xo({inputs:{x:s},backend:n});const i=ws(s.shape),a=Uk({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Su({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const i=c1({inputs:{input:s},backend:n}),a=Uk({inputs:{x:i},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(i),a}if(!XM(s.dtype,o)){const i=Xo({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:o}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[a,l,c]=L3e(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,l,c)}if(o==="int32")return zCe(s,n);if(o==="bool"){const i=n.makeTensorInfo([],"bool",Ys("bool",1)),l=aV({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}const LCe={kernelName:tg,backendName:"webgl",kernelFunc:Uk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UE="return ceil(x);",_Ce=kn({opSnippet:UE,packedOpSnippet:UE,cpuKernelImpl:_3e}),BCe={kernelName:ng,backendName:"webgl",kernelFunc:_Ce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VCe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:o,clipValueMax:i}=r;let a;Oe().getBool("WEBGL_PACK_CLIP")?a=new jCe(s.shape):a=new VCe(s.shape);const l=[[o],[i]];return n.runWebGLProgram(a,[s],s.dtype,l)}const UCe={kernelName:rg,backendName:"webgl",kernelFunc:WCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HCe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HE(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function GCe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),o=new HCe(r.shape),i=[HE(r,s.complexTensorInfos.real),HE(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}const qCe={kernelName:C2,backendName:"webgl",kernelFunc:GCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KCe{constructor(e){this.outputShape=[],this.outputShape=ol(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const s=n.length,o=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XCe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ol(e,n);const r=this.outputShape,s=r.length,o=Hn(s),i=mo("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((x,w)=>`T${w}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+e[x][n];const c=a[n],u=a.slice(-2),h=a.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${u.join()}));
        }`;for(let x=1;x<l.length;x++){const w=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${Qy(a,c,w)}),
            vec2(${Qy(u,c,w)}));
        }`}const m=l.length,g=l[l.length-1];p+=`
        return getChannel(
          getT${m}(${Qy(a,c,g)}),
          vec2(${Qy(u,c,g)}));`,this.userCode=`
      float getValue(${a.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Qy(t,e,n){const r=t.indexOf(e);return t.map((o,i)=>i===r?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Xo({inputs:{x:s.complexTensorInfos.imag},backend:n})}const YCe={kernelName:dS,backendName:"webgl",kernelFunc:Hv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const m=t.map(S=>c1({inputs:{input:S},backend:n})),g=t.map(S=>Hv({inputs:{input:S},backend:n})),x=O0(m,e,n),w=O0(g,e,n),k=Su({inputs:{real:x,imag:w},backend:n});return m.forEach(S=>n.disposeIntermediateTensorInfo(S)),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),k}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const m=t.map(T=>{const F=[-1,Ve(T.shape.slice(e))];return ht({inputs:{x:T},backend:n,attrs:{shape:F}})}),g=m.map(T=>({vals:n.readSync(T.dataId),shape:T.shape})),x=ol(m.map(T=>T.shape),1),w=m[0].shape[0]===1,k=B3e(g,x,r,w),S=ol(t.map(T=>T.shape),e),$=n.makeTensorInfo(S,r,k);return m.forEach(T=>n.disposeIntermediateTensorInfo(T)),$}const o=t.filter(m=>Ve(m.shape)>0),i=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const m=i?new Ya(t[0].shape,Uc):new Kc(t[0].shape,Uc);return n.runWebGLProgram(m,t,r)}const a=Oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const m=[];for(let x=0;x<o.length;x+=a){const w=o.slice(x,x+a);m.push(O0(w,e,n))}const g=O0(m,e,n);for(const x of m)n.disposeIntermediateTensorInfo(x);return g}if(i){const m=new XCe(o.map(g=>g.shape),e);return n.runWebGLProgram(m,o,r)}const{tensors2D:l,outShape:c}=ZCe(o,e,n),u=new KCe(l.map(m=>m.shape)),h=n.runWebGLProgram(u,l,r);l.forEach(m=>n.disposeIntermediateTensorInfo(m));const p=ht({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),p}function ZCe(t,e,n){const r=ol(t.map(o=>o.shape),e);return{tensors2D:t.map(o=>ht({inputs:{x:o},attrs:{shape:[-1,Ve(o.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lV(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=an(s,e[0].shape)[0],i=e.map(c=>c.shape);f6(i,o);const a=ol(e.map(c=>c.shape),o);if(Ve(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>Ve(c.shape)>0);return l.length===1?Xo({inputs:{x:l[0]},backend:n}):O0(l,o,n)}const QCe={kernelName:S2,backendName:"webgl",kernelFunc:lV};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cV{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,x=e.inChannels%4,w=e.dataFormat==="channelsLast",k=w?1:2,S=w?2:3,$=w?3:1;let T="",E="";r&&(s?T=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?T=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:T=`
          float activation(float x) {
            ${r}
          }
        `,E="result = activation(result);");const F=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${T}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${$}];

        ivec2 xRCCorner =
            ivec2(coords[${k}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${w}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${w}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${w}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${w}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${F}
        ${E}
        setOutput(result);
      }
    `}}class JCe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uV{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=to(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<u;w++)p+=`
           vec4 xTexelC${w*2};
           int xTexelC${w*2}Ready;
           vec4 xTexelC${w*2+1};
           int xTexelC${w*2+1}Ready;
           vec4 xC${w};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let w=0;w<u;w++)p+=`
           xTexelC${w*2} = vec4(0.0);
           xTexelC${w*2}Ready = 0;
           xTexelC${w*2+1} = vec4(0.0);
           xTexelC${w*2+1}Ready = 0;
           xC${w} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let w=0;w<(h+1)/2;w++){const k=w*2;if(p+=`
           xC = xCCorner + ${k*l};
           `,a===1){if(k<u&&(i%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k}Ready == 0) {
                   xTexelC${k} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${k}.zw = vec2(0.0);
                   }
                   xTexelC${k}Ready = 1;
                 }
               `,l===1&&k>0?p+=`
                 xC${k} = vec4(xTexelC${k-2}.zw, xTexelC${k}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${k} = vec4(previous.zw, xTexelC${k}.xy);
                   } else {
                     xC${k} = vec4(0.0, 0.0, xTexelC${k}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${k}Ready == 0) {
                   xTexelC${k} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${k}.zw = vec2(0.0);
                   }
                   xTexelC${k}Ready = 1;
                 }

                 xC${k} = xTexelC${k};
                 `,k+1<u)){const S=i%2===0?zC(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                     xTexelC${k+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${k+1}.zw = vec2(0.0);
                     }
                     xTexelC${k+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${k+1} = vec4(previous.zw, xTexelC${k+1}.xy);
                     } else {
                      xC${k+1} = vec4(0.0, 0.0, xTexelC${k+1}.xy);
                     }
                     `:p+=`
                     xC${k+1} = vec4(xTexelC${k}.zw, xTexelC${k+1}.xy);
                     `):S===1?p+=`
                     xC${k+1} = xTexelC${k};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                       xTexelC${k+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${k+1}.zw = vec2(0.0);
                       }
                       xTexelC${k+1}Ready = 1;
                     }

                     xC${k+1} = xTexelC${k+1};
                     `}}else k<u&&(i%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k}Ready == 0) {
                   xTexelC${k} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${k}.zw = vec2(0.0);
                   }
                   xTexelC${k}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${k+1}Ready == 0) {
                   xTexelC${k+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${k+1}.zw = vec2(0.0);
                   }
                   xTexelC${k+1}Ready = 1;
                 }

                 xC${k} = vec4(xTexelC${k}.zw, xTexelC${k+1}.zw);
               `,k+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${k+1} = vec4(xTexelC${k+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${k}Ready == 0) {
                   xTexelC${k} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${k}.zw = vec2(0.0);
                   }
                   xTexelC${k}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                   xTexelC${k+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${k+1}.zw = vec2(0.);
                   }
                   xTexelC${k+1}Ready = 1;
                 }

                 xC${k} = vec4(
                   xTexelC${k}.xy, xTexelC${k+1}.xy);
               `,k+1<u&&(p+=`
                   xC${k+1} = vec4(xTexelC${k}.zw, xTexelC${k+1}.zw);
                 `)));k<u&&(p+=`
             wTexel = getW(r, ${k}, d1, d2);
             dotProd += xC${k}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${k}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,k+1<u&&(p+=`
               wTexel = getW(r, ${k+1}, d1, d2);
               dotProd += xC${k+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${k+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let m="",g="";r&&(s?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:o?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:m=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eSe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=to(this.outputShape.length);const{dataFormat:r}=n,s=vo(),o=r==="channelsLast",i=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rx(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function dV({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,h=l[0]*l[1]*l[2],p=n.outChannels,m=n.dataFormat==="channelsLast",g=!1,x=!1;let w;const k=[];if(o!=null){const T=Rx(o.shape,m);T!=null&&(o=ht({inputs:{x:o},backend:r,attrs:{shape:T}}),k.push(o))}if(s!=null){const T=Rx(s.shape,m);T!=null&&(s=ht({inputs:{x:s},backend:r,attrs:{shape:T}}),k.push(s))}if(!((h===1||p===1)&&u>rV)&&c.isPacked&&m&&c.texture!=null&&l[2]%2!==0&&Mn(c.shape.slice(-3),l.slice(-3))){const T=l[0]*l[1]*(l[2]+1),E={dataId:t.dataId,shape:[1,T,n.inChannels],dtype:t.dtype},F=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,oe(Nx(c.shape,E.shape),()=>`packed reshape ${c.shape} to ${E.shape} isn't free`);const V=ht({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});k.push(V);const j=Ex({a:E,b:V,backend:r,transposeA:g,transposeB:x,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i}),W=r.texData.get(j.dataId);oe(W.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=F,W.shape=n.outShape,w=Xo({inputs:{x:j},backend:r}),w.shape=n.outShape,k.push(j)}else{const T=n.outHeight*n.outWidth,E=ht({inputs:{x:t},backend:r,attrs:{shape:m?[n.batchSize,T,n.inChannels]:[n.batchSize,n.inChannels,T]}}),F=ht({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),V=Ex({a:m?E:F,b:m?F:E,transposeA:!m,transposeB:x,backend:r,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i});w=ht({inputs:{x:V},backend:r,attrs:{shape:n.outShape}}),k.push(E),k.push(F),k.push(V)}for(const T of k)r.disposeIntermediateTensorInfo(T);return w}function hV({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:p,dataFormat:m}=n,g=m==="channelsLast",x=l*c*u,w=p*h,k=[n.batchSize,x,w],S=!0,$=!1,T=[];if(o!=null){const J=Rx(o.shape,g);J!=null&&(o=ht({inputs:{x:o},backend:r,attrs:{shape:J}}),T.push(o))}if(s!=null){const J=Rx(s.shape,g);J!=null&&(s=ht({inputs:{x:s},backend:r,attrs:{shape:J}}),T.push(s))}const E=ht({inputs:{x:e},backend:r,attrs:{shape:[1,x,Ve(e.shape)/x]}});T.push(E);const F=new eSe(k,n),V=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],j=r.runWebGLProgram(F,[t],"float32",V),W=ht({inputs:{x:j},backend:r,attrs:{shape:k}});T.push(j),T.push(W);const R=s!=null,O=o!=null,U=a==="leakyrelu",K=a?Cm(a,!0):null,G=new nV(g?W.shape:E.shape,g?E.shape:W.shape,g?[n.batchSize,w,n.outChannels]:[n.batchSize,n.outChannels,w],S,$,R,K,O,U),Y=g?[W,E]:[E,W];if(s&&Y.push(s),O&&Y.push(o),U){const J=r.makeTensorInfo([],"float32",gu(i,"float32"));Y.push(J),T.push(J)}const Z=r.runWebGLProgram(G,Y,"float32"),ne=ht({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});T.push(Z);for(const J of T)r.disposeIntermediateTensorInfo(J);return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=pc(l),p=Os(s.shape,o.shape,i,c,a,u,!1,h);let m;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))m=dV({x:s,filter:o,convInfo:p,backend:n});else if(p.strideWidth<=2&&h==="channelsLast"&&Oe().getBool("WEBGL_EXP_CONV")){const x=new uV(p),w=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];m=n.runWebGLProgram(x,[s,o],"float32",w)}else if(Oe().getBool("WEBGL_CONV_IM2COL"))m=hV({x:s,filter:o,convInfo:p,backend:n});else{const x=new cV(p);m=n.runWebGLProgram(x,[s,o],"float32")}const g=ht({inputs:{x:m},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(m),g}const nSe={kernelName:T2,backendName:"webgl",kernelFunc:tSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rSe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class sSe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,u=i?2:3,h=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class oSe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class iSe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=pc(l),p=Os(s.shape,u,i,1,a,c,!1,h),m=new rSe(p);return n.runWebGLProgram(m,[s,o],"float32")}const lSe={kernelName:YC,backendName:"webgl",kernelFunc:aSe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cSe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=to(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=pc(c),p=Os(i,o.shape,a,1,l,u,!1,h);if(Oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const m=[[p.strideHeight,p.strideWidth]],g=new cSe(p);return n.runWebGLProgram(g,[s,o],"float32",m)}else{const m=new sSe(p);return n.runWebGLProgram(m,[s,o],"float32")}}const dSe={kernelName:I2,backendName:"webgl",kernelFunc:uSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r,c=yu(s.shape,o.shape,i,l,a),u=new JCe(c);return n.runWebGLProgram(u,[s,o],"float32")}const fSe={kernelName:$2,backendName:"webgl",kernelFunc:hSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:l}=r,c=yu(s.shape,l,i,1,a),u=new oSe(c);return n.runWebGLProgram(u,[s,o],"float32")}const mSe={kernelName:ZC,backendName:"webgl",kernelFunc:pSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:l}=r,c=yu(l,o.shape,a,1,i),u=new iSe(c);return n.runWebGLProgram(u,[s,o],"float32")}const ySe={kernelName:QC,backendName:"webgl",kernelFunc:gSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe=up+`
  return cos(x);
`,xSe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Xd}
  return result;
`,vSe=kn({opSnippet:bSe,packedOpSnippet:xSe}),wSe={kernelName:sg,backendName:"webgl",kernelFunc:vSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,CSe=kn({opSnippet:kSe}),SSe={kernelName:og,backendName:"webgl",kernelFunc:CSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TSe{constructor(e,n,r,s,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,c]=e,[u]=n,[h,p]=r;this.outputShape=[u,h,p,c];const m=s==="bilinear"?1:0,[g,x]=[`${a-1}.0`,`${l-1}.0`],[w,k,S]=h>1?[`${(a-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[$,T,E]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${w});
      const float width_ratio = float(${$});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${k};
        float width_scale = ${T};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${E};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new TSe(s.shape,o.shape,a,l,c);return n.runWebGLProgram(u,[s,o,i],"float32")},$Se={kernelName:eS,backendName:"webgl",kernelFunc:ISe};var Tm;(function(t){t.Prod="*",t.Sum="+"})(Tm||(Tm={}));class GE{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===Tm.Prod?"1.0":"0.0",a=r?i:`getX(${qE(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Hn(o)} coords = getOutputCoords();
        int end = ${KE(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${KE(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${qE(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function qE(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function KE(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fV(t,e,n,r,s,o){const i=e.shape.length,a=Cr([r],i);let l=e;a!=null&&(l=xo({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Br(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let h=Xo({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){const m=new GE(t,l.shape,!1,o),g=[[p]],x=h;h=n.runWebGLProgram(m,[h],h.dtype,g),n.disposeIntermediateTensorInfo(x)}if(s){const p=new GE(t,l.shape,s,o),m=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(a!=null){const p=bu(a),m=xo({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),m}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return fV(Tm.Prod,s,n,o,i,a)}const ESe={kernelName:JC,backendName:"webgl",kernelFunc:NSe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return fV(Tm.Sum,s,n,o,i,a)}const ASe={kernelName:N2,backendName:"webgl",kernelFunc:RSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(o.dataId),u=qB(l,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(o),u=F3e(l,c,i,a);return n.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const PSe={kernelName:tS,backendName:"webgl",kernelFunc:DSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MSe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r,a=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],c=i==="NHWC"?s.shape[2]:s.shape[3],u=i==="NHWC"?s.shape[3]:s.shape[1],h=l*o,p=c*o,m=u/(o*o),g=i==="NHWC"?[a,h,p,m]:[a,m,h,p],x=new MSe(g,o,i);return n.runWebGLProgram(x,[s],s.dtype)}const FSe={kernelName:nS,backendName:"webgl",kernelFunc:OSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pV{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=to(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mV{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=to(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,p=h;let m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let k=0;k<h;k++)m+=`
          vec4 xTexelC${k*2};
          int xTexelC${k*2}Ready;
          vec4 xTexelC${k*2+1};
          int xTexelC${k*2+1}Ready;
          vec4 xC${k};`;m+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let k=0;k<h;k++)m+=`
          xTexelC${k*2} = vec4(0.0);
          xTexelC${k*2}Ready = 0;
          xTexelC${k*2+1} = vec4(0.0);
          xTexelC${k*2+1}Ready = 0;
          xC${k} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let k=0;k<(p+1)/2;k++){const S=k*2;if(m+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<h&&(a%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?m+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<h)){const $=a%2===0?zC(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${$};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:m+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):$===1?m+=`
                    xC${S+1} = xTexelC${S};
                    `:m+=`
                    xCOffset = xC + ${$};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<h&&(a%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<h&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<h&&(m+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<h&&(m+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<h&&(m+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let g="",x="";r&&(s?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${w}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),oe(Js(i,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const h=Os(s.shape,o.shape,i,u,a,c,!0);let p;Oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new mV(h):p=new pV(h);const m=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(p,[s,o],"float32",m)}const LSe={kernelName:E2,backendName:"webgl",kernelFunc:zSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Se{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class BSe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,h=Os(s.shape,u,i,a,l,c,!0),p=new _Se(h);return n.runWebGLProgram(p,[s,o],"float32")}const jSe={kernelName:rS,backendName:"webgl",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,h=Os(u,o.shape,i,a,l,c,!0),p=new BSe(h);return n.runWebGLProgram(p,[s,o],"float32")}const USe={kernelName:sS,backendName:"webgl",kernelFunc:WSe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HSe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],o=Ve(r.shape),i=ht({inputs:{x:r},backend:n,attrs:{shape:[o]}}),a=new HSe(o),l=n.runWebGLProgram(a,[i],i.dtype),c=ht({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const qSe={kernelName:tO,backendName:"webgl",kernelFunc:GSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KSe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:o,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:h,left:p}=s;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${i});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r,c=Wg(s.shape,o.shape,i,a,"NHWC",l);let u;const h=new KSe(c);u=n.runWebGLProgram(h,[s,o],"float32");const p=ht({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),p}const YSe={kernelName:R2,backendName:"webgl",kernelFunc:XSe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:l}=T6(s,o.length);$6(i.length,l,o);const{path:c,steps:u}=N6(a,l),h=u.length;let p=null,m=i.length;const g=[];for(let x=0;x<h;++x){for(const w of u[x]){const{permutationIndices:k,expandDims:S}=I6(m,l[w]);let $;E6(k)?$=o[w]:($=xo({inputs:{x:o[w]},backend:n,attrs:{perm:k}}),g.push($));const T=$.shape.slice();for(let E=0;E<S.length;++E)T.splice(S[E],0,1);Mn($.shape,T)||($=ht({inputs:{x:$},backend:n,attrs:{shape:T}}),g.push($)),p===null?p=$:(p=g7({inputs:{a:$,b:p},backend:n}),g.push(p))}x<h-1&&(c[x]>=0&&(p=Uv({inputs:{x:p},backend:n,attrs:{axis:c[x]-(i.length-m),keepDims:!1}}),g.push(p)),m--)}for(const x of g)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const QSe={kernelName:oS,backendName:"webgl",kernelFunc:ZSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JSe="return (x >= 0.0) ? x : (exp(x) - 1.0);",e6e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,t6e=kn({opSnippet:JSe,packedOpSnippet:e6e}),n6e={kernelName:ag,backendName:"webgl",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6e="return (b >= 0.0) ? a : a * (b + 1.0);",s6e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,o6e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,o=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new cp(s6e,r.shape,s.shape):new zd(r6e,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],r.dtype)},i6e={kernelName:iS,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e=`
  return vec4(equal(a, b));
`,l6e="return float(a == b);",c6e=zs({opSnippet:l6e,packedOpSnippet:a6e,dtype:"bool",cpuKernelImpl:V3e}),u6e={kernelName:A2,backendName:"webgl",kernelFunc:c6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${b6};
  float a1 = ${x6};
  float a2 = ${v6};
  float a3 = ${w6};
  float a4 = ${k6};
  float a5 = ${C6};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,h6e=kn({opSnippet:d6e}),f6e={kernelName:lg,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e=up+`
  return exp(x);
`,m6e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gV=kn({opSnippet:p6e,packedOpSnippet:m6e,cpuKernelImpl:j3e,dtype:"float32"}),g6e={kernelName:cg,backendName:"webgl",kernelFunc:gV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hk(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:o}=e,i=o.shape.length,a=o.shape.slice();let l=s;return s<0&&(oe(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),ht({inputs:{x:o},backend:r,attrs:{shape:a}})}const y6e={kernelName:D2,backendName:"webgl",kernelFunc:Hk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XE="return exp(x) - 1.0;",b6e=kn({opSnippet:XE,packedOpSnippet:XE,cpuKernelImpl:W3e}),x6e={kernelName:ug,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YE{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const o=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yV(t,e,n){const r=n.texData.get(t.dataId),s=Ve(t.shape),o=t.shape[t.shape.length-1],i=s/o,a=ht({inputs:{x:t},backend:n,attrs:{shape:[i,o]}}),l=a.shape,c=new YE("real",l,e),u=new YE("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,h,"float32"),m=n.runWebGLProgram(u,h,"float32"),g=Su({inputs:{real:p,imag:m},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m);const x=ht({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(g),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6e(t){const{inputs:e,backend:n}=t,{input:r}=e;return yV(r,!1,n)}const w6e={kernelName:aS,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k6e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:o}=n;if(o=o||Xf(s),o==="string"){const i=zr(o,Ve(r));return i.fill(s),e.makeTensorInfo(r,o,i)}else{const i=new k6e(r,s),a=[[s]];return e.runWebGLProgram(i,[],o,a)}}const C6e={kernelName:lS,backendName:"webgl",kernelFunc:u1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S6e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e={kernelName:cS,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new S6e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZE="return floor(x);",I6e=kn({opSnippet:ZE,packedOpSnippet:ZE,cpuKernelImpl:U3e}),$6e={kernelName:dg,backendName:"webgl",kernelFunc:I6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,E6e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,R6e=zs({opSnippet:N6e,packedOpSnippet:E6e,dtype:"int32"}),A6e={kernelName:hg,backendName:"webgl",kernelFunc:R6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6e{constructor(e){this.variableNames=["A"];const n=vo(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P6e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=vo(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6e={kernelName:Yae,backendName:"webgl",kernelFunc:O6e};let Wh,g3=Oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function O6e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:o}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],h=[c,l,o];if(a||i){const x=Oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Wh==null||x!==g3)&&(g3=x,Wh=document.createElement("canvas").getContext("2d",{willReadFrequently:g3})),Wh.canvas.width=l,Wh.canvas.height=c,Wh.drawImage(s,0,0,l,c),s=Wh.canvas}const p=n.makeTensorInfo(u,"int32");n.texData.get(p.dataId).usage=di.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),s);const m=Oe().getBool("WEBGL_PACK")?new P6e(h):new D6e(h),g=n.runWebGLProgram(m,[p],"int32");return n.disposeData(p.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:p,activation:m,leakyreluAlpha:g}=r,x=pc(u),w=Os(s.shape,o.shape,l,h,c,p,!1,x);let k;const S=[],$=i!=null,T=a!=null,E=m==="leakyrelu",F=()=>{const j=[s,o],W=(R,O)=>{if(O==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const U=ht({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return S.push(U),U}return R};if($&&j.push(W(i,u)),T&&j.push(W(a,u)),E){const R=n.makeTensorInfo([],"float32",gu(g,"float32"));j.push(R),S.push(R)}return j};if(w.filterHeight===1&&w.filterWidth===1&&w.dilationHeight===1&&w.dilationWidth===1&&w.strideHeight===1&&w.strideWidth===1&&(w.padInfo.type==="SAME"||w.padInfo.type==="VALID"))k=dV({x:s,filter:o,convInfo:w,backend:n,bias:i,activation:m,preluActivationWeights:a,leakyreluAlpha:g});else if(w.strideWidth<=2&&x==="channelsLast"&&Oe().getBool("WEBGL_EXP_CONV")){const j=m?Cm(m,!0):null,W=new uV(w,$,j,T,E),R=[[w.padInfo.top,w.padInfo.left],[w.strideHeight,w.strideWidth],[w.dilationHeight,w.dilationWidth],[w.inHeight,w.inWidth]],O=F();k=n.runWebGLProgram(W,O,"float32",R)}else if(Oe().getBool("WEBGL_CONV_IM2COL"))k=hV({x:s,filter:o,convInfo:w,backend:n,bias:i,activation:m,preluActivationWeights:a,leakyreluAlpha:g});else{const j=m?Cm(m,!1):null,W=new cV(w,$,j,T,E),R=F();k=n.runWebGLProgram(W,R,"float32")}const V=ht({inputs:{x:k},backend:n,attrs:{shape:w.outShape}});return S.push(k),S.forEach(j=>n.disposeIntermediateTensorInfo(j)),V}const z6e={kernelName:ix,backendName:"webgl",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:p,leakyreluAlpha:m}=r,g=[];let x=u;x==null&&(x=[1,1]),oe(Js(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const w=Os(s.shape,o.shape,l,x,c,h,!0),k=Oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&w.strideWidth<=2&&w.outChannels/w.inChannels===1,S=p?Cm(p,k):null,$=[s,o],T=i!=null,E=a!=null,F=p==="leakyrelu";if(T&&$.push(i),E&&$.push(a),F){const R=n.makeTensorInfo([],"float32",gu(m,"float32"));$.push(R),g.push(R)}let V;k?V=new mV(w,T,S,E,F):V=new pV(w,T,S,E,F);const j=[[w.padInfo.top,w.padInfo.left],[w.strideHeight,w.strideWidth],[w.dilationHeight,w.dilationWidth],[w.inHeight,w.inWidth]],W=n.runWebGLProgram(V,$,"float32",j);return g.forEach(R=>n.disposeIntermediateTensorInfo(R)),W}const _6e={kernelName:vO,backendName:"webgl",kernelFunc:L6e};class B6e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const o=Hn(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=s.shape,i=o[o.length-1],a=Ve(r.shape),[l,c,u,h]=a6(r,s),p=ht({inputs:{x:s},backend:n,attrs:{shape:[c,i]}}),m=ht({inputs:{x:r},backend:n,attrs:{shape:[Ve(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const k=n.readSync(s.dataId),S=n.bufferSync(r),$=H3e(k,S,r.dtype,c,i,u,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,$.values)}const g=new B6e(i,h,[c,u],r.shape),x=n.runWebGLProgram(g,[m,p],m.dtype),w=ht({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}const j6e={kernelName:nO,backendName:"webgl",kernelFunc:V6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W6e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Hn(this.rank),s=U6e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function U6e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bV(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r,l=an(i,s.shape)[0];if(Oe().get("DEBUG")){const S=n.readSync(o.dataId),$=s.shape[l];for(let T=0;T<S.length;++T){const E=S[T];oe(E<=$-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${$-1}]`)}}const c=A6(s,o,l,a),u=Ve(o.shape),h=[],p=ht({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),m=ht({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(p),h.push(m);const g=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const S=n.bufferSync(m),$=n.bufferSync(p),T=G3e($,S,g);return h.forEach(E=>n.disposeIntermediateTensorInfo(E)),n.makeTensorInfo(c.outputShape,T.dtype,T.values)}const x=new W6e(p.shape,g),w=n.runWebGLProgram(x,[p,m],p.dtype);h.push(w);const k=ht({inputs:{x:w},backend:n,attrs:{shape:c.outputShape}});return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),k}const H6e={kernelName:M2,backendName:"webgl",kernelFunc:bV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e="return float(a > b);",q6e=`
  return vec4(greaterThan(a, b));
`,K6e=zs({opSnippet:G6e,packedOpSnippet:q6e,cpuKernelImpl:q3e,dtype:"bool"}),X6e={kernelName:O2,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e="return float(a >= b);",Z6e=`
  return vec4(greaterThanEqual(a, b));
`,Q6e=zs({opSnippet:Y6e,packedOpSnippet:Z6e,dtype:"bool",cpuKernelImpl:K3e}),J6e={kernelName:fg,backendName:"webgl",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n}=t,{input:r}=e;return yV(r,!0,n)}const t7e={kernelName:uS,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7e="return float(!isnan(x) && !isinf(x));",r7e=kn({opSnippet:n7e,dtype:"bool"}),s7e={kernelName:mg,backendName:"webgl",kernelFunc:r7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o7e="return float(isinf(x));",i7e=kn({opSnippet:o7e,dtype:"bool"}),a7e={kernelName:gg,backendName:"webgl",kernelFunc:i7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e="return float(isnan(x));",c7e=kn({opSnippet:l7e,dtype:"bool"}),u7e={kernelName:yg,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d7e="return float(a < b);",h7e=`
  return vec4(lessThan(a, b));
`,f7e=zs({opSnippet:d7e,packedOpSnippet:h7e,cpuKernelImpl:X3e,dtype:"bool"}),p7e={kernelName:z2,backendName:"webgl",kernelFunc:f7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7e="return float(a <= b);",g7e=`
  return vec4(lessThanEqual(a, b));
`,y7e=zs({opSnippet:m7e,packedOpSnippet:g7e,cpuKernelImpl:Y3e,dtype:"bool"}),b7e={kernelName:L2,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=Z3e(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const v7e={kernelName:rO,backendName:"webgl",kernelFunc:x7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7e=up+`
  return x < 0.0 ? 0./0. : log(x);
`,k7e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,C7e=kn({opSnippet:w7e,packedOpSnippet:k7e,cpuKernelImpl:Q3e}),S7e={kernelName:bg,backendName:"webgl",kernelFunc:C7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7e=up+`
  return log(1.0 + x);
`,I7e=kn({opSnippet:T7e}),$7e={kernelName:xg,backendName:"webgl",kernelFunc:I7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e="return float(a >= 1.0 && b >= 1.0);",E7e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,R7e=zs({opSnippet:N7e,packedOpSnippet:E7e,dtype:"bool"}),A7e={kernelName:_2,backendName:"webgl",kernelFunc:R7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D7e="return float(!(x >= 1.0));",P7e=kn({opSnippet:D7e}),M7e={kernelName:B2,backendName:"webgl",kernelFunc:P7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O7e="return float(a >= 1.0 || b >= 1.0);",F7e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,z7e=zs({opSnippet:O7e,packedOpSnippet:F7e,dtype:"bool"}),L7e={kernelName:V2,backendName:"webgl",kernelFunc:z7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _7e{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B7e{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=r,c=Oe().getBool("WEBGL_PACK_NORMALIZATION")?new B7e(s.shape,o,i,a,l):new _7e(s.shape,o,i,a,l);return n.runWebGLProgram(c,[s],s.dtype)},j7e={kernelName:j2,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W7e{constructor(e,n,r,s,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,h=new W7e(s.shape,a,l,c,u);return n.runWebGLProgram(h,[s,o,i],s.dtype)},H7e={kernelName:hS,backendName:"webgl",kernelFunc:U7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7e(t,e,n,r){const s=Ve(e),i=Ve(t.shape)/s,a=ht({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=Yd(a,t.dtype,"max",r),c=ht({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=s.shape.length,l=an(o,s.shape);let c=l;const u=Cr(c,a),h=u!=null,p=n.shouldExecuteOnCPU([s]);let m=s;if(h){if(p){const $=n.texData.get(m.dataId).values,T=new Array(a);for(let V=0;V<T.length;V++)T[V]=s.shape[u[V]];const E=p7($,s.shape,s.dtype,u,T);m=n.makeTensorInfo(T,s.dtype);const F=n.texData.get(m.dataId);F.values=E}else m=Wv(s,u,n);c=Br(c.length,a)}Fs("max",c,a);const[g,x]=Ts(m.shape,c);let w=g;i&&(w=Yr(g,l));let k;if(p){const $=n.texData.get(m.dataId).values,T=J3e($,Ve(x),w,s.dtype);k=n.makeTensorInfo(w,s.dtype);const E=n.texData.get(k.dataId);E.values=T}else k=G7e(m,x,w,n);return h&&n.disposeIntermediateTensorInfo(m),k}const q7e={kernelName:W2,backendName:"webgl",kernelFunc:xV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7e=m7+`
  return max(a, b);
`,X7e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xd+`
  return result;
`,Y7e=zs({opSnippet:K7e,packedOpSnippet:X7e,cpuKernelImpl:eke}),Z7e={kernelName:vg,backendName:"webgl",kernelFunc:Y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;a1(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;oe(Js(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Qi(s.shape,o,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Mn(u.inShape,u.outShape))return Xo({inputs:{x:s},backend:n});const h=new Sm(u,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const J7e={kernelName:U2,backendName:"webgl",kernelFunc:Q7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],h=fc(s.shape,o,i,u,a,c,l),p=new y7(h,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}const tTe={kernelName:H2,backendName:"webgl",kernelFunc:eTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nTe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,l=i-1-e.padInfo.left,c=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class rTe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=c-1-e.padInfo.top,m=u-1-e.padInfo.left,g=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],p=fc(i.shape,a,l,h,c,u),m=new y7(p,"max",!0),g=n.runWebGLProgram(m,[i],i.dtype),x=new rTe(p),w=n.runWebGLProgram(x,[s,g],i.dtype);return n.disposeIntermediateTensorInfo(g),w}const oTe={kernelName:pS,backendName:"webgl",kernelFunc:sTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;a1([o,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,p=Qi(a.shape,l,c,1,u,h),m=!0,g=new Sm(p,"max",m),x=n.runWebGLProgram(g,[a],a.dtype),w=new nTe(p),k=n.runWebGLProgram(w,[s,x],a.dtype);return n.disposeIntermediateTensorInfo(x),k}const aTe={kernelName:fS,backendName:"webgl",kernelFunc:iTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t,e,n,r){let s=new Sm(n,"max",!1);const o=r.runWebGLProgram(s,[t],"float32");s=new Sm(n,"max",!0,!0,e);const i=r.runWebGLProgram(s,[t],"float32");return[o,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe={kernelName:sO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;oe(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];oe(Js(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Qi(r.shape,s,o,c,i),[h,p]=lTe(r,a,u,l);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t,e,n,r){const s=Ve(e),i=Ve(t.shape)/s,a=ht({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=Yd(a,"float32","mean",r),c=ht({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe={kernelName:G2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:o}=e,i=n,a=r.shape.length,l=an(o,r.shape);let c=l;const u=Cr(c,a),h=u!=null,p=i.shouldExecuteOnCPU([r]),m=[];let g=r;if(h){if(p){const T=i.texData.get(g.dataId).values,E=new Array(a);for(let j=0;j<E.length;j++)E[j]=r.shape[u[j]];const F=p7(T,r.shape,r.dtype,u,E);g=i.makeTensorInfo(E,r.dtype);const V=i.texData.get(g.dataId);V.values=F}else g=Wv(r,u,i);m.push(g),c=Br(c.length,a)}Fs("sum",c,a);const[x,w]=Ts(g.shape,c);let k=x;s&&(k=Yr(x,l));const S=uTe(g,w,k,i);for(const $ of m)i.disposeIntermediateTensorInfo($);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=an(o,s.shape);let c=l;const u=Cr(c,a);let h=s;u!=null&&(h=xo({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Br(c.length,s.shape.length)),Fs("min",c,a);const[p,m]=Ts(h.shape,c),g=Ve(m),x=ht({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),w=Yd(x,x.dtype,"min",n);let k;if(i){const S=Yr(p,l);k=ht({inputs:{x:w},backend:n,attrs:{shape:S}})}else k=ht({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),u!=null&&n.disposeIntermediateTensorInfo(h),k}const fTe={kernelName:q2,backendName:"webgl",kernelFunc:hTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTe=m7+`
  return min(a, b);
`,mTe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xd+`
  return result;
`,gTe=zs({opSnippet:pTe,packedOpSnippet:mTe,cpuKernelImpl:tke}),yTe={kernelName:wg,backendName:"webgl",kernelFunc:gTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bTe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,h)=>u[0]+e[h]+u[1]);const s=e.length,o=Hn(s),i=n.map(u=>u[0]).join(","),a=n.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xTe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,x)=>g[0]+e[x]+g[1]);const s=e.length,o=Hn(s),i=n.map(g=>g[0]).join(","),a=n.map((g,x)=>g[0]+e[x]).join(","),l=mo("rc",s),c=mo("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let m="";if(s===1){const g=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;m=`
        ${o} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const g=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;m=`
        ${o} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${g}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${g}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${u}) {
            ${g}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vTe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:o}=n,i=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xTe(r.shape,s,o):new bTe(r.shape,s,o);return e.runWebGLProgram(i,[r],r.dtype)},wTe={kernelName:K2,backendName:"webgl",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kTe=`if (b == 0.0) return NAN;
  return mod(a, b);`,CTe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Xd+`
  return result;
`,STe=zs({opSnippet:kTe,packedOpSnippet:CTe}),TTe={kernelName:kg,backendName:"webgl",kernelFunc:STe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ITe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Te=`
if (a == b) {
  return 1.0;
};
return a / b;`,NTe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,vV=zs({opSnippet:$Te,packedOpSnippet:NTe,checkOutOfBounds:!0}),ETe={kernelName:ig,backendName:"webgl",kernelFunc:vV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QE="return a - b;",wV=zs({opSnippet:QE,packedOpSnippet:QE,supportsComplex:!0,cpuKernelImpl:kke}),RTe={kernelName:Lg,backendName:"webgl",kernelFunc:wV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kV(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=an([o],s.shape),a=xV({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Yr(a.shape,i),c=ht({inputs:{x:a},backend:n,attrs:{shape:l}}),u=wV({inputs:{a:s,b:c},backend:n}),h=gV({inputs:{x:u},backend:n}),p=Uv({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:!1}}),m=ht({inputs:{x:p},backend:n,attrs:{shape:l}}),g=vV({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const ATe={kernelName:hv,backendName:"webgl",kernelFunc:kV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r,l=a?s:kV({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new ITe(c,u,o),p=[[i]],m=n.runWebGLProgram(h,[l],"int32",p);return a||n.disposeIntermediateTensorInfo(l),m}const PTe={kernelName:oO,backendName:"webgl",kernelFunc:DTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MTe=ea+`
  return -x;
`,OTe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function FTe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const o=n.texData.get(r.dataId),[i,a]=rke(o.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let s;return Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Kc(r.shape,OTe):s=new Ya(r.shape,MTe),n.runWebGLProgram(s,[r],r.dtype)}const zTe={kernelName:X2,backendName:"webgl",kernelFunc:FTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTe=n6;function _Te(t){ui("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(o.dataId),{selectedIndices:h}=LTe(c,u,i,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const BTe={kernelName:mS,backendName:"webgl",kernelFunc:_Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe=r6;function jTe(t){ui("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),h=n.readSync(o.dataId),{selectedIndices:p,validOutputs:m}=VTe(u,h,i,a,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const WTe={kernelName:gS,backendName:"webgl",kernelFunc:jTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UTe=s6;function HTe(t){ui("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),h=n.readSync(o.dataId),p=i,m=a,g=l,x=c,{selectedIndices:w,selectedScores:k}=UTe(u,h,p,m,g,x);return[n.makeTensorInfo([w.length],"int32",new Int32Array(w)),n.makeTensorInfo([k.length],"float32",new Float32Array(k))]}const GTe={kernelName:yS,backendName:"webgl",kernelFunc:HTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qTe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:l}=r,c=Ve(s.shape),u=new qTe(c,i,a,l),h=ht({inputs:{x:s},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(u,[h],o);n.disposeIntermediateTensorInfo(h);const m=[...s.shape,i],g=ht({inputs:{x:p},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(p),g},XTe={kernelName:Q2,backendName:"webgl",kernelFunc:KTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ax(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=c1({inputs:{input:r},backend:n}),o=Ax({inputs:{x:s},backend:n}),i=Hv({inputs:{input:r},backend:n}),a=Ax({inputs:{x:i},backend:n}),l=Su({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return u1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const YTe={kernelName:mv,backendName:"webgl",kernelFunc:Ax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CV(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=c1({inputs:{input:r},backend:n}),o=CV({inputs:{x:s},backend:n}),i=Hv({inputs:{input:r},backend:n}),a=Ax({inputs:{x:i},backend:n}),l=Su({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return u1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const ZTe={kernelName:Z2,backendName:"webgl",kernelFunc:CV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Hk({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(u=>{LC(o,u.shape,"All tensors passed to stack must have matching shapes"),oe(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=Hk({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=lV({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const JTe={kernelName:J2,backendName:"webgl",kernelFunc:QTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eIe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,o=Hn(s),i=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tIe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,w)=>x[0]+e[w]+x[1]);const s=e.length,o=Hn(s),i=n.map(x=>x[0]).join(","),a=n.map((x,w)=>x[0]+e[w]).join(","),l=mo("rc",s),c=mo("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${o} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],m=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let x=0,w=s===1?2:4;x<w;x++)g+=`
        ${p[x]}
        if (${m}) {
          result[${x}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${h});
        }
      `;g+=s===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;if(Ve(s.shape)===0){const c=o.map((u,h)=>u[0]+s.shape[h]+u[1]);return u1({backend:n,attrs:{shape:c,value:i,dtype:s.dtype}})}const a=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tIe(s.shape,o,i):new eIe(s.shape,o,i),l=[[i]];return n.runWebGLProgram(a,[s],s.dtype,l)},nIe={kernelName:ev,backendName:"webgl",kernelFunc:SV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,sIe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Xd+`
  return result;
`,oIe=zs({opSnippet:rIe,packedOpSnippet:sIe}),iIe={kernelName:Sg,backendName:"webgl",kernelFunc:oIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=[],c=an(o,s.shape);let u=c;const h=Cr(u,a);let p=s;h!=null&&(p=xo({inputs:{x:s},backend:n,attrs:{perm:h}}),u=Br(u.length,a),l.push(p)),Fs("prod",u,a);let m;if(n.shouldExecuteOnCPU([p])){const g=n.texData.get(p.dataId).values,{outVals:x,outShape:w,outDtype:k}=oke(p.shape,p.dtype,g,u);m=n.makeTensorInfo(w,k,x)}else{const[g,x]=Ts(p.shape,u),w=Ve(x),k=ht({inputs:{x:p},backend:n,attrs:{shape:[-1,w]}}),S=ES(s.dtype),$=Yd(k,S,"prod",n);m=ht({inputs:{x:$},backend:n,attrs:{shape:g}}),l.push(k),l.push($)}if(i){l.push(m);const g=Yr(m.shape,c);m=ht({inputs:{x:m},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const lIe={kernelName:nv,backendName:"webgl",kernelFunc:aIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,{outputRaggedRank:a}=r,l=s.map(k=>n.readSync(k.dataId)),c=s.map(k=>k.shape),u=n.readSync(o.dataId),h=n.readSync(i.dataId),[p,m,g]=ike(l,c,u,o.shape,o.dtype,h,i.shape,a),x=p.map(k=>n.makeTensorInfo([k.length],"int32",k)),w=n.makeTensorInfo(g,o.dtype,m);return x.concat([w])}const uIe={kernelName:iO,backendName:"webgl",kernelFunc:cIe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,u]=ake(i,r.shape,r.dtype,a,s.shape,l,o.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([u.length],r.dtype,u);return[h,p]}const hIe={kernelName:aO,backendName:"webgl",kernelFunc:dIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(o.dataId),h=n.readSync(i.dataId),p=a.map(w=>n.readSync(w.dataId)),m=a.map(w=>w.shape),[g,x]=lke(c,s.shape,u,o.shape,o.dtype,h,i.shape,p,m,l);return n.makeTensorInfo(g,o.dtype,x)}const pIe={kernelName:lO,backendName:"webgl",kernelFunc:fIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:o,dtype:i}=n,a=cke(r,s,o,i);return e.makeTensorInfo([a.length],i,a)},mIe={kernelName:bS,backendName:"webgl",kernelFunc:TV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe="return 1.0 / x;",yIe=kn({opSnippet:gIe}),bIe={kernelName:Tg,backendName:"webgl",kernelFunc:yIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe=ea+`
  return (x < 0.0) ? 0.0 : x;
`,vIe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wIe=kn({opSnippet:xIe,packedOpSnippet:vIe}),kIe={kernelName:Ig,backendName:"webgl",kernelFunc:wIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe=ea+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,SIe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,TIe=kn({opSnippet:CIe,packedOpSnippet:SIe}),IIe={kernelName:$g,backendName:"webgl",kernelFunc:TIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ie{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NIe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[l,c]=a,u=Oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new NIe(s.shape,l,c,o,i):new $Ie(s.shape,l,c,o,i);return n.runWebGLProgram(u,[s],"float32")}const RIe={kernelName:ov,backendName:"webgl",kernelFunc:EIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AIe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,l=[r&&i>1?s-1:s,r&&a>1?o-1:o],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],p=1/u,m=1/h,g=Math.ceil(p)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new AIe(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const PIe={kernelName:wS,backendName:"webgl",kernelFunc:DIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MIe{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let m;o?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OIe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let m;o?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[l,c]=a,u=Oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new OIe(s.shape,l,c,o,i):new MIe(s.shape,l,c,o,i);return n.runWebGLProgram(u,[s],s.dtype)}const zIe={kernelName:sv,backendName:"webgl",kernelFunc:FIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LIe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,l=[r&&i>1?s-1:s,r&&a>1?o-1:o],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],p=1/u,m=1/h,g=Math.ceil(p)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new LIe(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const BIe={kernelName:vS,backendName:"webgl",kernelFunc:_Ie};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VIe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,o=e.map((a,l)=>s(l)).join(","),i=Hn(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jIe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=mo("rc",r),o=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Hn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${o}){
            result.g = ${c(s.slice())};
          }
          if(${i}) {
            result.b = ${u(s.slice())};
            if(${o}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return p(g)}function c(g){return g[r-1]="("+g[r-1]+" + 1)",p(g)}function u(g){return g[r-2]="("+g[r-2]+" + 1)",p(g)}function h(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",p(g)}function p(g){const x=e.map((S,$)=>m($,g)),w=x.join(","),k=x.slice(-2).join(",");return`getChannel(getX(${w}), vec2(${k}))`}function m(g,x){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${x[g]} - 1`:`${x[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r,i=s.shape.length,a=an(o,s.shape);if(i===0)return Xo({inputs:{x:s},backend:n});const l=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jIe(s.shape,a):new VIe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const UIe={kernelName:iv,backendName:"webgl",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HIe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:NS,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,l=new HIe(r.shape,o),[c,u]=m6(i,r.shape[1],r.shape[2]),h=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,KIe=kn({opSnippet:qIe}),XIe={kernelName:Ng,backendName:"webgl",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe="return inversesqrt(x);",ZIe=kn({opSnippet:YIe,cpuKernelImpl:uke}),QIe={kernelName:Eg,backendName:"webgl",kernelFunc:ZIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b7{constructor(e,n,r,s,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=Hn(o.length),u=Hn(i.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let x="";l&&(x="coords[0], coords[1]");const w=`getDefaultValue(${x})`,k=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${k};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${w}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JIe{constructor(e,n,r,s,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=Hn(o.length),u=Hn(i.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let x="";l&&(x="coords[0], coords[1]");const w=`getDefaultValue(${x})`,k=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${k};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${w}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ud(o,s,i),p=[h/c,c];if(h===0)return n.makeTensorInfo(i,s.dtype);const m=ht({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),g=ht({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let w;Oe().getBool("WEBGL_PACK")?w=new JIe(l,a,m.shape.length,g.shape.length,u,p):w=new b7(l,a,m.shape.length,g.shape.length,u,p);const k=n.runWebGLProgram(w,[g,m,x],g.dtype),S=ht({inputs:{x:k},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(x),S}const t$e={kernelName:cO,backendName:"webgl",kernelFunc:e$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n$e{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const o="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Oe().getNumber("WEBGL_VERSION")===2?o:i,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=new n$e(s.shape[0],s.shape[1],o.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,o],"int32",l)}const s$e={kernelName:dO,backendName:"webgl",kernelFunc:r$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o$e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,o;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)o="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),o=c.join()}const i=Hn(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e,i=new o$e(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,o],qo(s.dtype,o.dtype))}const a$e={kernelName:av,backendName:"webgl",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${$v};
  float scale = ${Nv};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,c$e=kn({opSnippet:l$e}),u$e={kernelName:Rg,backendName:"webgl",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e=up+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,h$e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,f$e=kn({opSnippet:d$e,packedOpSnippet:h$e,cpuKernelImpl:hke}),p$e={kernelName:Mg,backendName:"webgl",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,g$e=kn({opSnippet:m$e}),y$e={kernelName:Pg,backendName:"webgl",kernelFunc:g$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e=up+`
  return sin(x);
`,x$e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Xd}
  return result;
`,v$e=kn({opSnippet:b$e,packedOpSnippet:x$e}),w$e={kernelName:Ag,backendName:"webgl",kernelFunc:v$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,C$e=kn({opSnippet:k$e}),S$e={kernelName:Dg,backendName:"webgl",kernelFunc:C$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,I$e=kn({opSnippet:T$e}),$$e={kernelName:Og,backendName:"webgl",kernelFunc:I$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N$e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;oe(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((k,S)=>k*S),l=[[0,0]];l.push(...i);for(let k=1+o.length;k<s.shape.length;++k)l.push([0,0]);const c=[],u=SV({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=Kg(u.shape,o,a,!1),p=Xg(h.length,o.length,!1),m=Yg(u.shape,o,a,!1),g=ht({inputs:{x:u},backend:n,attrs:{shape:h}}),x=xo({inputs:{x:g},backend:n,attrs:{perm:p}}),w=ht({inputs:{x},backend:n,attrs:{shape:m}});return c.push(u),c.push(g),c.push(x),c.forEach(k=>n.disposeIntermediateTensorInfo(k)),w},E$e={kernelName:uv,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(o.dataId),u=n.readSync(i.dataId)[0],[h,p,m,g,x]=pke(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(w=>Number(w)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const A$e={kernelName:hO,backendName:"webgl",kernelFunc:R$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[c,u,h]=mke(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}const P$e={kernelName:fO,backendName:"webgl",kernelFunc:D$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,u]=XB(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const O$e={kernelName:pO,backendName:"webgl",kernelFunc:M$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,u]=XB(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const z$e={kernelName:mO,backendName:"webgl",kernelFunc:F$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:p}=Ud(o,s,a),m=!1;if(o.dtype==="string"){const k=n.bufferSync(s),S=n.bufferSync(o),$=iu(n.readSync(i.dataId)[0]),T=dke(k,S,a,p,u,c,l,h,$,m);return n.makeTensorInfo(a,T.dtype,T.values)}const g=new b7(c,l,s.shape.length,o.shape.length,h,[p,1],m),x=n.runWebGLProgram(g,[o,s,i],o.dtype),w=ht({inputs:{x},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(x),w}const _$e={kernelName:gO,backendName:"webgl",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=an(i,s.shape)[0],l=R6(s,o,a),c=s.shape.length,u=new Array(c).fill(0),h=s.shape.slice();return l.map(p=>{const m=[...h];m[a]=p;const g=dp({inputs:{x:s},backend:n,attrs:{begin:u,size:m}});return u[a]+=p,g})}const V$e={kernelName:dv,backendName:"webgl",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JE="return sqrt(x);",j$e=kn({opSnippet:JE,packedOpSnippet:JE,cpuKernelImpl:gke}),W$e={kernelName:Fg,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U$e="return x * x;",H$e=kn({opSnippet:U$e}),G$e={kernelName:kS,backendName:"webgl",kernelFunc:H$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eR="return (a - b) * (a - b);",q$e=zs({opSnippet:eR,packedOpSnippet:eR}),K$e={kernelName:zg,backendName:"webgl",kernelFunc:q$e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(s.dataId),i=uc(o),a=yke(i,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const Y$e={kernelName:CS,backendName:"webgl",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=ea+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,o=new Ya(r.shape,s);return n.runWebGLProgram(o,[r],r.dtype)}const Q$e={kernelName:jg,backendName:"webgl",kernelFunc:Z$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J$e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,o=Hn(r.length),i=Hn(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${e});
      ${o} strides = ${o}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:p}=r,{finalShapeSparse:m,finalShape:g,isIdentity:x,sliceDim0:w,isSimpleSlice:k,begin:S,end:$,strides:T}=h6(s.shape,o,i,a,l,c,u,h,p);let E;if(x)E=ht({inputs:{x:s},backend:n,attrs:{shape:g}});else if(w||k){oe(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const V=c6(S,$,T),j=dp({inputs:{x:s},backend:n,attrs:{begin:S,size:V}});E=ht({inputs:{x:j},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(j)}else if(n.shouldExecuteOnCPU([s])){const j=n.readSync(s.dataId),W=on(s.shape,s.dtype,j),R=bke(m,W,T,S);E=n.makeTensorInfo(g,s.dtype,R.values)}else{const j=new J$e(S,T,m);E=n.runWebGLProgram(j,[s],s.dtype)}const F=ht({inputs:{x:E},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(E),F}const t8e={kernelName:SS,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,p=n.readSync(u.dataId),m=n.readSync(h.dataId),[g,x]=xke(p,m,s,o,i,a,l,c);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(h.shape,"int32",x)]}const r8e={kernelName:yO,backendName:"webgl",kernelFunc:n8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],[c,u,h]=vke(a,l,s),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const o8e={kernelName:bO,backendName:"webgl",kernelFunc:s8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),a=wke(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const a8e={kernelName:xO,backendName:"webgl",kernelFunc:i8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e="return tan(x);",c8e=kn({opSnippet:l8e}),u8e={kernelName:_g,backendName:"webgl",kernelFunc:c8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,h8e=kn({opSnippet:d8e}),f8e={kernelName:Bg,backendName:"webgl",kernelFunc:h8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:o,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ud(i,o,s.shape),p=[h/c,c];if(h===0)return n.makeTensorInfo(s.shape,o.dtype);const m=ht({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),g=ht({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),x=ht({inputs:{x:s},backend:n,attrs:{shape:p}}),w=new b7(l,a,m.shape.length,g.shape.length,u,p,!1,!0),k=n.runWebGLProgram(w,[g,m,x],x.dtype),S=ht({inputs:{x:k},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),S}const m8e={kernelName:uO,backendName:"webgl",kernelFunc:p8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g8e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const s=Hn(this.rank),o=y8e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function y8e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IV(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(p=>iu(p)):l,u=on(s.shape,s.dtype,c),h=Cke(u,o);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const i=new g8e(s.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}const b8e={kernelName:Vg,backendName:"webgl",kernelFunc:IV};class x8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class v8e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function tR(t){let e=1;for(;e<t;)e*=2;return e}function w8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r,a=Oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||o>l){const R=n.readSync(s.dataId),[O,U]=Ske(R,c,s.dtype,o,i);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(U.shape,U.dtype,U.values)]}if(o===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,u1({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),p=h!==null&&h.isPacked,m=p?n.unpackTensor(s):s,x=Ve(c)/u,w=ht({inputs:{x:m},attrs:{shape:[x,u]},backend:n});p&&Ju(n,m);const k=tR(o),S=tR(u);let $=null;const T=()=>$===null?[w,w]:[w,$],E=(R,O,U)=>{const K=T(),G=new x8e(U),Z=[[u],[$===null?1:0],[Number.NEGATIVE_INFINITY],[R],[O]],ne=$;$=n.runWebGLProgram(G,K,"int32",Z),Ju(n,ne)};for(let R=1;R<k;R*=2){const O=R*2;for(let U=R;U>=1;U/=2)E(O,U,[x,S])}for(let R=S;R>k;R/=2){const O=T(),U=new v8e([x,R/2]),G=[[u],[$===null?1:0],[k]],Y=$;$=n.runWebGLProgram(U,O,"int32",G),Ju(n,Y);const Z=k/2,ne=Z*2;for(let J=Z;J>=1;J/=2)E(ne,J,$.shape)}let F=$;$=dp({inputs:{x:$},backend:n,attrs:{begin:0,size:[x,o]}}),Ju(n,F);let V=bV({inputs:{x:w,indices:$},backend:n,attrs:{axis:1,batchDims:1}});Ju(n,w);const j=c.slice(0,-1);j.push(o),F=$,$=ht({inputs:{x:$},attrs:{shape:j},backend:n}),Ju(n,F);const W=V;return V=ht({inputs:{x:V},attrs:{shape:j},backend:n}),Ju(n,W),[V,$]}const k8e={kernelName:TS,backendName:"webgl",kernelFunc:w8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C8e{constructor(e,n,r,s,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=r,[u,h,p,m]=s.shape,[g,x]=c??[h,p],w=[u,g,x,m],k=new C8e(h,p,i,a,l,w);return n.runWebGLProgram(k,[s,o],"float32")}const T8e={kernelName:IS,backendName:"webgl",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;a1(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=Tke(i,s,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const $8e={kernelName:$S,backendName:"webgl",kernelFunc:I8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s,a=i.shape.length,l=s.shape[o],c=new Array(a-1);let u=0;for(let x=0;x<a;x++)x!==o&&(c[u++]=i.shape[x]);const h=[],p=new Array(a).fill(0),m=i.shape.slice();m[o]=1;const g=new Array(l);for(let x=0;x<g.length;x++){p[o]=x;const w=dp({inputs:{x:i},backend:n,attrs:{begin:p,size:m}}),k=ht({inputs:{x:w},backend:n,attrs:{shape:c}});g[x]=k,h.push(w)}return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const E8e={kernelName:fv,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R8e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,h=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let m="";o%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r,a=s.shape.length,l=[];let c=0;const u=Cr([c],a);let h=s;u!=null&&(h=xo({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(h),c=Br(1,a)[0]);const p=lz(h.shape,c,i),m=Ve([h.shape[c]]),g=ht({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}});l.push(g);const x=ES(s.dtype),w=(T,E,F,V,j)=>{const W=T.shape[0],R=T.shape[1],O=az(R,j),U={windowSize:O,inSize:R,batchSize:W,numSegments:j},K=new R8e(U,E),G=n.compileAndRun(K,[T,F],V);if(l.push(G),G.shape[1]===j)return G;const Y=TV({backend:n,attrs:{start:0,stop:j,step:1,dtype:"float32"}}),Z=IV({inputs:{x:Y},backend:n,attrs:{reps:[R/O]}});return l.push(Y),l.push(Z),w(G,E,Z,V,j)},k=w(g,"unsortedSegmentSum",o,x,i),S=ht({inputs:{x:k},backend:n,attrs:{shape:p}});let $=S;if(u!=null){l.push(S);const T=bu(u);$=xo({inputs:{x:$},backend:n,attrs:{perm:T}})}return l.forEach(T=>n.disposeIntermediateTensorInfo(T)),$}const D8e={kernelName:pv,backendName:"webgl",kernelFunc:A8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e=[g5e,b5e,w5e,S5e,I5e,E5e,A5e,P5e,z5e,_5e,j5e,H5e,K5e,Q5e,tCe,rCe,oCe,cCe,dCe,fCe,yCe,SCe,ICe,RCe,DCe,LCe,BCe,UCe,Jke,qCe,QCe,nSe,lSe,dSe,fSe,mSe,ySe,wSe,SSe,$Se,ESe,ASe,PSe,FSe,LSe,jSe,USe,qSe,YSe,QSe,n6e,i6e,u6e,f6e,g6e,y6e,x6e,w6e,C6e,T6e,$6e,A6e,M6e,z6e,_6e,j6e,H6e,X6e,J6e,Qke,t7e,YCe,s7e,a7e,u7e,t5e,p7e,b7e,v7e,S7e,$7e,A7e,M7e,L7e,j7e,H7e,q7e,Z7e,J7e,tTe,oTe,aTe,cTe,dTe,fTe,yTe,wTe,TTe,PTe,s5e,zTe,BTe,WTe,GTe,MCe,XTe,ZTe,JTe,nIe,iIe,r5e,lIe,uIe,hIe,pIe,mIe,OCe,ETe,bIe,kIe,IIe,i5e,RIe,PIe,zIe,BIe,UIe,GIe,XIe,QIe,t$e,s$e,a$e,u$e,p$e,y$e,w$e,S$e,kCe,ATe,$$e,E$e,A$e,P$e,O$e,z$e,_$e,V$e,W$e,G$e,K$e,Y$e,Q$e,t8e,r8e,o8e,a8e,RTe,f5e,u8e,f8e,m8e,b8e,k8e,T8e,p5e,$8e,E8e,D8e,YTe];for(const t of P8e)wO(t);class M8e{constructor(){this.model=this.createModel(),this.difficulty=1,this.userHistory=[],this.questionTypes=["arithmetic","geometric","identification","formula"]}createModel(){const e=Zge({layers:[u3({units:32,activation:"relu",inputShape:[4]}),u3({units:16,activation:"relu"}),u3({units:1,activation:"sigmoid"})]});return e.compile({optimizer:"adam",loss:"binaryCrossentropy"}),e}calculateDifficulty(e){return e<.3?1:e<.6?2:3}generateQuestion(e){switch(this.questionTypes[Math.floor(Math.random()*this.questionTypes.length)]){case"arithmetic":return this.generateArithmeticQuestion(e);case"geometric":return this.generateGeometricQuestion(e);case"identification":return this.generateIdentificationQuestion(e);case"formula":return this.generateFormulaQuestion(e);default:return this.generateArithmeticQuestion(e)}}generateArithmeticQuestion(e){const n=Math.floor(Math.random()*(5*e))-2*e,r=Math.floor(Math.random()*(3*e))+1;return{question:`Dany jest ciąg arytmetyczny: (${Array.from({length:4},(o,i)=>n+i*r).join(", ")}, ...). Znajdź różnicę (r) tego ciągu.`,answer:r,type:"numeric",difficulty:e}}generateGeometricQuestion(e){const n=Math.floor(Math.random()*(3*e))+1,r=Math.floor(Math.random()*(2*e))+2;return{question:`Dany jest ciąg geometryczny: (${Array.from({length:4},(o,i)=>n*Math.pow(r,i)).join(", ")}, ...). Znajdź iloraz (q) tego ciągu.`,answer:r,type:"numeric",difficulty:e}}generateIdentificationQuestion(e){const n=Math.random()<.5,r=Math.floor(Math.random()*(3*e))+1,s=Math.floor(Math.random()*(2*e))+2;return{question:`Określ typ ciągu: (${Array.from({length:4},(i,a)=>n?r+a*s:r*Math.pow(s,a)).join(", ")}, ...)`,answer:n?"arytmetyczny":"geometryczny",type:"identification",difficulty:e}}generateFormulaQuestion(e){const n=Math.random()<.5,r=Math.floor(Math.random()*(3*e))+1,s=Math.floor(Math.random()*(2*e))+2;return{question:`Podaj wzór ogólny dla ciągu: (${Array.from({length:4},(i,a)=>n?r+a*s:r*Math.pow(s,a)).join(", ")}, ...)`,answer:n?`an = ${r} + (n-1)*${s}`:`an = ${r}*${s}^(n-1)`,type:"formula",difficulty:e}}async getNextQuestion(e){const n=this.calculateDifficulty(e);return this.generateQuestion(n)}async train(){if(this.userHistory.length<5)return;const e=this.userHistory.slice(-5),n=wb(e.map(s=>[s.difficulty,s.correct?1:0])),r=Eo(e.map(s=>s.correct?1:0));await this.model.fit(n,r,{epochs:10,verbose:0}),n.dispose(),r.dispose()}updateModel(e,n){this.userHistory.push({correct:e,difficulty:n}),this.train()}}const O8e=()=>{const[t]=D.useState(()=>new M8e),[e,n]=D.useState(null),[r,s]=D.useState(""),[o,i]=D.useState(null),[a,l]=D.useState(0),[c,u]=D.useState(0),[h,p]=D.useState(0),m=async()=>{const w=await t.getNextQuestion(h);n(w)},g=()=>{if(!e||!r)return;let w=!1;switch(e.type){case"identification":w=["geometryczny","ciąg geometryczny"].includes(r.toLowerCase())&&e.answer==="geometryczny"||["arytmetyczny","ciąg arytmetyczny"].includes(r.toLowerCase())&&e.answer==="arytmetyczny";break;case"numeric":w=Number(r)===e.answer;break;case"formula":const k=r.toLowerCase().replace(/\s+/g,""),S=e.answer.toLowerCase().replace(/\s+/g,"");w=k===S;break;default:w=Number(r)===e.answer}t.updateModel(w,e.difficulty),p(k=>{const S=w?k+.1:k-.1;return Math.max(0,Math.min(1,S))}),i({isCorrect:w,message:w?"Brawo! Poprawna odpowiedź!":`Niestety, prawidłowa odpowiedź to: ${e.answer}`}),w&&l(a+1),u(c+1)},x=async()=>{await m(),s(""),i(null)};return D.useEffect(()=>{x()},[]),z.jsx(jo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-5xl mx-auto mt-12 p-8",children:z.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6  mb-6 border border-blueBgColor",children:[z.jsx("div",{className:"bg-blueBgColor px-10 py-2 max-w-max rounded-xl mt-[-45px] mx-auto mb-6",children:z.jsxs("div",{className:" text-white text-center",children:["Wynik: ",a,"/",c]})}),z.jsx("p",{className:"text-lg text-gray-600 mb-4",children:e==null?void 0:e.question}),o&&z.jsx(jo.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-4 rounded-lg ${o.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:o.message}),z.jsx("div",{className:"mb-6",children:z.jsx("input",{type:"text",value:r,onChange:w=>s(w.target.value),className:"w-full p-3  focus:outline-none focus:ring-2 focus:ring-blueBgColor",placeholder:"Wpisz odpowiedź..."})}),z.jsx("button",{onClick:g,className:"bg-blueBgColor text-white px-6 py-2 mr-2 rounded-lg hover:opacity-90",children:"Sprawdź"}),z.jsx("button",{onClick:x,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300",children:"Następne pytanie"})]})})};function F8e(){const{lessonId:t}=KY(),e=HM(t);return e?z.jsx(UM,{lesson:e}):console.log("Lesson not found")}function z8e(){const t=e2(),[e,n]=D.useState(()=>localStorage.getItem("currentPage")||"home"),[r,s]=D.useState(null),o=a=>{n(a),localStorage.setItem("currentPage",a),t(a)},i=a=>{s(a),n("topics"),t(`topics/lesson/${a}`)};return D.useEffect(()=>{window.location.pathname.includes("/topics")&&!r&&i("introduction")},[]),z.jsxs("div",{className:"hidden lg:block mr-52 ml-52",children:[z.jsx(WZ,{currentPage:e,onNavigate:o}),z.jsxs(m$,{children:[z.jsx(Bc,{path:"/",element:z.jsx(hN,{onNavigate:o})}),z.jsx(Bc,{path:"home",element:z.jsx(hN,{onNavigate:o})}),z.jsx(Bc,{path:"topics/*",element:z.jsxs("div",{className:"flex",children:[z.jsx(iae,{onTopicSelect:i}),z.jsxs(m$,{children:[z.jsx(Bc,{path:"lesson/:lessonId",element:z.jsx(F8e,{})}),z.jsx(Bc,{path:"",element:r&&z.jsx(UM,{lesson:HM(r)})})]})]})}),z.jsx(Bc,{path:"quiz",element:z.jsx(O8e,{})}),z.jsx(Bc,{path:"help",element:z.jsx(Eae,{})})]})]})}function L8e(){return z.jsxs(DZ,{basename:"/MathPath",children:[z.jsx(Aae,{}),z.jsx(z8e,{})]})}mj.createRoot(document.getElementById("root")).render(z.jsx(D.StrictMode,{children:z.jsx(L8e,{})}));
